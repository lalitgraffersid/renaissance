(()=>{var e,t,n,r,a,o={8968:(e,t,n)=>{"use strict";n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=n(74133),a=n(97765);const __WEBPACK_DEFAULT_EXPORT__=function(e){return(0,r.useContextSelector)(a.StoryAnimationContext,e??r.identity)}},44258:(e,t,n)=>{"use strict";n.d(t,{ANIMATION_EFFECTS:()=>l,ANIMATION_PARTS:()=>s,ANIMATION_TYPES:()=>o,AXIS:()=>m,BACKGROUND_ANIMATION_EFFECTS:()=>i,BEZIER:()=>a,BG_MAX_SCALE:()=>E,BG_MIN_SCALE:()=>h,DIRECTION:()=>c,FIELD_TYPES:()=>f,ROTATION:()=>p,SCALE_DIRECTION:()=>d,SCALE_DIRECTION_MAP:()=>u,STORY_ANIMATION_STATE:()=>g});var r=n(91655);const a={linear:"linear",in:"ease-in",out:"ease-out",inOut:"ease-in-out",inQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",outQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",inOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",inCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",outCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",inQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",outQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",inOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",inQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",outQuint:"cubic-bezier(0.23, 1, 0.32, 1)",inOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",inSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",outSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",inOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",inExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",outExpo:"cubic-bezier(0.19, 1, 0.22, 1)",inOutExpo:"cubic-bezier(1, 0, 0, 1)",inCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",outCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",default:"cubic-bezier(0.4, 0.4, 0.0, 1)"},o={BLINK_ON:"blinkOn",BOUNCE:"bounce",FADE:"fade",FLIP:"flip",FLOAT_ON:"floatOn",MOVE:"move",PULSE:"pulse",SPIN:"spin",ZOOM:"zoom"},l={DROP:{value:"effect-drop",name:(0,r._x)("Drop","animation effect","web-stories")},FADE_IN:{value:"effect-fade-in",name:(0,r._x)("Fade In","animation effect","web-stories")},FLY_IN:{value:"effect-fly-in",name:(0,r._x)("Fly In","animation effect","web-stories")},PAN:{value:"effect-pan",name:(0,r._x)("Pan","animation effect","web-stories")},PULSE:{value:"effect-pulse",name:(0,r._x)("Pulse","animation effect","web-stories")},TWIRL_IN:{value:"effect-twirl-in",name:(0,r._x)("Twirl In","animation effect","web-stories")},WHOOSH_IN:{value:"effect-whoosh-in",name:(0,r._x)("Whoosh In","animation effect","web-stories")},ZOOM:{value:"effect-zoom",name:(0,r._x)("Scale","animation effect","web-stories")},ROTATE_IN:{value:"effect-rotate-in",name:(0,r._x)("Rotate In","animation effect","web-stories")}},i={ZOOM:{value:"effect-background-zoom",name:(0,r._x)("Zoom","animation effect","web-stories")},PAN:{value:"effect-background-pan",name:l.PAN.name},PAN_AND_ZOOM:{value:"effect-background-pan-and-zoom",name:(0,r._x)("Pan and Zoom","animation effect","web-stories")}},s={BLINK_ON:{value:o.BLINK_ON,name:(0,r._x)("Blink On","animation effect","web-stories")},BOUNCE:{value:o.BOUNCE,name:(0,r._x)("Bounce","animation effect","web-stories")},FADE:{value:o.FADE,name:(0,r._x)("Fade","animation effect","web-stories")},FLIP:{value:o.FLIP,name:(0,r._x)("Flip","animation effect","web-stories")},FLOAT_ON:{value:o.FLOAT_ON,name:(0,r._x)("Float On","animation effect","web-stories")},MOVE:{value:o.MOVE,name:(0,r._x)("Move","animation effect","web-stories")},PULSE:{value:o.PULSE,name:(0,r._x)("Pulse","animation effect","web-stories")},SPIN:{value:o.SPIN,name:(0,r._x)("Spin","animation effect","web-stories")},ZOOM:{value:o.ZOOM,name:(0,r._x)("Zoom","animation effect","web-stories")}},c={TOP_TO_BOTTOM:"topToBottom",RIGHT_TO_LEFT:"rightToLeft",BOTTOM_TO_TOP:"bottomToTop",LEFT_TO_RIGHT:"leftToRight"},d={DYNAMIC_PROPERTY_VALUE:"dynamicPropertyValue",SCALE_IN:"scaleIn",SCALE_OUT:"scaleOut",SCALE_OUT_TOP_RIGHT:"scaleOutTopRight",SCALE_OUT_BOTTOM_LEFT:"scaleOutBottomLeft",SCALE_IN_TOP_LEFT:"scaleInTopLeft",SCALE_IN_BOTTOM_RIGHT:"scaleInBottomRight"},u={SCALE_IN:[d.SCALE_IN_TOP_LEFT,d.SCALE_IN_BOTTOM_RIGHT],SCALE_OUT:[d.SCALE_OUT_TOP_RIGHT,d.SCALE_OUT_BOTTOM_LEFT]},p={CLOCKWISE:"clockwise",COUNTER_CLOCKWISE:"counterClockwise",PING_PONG:"pingPong"},m={X:"x",Y:"y"},f={DROPDOWN:"dropdown",HIDDEN:"hidden",ROTATION_PICKER:"rotation_picker",DIRECTION_PICKER:"direction_picker",NUMBER:"number",FLOAT:"float",TEXT:"text",CHECKBOX:"checkbox",RANGE:"RANGE"},g={RESET:"reset",PAUSED:"paused",SCRUBBING:"scrubbing",PLAYING:"playing",PLAYING_SELECTED:"playing-selected"},h=100,E=400},77175:(e,t,n)=>{"use strict";n.d(t,{FlyInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={flyInDir:a().shape(i.AnimationInputPropTypes)},c={flyInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.TOP_TO_BOTTOM,l.DIRECTION.BOTTOM_TO_TOP,l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.BOTTOM_TO_TOP},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}}},47730:(e,t,n)=>{"use strict";n.d(t,{PanEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={panDir:a().shape(i.AnimationInputPropTypes)},c={panDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.TOP_TO_BOTTOM,l.DIRECTION.BOTTOM_TO_TOP,l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.BOTTOM_TO_TOP}}},78582:(e,t,n)=>{"use strict";n.d(t,{PulseEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={scale:a().shape(i.AnimationInputPropTypes),iterations:a().shape(i.AnimationInputPropTypes)},c={scale:{label:(0,o.__)("Scale","web-stories"),tooltip:"Valid values are greater than or equal to 0",type:l.FIELD_TYPES.FLOAT,defaultValue:.5},iterations:{label:(0,o._x)("Pulses","number of pulses","web-stories"),type:l.FIELD_TYPES.NUMBER,defaultValue:1},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:1450}}},32619:(e,t,n)=>{"use strict";n.d(t,{RotateInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={rotateInDir:a().shape(i.AnimationInputPropTypes)},c={rotateInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.LEFT_TO_RIGHT}}},27609:(e,t,n)=>{"use strict";n.d(t,{WhooshInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={whooshInDir:a().shape(i.AnimationInputPropTypes)},c={whooshInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.LEFT_TO_RIGHT},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}}},4891:(e,t,n)=>{"use strict";n.d(t,{ZoomEffectInputPropTypes:()=>c,default:()=>d});var r=n(45697),a=n.n(r),o=n(91655),l=n(87602),i=n(44258),s=n(87745);const c={scaleDirection:a().shape(s.AnimationInputPropTypes)},d={scaleDirection:{label:(0,o.__)("Direction","web-stories"),tooltip:(0,l.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,o.__)("Valid values are %1$s or %2$s","web-stories"),"scaleIn","scaleOut"),type:i.FIELD_TYPES.DIRECTION_PICKER,values:[i.SCALE_DIRECTION.SCALE_IN,i.SCALE_DIRECTION.SCALE_OUT],defaultValue:i.SCALE_DIRECTION.SCALE_IN},duration:{label:(0,o.__)("Duration","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}}},22188:(e,t,n)=>{"use strict";n.d(t,{ANIMATION_EFFECTS:()=>d.ANIMATION_EFFECTS,ANIMATION_PARTS:()=>d.ANIMATION_PARTS,AnimationProps:()=>u.AnimationProps,BACKGROUND_ANIMATION_EFFECTS:()=>d.BACKGROUND_ANIMATION_EFFECTS,BG_MAX_SCALE:()=>d.BG_MAX_SCALE,BG_MIN_SCALE:()=>d.BG_MIN_SCALE,DIRECTION:()=>d.DIRECTION,FIELD_TYPES:()=>d.FIELD_TYPES,ROTATION:()=>d.ROTATION,SCALE_DIRECTION:()=>d.SCALE_DIRECTION,SCALE_DIRECTION_MAP:()=>d.SCALE_DIRECTION_MAP,STORY_ANIMATION_STATE:()=>d.STORY_ANIMATION_STATE,StoryAnimation:()=>c,getAnimationEffectDefaults:()=>u.getAnimationEffectDefaults,getAnimationEffectProps:()=>u.getAnimationEffectProps,getTotalDuration:()=>p.getTotalDuration,hasOffsets:()=>m.hasOffsets,useStoryAnimationContext:()=>s.default});var r=n(97765),a=n(79968),o=n(5954),l=n(98236),i=n(34433),s=n(8968);const c={Provider:r.default,WAAPIWrapper:a.default,AMPWrapper:o.default,AMPKeyframes:l.default,AMPAnimations:i.default};var d=n(44258),u=n(40320),p=(n(13418),n(18034)),m=n(40126);n(69332)},79871:(e,t,n)=>{"use strict";n.d(t,{BasicAnimationInputPropTypes:()=>s,basicAnimationProps:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={duration:a().shape(i.AnimationInputPropTypes),delay:a().shape(i.AnimationInputPropTypes)},c={duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:1e3},delay:{label:(0,o.__)("Delay","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:0}};l.FIELD_TYPES.HIDDEN,(0,o.__)("Animation Type","web-stories"),l.FIELD_TYPES.DROPDOWN,Object.values(l.ANIMATION_TYPES),Object.values(l.ANIMATION_EFFECTS).map((e=>e.value)),l.FIELD_TYPES.DROPDOWN,(0,o.__)("Easing Presets","web-stories"),l.FIELD_TYPES.DROPDOWN,Object.keys(l.BEZIER),Object.keys(l.BEZIER)[0],l.FIELD_TYPES.TEXT,l.FIELD_TYPES.DROPDOWN,(0,o.__)('Valid values are numerical or the word "infinity"',"web-stories"),l.FIELD_TYPES.TEXT},40320:(e,t,n)=>{"use strict";n.d(t,{AnimationPart:()=>AnimationPart,AnimationProps:()=>Y.AnimationProps,getAnimationEffectDefaults:()=>V,getAnimationEffectProps:()=>W});var r=n(67294),a=n(44258);const o=e=>{switch(e){case a.FIELD_TYPES.CHECKBOX:return!1;case a.FIELD_TYPES.NUMBER:case a.FIELD_TYPES.FLOAT:case a.FIELD_TYPES.RANGE:return 0;default:return""}};var l=n(11533),i=n(96302),s=n(5644),c=n(3200),d=n(37308),u=n(84276),p=n(54913),m=n(63898),f=n(75590),g=n(51352),h=n(93886),E=n(44130),b=n(45697),y=n.n(b),_=n(91655),v=n(87745);y().shape(v.AnimationInputPropTypes);const w={duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}};var T=n(77175),S=n(47730),C=n(78582),I=n(32619),A=n(27609),x=n(4891);y().shape(v.AnimationInputPropTypes);const k={duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:1600}};var O=n(87602);y().shape(v.AnimationInputPropTypes),y().shape(v.AnimationInputPropTypes);const N={zoomDirection:{label:(0,_.__)("Direction","web-stories"),tooltip:(0,O.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,_.__)("Valid values are %1$s or %2$s","web-stories"),"zoomIn","zoomOut"),type:a.FIELD_TYPES.DIRECTION_PICKER,values:[a.SCALE_DIRECTION.SCALE_IN,a.SCALE_DIRECTION.SCALE_OUT],defaultValue:a.SCALE_DIRECTION.SCALE_OUT},duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}},P=(y().shape(v.AnimationInputPropTypes),y().shape(v.AnimationInputPropTypes),{panDir:{label:(0,_.__)("Direction","web-stories"),type:a.FIELD_TYPES.DIRECTION_PICKER,values:[a.DIRECTION.TOP_TO_BOTTOM,a.DIRECTION.BOTTOM_TO_TOP,a.DIRECTION.LEFT_TO_RIGHT,a.DIRECTION.RIGHT_TO_LEFT],defaultValue:a.DIRECTION.BOTTOM_TO_TOP},duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}});var R=n(85805),M=n(85242),L=n(15604),D=n(75351),B=n(83072),F=n(60106),H=n(11006),U=n(76585),z=n(10638),G=n(8748),j=n(79871),Y=n(66776);function EmptyAMPTarget(e){let{children:t,...n}=e;return r.createElement("div",n,t)}function Z(){return{id:-1,generatedKeyframes:{},WAAPIAnimation:{},AMPTarget:EmptyAMPTarget,AMPAnimation:()=>null}}function AnimationPart(e,t){const n={[a.ANIMATION_TYPES.BOUNCE]:M.AnimationBounce,[a.ANIMATION_TYPES.BLINK_ON]:L.AnimationBlinkOn,[a.ANIMATION_TYPES.FADE]:D.AnimationFade,[a.ANIMATION_TYPES.FLIP]:B.AnimationFlip,[a.ANIMATION_TYPES.FLOAT_ON]:F.AnimationFloatOn,[a.ANIMATION_TYPES.MOVE]:H.AnimationMove,[a.ANIMATION_TYPES.PULSE]:U.AnimationPulse,[a.ANIMATION_TYPES.SPIN]:z.AnimationSpin,[a.ANIMATION_TYPES.ZOOM]:G.AnimationZoom,[a.ANIMATION_EFFECTS.FADE_IN.value]:i.EffectFadeIn,[a.ANIMATION_EFFECTS.FLY_IN.value]:s.EffectFlyIn,[a.ANIMATION_EFFECTS.PAN.value]:c.EffectPan,[a.ANIMATION_EFFECTS.PULSE.value]:d.EffectPulse,[a.ANIMATION_EFFECTS.TWIRL_IN.value]:u.EffectTwirlIn,[a.ANIMATION_EFFECTS.WHOOSH_IN.value]:p.EffectWhooshIn,[a.ANIMATION_EFFECTS.ZOOM.value]:m.EffectZoom,[a.ANIMATION_EFFECTS.DROP.value]:l.EffectDrop,[a.ANIMATION_EFFECTS.ROTATE_IN.value]:f.EffectRotateIn,[a.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:g.EffectBackgroundZoom,[a.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:h.EffectBackgroundPan,[a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:E.EffectBackgroundPanAndZoom}[e?.value||e]||Z;return t.easing=t.easing||a.BEZIER[t.easingPreset],t.easingPreset=void 0,n(t)}function W(e){const t={[a.ANIMATION_EFFECTS.FLY_IN.value]:T.default,[a.ANIMATION_EFFECTS.PAN.value]:S.default,[a.ANIMATION_EFFECTS.PULSE.value]:C.default,[a.ANIMATION_EFFECTS.ROTATE_IN.value]:I.default,[a.ANIMATION_EFFECTS.FADE_IN.value]:w,[a.ANIMATION_EFFECTS.WHOOSH_IN.value]:A.default,[a.ANIMATION_EFFECTS.ZOOM.value]:x.default,[a.ANIMATION_EFFECTS.DROP.value]:k,[a.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:N,[a.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:P,[a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:P};let n=Object.keys({...t[e]||{},...j.basicAnimationProps});if(e===a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value){const e="zoomDirection",t=n.indexOf(e);t>-1&&(n=[...n.slice(0,t),...n.slice(t+1),e])}return{type:e,props:(0,R.orderByKeys)({obj:{...j.basicAnimationProps,...t[e]||{}},keys:n})}}function V(e){const{props:t}=W(e);return Object.keys(t).reduce(((e,n)=>({...e,[n]:t[n].defaultValue??o(t[n].type)})),{})}},40126:(e,t,n)=>{"use strict";n.d(t,{getMediaBoundOffsets:()=>l,hasOffsets:()=>i});var r=n(1787),a=n(15985),o=n(7868);function l(e){let{element:t}=e;const n=(0,r.getBox)(t,a.PAGE_WIDTH,a.PAGE_HEIGHT),l=(0,o.default)(t.resource,n.width,n.height,t.scale,t.focalX,t.focalY);return{top:l.offsetY/l.height*100,right:(l.width-(l.offsetX+a.PAGE_WIDTH))/l.width*-1*100,left:l.offsetX/l.width*100,bottom:(l.height-(l.offsetY+a.FULLBLEED_HEIGHT))/l.height*-1*100}}function i(e){let{element:t}=e;const n=l({element:t});return r=n,a=e=>Math.abs(e)>1,Object.entries(r).reduce(((e,t)=>{let[n,r]=t;return e[n]=a(r),e}),{});var r,a}},85805:(e,t,n)=>{"use strict";function r(e){let{obj:t={},keys:n=[]}=e;return Object.keys(t).reduce(((e,r)=>(n.includes(r)||(e[r]=t[r]),e)),{})}function a(e){let{obj:t={},keys:n=[]}=e;return{...n.reduce(((e,n)=>{const r=t[n];return n in t&&(e[n]=r),e}),{}),...r({obj:t,keys:n})}}n.d(t,{orderByKeys:()=>a})},52589:(e,t,n)=>{"use strict";n.d(t,{CONTEXT_MENU_MIN_WIDTH:()=>f,default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=n(67294),a=n(45697),o=n.n(a),l=n(74133),i=n(29163),s=n(40981),c=n(66044),d=n(66394),u=n(82302),p=n(8682);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}const f=200,g=i.default.div.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-1xfj06c-0"})((e=>{let{theme:t}=e;return(0,i.css)(["background-color:",";border-radius:",";border:1px solid ",";gap:6px;display:flex;"," *:last-child{margin-bottom:0;}"],(e=>{let{isSecondary:n}=e;return n?t.colors.bg.secondary:t.colors.bg.primary}),(e=>{let{isHorizontal:n}=e;return n?t.borders.radius.medium:t.borders.radius.small}),t.colors.border.disable,(e=>{let{isHorizontal:t,isIconMenu:n}=e;return t?(0,i.css)(["height:52px;padding:7px 10px;align-items:center;"]):(0,i.css)(["flex-direction:column;width:",";padding:",";max-width:","px;",";"],n?"40px":"auto",n?"4px 3px":"8px 0",300,!n&&(0,i.css)(["min-width:","px;"],f))}))}));function h(e,t){const n=Array.from(e.querySelectorAll(s.FOCUSABLE_SELECTORS.join(", ")));return t?n:n.filter((e=>!e.matches('[role="menu"], [role="menu"] [role="menu"] *')))}g.propTypes={isIconMenu:o().bool,isHorizontal:o().bool,isSecondary:o().bool};o().node,o().func,o().bool,o().bool,o().func,o().bool,o().bool,o().bool,o().object;const __WEBPACK_DEFAULT_EXPORT__=e=>{let{children:t,disableControlledTabNavigation:n,isOpen:a,onFocus:o=c.noop,isSubMenu:i=!1,isSecondary:f=!1,parentMenuRef:E,onCloseSubMenu:b=c.noop,...y}=e;const{isRTL:_}=y,{focusedId:v,isIconMenu:w,isHorizontal:T,onDismiss:S,setFocusedId:C}=(0,p.default)((e=>{let{state:t,actions:n}=e;return{focusedId:t.focusedId,isIconMenu:t.isIconMenu,isHorizontal:t.isHorizontal,onDismiss:n.onDismiss,setFocusedId:n.setFocusedId}})),I=(0,d.default)((()=>{a&&!i&&S()})),A=(0,l.useRef)(null),x=(0,l.useCombinedRefs)(I,A),k=(0,l.useCallback)((e=>{if(o(e),A.current===e.target&&!A.current.contains(e.target)){h(A.current)?.[0]?.focus()}}),[o]),O=(0,l.useCallback)((e=>{const{key:t}=e;if("Escape"===t)return void S(e);const n=h(A.current,i);let r=n.findIndex((e=>e.id===v));-1===r&&n.length&&(C(n[0].id),r=0);const a=T?s.KEYS.LEFT:s.KEYS.UP;if([a,T?s.KEYS.RIGHT:s.KEYS.DOWN].includes(t)){let e=r+(a===t?-1:1);-1===e&&(e=n.length-1);const o=n[e%n.length];return o?.focus(),void C(o?.id||-1)}const o=T?s.KEYS.UP:_?s.KEYS.RIGHT:s.KEYS.LEFT;if(i&&o===t){E.current.querySelector('button[aria-expanded="true"]')?.focus(),b()}}),[v,S,C,_,i,T,b,E]);(0,l.useEffect)((()=>{if(a){const e=h(A.current);e.length&&(e?.[0]?.focus(),C(e?.[0]?.id))}}),[a,C]);const N=(0,l.useMemo)((()=>n?{key:[]}:{key:["tab"],shift:!0}),[n]);return(0,u.useKeyDownEffect)(A,{key:["esc","down","up","left","right"]},O,[O]),(0,u.useKeyDownEffect)(A,N,S,[N,S]),r.createElement(g,m({ref:x,"data-testid":"context-menu-list",role:"menu",isIconMenu:w,isHorizontal:T,isSecondary:f,tabIndex:A.current?.contains(document.activeElement)?-1:0,onFocus:k},y),t)}},82302:(e,t,n)=>{"use strict";n.d(t,{Shortcut:()=>Shortcut,createShortcutAriaLabel:()=>x,isPlatformMacOS:()=>C,prettifyShortcut:()=>A,useEscapeToBlurEffect:()=>v,useGlobalIsKeyPressed:()=>_,useGlobalKeyDownEffect:()=>y,useKeyDownEffect:()=>h,useKeyEffect:()=>g});var r=n(67294),a=n(42441),o=n.n(a),l=n(74133),i=n(91655),s=n(8579);const c="__WEB_STORIES_MT__",d=["submit","button","checkbox","radio","image","file","range","reset","hidden"],u=["submit","button","checkbox","radio","image","file","reset"],p=(0,l.createRef)();function m(){p.current||(p.current=document.documentElement)}function f(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const{keys:o}=(0,l.useContext)(s.default),i=(0,l.useBatchingCallback)(r,a||[]);(0,l.useEffect)((()=>{const r=void 0!==e?.current?e.current:e;if(!r)return;if(1!==r.nodeType&&9!==r.nodeType)throw new Error("only an element or a document node can be used");const a=T(o,t);if(1===a.key.length&&""===a.key[0])return;const l=w(r),s=S(r,a,i);return l.bind(a.key,s,n),()=>{l.unbind(a.key,n)}}),[i,o])}function g(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,void 0,n,r)}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,"keydown",n,r)}function E(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,"keyup",n,r)}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const[r,a]=(0,l.useState)(!1);return h(e,t,(()=>a(!0)),n),E(e,t,(()=>a(!1)),n),r}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;m(),h(p,e,t,n)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return m(),b(p,e,t)}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;h(e,{key:"esc",editable:!0},(()=>{const t=void 0!==e?.current?e.current:e,{activeElement:n}=document;t.contains(n)&&n.blur()}),t)}function w(e){return e[c]||(e[c]=new(o())(e))}function T(e,t){const n="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:r,shift:a=!1,repeat:o=!0,clickable:l=!0,editable:i=!1,dialog:s=!1,allowDefault:c=!1}=n,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}([].concat(r).map((t=>e[t]||t)).flat(),a);return{key:d,shift:a,clickable:l,repeat:o,editable:i,dialog:s,allowDefault:c}}function S(e,t,n){let{repeat:r,editable:a,clickable:o,dialog:l,allowDefault:i=!1}=t;return t=>{const{repeat:s,target:c}=t;if((r||!s)&&(a||!function(e){let{tagName:t,isContentEditable:n,type:r,readOnly:a}=e;if(!0===a)return!1;if(n||"TEXTAREA"===t)return!0;if("INPUT"===t)return!d.includes(r);return!1}(c))&&(o||!function(e){let{tagName:t,type:n}=e;if(["BUTTON","A"].includes(t))return!0;if("INPUT"===t)return u.includes(n);return!1}(c))&&(l||!function(e,t){if(1!==e.nodeType)return!1;const n=e.closest('dialog,[role="dialog"]');return n&&t!==n&&t.contains(n)}(c,e)))return n(t),i}}function C(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function I(e){const t=C();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function A(e){const t=C()?"":"+";return e.toLowerCase().replace("alt",I("alt")).replace("ctrl",I("ctrl")).replace("mod",I("mod")).replace("cmd",I("cmd")).replace("shift",I("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}function x(e){const t=C(),n=(0,i.__)("Command","web-stories"),r=(0,i.__)("Control","web-stories"),a=(0,i.__)("Option","web-stories"),o=(0,i.__)("Alt","web-stories"),l={alt:t?a:o,mod:t?n:r,
/* translators: Control key on the keyboard */
ctrl:(0,i.__)("Control","web-stories"),
/* translators: shift key on the keyboard */
shift:(0,i.__)("Shift","web-stories"),
/* translators: delete key on the keyboard */
delete:(0,i.__)("Delete","web-stories"),
/* translators: comma character ',' */
",":(0,i.__)("Comma","web-stories"),
/* translators: period character '.' */
".":(0,i.__)("Period","web-stories"),
/* translators: backtick character '`' */
"`":(0,i.__)("Backtick","web-stories")},s=t?" ":"+";
/* translators: Command key on the keyboard */return e.toLowerCase().replace("alt",l.alt).replace("ctrl",l.ctrl).replace("mod",l.mod).replace("cmd",l.cmd).replace("shift",l.shift).replace("delete",l.delete).replace(",",l[","]).replace(".",l["."]).replace("`",l["`"]).split(/[\s+]/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(s)}const Kbd=()=>r.createElement("kbd",null);function Shortcut(e){let{component:t=Kbd,shortcut:n=""}=e;const a=n.split(" ");return r.createElement(t,{"aria-label":x(n)},a.map(((e,n)=>r.createElement(t,{key:`${n}-${e}`},A(e)))))}},99566:(e,t,n)=>{"use strict";n.d(t,{Z_INDEX:()=>a});var r=n(91655);(0,r.__)("Search","web-stories"),(0,r.__)("Clear Search","web-stories"),(0,r.__)("Search","web-stories");const a={CLEAR_BUTTON:5}},19722:(e,t,n)=>{"use strict";n.d(t,{FOCUS_VISIBLE_DATA_ATTRIBUTE:()=>o,FOCUS_VISIBLE_SELECTOR:()=>a,overrideFocusOutlineStyles:()=>l});var r=n(29163);n.e(8624).then(n.t.bind(n,35202,23)).catch((()=>{}));const a="focus-visible",o="data-focus-visible-added",l=(0,r.css)([".js-focus-visible:focus:not(.","):not([data-focus-visible-added]),.js-focus-visible:focus-visible:not(.","):not([data-focus-visible-added]){outline:none;}"],a,a);(0,r.createGlobalStyle)(["",";"],l)},72676:(e,t,n)=>{"use strict";function r(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{})}n.d(t,{default:()=>r})},98663:(e,t,n)=>{"use strict";n.d(t,{TRACKING_EVENTS:()=>r});const r={PAGE_NAVIGATION:{category:"page",label:"arrow_navigate"},PAGE_PREVIEW_CLICK:{category:"page",label:"carousel_navigate"},PAGE_ADD:{category:"page",label:"add_new"},PAGE_DELETE:{category:"page",label:"delete"},SELECT_ELEMENT:{category:"select_element"},LIBRARY_PANEL_CLICK:{category:"library_panel"},DESIGN_PANEL_CLICK:{category:"design_panel"},INSERT_ELEMENT:{category:"insert_element"},DELETE_ELEMENT:{category:"delete_element"},SET_BACKGROUND_MEDIA:{category:"background",label:"set_media_as_bg"}}},49785:(e,t,n)=>{"use strict";n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=n(74133),a=n(24359);const o={},l=["click","pointerdown","pointerup"],i="event";let s;const __WEBPACK_DEFAULT_EXPORT__=function(e){let{node:t,eventData:n,eventType:c="click"}=e;const d="undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes(i);!s&&d&&(s=new PerformanceObserver((e=>{for(const t of e.getEntries())l.includes(t.name)&&o[t.startTime]?.category&&!o[t.startTime]?.isReported&&(o[t.startTime].isReported=!0,(0,a.trackTiming)(o[t.startTime].category,t.duration,o[t.startTime].label,t.name))})),s.observe({entryTypes:[i]}));const{label:u,category:p}=n;(0,r.useEffect)((()=>{if(!t||!d)return;const e=t,n=e=>{o[e.timeStamp]={category:p,time:e.timeStamp},u&&(o[e.timeStamp].label=u)};return e.addEventListener(c,n),()=>{e.removeEventListener(c,n)}}),[p,u,t,c,d])}},88766:(e,t,n)=>{"use strict";n.d(t,{LayerText:()=>y.LayerText,SHARED_DEFAULT_ATTRIBUTES:()=>r.SHARED_DEFAULT_ATTRIBUTES,elementFillContent:()=>s,elementWithBackgroundColor:()=>g,elementWithBorder:()=>f,elementWithBorderRadius:()=>p,elementWithFlip:()=>b,elementWithFont:()=>h,elementWithHighlightBorderRadius:()=>m,elementWithPosition:()=>c,elementWithRotation:()=>u,elementWithSize:()=>d,elementWithTextParagraphStyle:()=>E,useColorTransformHandler:()=>_.default});var r=n(56527),a=n(29163),o=n(18535),l=n(4066),i=n(95740);const s=(0,a.css)(["position:absolute;top:0;left:0;width:100%;height:100%;"]),c=(0,a.css)(["position:absolute;z-index:1;left:",";top:",";"],(e=>{let{x:t}=e;return`${t}px`}),(e=>{let{y:t}=e;return`${t}px`})),d=(0,a.css)(["width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),u=(0,a.css)(["transform:",";"],(e=>{let{rotationAngle:t}=e;return`rotate(${t}deg)`})),p=(0,a.css)(["",""],(e=>(0,l.getBorderRadius)(e))),m=e=>{let{borderRadius:t,dataToEditorY:n}=e;return n&&(0,a.css)(["border-radius:","px ","px ","px ","px;"],n(t?.topLeft||0),n(t?.topRight||0),n(t?.bottomRight||0),n(t?.bottomLeft||0))},f=(0,a.css)([""," background-clip:padding-box;"],(e=>{let{border:t,borderRadius:n,width:r,height:a,mask:o}=e;return(0,l.getBorderStyle)({border:t,borderRadius:n,width:r,height:a,mask:o})})),g=(0,a.css)(["",";"],(e=>{let{backgroundColor:t}=e;return t&&(0,o.default)(t)})),h=(0,a.css)(["white-space:pre-wrap;font-family:",";overflow-wrap:break-word;word-break:break-word;letter-spacing:normal;font-style:",";font-size:","px;font-weight:",";color:#000000;"],(e=>{let{font:t}=e;return(0,i.generateFontFamily)(t)}),(e=>{let{fontStyle:t}=e;return t}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t})),E=(0,a.css)(["margin:",";padding:",";line-height:",";text-align:",";overflow-wrap:break-word;"],(e=>{let{margin:t}=e;return t}),(e=>{let{padding:t}=e;return t||0}),(e=>{let{lineHeight:t}=e;return t}),(e=>{let{textAlign:t}=e;return t})),b=(0,a.css)(["transform:",";"],(e=>{let{transformFlip:t}=e;return t}));var y=n(81493),_=n(66027)},25205:(e,t,n)=>{"use strict";n.d(t,{BackgroundAudioPropType:()=>C,DEFAULT_PAGE_BACKGROUND_COLOR:()=>u,ELEMENT_TYPES:()=>r,MEDIA_ELEMENT_TYPES:()=>a,StoryPropTypes:()=>S,TEXT_ELEMENT_DEFAULT_FONT:()=>l,createNewElement:()=>d,createPage:()=>p,duplicateElement:()=>f,duplicatePage:()=>g,elementTypes:()=>E.elementTypes,getDefinitionForType:()=>i.default,isElementBelowLimit:()=>h.default,registerElementType:()=>E.registerElementType});const r={IMAGE:"image",SHAPE:"shape",TEXT:"text",VIDEO:"video",GIF:"gif",STICKER:"sticker"},a=[r.IMAGE,r.VIDEO,r.GIF],o="((MULTIPLE))",l={family:"Roboto",weights:[100,300,400,500,700,900],styles:["italic","regular"],variants:[[0,100],[1,100],[0,300],[1,300],[0,400],[1,400],[0,500],[1,500],[0,700],[1,700],[0,900],[1,900]],fallbacks:["Helvetica Neue","Helvetica","sans-serif"],service:"fonts.google.com",metrics:{upm:2048,asc:1900,des:-500,tAsc:1536,tDes:-512,tLGap:102,wAsc:1946,wDes:512,xH:1082,capH:1456,yMin:-555,yMax:2163,hAsc:1900,hDes:-500,lGap:0}};var i=n(77839),s=n(44586),c=n(72676);const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,i.default)(e);if(!n)throw new Error(`Unknown element type: ${e}`);const{defaultAttributes:r}=n,a={...r,...t,type:e,id:(0,s.default)()};return t.isDefaultBackground?(0,c.default)(a,["backgroundColor"]):a};const u=(0,n(80852).default)(255,255,255),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t={x:1,y:1,width:1,height:1,mask:{type:"rectangle"},isBackground:!0,isDefaultBackground:!0},n=d("shape",t),r={elements:[n],backgroundColor:u,...e};return d("page",r)};var m=n(15985);const f=function(e){let{element:t,animations:n=[],existingElements:r=[]}=e;const{type:a,...o}=t,l={...t,...d(a,o)};l.basedOn=t.id,r.forEach((e=>{if(e.id===l.basedOn||e.basedOn===l.basedOn){const e=function(e,t){const n=e+30,r=t+30;return{x:m.PAGE_WIDTH-n>20?n:30,y:m.PAGE_HEIGHT-r>20?r:30}}(l.x,l.y);l.x=e.x,l.y=e.y}}));const i=n.filter((e=>e.targets.includes(t.id))).map((e=>({...e,targets:[l.id],id:(0,s.default)()}))).filter((e=>e.targets.length>0));return{element:l,elementAnimations:i}},g=e=>{const{elements:t,animations:n,postId:r,title:a,...o}=e,l=(0,c.default)(o,["postId","title"]),{elements:i,animations:s}=t.reduce(((e,t)=>{let{elements:r,animations:a}=e;const{element:o,elementAnimations:l}=f({element:t,animations:n});return{elements:[...r,o],animations:[...a,...l]}}),{elements:[],animations:[]}),u={elements:i,animations:s,...l};return d("page",u)};var h=n(58474),E=n(55993),b=n(45697),y=n.n(b),_=n(15662),v=n(9675),w=n(22188),T=n(40981);const S={},C=y().shape({id:y().number,src:y().string,length:y().number,lengthFormatted:y().string,mimeType:y().string});S.mask=y().shape({type:y().string.isRequired}),S.link=y().shape({url:y().string.isRequired,desc:y().string,needsProxy:y().bool,icon:y().string,rel:y().arrayOf(y().string)}),S.box=y().exact({x:y().number.isRequired,y:y().number.isRequired,width:y().number.isRequired,height:y().number.isRequired,rotationAngle:y().number.isRequired}),S.page=y().shape({id:y().string.isRequired,animations:y().arrayOf(y().shape(w.AnimationProps)),elements:y().arrayOf(y().shape(S.element)),overlay:y().oneOf(Object.values(T.OverlayType)),backgroundAudio:y().shape({resource:C,loop:y().bool,tracks:y().arrayOf(v.ResourcePropTypes.trackResource)})});const I={id:y().string.isRequired,type:y().string.isRequired};S.flip=y().shape({vertical:y().bool,horizontal:y().bool});const A={id:y().string.isRequired,type:y().string.isRequired,x:y().number.isRequired,y:y().number.isRequired,width:y().number.isRequired,height:y().number.isRequired,flip:S.flip,rotationAngle:y().number.isRequired,mask:S.mask,link:S.link,opacity:y().number,lockAspectRatio:y().bool,isBackground:y().bool},x={scale:y().number.isRequired,focalX:y().number,focalY:y().number};S.element=y().shape(A),S.layer=y().shape(I),S.elements={},S.elements.image=y().shape({...A,...x,resource:v.ResourcePropTypes.imageResource}),S.elements.video=y().shape({...A,...x,resource:v.ResourcePropTypes.videoResource,poster:y().string,tracks:y().arrayOf(v.ResourcePropTypes.trackResource),loop:y().bool}),S.elements.gif=y().shape({...A,...x,resource:v.ResourcePropTypes.gifResource}),S.elements.media=y().oneOfType([S.elements.image,S.elements.video,S.elements.gif]);const k=y().shape({family:y().string,service:y().string,weights:y().arrayOf(y().number),styles:y().arrayOf(y().string),variants:y().arrayOf(y().array),fallbacks:y().array}),O=y().shape({horizontal:y().oneOfType([y().number,y().oneOf([o])]),vertical:y().oneOfType([y().number,y().oneOf([o])]),locked:y().oneOfType([y().bool,y().oneOf([o])])}),N={content:y().string,backgroundTextMode:y().oneOf(Object.values(T.BACKGROUND_TEXT_MODE)),backgroundColor:_.PatternPropType,font:k.isRequired,fontSize:y().number,lineHeight:y().number,padding:O,textAlign:y().string,tagName:y().oneOf(["h1","h2","h3","p","auto"])};S.textContent=y().shape({...N}),S.elements.text=y().shape({...A,...N}),S.elements.shape=y().shape({...A,backgroundColor:_.PatternPropType}),S.elements.sticker=y().shape({...A,sticker:y().shape({type:y().string.isRequired})}),S.elements.background=y().shape({...I,inner:S.element})},4066:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_MASK:()=>a.DEFAULT_MASK,DisplayWithMask:()=>WithMask,FrameWithMask:()=>T,MASKS:()=>a.MASKS,MaskTypes:()=>a.MaskTypes,OutputWithMask:()=>S.default,canMaskHaveBorder:()=>r.canMaskHaveBorder,canSupportMultiBorder:()=>r.canSupportMultiBorder,getBorderPositionCSS:()=>o.getBorderPositionCSS,getBorderRadius:()=>o.getBorderRadius,getBorderStyle:()=>o.getBorderStyle,getElementMask:()=>r.getElementMask,getMaskByType:()=>r.getMaskByType,getResponsiveBorder:()=>o.getResponsiveBorder,shouldDisplayBorder:()=>o.shouldDisplayBorder});var r=n(99371),a=n(71356),o=n(34075),l=n(67294),i=n(6114),s=(n(25205),n(37385));function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function WithMask(e){let{element:t,fill:n,previewMode:r=!1,responsiveBorder:a,...d}=e;const{dataToEditorX:u,dataToEditorY:p}=(0,i.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),m=r?"-preview":"",f=u(t.width),g=p(t.height),h=(0,o.shouldDisplayBorder)(t);return l.createElement(s.default,c({element:t,hasFill:n,getBorderWidth:()=>r?a?.left:t.border?.left,postfix:m,elementWidth:f,elementHeight:g,forceRectangularMask:h},d))}var d=n(29163),u=n(74133),p=n(49785),m=n(98663),f=n(65603);function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const h={position:"absolute",top:0,left:0,right:0,bottom:0},E=(0,d.css)(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),b=d.default.svg.withConfig({displayName:"frame__DropTargetSVG",componentId:"sc-1cagagv-0"})([""," z-index:",";"],E,(e=>{let{active:t}=e;return t?1:-1})),y=d.default.svg.withConfig({displayName:"frame__Filler",componentId:"sc-1cagagv-1"})(["",""],E),_=d.default.path.withConfig({displayName:"frame__FillerPath",componentId:"sc-1cagagv-2"})(["pointer-events:all;"]),v=d.default.path.withConfig({displayName:"frame__DropTargetPath",componentId:"sc-1cagagv-3"})(["transition:opacity 0.5s;pointer-events:visibleStroke;opacity:",";stroke:",";"],(e=>{let{active:t}=e;return t?.3:0}),(e=>{let{theme:t}=e;return t.colors.border.selection})),w=d.default.div.withConfig({displayName:"frame__Wrapper",componentId:"sc-1cagagv-4"})(["width:100%;height:100%;::before{transition:opacity 0.5s;opacity:",";display:block;content:'';position:absolute;width:calc(100% + 8px);height:calc(100% + 8px);border-radius:8px;left:-4px;top:-4px;border:1px solid ",";}"],(e=>{let{hasBackgroundOutline:t}=e;return t?1:0}),(e=>{let{theme:t}=e;return t.colors.border.selection}));function WithDropTarget(e){let{element:t,children:n,hover:a,draggingResource:o,activeDropTargetId:i,isDropSource:s,registerDropTarget:c,unregisterDropTarget:d}=e;const p=(0,u.useRef)(null),{id:m,resource:f,isBackground:h}=t,E=(0,r.getElementMask)(t);if((0,u.useEffect)((()=>(c(m,p.current),()=>{d(m)})),[m,c,d]),!E)return n;const y=a&&!o||Boolean(o)&&s(o.type)&&o!==f,_=y&&!h,T=y&&h,S={vectorEffect:"non-scaling-stroke",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",d:E?.path};return l.createElement(w,{hasBackgroundOutline:T},n,l.createElement(b,{viewBox:"0 0 1 "+1/E.ratio,width:"100%",height:"100%",preserveAspectRatio:"none",active:i===t.id},l.createElement(v,g({},S,{strokeWidth:"3",style:{opacity:_?1:0}})),l.createElement(v,g({ref:p,strokeWidth:"48"},S))))}function T(e){let{element:t,fill:n,style:o,children:i,eventHandlers:s=null,flip:c,draggingResource:d,activeDropTargetId:E,isDropSource:b,registerDropTarget:v,unregisterDropTarget:w,...T}=e;const[S,C]=(0,u.useState)(!1),{isBackground:I}=t,A=(0,u.useRef)(null);(0,p.default)({node:A.current,eventData:{...m.TRACKING_EVENTS.SELECT_ELEMENT,label:t.type},eventType:"pointerdown"});const x={draggingResource:d,activeDropTargetId:E,isDropSource:b,registerDropTarget:v,unregisterDropTarget:w},k=(0,r.getElementMask)(t),O=c?{transform:(0,f.default)(c)}:null;if(!k?.type||I&&k.type!==a.MaskTypes.RECTANGLE)return l.createElement("div",g({style:{...n?h:{},...o,...O}},T),i);const N=`mask-${k.type}-${t.id}-frame`;return l.createElement("div",g({ref:A,style:{...n?h:{},...o,...O,...I?{}:{clipPath:`url(#${N})`}}},T,s,{onPointerOver:()=>C(!0),onPointerOut:()=>C(!1)}),l.createElement("svg",{width:0,height:0},l.createElement("defs",null,l.createElement("clipPath",{id:N,transform:`scale(1 ${k.ratio})`,clipPathUnits:"objectBoundingBox"},l.createElement("path",{d:k.path})))),l.createElement(y,{viewBox:"0 0 1 "+1/k.ratio,width:"100%",height:"100%",preserveAspectRatio:"none"},l.createElement(_,{fill:"none",d:k?.path})),l.createElement(WithDropTarget,g({element:t,hover:S},x,T),i))}var S=n(12204)},34075:(e,t,n)=>{"use strict";n.d(t,{getBorderColor:()=>u,getBorderPositionCSS:()=>l,getBorderRadius:()=>d,getBorderStyle:()=>i,getResponsiveBorder:()=>p,shouldDisplayBorder:()=>o});var r=n(99371);function a(e){let{border:t}=e;if(!t)return!1;const{left:n,top:r,right:a,bottom:o,color:l}=t;return!!l&&!!(n||r||a||o)}function o(e){return a(e)&&(0,r.canMaskHaveBorder)(e)&&(0,r.canSupportMultiBorder)(e)}function l(e){let{left:t,top:n,right:r,bottom:a,width:o="100%",height:l="100%",posTop:i="0px",posLeft:s="0px"}=e;return{left:`calc(${s} - ${t}px)`,top:`calc(${i} - ${n}px)`,width:`calc(${o} + ${t+r}px)`,height:`calc(${l} + ${n+a}px)`}}function i(e){if(!a(e)||!(0,r.canSupportMultiBorder)(e))return d(e);const{border:t}=e,{color:n,left:o,top:l,right:i,bottom:s}=t,c=u({color:n});return{top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",position:"absolute",...{borderWidth:`${Math.ceil(l)}px ${Math.ceil(i)}px ${Math.ceil(s)}px ${Math.ceil(o)}px`,borderColor:c,borderStyle:"solid",...d(e)}}}function s(e,t){return e&&t?e/t*100:0}function c(e,t){if(!e)return"0%";const{topLeft:n,topRight:r,bottomRight:a,bottomLeft:o}=e;return{topLeft:s(n,t),topRight:s(r,t),bottomRight:s(a,t),bottomLeft:s(o,t)}}function d(e){const{borderRadius:t,width:n,height:a}=e;if(!t||!(0,r.canSupportMultiBorder)(e))return{};const o=c(t,n),l=c(t,a);return{borderRadius:`${o.topLeft}% ${o.topRight}% ${o.bottomRight}% ${o.bottomLeft}% / ${l.topLeft}% ${l.topRight}% ${l.bottomRight}% ${l.bottomLeft}%`}}function u(e){let{color:t}=e;const{color:{r:n,g:r,b:a,a:o}}=t;return`rgba(${n},${r},${a},${void 0===o?1:o})`}function p(e,t,n){if(!t||!e)return e;const{left:r,top:a,right:o,bottom:l}=e;return{...e,left:n(r),top:n(a),right:n(o),bottom:n(l)}}},50136:(e,t,n)=>{"use strict";n.d(t,{createBlob:()=>a,isBlobURL:()=>l,revokeBlob:()=>o});const r={};function a(e){const t=window.URL.createObjectURL(e);return r[t]=e,t}function o(e){(function(e){return r[e]})(e)&&window.URL.revokeObjectURL(e),delete r[e]}function l(e){return e?.startsWith("blob:")}},17001:(e,t,n)=>{"use strict";n.d(t,{CropMoveableGlobalStyle:()=>b,DefaultMoveableGlobalStyle:()=>_,InOverlay:()=>f,Moveable:()=>E,areEventsDragging:()=>S.default,withOverlay:()=>T});var r=n(67294),a=n(74133),o=n(29154),l=n(45697),i=n.n(l),s=n(29163);const c=(0,a.createContext)({container:null,layer:null});function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}const u=(0,s.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""})),p=s.default.div.withConfig({displayName:"overlay__Wrapper",componentId:"sc-1ibws6s-0"})([""," position:absolute;top:0;left:0;width:0;height:0;z-index:",";"],u,(e=>{let{zIndex:t}=e;return`${t}`}));const m=(0,a.forwardRef)((function InOverlayWithRef(e,t){let{zIndex:n,pointerEvents:o,render:l,children:i=null,...s}=e;const{container:u,overlay:m}=(0,a.useContext)(c);if(!u||!m)return null;const f=r.createElement(p,d({},s,{ref:t,zIndex:n||0,pointerEvents:o,onMouseDown:e=>e.stopPropagation()}),l?l({container:u,overlay:m}):i);return(0,a.createPortal)(f,m)})),f=m;function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const h=(0,a.forwardRef)((function MoveableWithRef(e,t){let{onContextMenu:n,...a}=e;return r.createElement(f,{onContextMenu:n,zIndex:10,pointerEvents:"initial",render:e=>{let{container:n}=e;return r.createElement(o.default,g({ref:t,container:n},a))}})}));h.propTypes={onContextMenu:i().func};const E=h,b=(0,s.createGlobalStyle)([".crop-moveable .moveable-control{background:"," !important;border:none !important;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s,.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{border:1px solid "," !important;border-radius:4px;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s{width:","px !important;height:","px !important;margin-left:-12px !important;}.crop-moveable .moveable-control.moveable-n{margin-top:-8px !important;}.crop-moveable .moveable-control.moveable-s{margin-top:0px !important;}.crop-moveable .moveable-control.moveable-e{margin-left:0 !important;}.crop-moveable .moveable-control.moveable-w{margin-top:0 !important;margin-left:-8px !important;}.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{width:","px !important;height:","px !important;margin-top:-12px !important;}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se,.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{left:initial !important;right:initial !important;top:initial !important;bottom:initial !important;background:"," !important;position:absolute !important;border-style:solid !important;border-color:"," !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{content:'';}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw{top:-","px !important;left:-","px !important;border-width:1px 0 0 1px !important;border-radius:2px 0 0 0 !important;}.crop-moveable .moveable-control.moveable-ne{top:-","px !important;right:-","px !important;border-width:1px 1px 0 0 !important;border-radius:0 2px 0 0 !important;}.crop-moveable .moveable-control.moveable-sw{left:-","px !important;bottom:-","px !important;border-width:0 0 1px 1px !important;border-radius:0 0 0 2px !important;}.crop-moveable .moveable-control.moveable-se{right:-","px !important;bottom:-","px !important;border-width:0 1px 1px 0 !important;border-radius:0 0 2px 0 !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{width:","px !important;height:","px !important;top:0;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-sw::before{left:","px !important;border-width:1px 1px 1px 0;border-radius:0 2px 2px 0;}.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-se::before{right:","px !important;border-width:1px 0 1px 1px;border-radius:2px 0 0 2px;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before{top:-","px !important;}.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{bottom:-","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after{top:","px !important;border-width:0 1px 1px 1px;border-radius:0 0 2px 2px;}.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{bottom:","px !important;border-width:1px 1px 0 1px;border-radius:2px 2px 0 0;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-sw::after{left:-","px !important;}.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-se::after{right:-",'px !important;}.crop-moveable .moveable-line.moveable-direction[data-line-index="0"]{margin-top:-4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="3"]{margin-top:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="1"]{margin-left:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="2"]{margin-left:-4px;}.crop-moveable .moveable-direction.moveable-line{background:'," !important;width:2px;height:2px;pointer-events:none;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),24,8,8,24,(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),7,7,1,1,1,7,1,7,7,7,17,8,6,6,1,1,8,17,6,6,1,1,(e=>{let{theme:t}=e;return t.colors.border.selection}));var y=n(37047);const _=(0,s.createGlobalStyle)([".default-moveable .moveable-control,.default-moveable .moveable-line.moveable-rotation-line .moveable-control{background:"," !important;border:1px solid "," !important;}.default-moveable.type-text .moveable-direction.moveable-n,.default-moveable.type-text .moveable-direction.moveable-s{pointer-events:none;}.default-moveable .moveable-control.moveable-n{display:none !important;}.default-moveable .moveable-line{border:0;background:transparent !important;width:1px;height:1px;}.default-moveable .moveable-horizontal{border-bottom:1px dashed "," !important;}.default-moveable .moveable-vertical{border-right:1px dashed "," !important;}.default-moveable .moveable-gap{border-color:"," !important;}.default-moveable .moveable-target{border-style:solid !important;}.default-moveable .moveable-control.moveable-s,.default-moveable .moveable-control.moveable-e,.default-moveable .moveable-control.moveable-w{border-radius:4px;}.default-moveable .moveable-control.moveable-nw,.default-moveable .moveable-control.moveable-ne,.default-moveable .moveable-control.moveable-sw,.default-moveable .moveable-control.moveable-se{border-radius:2px;width:8px;height:8px;margin-left:-4px;margin-top:-4px;}.default-moveable .moveable-control.moveable-s{height:6px !important;width:16px !important;margin-top:-3px !important;}.default-moveable .moveable-control.moveable-e{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable .moveable-control.moveable-w{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable.moveable-control-box .moveable-line.moveable-direction{background:"," !important;width:1px;height:1px;}.default-moveable.moveable-control-box .moveable-line.moveable-rotation-line{background:"," !important;width:1px;height:12px;top:28px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control{border-radius:50px;width:29px;height:29px;margin-left:-14.5px;top:10.5px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control::after{content:'';position:absolute;width:28px;height:28px;left:-1px;top:-1px;background-image:url(\"",'");background-size:100%;filter:invert(100%);}.default-moveable.hide-handles .moveable-line.moveable-rotation-line,.default-moveable.hide-handles .moveable-line.moveable-direction{display:none;}.default-moveable.visually-hide-handles .moveable-control.moveable-e,.default-moveable.visually-hide-handles .moveable-control.moveable-w,.default-moveable.visually-hide-handles .moveable-control.moveable-s,.default-moveable.visually-hide-handles .moveable-control.moveable-ne,.default-moveable.visually-hide-handles .moveable-control.moveable-nw,.default-moveable.visually-hide-handles .moveable-control.moveable-sw{opacity:0;}'],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.negativePress}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.selection}),y);function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}const w=s.default.div.withConfig({displayName:"withOverlay__Overlay",componentId:"sc-hntauo-0"})(["position:absolute;top:0;/*! @noflip */ left:0;width:0;height:0;z-index:",";"],(e=>{let{zIndex:t}=e;return t}));const T=function(e){const t=(0,a.forwardRef)((function WithOverlay(t,n){let{children:o,...l}=t;const[i,s]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),{zIndex:p=1}=l;return r.createElement(c.Provider,{value:{container:d,overlay:i}},r.createElement(e,v({ref:(0,a.useCombinedRefs)(n,u)},l),o,r.createElement(w,{ref:s,zIndex:p})))}));return t};var S=n(8580)},74133:(e,t,n)=>{"use strict";n.d(t,{Component:()=>o.Component,Fragment:()=>o.Fragment,StrictMode:()=>o.StrictMode,Suspense:()=>o.Suspense,cloneElement:()=>o.cloneElement,createContext:()=>a.createContext,createElement:()=>o.createElement,createPortal:()=>l.createPortal,createRef:()=>o.createRef,forwardRef:()=>o.forwardRef,identity:()=>a.identity,lazy:()=>o.lazy,memo:()=>o.memo,render:()=>l.render,renderToStaticMarkup:()=>f.default,shallowEqual:()=>h.default,unmountComponentAtNode:()=>l.unmountComponentAtNode,useBatchingCallback:()=>i.default,useCallback:()=>o.useCallback,useCombinedRefs:()=>s.default,useContext:()=>a.useContext,useContextReact:()=>o.useContextReact,useContextSelector:()=>c.default,useDebouncedCallback:()=>r.default,useEffect:()=>o.useEffect,useFocusOut:()=>d.default,useImperativeHandle:()=>o.useImperativeHandle,useLayoutEffect:()=>o.useLayoutEffect,useMemo:()=>o.useMemo,usePrevious:()=>u.default,useReducer:()=>o.useReducer,useReduction:()=>p,useRef:()=>o.useRef,useResizeEffect:()=>m.default,useState:()=>o.useState,useUnmount:()=>g.default});var r=n(19302),a=n(24778),o=n(66803),l=n(73935),i=n(6075),s=n(20814),c=n(76969),d=n(24114),u=n(95471);function p(e,t){const[n,r]=(0,o.useReducer)(function(e){return(t,n)=>n&&n.type&&e[n.type]?e[n.type](t,n):t}(t),e),a=(0,o.useMemo)((()=>function(e,t){return Object.keys(e).reduce(((e,n)=>(e[n]||(e[n]=e=>{t({type:n,payload:e})}),e)),{})}(t,r)),[t]);return[n,a]}var m=n(13920),f=n(86757),g=n(84067),h=(n(40083),n(14821))},66803:(e,t,n)=>{"use strict";n.d(t,{Component:()=>r.Component,Fragment:()=>r.Fragment,StrictMode:()=>r.StrictMode,Suspense:()=>r.Suspense,cloneElement:()=>r.cloneElement,createElement:()=>r.createElement,createRef:()=>r.createRef,forwardRef:()=>r.forwardRef,lazy:()=>r.lazy,memo:()=>r.memo,useCallback:()=>r.useCallback,useContextReact:()=>r.useContext,useEffect:()=>r.useEffect,useImperativeHandle:()=>r.useImperativeHandle,useLayoutEffect:()=>r.useLayoutEffect,useMemo:()=>r.useMemo,useReducer:()=>r.useReducer,useRef:()=>r.useRef,useState:()=>r.useState});var r=n(67294)},53649:(e,t,n)=>{"use strict";n.d(t,{fauxStylesToCSS:()=>i,useFauxSelection:()=>l});var r=n(74133),a=n(9041);const o="CUSTOM-FAUX";function l(e,t){const[n,l]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!e)return void l(null);const r=e.getCurrentContent(),i=e.getSelection(),s=i?.getHasFocus(),c=(u=i,!((d=n)&&u&&d.serialize().replace(/has focus: .*$/i,"")===u.serialize().replace(/has focus: .*$/i,"")));var d,u;const p=Boolean(n);if(!s&&!p){const n=a.Modifier.applyInlineStyle(r,i,o),s=a.EditorState.push(e,n,"change-inline-style");t(s),l(i)}s&&c&&p&&(t((e=>{try{const t=a.Modifier.removeInlineStyle(e.getCurrentContent(),n,o),r=a.EditorState.push(e,t,"change-inline-style");return a.EditorState.forceSelection(r,e.getSelection())}catch(t){return e}})),l(null))}),[n,e,t])}function i(e,t){if(!e.includes(o))return null;const n={backgroundColor:"rgba(169, 169, 169, 0.7)"};return t?.color&&(n.color=`var(--faux-selection-color, ${t.color})`),n}},56862:(e,t,n)=>{"use strict";n.d(t,{RichTextEditor:()=>T.default,RichTextProvider:()=>w,getCaretCharacterOffsetWithin:()=>A.default,getFontVariants:()=>I.default,getHTMLFormatters:()=>x.getHTMLFormatters,getHTMLInfo:()=>x.getHTMLInfo,usePasteTextContent:()=>C,useRichText:()=>S.default});var r=n(67294),a=n(74133),o=n(9041),l=n(34224),i=n(97643),s=n(47682),c=n(53649),d=n(21229),u=n(11810),p=n(92507);const m={BOLD:(0,n(28020).weightToStyle)("700"),ITALIC:p.ITALIC,UNDERLINE:p.UNDERLINE};const f=function(e,t,n){let r=n,a=null;return e.findStyleRanges((e=>(a=e,!0)),((e,n)=>{const l=a.getStyle().toArray(),i=function(e){return e.map((e=>e in m?m[e]:null)).filter(Boolean)}(l),s=t.merge({anchorOffset:e,focusOffset:n});l.forEach((e=>{r=o.Modifier.removeInlineStyle(r,s,e)})),i.forEach((e=>{r=o.Modifier.applyInlineStyle(r,s,e)}))})),r};class CustomBlockRenderMap{constructor(){this._map={unstyled:{element:"div",aliasedElements:["p","h1","h2","h3","blockquote","pre"]},"unordered-list-item":{element:"li"},"ordered-list-item":{element:"li"}}}mapKeys(e){return Object.keys(this._map).map((t=>e(t,this._map[t])))}}const g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=new CustomBlockRenderMap,{contentBlocks:r,entityMap:a}=(0,o.convertFromHTML)(e,void 0,n),l=o.ContentState.createFromBlockArray(r,a),i=h(l),s=o.Modifier.applyEntity(l,i,null),c=s.getBlocksAsArray();let d=s,u=null,p=0;c.forEach((e=>{const t=o.SelectionState.createEmpty(e.getKey());d=f(e,t,d);const n=e.getType();if("unstyled"!==n){let r=null;switch(n){case"unordered-list-item":r="– ";break;case"ordered-list-item":p=u===n?p+1:1,r=`${p}. `}r&&(d=o.Modifier.insertText(d,t,r));const a=t.merge({focusOffset:e.getLength()});d=o.Modifier.setBlockType(d,a,"unstyled")}u=n}));const m=h(d);return t.forEach((e=>{d=o.Modifier.applyInlineStyle(d,m,e)})),d.getBlockMap()};function h(e){const t=e.getFirstBlock(),n=e.getLastBlock();return o.SelectionState.createEmpty(t.getKey()).merge({focusKey:n.getKey(),focusOffset:n.getLength()})}var E=n(54530);const b=function(e){return(0,a.useCallback)(((t,n,r)=>{const a=r.getCurrentContent(),l=r.getSelection();let i,s;if(n){let e=(0,E.getPrefixStylesInSelection)(r,p.COLOR);e.length>1&&(e=e.slice(0,1));const t=g(n,e);i=o.Modifier.replaceWithFragment(a,l,t),s="insert-fragment"}else{const e=r.getCurrentInlineStyle();i=o.Modifier.replaceText(a,l,t,e),s="insert-characters"}const c=o.EditorState.push(r,i,s);return e(c),!0}),[e])};var y=n(33251);const _=function(e,t){const n=(0,a.useRef)(null),r=(0,a.useRef)(null);(0,a.useEffect)((()=>{n.current=e,e?e.getSelection().hasFocus&&(r.current=e.getSelection()):r.current=null}),[e]);const l=(0,a.useCallback)((function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const l=n.current,i=r.current,s=a?o.EditorState.forceSelection(l,i):l,c=e(s);t(c)}),[t]),i=(0,a.useCallback)((e=>`${e}InSelection`),[]),s=(0,a.useCallback)(((e,t)=>function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return l((t=>e(t,...r)),t)}),[l]);return(0,a.useMemo)((()=>y.default.reduce(((e,t)=>{let{setters:n,autoFocus:r}=t;return{...e,...Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[i(t),s(n,r)]})))}}),{})),[i,s])},v={isBold:!1,isItalic:!1,isUnderline:!1,isUppercase:!1};const w=function RichTextProvider(e){let{children:t,editingState:n}=e;const[p,m]=(0,a.useState)(null),f=(0,a.useRef)(null),g=(0,a.useMemo)((()=>p?(0,s.default)(p):v),[p]),h=(0,a.useCallback)((e=>{const{offset:t,clearContent:r,selectAll:a}=n||{};let l,s=o.EditorState.createWithContent((0,d.default)(e));r&&(s=o.EditorState.push(s,(0,d.default)(""),"remove-range")),a?l=(0,i.getSelectionForAll)(s.getCurrentContent()):isNaN(t)||(l=(0,i.getSelectionForOffset)(s.getCurrentContent(),t)),l&&(s=o.EditorState.forceSelection(s,l)),f.current=s.getCurrentInlineStyle(),m(s)}),[n,m]);(0,c.useFauxSelection)(p,m);const E=(0,a.useCallback)((e=>{let t=(0,i.getFilteredState)(e,p);""===t.getCurrentContent().getPlainText("")?t=o.EditorState.setInlineStyleOverride(t,f.current):f.current=t.getCurrentInlineStyle(),m(t)}),[p,m]),y=(0,a.useCallback)((()=>(0,i.getHandleKeyCommandFromState)(E)),[E]),w=b(m),T=(0,a.useCallback)((()=>{m(null)}),[m]),S=Boolean(p),C=_(p,m),I={state:{editorState:p,hasCurrentEditor:S,selectionInfo:g},actions:{setStateFromContent:h,updateEditorState:E,getHandleKeyCommand:y,handlePastedText:w,clearState:T,selectionActions:C,getContentFromState:u.default}};return r.createElement(l.default.Provider,{value:I},t)};var T=n(4517),S=n(56991);const C=function(e,t){return(0,a.useCallback)((n=>{const r=g(n).toArray(),a=o.ContentState.createFromBlockArray(r),l=o.EditorState.createWithContent(a),i=(0,u.default)(l);return!!i&&(e("text",{...t,content:i}),!0)}),[e,t])};var I=n(44397),A=n(40098),x=n(67187)},97643:(e,t,n)=>{"use strict";n.d(t,{getFilteredState:()=>c,getHandleKeyCommandFromState:()=>d,getSelectionForAll:()=>u,getSelectionForOffset:()=>p});var r=n(9041),a=n(84693),o=n(28020),l=n(28653),i=n(57778),s=n(15948);function c(e,t){return t.getCurrentContent()!==e.getCurrentContent()&&"insert-fragment"===e.getLastChangeType()?(0,a.filterEditorState)({blocks:[],styles:["BOLD","ITALIC","UNDERLINE"],entities:[],maxNesting:1,whitespacedCharacters:[]},e):e}const d=e=>(t,n)=>{const r=function(e,t){switch(e){case"bold":return o.default.setters.toggleBold(t);case"italic":return l.default.setters.toggleItalic(t);case"underline":return i.default.setters.toggleUnderline(t);case"uppercase":return s.default.setters.toggleUppercase(t);default:return null}}(t,n);return r?(e(r),"handled"):"not-handled"};function u(e){const t=e.getFirstBlock(),n=e.getLastBlock();return new r.SelectionState({anchorKey:t.getKey(),anchorOffset:0,focusKey:n.getKey(),focusOffset:n.getLength()})}function p(e,t){const n=e.getBlocksAsArray();let a=t;for(let e=0;e<n.length&&a>=0;e++){const t=n[e],o=t.getLength();if(a<=o){return new r.SelectionState({anchorKey:t.getKey(),anchorOffset:a,focusKey:t.getKey(),focusOffset:a})}a-=o+1}return null}},14071:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={...n(41742),...n(95532),...n(42157),...n(73421),...n(10434),...n(37909),...n(54114),...n(76610),...n(8223),...n(75923),...n(213),...n(34562),...n(15517),...n(70534),...n(31614),...n(64847),...n(68776),...n(31285),...n(85717),...n(83137),...n(73959),...n(64360),...n(81590),...n(70146),...n(67402),...n(7603),...n(90113),...n(32450),...n(93202),...n(65963),...n(45109),...n(99146),...n(60261),...n(84993),...n(97332),...n(2680),...n(90888),...n(73914),...n(89458),...n(38983),...n(40430),...n(13416),...n(6120),...n(24017),...n(18458),...n(83613),...n(73551),...n(74050),...n(56531)}},24359:(e,t,n)=>{"use strict";n.d(t,{getTimeTracker:()=>c.default,initializeTracking:()=>r.default,trackClick:()=>o.default,trackError:()=>l.default,trackEvent:()=>i.default,trackTiming:()=>s});var r=n(73323),a=(n(82303),n(51165));n(35467);var o=n(99365),l=n(16373),i=n(86602);const s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"click";(0,i.default)("timing_complete",{name:r,value:t,event_category:e,event_label:n,send_to:a.config.trackingId}),(0,i.default)(r,{value:t,event_category:e,event_label:n,send_to:a.config.trackingIdGA4})};n(53419);var c=n(20904)},2357:(e,t,n)=>{"use strict";n.d(t,{TransformProvider:()=>i,useTransform:()=>s,useTransformHandler:()=>c});var r=n(67294),a=n(74133),o=n(62531);const l=e=>{if(null===e)return!0;return 1===Object.keys(e).length&&"dropTargets"in e},i=function TransformProvider(e){let{children:t}=e;const n=(0,a.useRef)({}),i=(0,a.useRef)({}),[s,c]=(0,a.useState)(!1),d={state:{isAnythingTransforming:s},actions:{registerTransformHandler:(0,a.useCallback)(((e,t)=>{const r=n.current,a=r[e]||(r[e]=[]);return a.push(t),()=>{a.splice(a.indexOf(t),1)}}),[]),pushTransform:(0,a.useCallback)(((e,t)=>{const r=n.current,a=i.current,o=r[e];if(o&&o.forEach((e=>e(t))),a[e]=null===t?null:{...a[e],...t},l(a[e])){Object.values(a).every(l)&&(i.current={},c(!1))}else t.staticTransformation||c(!0)}),[]),clearTransforms:(0,a.useCallback)((()=>{i.current={},c(!1)}),[c])}};return r.createElement(o.default.Provider,{value:d},t)};const s=function(e){return(0,a.useContextSelector)(o.default,e??a.identity)};const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=s((e=>{let{actions:t}=e;return t.registerTransformHandler}));(0,a.useEffect)((()=>r(e,t)),n)}},15985:(e,t,n)=>{"use strict";n.d(t,{DANGER_ZONE_HEIGHT:()=>s,DEFAULT_DPR:()=>d,DEFAULT_EM:()=>c,FULLBLEED_HEIGHT:()=>i,FULLBLEED_RATIO:()=>l,PAGE_HEIGHT:()=>o,PAGE_RATIO:()=>r,PAGE_WIDTH:()=>a});const r=2/3,a=412,o=618,l=9/16,i=a/l,s=(i-o)/2,c=.02186*o,d=.5},1787:(e,t,n)=>{"use strict";n.d(t,{dataFontEm:()=>o,dataPixels:()=>a,dataToEditorX:()=>i,dataToEditorY:()=>s,dataToFontSizeY:()=>c,editorPixels:()=>l,editorToDataX:()=>d,editorToDataY:()=>u,getBox:()=>p});var r=n(15985);function a(e){return Number(e.toFixed(0))}function o(e){return Number((e*r.DEFAULT_EM).toFixed(1))}function l(e){return Number(e.toFixed(5))}function i(e,t){return l(e*t/r.PAGE_WIDTH)}function s(e,t){return l(e*t/r.PAGE_HEIGHT)}function c(e,t){return(s(e,t)/10).toFixed(6)}function d(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=e*r.PAGE_WIDTH/t;return!1===n?o:a(o)}function u(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=e*r.PAGE_HEIGHT/t;return!1===n?o:a(o)}function p(e,t,n){let{x:a,y:o,width:l,height:c,rotationAngle:d,isBackground:u}=e;return{x:i(u?0:a,t),y:s(u?-r.DANGER_ZONE_HEIGHT:o,n),width:i(u?r.PAGE_WIDTH:l,t),height:s(u?r.FULLBLEED_HEIGHT:c,n),rotationAngle:u?0:d}}},70333:(e,t,n)=>{"use strict";n.d(t,{calcRotatedObjectPositionAndSize:()=>a,default:()=>__WEBPACK_DEFAULT_EXPORT__,getCorners:()=>o});var r=n(1787);function a(e,t,n,r,a){if(!e||0===e)return{x:t,y:n,width:r,height:a};const{topLeftPoint:l,topRightPoint:i,bottomRightPoint:s,bottomLeftPoint:c}=o(e,t,n,r,a),d=Math.min(l.x,i.x,s.x,c.x),u=Math.min(l.y,i.y,s.y,c.y);return{x:d,y:u,width:Math.max(l.x,i.x,s.x,c.x)-d,height:Math.max(l.y,i.y,s.y,c.y)-u}}function o(e,t,n,r,a){const o=t+.5*r,i=n+.5*a,s=e*Math.PI/180;return{topLeftPoint:l(o,i,t,n,s),topRightPoint:l(o,i,t+r,n,s),bottomRightPoint:l(o,i,t+r,n+a,s),bottomLeftPoint:l(o,i,t,n+a,s)}}function l(e,t,n,a,o){const l=n-e,i=a-t,s=Math.sqrt(l*l+i*i);o+=Math.atan2(i,l);return{x:(0,r.dataPixels)(e+s*Math.cos(o)),y:(0,r.dataPixels)(t+s*Math.sin(o))}}const __WEBPACK_DEFAULT_EXPORT__=function(e){const t=e.map((e=>a(e.rotationAngle,e.x,e.y,e.width,e.height))),n=t[0];let r=n.x,o=n.y,l=r+n.width,i=o+n.height;return t.slice(1).forEach((e=>{r=Math.min(e.x,r),o=Math.min(e.y,o),l=Math.max(e.x+e.width,l),i=Math.max(e.y+e.height,i)})),{startX:r,startY:o,endX:l,endY:i,width:l-r,height:i-o}}},38803:(e,t,n)=>{var r={"./contact.json":[34759,2476],"./cover.json":[97478,9027],"./editorial.json":[16989,3871],"./list.json":[12233,2634],"./quote.json":[4971,2563],"./section_header.json":[48438,9843],"./step.json":[89696,7611],"./table.json":[81464,2761]};function a(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((()=>n.t(a,17)))}a.keys=()=>Object.keys(r),a.id=38803,e.exports=a},73502:(e,t,n)=>{"use strict";function r(e,t){return document?.fonts?document.fonts.load(e,t||"").then((()=>document.fonts.check(e,t||""))):Promise.resolve(!0)}n.d(t,{default:()=>r})},58860:(e,t,n)=>{"use strict";n.d(t,{ensureFontLoaded:()=>i.default,escapeHTML:()=>l,loadInlineStylesheet:()=>s.loadInlineStylesheet,loadStylesheet:()=>s.loadStylesheet,stripHTML:()=>a});const r=document.createElement("div");function a(e){return r.innerHTML=e,r.textContent}const o=document.createElement("div");function l(e){return o.textContent=e,o.innerHTML}var i=n(73502),s=n(99659)},99659:(e,t,n)=>{"use strict";function r(e,t){return new Promise(((n,r)=>{const a=document.createElement("link");a.id=t,a.rel="stylesheet",a.href=e,a.crossOrigin="anonymous",a.addEventListener("load",n),a.addEventListener("error",r),document.head.appendChild(a)}))}function a(e,t){if(!t)return;const n=document.createElement("style");n.textContent=t,n.id=e,document.head.appendChild(n)}n.d(t,{loadInlineStylesheet:()=>a,loadStylesheet:()=>r})},49925:(e,t,n)=>{"use strict";n.d(t,{DATA_VERSION:()=>r.DATA_VERSION,migrate:()=>r.migrate});var r=n(33536)},34345:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{addItem:()=>La,cancelUploading:()=>Fa,finishItem:()=>Wa,finishMuting:()=>Ga,finishTranscoding:()=>Ua,finishTrimming:()=>Ya,finishUploading:()=>Ba,removeItem:()=>Va,replacePlaceholderResource:()=>Za,startMuting:()=>za,startTranscoding:()=>Ha,startTrimming:()=>ja,startUploading:()=>Da});var a={};n.r(a),n.d(a,{deleteMediaElement:()=>Wl,fetchMediaError:()=>jl,fetchMediaStart:()=>zl,fetchMediaSuccess:()=>Gl,prependMedia:()=>oi,removeAudioProcessing:()=>Kl,removeBaseColorProcessing:()=>Jl,removeBlurhashProcessing:()=>ti,removePosterProcessing:()=>ri,resetFilters:()=>Vl,setAudioProcessing:()=>Xl,setBaseColorProcessing:()=>Ql,setBlurhashProcessing:()=>ei,setMedia:()=>ai,setMediaType:()=>ql,setNextPage:()=>Yl,setPosterProcessing:()=>ni,setSearchTerm:()=>$l,updateMediaElement:()=>Zl});var o={};n.r(o),n.d(o,{deleteMediaElement:()=>Ul,deselectCategory:()=>di,fetchCategoriesError:()=>si,fetchCategoriesStart:()=>li,fetchCategoriesSuccess:()=>ii,fetchMediaError:()=>Bl,fetchMediaStart:()=>Ll,fetchMediaSuccess:()=>Dl,selectCategory:()=>ci,setNextPage:()=>Fl,setSearchTerm:()=>pi,setSelectedProvider:()=>ui,updateMediaElement:()=>Hl});var l={};n.r(l),n.d(l,{AlignBottom:()=>_T,AlignCenter:()=>aT,AlignLeft:()=>eT,AlignMiddle:()=>hT,AlignRight:()=>sT,AlignTextCenter:()=>yS,AlignTextJustified:()=>CS,AlignTextLeft:()=>hS,AlignTextRight:()=>wS,AlignTop:()=>pT,Angle:()=>cR,ArrowCloud:()=>Ky,ArrowDown:()=>Ij.default,ArrowDownLeftCurved:()=>pd,ArrowDownRightCurved:()=>gd,ArrowLeft:()=>Qp,ArrowLeftCurved:()=>xj,ArrowLeftLarge:()=>AA.default,ArrowOutline:()=>Nj,ArrowRight:()=>Mj,ArrowRightCurved:()=>Am,ArrowRightLarge:()=>Dj.default,ArrowUp:()=>jk,ArrowsLeftRight:()=>Sm,Border:()=>PN,BorderBox:()=>Kv,Box1:()=>Fj,Box4:()=>Zx.default,Box4Alternate:()=>ij,Bucket:()=>Gj,Camera:()=>VH,Captions:()=>Wj,Checkbox:()=>my,Checklist:()=>qj,Checkmark:()=>Kj.default,CheckmarkCircle:()=>Ay,CheckmarkSmall:()=>$H.default,ChevronDown:()=>Wp.default,ChevronDownSmall:()=>Kb.default,ChevronRightSmall:()=>Jj,ChevronUp:()=>O_.default,ChevronUpSmall:()=>wx,CircleSpeed:()=>rY,ColorBucket:()=>EM,ColorDrop:()=>Sp,Corner:()=>Aw,Cross:()=>Nu.default,CrossLarge:()=>oY.default,CrossSmall:()=>lY.default,DistributeHorizontal:()=>Ww,DistributeVertical:()=>Xw,Dots:()=>sY,DotsFillSmall:()=>dv,Eraser:()=>mY,ExclamationOutline:()=>hY.default,ExclamationTriangle:()=>ZP,Eye:()=>wd,FloppyDisk:()=>bY,GearWithGauge:()=>wY,Keyboard:()=>qL,Launch:()=>SY.default,LetterAHeight:()=>OR,LetterAWidth:()=>RR,LetterBBold:()=>MS,LetterIItalic:()=>FS,LetterIOutline:()=>IY,LetterMOutline:()=>OY,LetterSStrikethrough:()=>RY,LetterT:()=>oG.default,LetterTArrow:()=>DY,LetterTLargeLetterTSmall:()=>GY,LetterTPlus:()=>HY,LetterTUppercase:()=>DR,LetterUUnderline:()=>GS,Link:()=>LH,LockClosed:()=>Bu.default,LockOpen:()=>Hu,Magnifier:()=>YY.default,Media:()=>DF,MirrorLeftRight:()=>Zu,MirrorUpDown:()=>Xu,Muted:()=>jv,PageMargin:()=>WY,PagePlus:()=>fP,PageSwap:()=>QY,PatternLinear:()=>Tf,PatternRadial:()=>xf,PatternSolid:()=>bf,Pencil:()=>df.default,Percent:()=>tZ,Picture:()=>DU,PictureSwap:()=>lZ,Pipette:()=>op,Play:()=>cZ,PlayFilled:()=>vL.default,PlayOutline:()=>tF,Plus:()=>Jf,PlusFilled:()=>pZ,PlusFilledSmall:()=>QF,PlusOutline:()=>Gf,QuestionMarkOutline:()=>kB,Scissors:()=>KS,Shapes:()=>rz,Sparkles:()=>hZ,StopFilled:()=>_L.default,StopOutline:()=>QB,Table:()=>bZ.default,TailedRectangle:()=>Om,Timeline:()=>_Z,Trash:()=>GN.default,TrashFilledSmall:()=>TG,TurningLine:()=>aM,Union:()=>TZ,Video:()=>SZ.default});var i={};n.r(i),n.d(i,{addPublisherLogo:()=>BK,getPublisherLogos:()=>DK});var s={};n.r(s),n.d(s,{addPageTemplate:()=>LJ,autoSaveById:()=>EJ,createTaxonomyTerm:()=>ZJ,deleteMedia:()=>kJ,deletePageTemplate:()=>BJ,getAuthors:()=>cJ,getCurrentUser:()=>HJ,getCustomPageTemplates:()=>MJ,getFonts:()=>WJ,getHotlinkInfo:()=>zJ,getLinkMetadata:()=>OJ,getMedia:()=>vJ,getMediaById:()=>TJ,getMediaForCorsCheck:()=>wJ,getMutedMediaById:()=>SJ,getOptimizedMediaById:()=>CJ,getPosterMediaById:()=>IJ,getProxyUrl:()=>GJ,getStoryById:()=>fJ,getTaxonomies:()=>jJ,getTaxonomyTerm:()=>YJ,saveStoryById:()=>hJ,updateCurrentUser:()=>UJ,updateMedia:()=>xJ,updatePageTemplate:()=>DJ,uploadMedia:()=>AJ});var c=n(67294);n.p=window.webStories.publicPath;var d=n(91655);for(const e of window?.webStories?.localeData||[])(0,d.setLocaleData)(e);var u=n(74133),p=n(29163),m=n(46324),f=n(22049),g=n(45246),h=n(17216),E=n(70250);function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}const y=e=>{let{onClose:t,onSecondary:n,onPrimary:r,primaryText:a,secondaryText:o,primaryRest:l,secondaryRest:i,actions:s,children:d,...y}=e;const _=(0,u.useMemo)((()=>a&&c.createElement(m.Button,b({type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>r?.()},l),a)),[a,l,r]),v=(0,u.useMemo)((()=>o&&c.createElement(m.Button,b({type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>n?.()||t()},i),o)),[o,i,n,t]);return c.createElement(p.ThemeProvider,{theme:{...g.theme,colors:h.light}},c.createElement(E.Dialog,b({onClose:t},y,{actions:s||c.createElement(c.Fragment,null,v,_)}),d))};var _=n(14194),v=n(7471),w=n(11756),T=n(59042),S=n(1745),C=n(2357),I=n(17001),A=n(25205),x=n(88766),k=(n(27342),n(40630)),O=n(95740),N=(n(72858),n(34230)),P=n(95370);const R=(0,p.createGlobalStyle)(["ul#adminmenu a.wp-has-current-submenu::after{border-right-color:",";}.web-stories-content b,.web-stories-content strong{font-weight:bold;}body.edit-story #wpbody *{",";}"],g.theme.colors.bg.secondary,P.scrollbarCSS);const M=g.theme;var L=n(24359);const D=p.default.div.withConfig({displayName:"errorActions__Message",componentId:"sc-mspoll-0"})(["color:#fff;font-size:16px;font-weight:300;line-height:1.6;padding:20px;button{margin-right:6px;}"]),B=p.default.textarea.withConfig({displayName:"errorActions__TextArea",componentId:"sc-mspoll-1"})(["width:100%;min-height:200px;"]),F=p.default.p.withConfig({displayName:"errorActions__P",componentId:"sc-mspoll-2"})(["margin:0 0 8px 0;"]),H=p.default.div.withConfig({displayName:"errorActions__Wrapper",componentId:"sc-mspoll-3"})(["display:flex;"]);const U=function ErrorActions(e){let{error:t,errorInfo:n}=e;const r=`${t}\n${n.componentStack}`;return c.createElement(D,null,c.createElement(F,null,(0,d.__)("Something went wrong!","web-stories")),c.createElement(F,null,(0,d.__)("The editor has crashed. Please try reloading the page and report the error using the button below.","web-stories")),c.createElement(F,null,(0,d.__)("Apologies for the inconvenience.","web-stories")),c.createElement(F,null,c.createElement(B,{readOnly:!0,value:r,onFocus:e=>e.target.setSelectionRange(0,r.length)})),c.createElement(H,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>{window.location.reload(!0)}},(0,d.__)("Reload","web-stories")),c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,href:"https://wordpress.org/support/plugin/web-stories/#new-topic-0",target:"_blank",rel:"noreferrer"},(0,d.__)("Report Error","web-stories"))))};class ErrorBoundary extends u.Component{state={error:null,errorInfo:null};componentDidCatch(e,t){this.setState({error:e,errorInfo:t});const n=t?`${e.message}\n\n${t.componentName}\n${t.componentStack}`:e.message;(0,L.trackError)("editor_error_boundary",n,!0)}render(){const{error:e,errorInfo:t}=this.state;return e?c.createElement(U,{error:e,errorInfo:t}):this.props.children}}const z=ErrorBoundary,G=(0,u.createContext)({});const j=function ConfigProvider(e){let{config:t,children:n}=e;return c.createElement(G.Provider,{value:t},n)};const Y=function(e){return(0,u.useContextSelector)(G,e??u.identity)};var Z=n(30065),W=n(16769);const V=(0,Z.default)(W.default);const $=(0,u.createContext)({state:{},actions:{}});const q=function APIProvider(e){let{children:t}=e;const{apiCallbacks:n,cdnURL:r}=Y(),a=(0,u.useRef)({base:[]});return n.getPageTemplates=(0,u.useCallback)((async()=>(0===a.current.base.length&&(a.current.base=await async function(e){let{cdnURL:t}=e;const n=await V(t),r={createdBy:"Google",modified:"2020-04-21"};return n.map(((e,t)=>({id:t+1,...r,...e})))}({cdnURL:r})),a.current.base)),[r]),c.createElement($.Provider,{value:{actions:n}},t)};const X=function(e){return(0,u.useContextSelector)($,e??u.identity)},K=e=>{let{name:t=""}=e;return t.includes(".")?t.split(".").slice(0,-1).join("."):t},Q=e=>{const t=new window.FileReader;return new Promise(((n,r)=>{t.onload=()=>n(t),t.onerror=r,t.readAsArrayBuffer(e)}))};var J=n(50136),ee=n(86957);const te=async e=>{const t=await(0,ee.default)({src:e});return{width:t.naturalWidth,height:t.naturalHeight}},ne=e=>e?.split("/")[0]||null;const src_normalizeResourceSizes=function(e){const t={};if(!e)return t;for(const n of Object.keys(e)){const r=e[n];t[n]={...r,width:Number(r.width),height:Number(r.height)}}return t};const re=function(e){let{baseColor:t,blurHash:n,type:r,mimeType:a,creationDate:o,src:l,width:i,height:s,poster:c,posterId:d,id:u,length:p,lengthFormatted:m,alt:f,sizes:g,attribution:h,output:E,isPlaceholder:b=!1,isOptimized:y=!1,isMuted:_=!1,isExternal:v=!1,trimData:w,needsProxy:T=!1}=e;return{baseColor:t,blurHash:n,type:r||ne(a),mimeType:a,creationDate:o,src:l,width:Number(i||0),height:Number(s||0),poster:c,posterId:d,id:u,length:p,lengthFormatted:m,alt:f,sizes:src_normalizeResourceSizes(g),attribution:h,output:E,isPlaceholder:b,isOptimized:y,isMuted:_,isExternal:v,trimData:w,needsProxy:T}};var ae=n(15985);const oe=function(e){let{width:t,height:n,posterGenerated:r,posterWidth:a,posterHeight:o}=e;return r&&a&&o?{width:a,height:o}:t||n?{width:t,height:n}:{width:ae.PAGE_WIDTH,height:ae.FULLBLEED_HEIGHT}},le=e=>{const t=document.createElement("video");return t.muted=!0,t.crossOrigin="anonymous",t.preload="metadata",new Promise(((n,r)=>{t.addEventListener("loadedmetadata",(()=>n(t))),t.addEventListener("error",r),t.src=e}))};const ie=async function(e){const t=await le(e);return new Promise(((e,n)=>{t.addEventListener("canplay",(()=>e(t)),{once:!0}),t.addEventListener("error",n),t.preload="auto"}))},se=e=>e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});const ce=function(e){const t=parseInt(e/3600);e%=3600;const n=parseInt(e/60);return e%=60,t?`${t}:${se(n)}:${se(e)}`:`${n}:${se(e)}`};const de=function(e){const t=!isNaN(e.duration)&&1/0!==e.duration?e.duration:0,n=Math.round(t);return{length:n,lengthFormatted:ce(n)}};const ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.99;return e.currentTime===t?Promise.resolve():new Promise(((n,r)=>{e.addEventListener("seeking",(e=>{const t=setTimeout((()=>{clearTimeout(t),r(e)}),3e3)})),e.addEventListener("error",r),e.addEventListener("seeked",(()=>n(e)),{once:!0}),e.currentTime=t}))};const pe=function(e){return e.mozHasAudio||Boolean(e.webkitAudioDecodedByteCount)||Boolean(e.audioTracks?.length)};const me=function(e,t,n){return new File([e],t,{type:n})};const fe=function(e){return new Promise((function(t){e.toBlob((e=>{t(e,"image/jpeg")}))}))};const ge=function(e){const t=document.createElement("canvas");return t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),fe(t)};var he=n(44586);const Ee={100:(0,d._x)("Thin","font weight","web-stories"),200:(0,d._x)("Extra-light","font weight","web-stories"),300:(0,d._x)("Light","font weight","web-stories"),400:(0,d._x)("Regular","font weight","web-stories"),500:(0,d._x)("Medium","font weight","web-stories"),600:(0,d._x)("Semi-bold","font weight","web-stories"),700:(0,d._x)("Bold","font weight","web-stories"),800:(0,d._x)("Extra-bold","font weight","web-stories"),900:(0,d._x)("Black","font weight","web-stories")},be=2147483648,ye="jpeg",_e="image/jpeg",ve="video/mp4",we="mp4",Te=720,Se=1280,Ce="((MULTIPLE))",Ie=(0,d.__)("Mixed","web-stories"),Ae={FILL:"FILL",FIT:"FIT",FIXED:"FIXED"},xe={OPEN:"OPEN",OPENING:"OPENING",CLOSED:"CLOSED",CLOSING:"CLOSING"},ke=300,Oe=12,Ne=150,Pe="FRONT",Re="BACK",Me="FORWARD",Le="BACKWARD",De=400,Be=700,Fe={horizontal:8,vertical:4},He="dark",Ue="light",ze="style",Ge="colors",je=[],Ye=e=>e+"-poster."+ye,Ze=e=>{const t=K(e),n=ne(e.type);return r={type:n||"image",mimeType:"image"===n?"image/png":"video/mp4",src:"",...oe({}),alt:t},re({...r,isPlaceholder:!0});var r},We=async e=>{const t=ne(e.type);let n=Ze(e),r=null;try{if("image"===t&&(n=await(async e=>{const t=K(e),n=e.type,r=await Q(e),a=(0,J.createBlob)(new window.Blob([r.result],{type:n})),{width:o,height:l}=await te(a);return re({type:"image",mimeType:n,src:a,...oe({width:o,height:l}),alt:t})})(e)),"video"===t){const t=await(async e=>{const t=K(e),n=e.type,r=await Q(e),a=(0,J.createBlob)(new Blob([r.result],{type:n})),o=await ie(a),l=""!==o.canPlayType(n),{length:i,lengthFormatted:s}=de(o);await ue(o);const c=pe(o),d=me(await ge(o),Ye(K(e)),_e),u=(0,J.createBlob)(d),{width:p,height:m}=await te(u);return{resource:re({type:"video",mimeType:n,src:l?a:"",...oe({width:p,height:m}),poster:u,isMuted:!c,length:i,lengthFormatted:s,alt:t}),posterFile:d}})(e);n=t.resource,r=t.posterFile}}catch{}return n.id=(0,he.default)(),{resource:n,posterFile:r}};var Ve,$e,qe=n(87602),Xe=n(84967),Ke=n(67480),Qe=n(91778);function Je(){return Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Je.apply(this,arguments)}const SvgTenorLogoWhite=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Je({viewBox:"0 0 1386 177",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ve||(Ve=c.createElement("defs",null,c.createElement("path",{id:"a",d:"M0 .136H92.92v175.707H0z"}),c.createElement("path",{id:"c",d:"M0 .383h82.728V137.28H0z"}))),$e||($e=c.createElement("g",{fill:"none",fillRule:"evenodd"},c.createElement("path",{d:"M961.4 97.28c-.594-5.14-2.057-9.885-3.995-14.512-11.547-27.168-41.562-27.88-56.984-14.632-8.107 6.96-12.892 15.858-15.265 26.14-.237.949-.316 1.898-.514 3.005H961.4Zm-77.193 20.13c.95 7.118 3.005 13.484 6.644 19.218 8.541 13.485 20.959 19.892 36.856 19.773 13.05-.08 24.24-4.825 33.89-13.525 5.062-4.587 12.18-3.717 15.739 1.78 2.57 3.955 2.056 8.74-1.503 12.299-10.796 10.795-23.648 17.518-38.873 19.377-9.965 1.226-19.89.988-29.58-2.017-22.066-6.841-36.737-21.473-43.262-43.46-7.632-25.823-3.559-49.827 14.434-70.47 12.22-13.96 28.038-20.603 46.663-20.286 16.056.276 30.055 5.734 41.325 17.4 9.372 9.688 14.553 21.512 16.925 34.641.91 4.983 1.305 10.045 1.543 15.106.277 5.576-4.073 9.926-9.65 10.203-.79.04-1.581 0-2.372 0h-85.971c-.791-.04-1.622-.04-2.808-.04ZM1256.802 109.383c-.198-13.564-4.113-24.874-12.694-34.444-17.518-19.575-49.51-18.824-66.318 1.344-13.999 16.807-14.987 46.466 1.266 64.736 14.473 16.293 40.494 19.654 58.21 7 13.485-9.65 19.14-23.293 19.536-38.636m-113.337-1.82c.04-34.957 27.128-67.82 68.571-67.74 38.636.04 68.255 29.975 68.177 68.887-.08 38.24-30.292 68.057-69.007 68.097-37.291 0-67.82-31.161-67.741-69.244M1030.173 59.042c2.491-2.373 4.508-4.39 6.604-6.288 10.123-9.254 22.224-13.05 35.709-12.931 10.637.118 20.643 2.491 29.5 8.66 10.994 7.672 16.966 18.547 19.298 31.478a76.652 76.652 0 0 1 1.187 12.773c.119 24.202.04 48.364.04 72.566 0 4.626-2.927 9.016-7.237 10.598-4.508 1.66-8.74.988-12.22-2.492-2.451-2.412-3.52-5.457-3.52-8.937.04-22.422.12-44.805-.078-67.227-.04-4.429-.672-8.976-1.74-13.247-3.362-13.09-12.734-21.038-26.14-22.58-9.53-1.108-18.586.395-26.534 6.168-10.559 7.672-14.79 18.587-14.83 31.241-.079 22.066 0 44.172-.04 66.238 0 8.463-8.225 13.96-16.055 10.757-4.152-1.7-6.96-6.21-6.96-11.27v-113.1c0-4.469 2.057-7.87 5.853-10.084 3.915-2.294 7.988-2.175 11.824.237 3.282 2.096 5.26 5.141 5.339 9.175.04 2.61 0 5.14 0 8.265",fill:"currentColor"}),c.createElement("g",{transform:"translate(760 .259)"},c.createElement("mask",{id:"b",fill:"currentColor"},c.createElement("use",{xlinkHref:"#a"})),c.createElement("path",{d:"M49.11 42.054h31.044c4.27.199 7.75 1.583 9.965 5.419 3.678 6.445-.079 14.236-7.434 15.343-1.147.158-2.373.198-3.56.197H49.037V135.817c.075 4.745.826 9.293 4.03 13.168 2.61 3.164 6.129 4.509 9.965 5.102 5.734.91 11.428.434 17.004-1.306 5.3-1.7 10.52.673 12.299 5.616 1.819 5.022-.752 9.965-5.655 12.338-6.644 3.243-13.604 4.666-20.96 5.062-19.06.95-36.183-12.892-39.07-31.794-.395-2.452-.514-4.983-.514-7.475-.04-23.53-.04-47.058-.035-70.588v-2.728c-.874-.04-1.586-.12-2.258-.12-4.35 0-8.7.08-13.05-.039C3.674 62.856-.914 57.517.154 50.794c.751-4.745 5.062-8.304 10.48-8.462 4.27-.119 8.58-.04 12.852-.04 2.61 0 2.61 0 2.614-2.728V12.08C26.096 5.357 30.96.216 37.445.136c6.486-.078 11.587 5.102 11.626 11.905.04 9.213 0 18.467 0 27.681.04.751.04 1.542.04 2.53v-.198Z",fill:"currentColor",mask:"url(#b)"})),c.createElement("g",{transform:"translate(1302.955 39.409)"},c.createElement("mask",{id:"d",fill:"currentColor"},c.createElement("use",{xlinkHref:"#c"})),c.createElement("path",{d:"M23.095 28.135c3.4-3.875 6.405-7.711 9.886-11.112 7.948-7.75 17.28-13.169 28.275-15.344 3.321-.672 6.801-.83 10.202-.672 6.446.356 11.27 5.734 11.27 12.061 0 6.249-4.903 11.548-11.27 12.14-4.706.436-9.49.515-14.117 1.503-12.694 2.73-21.671 10.4-27.445 21.909-5.062 10.044-6.762 20.88-6.801 31.992-.08 14.829 0 29.658 0 44.488 0 6.88-5.063 12.22-11.588 12.18C4.943 137.24 0 132.139 0 125.258V11.803C0 6.663 3.638 1.996 8.542.77c5.378-1.345 10.598.87 12.93 5.813.91 1.898 1.425 4.113 1.504 6.248.237 4.39.079 8.819.079 13.248.04.672.04 1.305.04 2.056",fill:"currentColor",mask:"url(#d)"})),c.createElement("path",{d:"M35.938 68.125c6.416 0 12.166 1.417 17.25 4.25 5.083 2.833 9.062 6.792 11.937 11.875s4.313 10.958 4.313 17.625-1.438 12.562-4.313 17.688c-2.875 5.125-6.854 9.104-11.938 11.937-5.083 2.833-10.833 4.25-17.25 4.25-4.75 0-9.104-.917-13.062-2.75s-7.312-4.5-10.063-8v34.25h-12v-90.5h11.5v10.5c2.667-3.667 6.042-6.437 10.126-8.313 4.083-1.875 8.583-2.812 13.5-2.812Zm-1 57.125c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.042-4.708 8-8.25 1.958-3.541 2.938-7.604 2.938-12.187 0-4.583-.98-8.646-2.938-12.188-1.958-3.541-4.625-6.27-8-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.166 0-7.937.98-11.312 2.938-3.375 1.958-6.042 4.687-8 8.187-1.958 3.5-2.938 7.542-2.938 12.125s.959 8.646 2.876 12.188c1.916 3.541 4.583 6.291 8 8.25 3.416 1.958 7.208 2.937 11.375 2.937Zm78.5 10.5c-6.584 0-12.5-1.458-17.75-4.375s-9.355-6.937-12.313-12.063c-2.958-5.125-4.438-10.937-4.438-17.437 0-6.5 1.48-12.312 4.438-17.438 2.958-5.125 7.062-9.124 12.313-12 5.25-2.875 11.166-4.312 17.75-4.312 6.583 0 12.479 1.437 17.687 4.313 5.208 2.875 9.292 6.874 12.25 12 2.958 5.125 4.438 10.937 4.438 17.437 0 6.5-1.48 12.312-4.438 17.438-2.958 5.125-7.042 9.145-12.25 12.062s-11.104 4.375-17.688 4.375Zm0-10.5c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.02-4.708 7.938-8.25 1.916-3.541 2.875-7.604 2.875-12.187 0-4.583-.959-8.646-2.875-12.188-1.917-3.541-4.563-6.27-7.938-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.25 0-8.062.958-11.437 2.875s-6.042 4.646-8 8.188c-1.958 3.541-2.938 7.604-2.938 12.187 0 4.583.98 8.646 2.938 12.188 1.958 3.541 4.625 6.291 8 8.25 3.375 1.958 7.187 2.937 11.438 2.937Zm148.375-56.5L237.063 135h-11.5l-19.125-50.25L187.063 135h-11.5l-24.625-66.25h11.375l19.25 52.75 20-52.75h10.125l19.625 53 19.75-53h10.75Zm69.125 33.5c0 .917-.084 2.125-.25 3.625h-53.75c.75 5.833 3.312 10.52 7.687 14.063 4.375 3.541 9.812 5.312 16.313 5.312 7.916 0 14.291-2.667 19.125-8l6.625 7.75c-3 3.5-6.73 6.167-11.188 8-4.458 1.833-9.437 2.75-14.938 2.75-7 0-13.208-1.437-18.625-4.313-5.416-2.875-9.604-6.895-12.562-12.062s-4.438-11-4.438-17.5c0-6.417 1.438-12.208 4.313-17.375s6.833-9.187 11.875-12.063c5.042-2.875 10.73-4.312 17.063-4.312 6.333 0 11.979 1.437 16.937 4.313 4.958 2.875 8.833 6.895 11.625 12.062s4.188 11.083 4.188 17.75Zm-32.75-24c-5.75 0-10.563 1.75-14.438 5.25s-6.146 8.083-6.813 13.75h42.5c-.666-5.583-2.937-10.146-6.812-13.688-3.875-3.541-8.687-5.312-14.438-5.312Zm59.875 1.625c2.083-3.833 5.166-6.75 9.25-8.75 4.083-2 9.041-3 14.875-3V79.75c-.667-.083-1.584-.125-2.75-.125-6.5 0-11.605 1.937-15.313 5.813-3.708 3.875-5.563 9.395-5.563 16.562v33h-12V68.75h11.5v11.125Zm97.125 22.375c0 .917-.084 2.125-.25 3.625h-53.75c.75 5.833 3.312 10.52 7.687 14.063 4.375 3.541 9.812 5.312 16.313 5.312 7.916 0 14.291-2.667 19.125-8l6.625 7.75c-3 3.5-6.73 6.167-11.188 8-4.458 1.833-9.437 2.75-14.938 2.75-7 0-13.208-1.437-18.625-4.313-5.416-2.875-9.604-6.895-12.562-12.062s-4.438-11-4.438-17.5c0-6.417 1.438-12.208 4.313-17.375s6.833-9.187 11.875-12.063c5.042-2.875 10.73-4.312 17.063-4.312 6.333 0 11.979 1.437 16.937 4.313 4.958 2.875 8.833 6.895 11.625 12.062s4.188 11.083 4.188 17.75Zm-32.75-24c-5.75 0-10.563 1.75-14.438 5.25s-6.146 8.083-6.813 13.75h42.5c-.666-5.583-2.937-10.146-6.812-13.688-3.875-3.541-8.687-5.312-14.438-5.312Zm110.875-36V135h-11.5v-10.5c-2.667 3.667-6.042 6.458-10.125 8.375-4.084 1.917-8.584 2.875-13.5 2.875-6.417 0-12.167-1.417-17.25-4.25-5.084-2.833-9.063-6.812-11.938-11.938-2.875-5.125-4.313-11.02-4.313-17.687 0-6.667 1.438-12.542 4.313-17.625s6.854-9.042 11.938-11.875c5.083-2.833 10.833-4.25 17.25-4.25 4.75 0 9.124.896 13.125 2.688 4 1.791 7.333 4.437 10 7.937v-36.5h12Zm-34.125 83c4.166 0 7.958-.98 11.375-2.938 3.416-1.958 6.083-4.708 8-8.25 1.916-3.541 2.875-7.604 2.875-12.187 0-4.583-.959-8.646-2.875-12.188-1.917-3.541-4.584-6.27-8-8.187-3.417-1.917-7.209-2.875-11.375-2.875-4.25 0-8.063.958-11.438 2.875s-6.042 4.646-8 8.188c-1.958 3.541-2.938 7.604-2.938 12.187 0 4.583.98 8.646 2.938 12.188 1.958 3.541 4.625 6.291 8 8.25 3.375 1.958 7.187 2.937 11.438 2.937Zm123.625-57.125c6.416 0 12.166 1.417 17.25 4.25 5.083 2.833 9.062 6.792 11.937 11.875s4.313 10.958 4.313 17.625-1.438 12.562-4.313 17.688c-2.875 5.125-6.854 9.104-11.938 11.937-5.083 2.833-10.833 4.25-17.25 4.25-4.916 0-9.416-.958-13.5-2.875-4.083-1.917-7.458-4.708-10.125-8.375V135h-11.5V42.25h12v36.5c2.667-3.5 6-6.146 10-7.938 4-1.791 8.375-2.687 13.125-2.687Zm-1 57.125c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.042-4.708 8-8.25 1.958-3.541 2.938-7.604 2.938-12.187 0-4.583-.98-8.646-2.938-12.188-1.958-3.541-4.625-6.27-8-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.166 0-7.958.958-11.375 2.875-3.416 1.917-6.083 4.646-8 8.188-1.916 3.541-2.875 7.604-2.875 12.187 0 4.583.959 8.646 2.875 12.188 1.917 3.541 4.584 6.291 8 8.25 3.417 1.958 7.209 2.937 11.375 2.937Zm106.875-56.5-32.125 72.875c-2.834 6.75-6.146 11.5-9.938 14.25-3.792 2.75-8.354 4.125-13.688 4.125-3.25 0-6.395-.52-9.437-1.563-3.042-1.041-5.563-2.562-7.563-4.562l5.125-9c3.417 3.25 7.375 4.875 11.875 4.875 2.917 0 5.355-.77 7.313-2.313 1.958-1.541 3.73-4.187 5.313-7.937l2.125-4.625-29.25-66.125h12.5l23.125 53 22.875-53h11.75Z",fill:"currentColor",fillRule:"nonzero"}))))},et=(0,c.memo)(SvgTenorLogoWhite);var tt;function nt(){return nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nt.apply(this,arguments)}const SvgUnsplashLogoFull=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",nt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 457.19 104.19","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,tt||(tt=c.createElement("path",{d:"M59.88 38.66h27.53v48.75H0V38.66h27.53v24.37h32.35zm93 25c0 8.25-5.45 13.13-12.9 13.13-7.28 0-12.81-4.88-12.81-13.13V24.41h-12.22v39.13c0 15.45 11 25.21 25.06 25.21s25.15-9.76 25.15-25.21V24.41h-12.25zm43.7-21.13c-4.7 0-9.94 2-12.6 6.57v-5.41h-11.45v43.64h11.81v-25.1c0-5 3-9 8.16-9 5.68 0 8.08 3.82 8.08 8.7v25.4h11.8V59.82c.03-9.59-4.94-17.31-15.77-17.31zm43.31 18.37-6.48-1.33c-2.47-.5-4-1.77-4-3.9 0-2.49 2.23-4.35 5.33-4.35 4.36 0 6.09 2.25 6.51 4.88h10.18c-.08-6-4.83-13.84-16.51-13.84-9.41 0-16.33 6.47-16.33 14.28 0 6.13 3.81 11.19 12.24 13l6.05 1.33c3.37.71 4.7 2.31 4.7 4.26 0 2.31-2.14 4.35-6 4.35-4.71 0-7.27-2.68-7.87-5.79h-10.5c.59 6.53 5.32 14.84 18.46 14.84 11.45 0 17.22-7.28 17.22-14.38-.01-6.36-4.36-11.59-12.97-13.37zm63.19 4.53c0 13.22-8.26 23-20.59 23-6 0-10.48-2.4-12.61-5.33v21.13h-11.8V43.67h11.45v5.41c2-3.37 6.83-6.39 13.4-6.39 12.81 0 20.18 9.76 20.18 22.72zm-11.63.09c0-7.72-4.79-12.25-10.83-12.25s-10.91 4.53-10.91 12.25 4.88 12.33 10.91 12.33 10.91-4.54 10.91-12.35zm68-21.83h11.45v43.64h-11.8v-5.31c-2 3.5-6.57 6.38-12.61 6.38-12.33 0-20.59-9.77-20.59-23 0-13 7.37-22.72 20.15-22.72 6.57 0 11.32 3.05 13.4 6.39zm-.18 21.83c0-7.72-4.88-12.25-10.91-12.25s-10.83 4.51-10.83 12.23 4.79 12.33 10.83 12.33 10.92-4.6 10.92-12.33zm-50.66 21.81h11.8V24.41h-11.8zm132.35-44.81c-4.17 0-9 1.41-11.81 4.78V24.41h-11.8v62.91h11.8V61.68c.27-4.8 3.2-8.52 8.17-8.52 5.68 0 8.08 3.83 8.07 8.71v25.47h11.81V59.82c-.01-9.59-5.15-17.3-16.24-17.3zm-42 18.36-6.43-1.33c-2.47-.5-4-1.77-4-3.9 0-2.49 2.22-4.35 5.33-4.35 4.35 0 6.08 2.25 6.5 4.88h10.17c-.08-6-4.83-13.84-16.51-13.84-9.41 0-16.33 6.47-16.33 14.28 0 6.13 3.82 11.19 12.25 13l6 1.33c3.37.71 4.7 2.31 4.7 4.26 0 2.31-2.14 4.35-6 4.35-4.71 0-7.27-2.68-7.87-5.79h-10.49c.58 6.53 5.31 14.84 18.45 14.84 11.45 0 17.22-7.28 17.22-14.38 0-6.34-4.35-11.57-12.95-13.35zM59.88 0H27.53v24.37h32.35z"})))},rt=(0,c.memo)(SvgUnsplashLogoFull);var at,ot;function lt(){return lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lt.apply(this,arguments)}const SvgCoverrLogo=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",lt({viewBox:"0 0 742 132",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,at||(at=c.createElement("g",{clipPath:"url(#a)"},c.createElement("path",{d:"M17.875 112.892C5.958 100.096 0 84.494 0 65.912c0-18.757 5.958-34.358 17.875-46.804C29.967 6.31 45.04 0 62.914 0h19.453S72.202 26.645 62.563 26.645c-10.514 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.948 11.219 26.462 11.219 8.763 0 14.02 26.646 14.02 26.646H62.74c-17.7.175-32.772-6.136-44.864-18.933Z",fill:"#0072BB"}),c.createElement("path",{d:"M34.699 112.892c-11.917-12.796-17.875-28.398-17.875-46.98 0-18.757 5.958-34.358 17.875-46.804C46.791 6.31 61.862 0 79.738 0H99.19S89.026 26.645 79.387 26.645c-10.515 0-19.277 3.682-26.462 11.22C46.09 45.401 42.41 54.692 42.41 65.912c0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.947 11.219 26.462 11.219 8.763 0 14.02 26.646 14.02 26.646H79.563c-17.7.175-32.772-6.136-44.864-18.933Z",fill:"#7DC24B"}),c.createElement("path",{d:"M51.523 112.892c-11.917-12.796-17.875-28.398-17.875-46.98 0-18.757 5.958-34.358 17.875-46.98C63.79 6.311 78.686 0 96.562 0h19.452s-9.989 26.645-19.627 26.645c-10.515 0-19.278 3.682-26.463 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.713 15.948 11.395 26.462 11.395 8.763 0 14.02 26.645 14.02 26.645H96.562c-17.876 0-32.772-6.311-45.039-19.108Z",fill:"#FED035"}),c.createElement("path",{d:"M68.347 112.892C56.43 100.096 50.47 84.494 50.47 65.912c0-18.757 5.959-34.358 17.876-46.98C80.614 6.311 95.51 0 113.385 0h19.453s-10.164 26.645-19.803 26.645c-10.515 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.514 28.048 7.186 7.538 15.948 11.219 26.463 11.219 8.762 0 14.02 26.646 14.02 26.646H113.21c-17.7.175-32.596-6.136-44.863-18.933Z",fill:"#FF4C3D"}),c.createElement("path",{d:"M86.047 112.892C74.13 100.096 68.17 84.494 68.17 65.912c0-18.757 5.959-34.358 17.876-46.98C98.139 6.311 113.21 0 131.085 0c23.133 0 43.637 12.621 53.101 32.43l-22.082 13.498c-5.432-12.095-16.999-19.283-31.194-19.283-10.515 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.947 11.219 26.462 11.219 14.02 0 25.937-7.538 31.72-19.283l22.081 13.323C174.547 119.378 154.218 132 131.085 132c-17.875 0-32.946-6.311-45.038-19.108ZM213.102 112.892c-12.092-12.796-18.401-28.398-18.401-46.98 0-18.581 6.134-34.183 18.401-46.98C225.194 6.311 240.265 0 257.615 0c17.7 0 32.421 6.31 44.513 19.108 12.092 12.796 18.401 28.398 18.401 46.98 0 18.581-6.134 34.183-18.401 46.98-12.092 12.797-26.988 19.107-44.513 19.107-17.35-.175-32.421-6.486-44.513-19.283Zm44.513-7.187c10.515 0 19.277-3.681 26.462-11.219 7.186-7.538 10.691-17.004 10.691-28.398 0-11.22-3.505-20.86-10.691-28.399-7.185-7.538-15.947-11.394-26.462-11.394s-19.277 3.681-26.462 11.219c-7.186 7.538-10.691 17.004-10.691 28.398 0 11.22 3.505 20.86 10.691 28.399 7.185 7.538 15.947 11.394 26.462 11.394ZM419.895 3.33h28.039l-46.44 125.514h-29.793L325.261 3.331H353.3l33.298 95.362 33.297-95.362ZM479.654 77.482c3.855 19.108 18.401 29.626 38.204 29.626 13.669 0 23.833-5.259 30.668-15.602l21.205 12.972c-11.742 18.231-29.091 27.347-52.224 27.347-19.277 0-35.05-6.311-46.966-18.582-11.917-12.621-17.876-28.398-17.876-47.506 0-18.757 5.959-34.358 17.7-46.98C482.107 6.311 497.354 0 515.755 0c17.349 0 31.72 6.486 42.935 19.283 11.216 12.797 16.999 28.574 16.999 46.98 0 2.805-.175 6.486-.876 11.22h-95.159Zm69.924-22.088c-3.505-20.334-17.175-30.852-33.999-30.852-19.102 0-32.421 11.745-35.925 30.852h69.924ZM623.883 24.366c6.484-15.602 18.751-23.315 36.627-23.315v29.275c-9.814-.701-18.401 1.753-25.762 7.538-7.36 5.434-11.041 14.725-11.041 27.522v63.283h-25.761V3.33h25.937v21.036ZM705.374 24.366C711.858 8.764 724.125 1.051 742 1.051v29.275c-9.813-.701-18.401 1.753-25.761 7.538-7.36 5.434-11.041 14.725-11.041 27.522v63.283h-25.761V3.33h25.761v21.036h.176Z",fill:"#fff"}))),ot||(ot=c.createElement("defs",null,c.createElement("clipPath",{id:"a"},c.createElement("path",{fill:"#fff",d:"M0 0h742v132H0z"})))))},it=(0,c.memo)(SvgCoverrLogo),st=p.default.div.withConfig({displayName:"attribution__AttributionPill",componentId:"sc-1j8k1n4-0"})(["position:absolute;left:24px;bottom:10px;border-radius:100px;padding:2px 8px;height:24px;display:flex;flex-wrap:nowrap;background-color:",";cursor:pointer;align-items:center;z-index:9999;"],(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.black,.7)})),ct=(0,p.default)(Ke.Text).withConfig({displayName:"attribution__Text",componentId:"sc-1j8k1n4-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),dt=(0,p.css)(["color:",";fill:",";margin-left:6px;line-height:14px;"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white})),ut=(0,p.default)(rt).withConfig({displayName:"attribution__UnsplashLogo",componentId:"sc-1j8k1n4-2"})(["height:14px;",""],dt),pt=(0,p.default)(it).withConfig({displayName:"attribution__CoverrLogo",componentId:"sc-1j8k1n4-3"})([""," height:12px;margin-top:2px;"],dt),mt=(0,p.default)(et).withConfig({displayName:"attribution__TenorLogo",componentId:"sc-1j8k1n4-4"})(["height:14px;"," margin:0 2px 2px 6px;"],dt),ft="Coverr",gt="Tenor",ht="Unsplash",Et=e=>(0,qe.default)(
/* translators: %s: media provider name. */
(0,d.__)("Powered by %s","web-stories"),e);const bt={IMAGE:"image",VIDEO:"video",GIF:"gif"},yt="coverr",_t="tenor",vt={["unsplash"]:{displayName:(0,d.__)("Images","web-stories"),supportsCategories:!0,requiresAuthorAttribution:!0,attributionComponent:function UnsplashAttribution(){return c.createElement("a",{href:"https://unsplash.com?utm_source=web_stories_wordpress&utm_medium=referral",target:"_blank",rel:"noreferrer","aria-label":Et(ht)},c.createElement(st,{"aria-hidden":!0},c.createElement(ct,{forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Powered by","web-stories")),c.createElement(ut,null)))},fetchMediaErrorMessage:(0,qe.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Unsplash"),fetchCategoriesErrorMessage:(0,qe.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading categories from %s","web-stories"),"Unsplash")},[yt]:{displayName:(0,d.__)("Video","web-stories"),supportsCategories:!1,requiresAuthorAttribution:!1,attributionComponent:function CoverrAttribution(){return c.createElement("a",{href:"https://coverr.co?utm_source=web_stories_wordpress&utm_medium=referral&utm_campaign=api_powered_by",target:"_blank",rel:"noreferrer","aria-label":Et(ft)},c.createElement(st,{"aria-hidden":!0},c.createElement(ct,{forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Powered by","web-stories")),c.createElement(pt,null)))},fetchMediaErrorMessage:(0,qe.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Coverr"),defaultPreviewWidth:640},[_t]:{displayName:(0,d.__)("GIFs","web-stories"),contentTypeFilter:bt.GIF,supportsCategories:!0,requiresAuthorAttribution:!1,attributionComponent:function TenorAttribution(){return c.createElement("a",{href:"https://tenor.com?utm_source=web_stories_wordpress&utm_medium=referral",target:"_blank",rel:"noreferrer","aria-label":Et(gt)},c.createElement(st,{"aria-hidden":!0},c.createElement(mt,null)))},fetchMediaErrorMessage:(0,qe.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Tenor")}};function wt(e,t){const n=t.sort(((e,t)=>(t.width??0)-(e.width??0))),r=function(e){return{originalWidth:e[0].width,originalHeight:e[0].height}}(n);return n.map((t=>function(e,t,n){const{originalWidth:r,originalHeight:a}=n;if(!r||!a)throw new Error("No original size present.");const o=vt[e.provider.toLowerCase()];if(!(t.width&&t.height||o.defaultPreviewWidth))throw new Error("Missing width and height for: "+e);return{file:e.name,sourceUrl:t.url,mimeType:t.mimeType,width:t.width??o.defaultPreviewWidth,height:t.height??o.defaultPreviewWidth*a/r}}(e,t,r)))}function Tt(e){return(e.author||e.registerUsageUrl)&&{author:e.author&&{displayName:e.author.displayName,url:e.author.url},registerUsageUrl:e.registerUsageUrl}}function St(e){return Math.floor(e/60)+":"+Math.floor(e%60).toString().padStart(2,"0")}function Ct(e){const t=function(e){if("image"!==e.type.toLowerCase())throw new Error("Invalid media type.");if(e.imageUrls?.length<3)throw new Error("Invalid number of urls for asset. Need at least 3: "+e);const t=wt(e,e.imageUrls),n=[["full",t[0]],["large",t[1]],...t.slice(2,t.length-1).map((e=>[e.width+"_"+e.height,e])),["web_stories_thumbnail",t[t.length-1]]];return Object.fromEntries(new Map(n))}(e);return re({id:e.name,baseColor:e.color,blurHash:e.blurHash,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,sizes:t,attribution:Tt(e)})}function It(e){const t=function(e){if("video"!==e.type.toLowerCase())throw new Error("Invalid media type.");if(e.videoUrls?.length<2)throw new Error("Invalid number of urls for asset. Need at least 2: "+e);const t=wt(e,e.videoUrls);return{full:t[0],preview:t[t.length-1]}}(e),n=parseInt(e.videoMetadata.duration.trimEnd("s"));return re({id:e.name,baseColor:e.color,posterId:e.name,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,poster:e.imageUrls[0].url,length:n,lengthFormatted:St(n),alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,isOptimized:!0,isMuted:!0,sizes:t,attribution:Tt(e)})}function At(e){const{imageUrls:t,videoUrls:n,previewUrl:r}=function(e){if("gif"!==e.type.toLowerCase())throw new Error("Invalid media type");if(e.imageUrls?.length<3)throw new Error("Invalid number of urls for asset. Need at least 3: "+e);const t=e.imageUrls.filter((e=>{let{imageName:t}=e;return t.endsWith("preview")})).map((e=>{let{url:t}=e;return t})).shift(),n=e.imageUrls.filter((e=>{let{url:n}=e;return n!==t})),r=wt(e,n),a=wt(e,e.videoUrls.filter((e=>{let{mimeType:t}=e;return"image/webm"===t}))),o=wt(e,e.videoUrls.filter((e=>{let{mimeType:t}=e;return"video/mp4"===t}))),l=[["full",r[0]],["large",r[1]],...r.slice(2,r.length-1).map((e=>[e.width+"_"+e.height,e])),["web_stories_thumbnail",r[r.length-1]]];return{imageUrls:Object.fromEntries(new Map(l)),videoUrls:{webm:{full:a[0],preview:a[a.length-1]},mp4:{full:o[0],preview:o[a.length-1]}},previewUrl:t}}(e);return re({id:e.name,baseColor:e.color,posterId:e.name,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,poster:r,alt:e.description||e.title||e.name,isPlaceholder:!1,isOptimized:!0,isExternal:!0,sizes:t,output:{mimeType:n.mp4.full.mimeType,src:n.mp4.full.sourceUrl},attribution:Tt(e)})}function xt(e){switch(e.type.toLowerCase()){case"image":return Ct(e);case"video":return It(e);case"gif":return At(e);default:throw new Error("Invalid media type.")}}const kt=function(e){const t=new Uint8Array(e);let n=0;if(71!==t[0]||73!==t[1]||70!==t[2]||56!==t[3])return!1;for(let e=4;e<t.length;e++)0===t[e]&&33===t[e+1]&&249===t[e+2]&&n++;return n>1};var Ot=n(71469),Nt=n(22133),Pt=n.n(Nt);function Rt(e){return Pt().getExtension(e)}function Mt(e){switch(e){case"audio/mpeg":return["mp3","m3a"];case"audio/aac":return["aac"];case"audio/ogg":return["oga","ogg"];case"image/jpeg":return["jpg","jpeg"];default:return[Rt(e)].filter(Boolean)}}const Lt=function(e,t,n){const r=new Error;return r.name=e,r.file=t,r.isUserError=!0,r.message=n,r},Dt=e=>Math.round(e/Math.pow(1024,2));const Bt=function(){const{actions:{uploadMedia:e}}=X(),{storyId:t,maxUpload:n,allowedMimeTypes:{image:r,vector:a,video:o},capabilities:{hasUploadMediaAction:l}}=Y(),i=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]),s=(0,u.useMemo)((()=>i.map((e=>Mt(e))).flat()),[i]),c=(0,u.useCallback)((e=>{let{type:t}=e;return i.includes(t)}),[i]),p=(0,u.useCallback)((e=>{let{size:t}=e;return t<=n}),[n]),m=(0,u.useCallback)(((e,t,r)=>{if(!l){const t=(0,d.__)("Sorry, you are not allowed to upload files.","web-stories");throw Lt("PermissionError",e.name,t)}if(t){if(r){const t=(0,qe.default)(
/* translators: 1: File size in MB. 2: Maximum allowed file size in MB. */
(0,d.__)("Your file is too large (%1$s MB) and cannot be processed. Please try again with a file that is smaller than %2$s MB.","web-stories"),Dt(e.size),Dt(be));throw Lt("SizeError",e.name,t)}}else{if(!p(e)){const t=(0,qe.default)(
/* translators: first %s is the file size in MB and second %s is the upload file limit in MB */
(0,d.__)("Your file is %1$sMB and the upload limit is %2$sMB. Please resize and try again!","web-stories"),Dt(e.size),Dt(n));throw Lt("SizeError",e.name,t)}if(!c(e)){let t=(0,d.__)("No file types are currently supported.","web-stories");throw s.length&&(
/* translators: %s is a list of allowed file extensions. */
t=(0,qe.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to upload.","web-stories"),(0,Ot.default)(s))),Lt("ValidError",e.name,t)}}}),[l,p,n,s,c]),f=(0,u.useCallback)((function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(n);const a={storyId:t,altText:K(n),mediaSource:"editor",...r};return e(n,a)}),[m,e,t]);return(0,u.useMemo)((()=>({actions:{uploadFile:f,validateFileForUpload:m}})),[m,f])};function Ft(){}const Ht=e=>e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));const Ut=async function(e){const t=await ie(e);return await ue(t),ge(t)},zt="ADD_PAGE",Gt="UPDATE_PAGE",jt="DELETE_PAGE",Yt="ARRANGE_PAGE",Zt="DELETE_ELEMENTS",Wt="ADD_ELEMENTS",Vt="UPDATE_ELEMENTS",$t="UPDATE_ELEMENTS_BY_RESOURCE_ID",qt="DELETE_ELEMENTS_BY_RESOURCE_ID",Xt="SET_BACKGROUND_ELEMENT",Kt="ARRANGE_ELEMENT",Qt="COMBINE_ELEMENTS",Jt="DUPLICATE_ELEMENTS_BY_ID",en="COPY_SELECTED_ELEMENT",tn="UPDATE_ELEMENTS_BY_FONT_FAMILY",nn="SET_CURRENT_PAGE",rn="SET_SELECTED_ELEMENTS",an="SELECT_ELEMENT",on="UNSELECT_ELEMENT",ln="TOGGLE_ELEMENT_IN_SELECTION",sn="TOGGLE_LAYER",cn="UPDATE_STORY",dn="UPDATE_ANIMATION_STATE",un="ADD_ANIMATIONS",pn="RESTORE",mn=["id","elements"],fn=["id","isBackground","isDefaultBackground"];function gn(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{})}function hn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&n?.length?n.reduce(((e,t)=>e.filter((e=>t.includes(e)))),e):e}function En(e,t,n){return e>=t&&e<=n}function bn(e,t,n){const r=e[t],a=[...e.slice(0,t),...e.slice(t+1)];return[...a.slice(0,n),r,...a.slice(n)]}function yn(e,t){const n=gn("function"==typeof t?t(e):t,fn);return 0===Object.keys(n).length?e:{...e,...n}}function _n(e,t){return(e||[]).reduce(((e,n)=>t.some((e=>n.targets?.includes(e)))?e:[...e,n]),[])}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.values(Object.fromEntries(e.map((e=>[e.id,e]))))}function wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=vn(t),r=e.map((e=>{let{id:t}=e;return t}));return n.filter((e=>{let{id:t}=e;return!r.includes(t)}))}const Tn=function(e,t){let{page:n,position:r}=t;const a=null!==r&&En(r,0,e.pages.length-1),o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l=a?r:o+1,{id:i}=n;return n.elements?.length?{...e,pages:[...e.pages.slice(0,l),n,...e.pages.slice(l)],current:i,selection:[n.elements[0].id]}:e};const Sn=function(e,t){let{pageId:n}=t;if(e.pages.length<=1)return e;const r=null===n?e.current:n,a=e.pages.findIndex((e=>{let{id:t}=e;return t===r}));if(-1===a)return e;const o=[...e.pages.slice(0,a),...e.pages.slice(a+1)];let l=e.current;if(r===e.current){l=o[Math.min(o.length-1,a)].id}return{...e,pages:o,current:l,selection:[]}};const Cn=function(e,t){let{pageId:n,properties:r}=t;const a=null===n?e.current:n,o=e.pages.findIndex((e=>{let{id:t}=e;return t===a}));if(-1===o)return e;const l=gn(r,mn),i={...e.pages[o],...l},s=[...e.pages.slice(0,o),i,...e.pages.slice(o+1)];return{...e,pages:s}};const In=function(e,t){let{pageId:n,position:r}=t;if(e.pages.length<2)return e;const a=e.pages.findIndex((e=>{let{id:t}=e;return t===n})),o=En(r,0,e.pages.length-1);if(-1===a||!o||a===r)return e;const l=bn(e.pages,a,r);return{...e,pages:l}};const An=function(e,t){let{elements:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=wn(a.elements,n);if(0===o.length)return e;const l={...a,elements:[...a.elements,...o]},i=[...e.pages.slice(0,r),l,...e.pages.slice(r+1)],s=o.map((e=>{let{id:t}=e;return t}));return{...e,pages:i,selection:s}};const xn=function(e,t){let{elementIds:n}=t;const r=null===n?e.selection:n;if(0===r.length)return e;const a=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),o=e.pages[a],l=o.elements.map((e=>{let{id:t}=e;return t})),i=o.elements[0],s=r.some((e=>e===i.id)),c=i.isDefaultBackground,d=s&&c?r.filter((e=>e!==i.id)):r;if(!(hn(l,d).length>0))return e;let u=o.elements.filter((e=>!d.includes(e.id)));s&&!c&&(u=[o.defaultBackgroundElement,...u]);const p=o.animations||[],m=p.filter((e=>e.targets.some((e=>!d.includes(e))))),f={...o,elements:u,...p.length>0?{animations:m}:{}},g=[...e.pages.slice(0,a),f,...e.pages.slice(a+1)],h=hn(e.selection,d).length>0?e.selection.filter((e=>!d.includes(e))):e.selection;return{...e,pages:g,selection:h}};var kn=n(22188);const On=function(e,t){let{elementIds:n,properties:r}=t;if([kn.STORY_ANIMATION_STATE.PLAYING,kn.STORY_ANIMATION_STATE.PLAYING_SELECTED,kn.STORY_ANIMATION_STATE.SCRUBBING].includes(e.animationState))return e;const a=null===n?e.selection:n;if(0===a.length)return e;const o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l=e.pages[o];if(!(hn(l.elements.map((e=>{let{id:t}=e;return t})),a).length>0))return e;const i=l.elements.reduce(((e,t)=>{if(!a.includes(t.id))return e;const{animation:n,...o}=yn(t,r),l=n?{[n.id]:{...n,targets:[o.id]}}:{};return{...e,...l}}),{}),s=l.elements.reduce(((e,t)=>{if(!a.includes(t.id))return[...e,t];const{animation:n,...o}=yn(t,r);return[...e,o]}),[]),c=Object.keys(i).length>0,d=c?function(e,t){const n=e.reduce(((e,n)=>{const r=t[n.id];return delete t[n.id],r?.delete?e:r?[...e,r]:[...e,n]}),[]);return Object.values(t).forEach((e=>n.push(e))),n}(l.animations||[],i):l.animations,u=d&&{animations:d},p={elements:s},m={...l,...c?u:p},f=[...e.pages.slice(0,o),m,...e.pages.slice(o+1)];return{...e,pages:f}};const Nn=function(e,t){let{id:n,properties:r}=t;if(!n)return e;if(!e.pages.some((e=>e.elements.some((e=>e.resource?.id===n)))))return e;const a=e.pages.map((e=>{const t=e.elements.map((e=>e.resource?.id===n?yn(e,r):e));return{...e,elements:t}}));return{...e,pages:a}};const Pn=function(e,t){let{id:n}=t;if(null===n)return e;if(!e.pages.some((e=>e.elements.some((e=>e.resource?.id===n)))))return e;const r=[],a=e.pages.map((e=>{const{elements:t,animations:a}=e,o=t[0].resource?.id===n,l=t[0].isDefaultBackground;let i=t.map((e=>{const{id:t,resource:a}=e;return a?.id!==n||o&&l?e:void r.push(t)}));o&&!l&&(i=[e.defaultBackgroundElement,...i]),i=i.filter(Boolean);const s=a||[],c=s.filter((e=>e.targets.some((e=>!r.includes(e)))));return{...e,elements:i,...s.length>0?{animations:c}:{}}})),o=e.selection.filter((e=>!r.includes(e)));return{...e,pages:a,selection:o}};const Rn=function(e,t){let{elementId:n}=t;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=a.elements[0];let l,i=e.selection;if(null===n){if(o.isDefaultBackground)return e;const t=a.defaultBackgroundElement,n=a.elements.map((e=>e.isBackground?gn(e,["isBackground"]):e));l={...a,elements:[t,...n]},i=[t.id]}else{const t=a.elements.findIndex((e=>{let{id:t}=e;return t===n})),r=0===t;if(!(-1!==t)||r)return e;const s=o.isDefaultBackground?o:a.defaultBackgroundElement,c=a.elements.slice(1),d=t-1;e.selection.includes(o.id)&&(i=e.selection.filter((e=>e!==o.id)));const u=bn(c,d,0).map((e=>e.id===n?{...e,isBackground:!0,...Object.prototype.hasOwnProperty.call(e,"opacity")&&{opacity:100}}:e));e.selection.includes(n)&&e.selection.length>1&&(i=e.selection.filter((e=>e!==n))),l={...a,defaultBackgroundElement:s,elements:u}}const s=a.elements.find((e=>e.isBackground)),c=_n(a.animations,[n,s.id]),d=[...e.pages.slice(0,r),{...l,animations:c||[]},...e.pages.slice(r+1)];return{...e,pages:d,selection:i}};const Mn=function(e,t){let{elementId:n,position:r}=t;if(null===n&&1!==e.selection.length)return e;const a=null!==n?n:e.selection[0],o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l=e.pages[o];if(l.elements.length<3)return e;const i=l.elements.findIndex((e=>{let{id:t}=e;return t===a}));if(-1===i||l.elements[0].id===a)return e;const s=function(e){let{currentPosition:t,minPosition:n,maxPosition:r,desiredPosition:a}=e;if("number"==typeof a)return Math.min(r,Math.max(n,a));if("string"!=typeof a)return t;switch(a){case Pe:return r;case Re:return n;case Me:return Math.min(r,t+1);case Le:return Math.max(n,t-1);default:return t}}({currentPosition:i,minPosition:1,maxPosition:l.elements.length-1,desiredPosition:r});if(i===s)return e;const c=bn(l.elements,i,s),d=[...e.pages.slice(0,o),{...l,elements:c},...e.pages.slice(o+1)];return{...e,pages:d}};var Ln=n(4066),Dn=n(40981);function Bn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&"object"==typeof e?Object.assign({},...t.map((t=>e&&t in e?{[t]:e&&e[t]}:{}))):{}}const Fn=function(e,t){let{firstElement:n,secondId:r,shouldRetainAnimations:a=!0}=t;if(!n||!r)return e;const o=n.id,l=n,i=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),s=e.pages[i],c=s.elements.findIndex((e=>{let{id:t}=e;return t===r})),d=s.elements[c];if(!l||!l.resource||!d)return e;const u=d.isDefaultBackground?{defaultBackgroundElement:{...d,id:(0,he.default)()}}:{},p=["alt","type","resource","scale","focalX","focalY","tracks","poster"];d.isBackground?(p.push("flip"),p.push("overlay")):(p.push("link"),(0,Ln.canMaskHaveBorder)(d)&&(p.push("border"),(0,Ln.canSupportMultiBorder)(d)&&p.push("borderRadius")));const m=Bn(l,p),f=Bn(l,["width","height","x","y"]),g={...gn(d,["isDefaultBackground"]),...Dn.DEFAULT_ATTRIBUTES_FOR_MEDIA,...m,...d.isBackground?f:{}},h=s.elements.filter((e=>{let{id:t}=e;return t!==o})).map((e=>e.id===r?g:e)),E=_n(s.animations,a?[o]:[o,r]),b={...s,elements:h,...u,animations:E},y=[...e.pages.slice(0,i),b,...e.pages.slice(i+1)];return{...e,pages:y,selection:[r]}};const Hn=function(e,t){let{elementIds:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o={...a},l=[];if(n.forEach((e=>{const t=o.elements.findIndex((t=>{let{id:n}=t;return n===e}));if(t<0)return;const n=o.elements[t];if(n.isBackground)return;const{element:r,elementAnimations:i}=(0,A.duplicateElement)({element:n,animations:a.animations,existingElements:a.elements});l.push(r.id),o.animations=[...o.animations||[],...i],o.elements=[...o.elements.slice(0,t),n,r,...o.elements.slice(t+1)]})),!l.length)return e;const i=[...e.pages.slice(0,r),o,...e.pages.slice(r+1)];return{...e,pages:i,selection:l}},Un=["background","backgroundColor","backgroundTextMode","border","borderRadius","content","flip","font","fontSize","lineHeight","lockAspectRatio","opacity","overlay","padding","rotationAngle","textAlign"];const zn=function(e){if(1!==e.selection?.length)return e;const t=e.selection[0];if(!t)return e;const n=e.pages.find((t=>{let{id:n}=t;return n===e.current})),r=n.elements.findIndex((e=>{let{id:n}=e;return n===t}));if(-1===r)return e;const a=n.elements[r],o=(n.animations||[]).filter((e=>{let{targets:t}=e;return t.includes(a.id)})),l=Bn(a,Un);return{...e,copiedElementState:{animations:o,styles:l,type:a.type}}};const Gn=function(e,t){let{family:n,properties:r}=t;if(!n)return e;if(!e.pages.some((e=>e.elements.some((e=>"text"===e.type&&e?.font?.family===n)))))return e;const a=e.pages.map((e=>{const t=e.elements.map((e=>e?.font?.family===n?yn(e,r):e));return{...e,elements:t}}));return{...e,pages:a}};const jn=function(e,t){let{pageId:n}=t;return e.pages.some((e=>{let{id:t}=e;return t===n}))?e.current===n?e:{...e,current:n,selection:[]}:e};const Yn=function(e,t){let{elementIds:n}=t;const r="function"==typeof n?n(e.selection):n;if(!Array.isArray(r))return e;const a=[...new Set(r)];if(e.selection.length===a.length){if(hn(e.selection,a).length===e.selection.length)return e}const o=e.pages.find((t=>{let{id:n}=t;return n===e.current})),l=a.length>1?a.filter((e=>(e=>o.elements[0].id!==e)(e)&&(e=>{const t=o.elements.find((t=>t.id===e))?.resource?.isPlaceholder;return!t})(e))):a;return{...e,animationState:kn.STORY_ANIMATION_STATE.RESET,selection:l}};const Zn=function(e,t){let{elementId:n}=t;if(!n||e.selection.includes(n))return e;const r=e.pages.find((t=>{let{id:n}=t;return n===e.current})),a=r.elements[0].id===n,o=r.elements.find((e=>{let{id:t}=e;return t===n}))?.resource?.isPlaceholder,l=e.selection.length>0;return(a||o)&&l?e:e.selection.includes(r.elements[0].id)?{...e,selection:[n]}:{...e,selection:[...e.selection,n]}};const Wn=function(e,t){let{elementId:n}=t;return n&&e.selection.includes(n)?{...e,selection:e.selection.filter((e=>e!==n))}:e};const Vn=function(e,t){let{elementId:n}=t;if(!n)return e;const r=e.selection.includes(n),a=e.pages.find((t=>{let{id:n}=t;return n===e.current})).elements[0].id,o=a===n,l=e.selection.length>0;return r?{...e,selection:e.selection.filter((e=>e!==n))}:o&&l?e:e.selection.includes(a)?{...e,selection:[n]}:{...e,selection:[...e.selection,n]}};const $n=function(e,t){let{elementId:n,metaKey:r,shiftKey:a}=t;if(r)return Vn(e,{elementId:n});if(e.selection.length<=0||!a)return Yn(e,{elementIds:[n]});const o=e.selection[0],l=e.pages.find((t=>{let{id:n}=t;return n===e.current})).elements.map((e=>e.id)),i=l.findIndex((e=>e===o)),s=l.findIndex((e=>e===n)),c=Math.min(i,s),d=Math.max(i,s),u=l.slice(c,d+1);return o!==u[0]&&u.reverse(),Yn(e,{elementIds:u})};const qn=function(e,t){let{animationState:n}=t;return e.animationState===n?e:{...e,animationState:n}};const Xn=function(e,t){let{animations:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=a.animations||[],l=wn(o,n);if(0===l.length)return e;const i={...a,animations:[...o,...l]},s=[...e.pages.slice(0,r),i,...e.pages.slice(r+1)];return{...e,pages:s}};const Kn=function(e,t){let{pages:n,current:r,selection:a,story:o,capabilities:l}=t;if(!Array.isArray(n)||0===n.length)return e;const i="object"==typeof o?o:{},s="object"==typeof l?l:{},c=r??e.current,d=n.some((e=>{let{id:t}=e;return t===c}))?c:n[0].id;return{pages:n,current:d,selection:Array.isArray(a)?a:[],story:i,animationState:e.animationState,capabilities:s,copiedElementState:{}}};const Qn=function(e,t){let{properties:n}=t;return{...e,story:"function"==typeof n?n(e.story):{...e.story,...n}}},Jn=(0,u.createContext)({state:{},actions:{}});var er=n(49925),tr=n(82302);const nr=(0,u.createContext)({listeners:new Map});const rr=function(){const e=(0,u.useContext)(nr);return(0,u.useCallback)(((t,n)=>{n?(e.listeners.has(t)||e.listeners.set(t,(e=>((e,t)=>{e.preventDefault(),e.returnValue=t})(e,t))),window.addEventListener("beforeunload",e.listeners.get(t))):(window.removeEventListener("beforeunload",e.listeners.get(t)),e.listeners.delete(t))}),[e])},ar="set_state",or="clear",lr="replay",ir={entries:[],offset:0,requestedState:null,versionNumber:0},sr=e=>(t,n)=>{let{type:r,payload:a}=n;const o=t.entries[t.offset];switch(r){case ar:if(t.requestedState){if(Object.keys(t.requestedState).every((e=>t.requestedState[e]===a[e]))){const e=t.entries.indexOf(t.requestedState);if(o.pages!==t.requestedState.pages&&o.pages.length===t.requestedState.pages.length&&o.current!==t.requestedState.current){const n=o.pages.filter(((e,n)=>e!==t.requestedState.pages[n]));if(1===n.length){const r=n[0].id,a={...t.requestedState,current:r};return{...t,offset:e,requestedState:a}}}return{...t,offset:e,requestedState:null}}}return{entries:[a,...t.entries.slice(t.offset)].slice(0,e),versionNumber:t.versionNumber+1,offset:0,requestedState:null};case lr:return{...t,versionNumber:t.versionNumber+(t.offset-a),requestedState:t.entries[a]};case or:return{...ir};default:throw new Error(`Unknown history reducer action: ${r}`)}};const cr=function(e){const[t,n]=(0,u.useReducer)(sr(e),{...ir}),{entries:r,offset:a,requestedState:o,versionNumber:l}=t,i=r.length,s=(0,u.useCallback)((e=>{const t=a+e;return!(t<0||t>i-1)&&(n({type:lr,payload:t}),!0)}),[n,a,i]),c=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s("number"==typeof e?e:1)}),[s]),d=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s("number"==typeof e?-e:-1)}),[s]),p=(0,u.useCallback)((()=>n({type:or})),[n]);return{requestedState:o,stateToHistory:(0,u.useCallback)((e=>{n({type:ar,payload:e})}),[n]),clearHistory:p,currentEntry:r?.[a],offset:a,historyLength:i,versionNumber:l,undo:c,redo:d}},dr=(0,u.createContext)({state:{},actions:{}});function HistoryProvider(e){let{children:t,size:n}=e;const{requestedState:r,stateToHistory:a,clearHistory:o,currentEntry:l,offset:i,historyLength:s,undo:d,redo:p,versionNumber:m}=cr(n),[f,g]=(0,u.useState)(!1),h=rr(),E=(0,u.useRef)(1);(0,u.useEffect)((()=>(h("history",f),()=>h("history",!1))),[h,f]),(0,u.useEffect)((()=>{g(m!==E.current)}),[m]);const b=(0,u.useCallback)((()=>{E.current=m,g(!1)}),[m]),y={state:{currentEntry:l,hasNewChanges:f,requestedState:r,canUndo:i<s-1,canRedo:i>0,versionNumber:m},actions:{stateToHistory:a,clearHistory:o,resetNewChanges:b,undo:d,redo:p}};return(0,tr.useGlobalKeyDownEffect)({key:"undo",dialog:!0},(()=>d()),[d]),(0,tr.useGlobalKeyDownEffect)({key:"redo",dialog:!0},(()=>p()),[p]),c.createElement(dr.Provider,{value:y},t)}HistoryProvider.defaultProps={size:50};const ur=HistoryProvider;const pr=function(e){return(0,u.useContextSelector)(dr,e??u.identity)};const mr=function(e){const t=e.map((e=>JSON.stringify(e)));return Array.from(new Set(t)).map((e=>JSON.parse(e)))};function fr(e,t,n,r){const{title:{raw:a=""}={},status:o,slug:l,date:i,modified:s,excerpt:{raw:c=""}={},link:d,storyData:u,permalinkTemplate:p,stylePresets:m={},password:f,previewLink:g,editLink:h,embedPostLink:E,author:b,capabilities:y={publish:!1,"assign-author":!1},extras:_={},featuredMedia:v,publisherLogo:w,taxonomies:T,terms:S}=t,[C,I]=p?p.split(/%(?:postname|pagename)%/):[],x=void 0!==C&&void 0!==I?{prefix:C,suffix:I}:null,k="auto-draft"===o?"draft":o;r();const O=u&&(0,er.migrate)(u,u.version||0),N=O?.pages?.length>0?O.pages:[(0,A.createPage)()];m.colors?m.colors=mr(m.colors):m.colors=[],m.textStyles?m.textStyles=mr(m.textStyles):m.textStyles=[];n({pages:N,story:{storyId:e,title:a,status:k,author:b,date:i,modified:s,excerpt:c,slug:l,link:d,extras:_,featuredMedia:v,permalinkConfig:x,publisherLogo:w,password:f,previewLink:g,editLink:h,embedPostLink:E,currentStoryStyles:{colors:O?.currentStoryStyles?.colors?mr(O.currentStoryStyles.colors):[]},globalStoryStyles:m,autoAdvance:O?.autoAdvance,defaultPageDuration:O?.defaultPageDuration,backgroundAudio:O?.backgroundAudio,taxonomies:T,terms:S},selection:[],current:null,capabilities:y})}const gr=function(e){let{storyId:t,story:n,shouldLoad:r,restore:a}=e;const{actions:{getStoryById:o}}=X(),{actions:{clearHistory:l}}=pr();(0,u.useEffect)((()=>{t&&r&&(n?fr(t,n,a,l):o(t).then((e=>{fr(t,e,a,l)})))}),[t,n,r,a,o,l])};var hr=n(96905);const Er=function(e,t){return(0,u.useCallback)((()=>{try{const n=new URL(t);n.hash=window.location.hash,window.history.replaceState({id:e},(0,qe.default)(
/* translators: %d: current story id. */
(0,d.__)("Post %d","web-stories"),e),n.toString())}catch(e){}}),[e,t])},br=e=>{const t=[{src:"https://cdn.ampproject.org/v0.js"},{name:"amp-story",src:"https://cdn.ampproject.org/v0/amp-story-1.0.js"}],n={name:"amp-video",src:"https://cdn.ampproject.org/v0/amp-video-0.1.js"},r={name:"amp-story-captions",src:"https://cdn.ampproject.org/v0/amp-story-captions-0.1.js"};for(const{elements:a,backgroundAudio:o}of e){o?.resource?.src&&o?.tracks?.length>0&&(t.push(n),t.push(r));for(const{type:e,tracks:o}of a)switch(e){case"video":t.push(n),o?.length>0&&t.push(r);break;case"gif":t.push(n)}}return[...new Set(t)]};const yr=function Boilerplate(){return c.createElement(c.Fragment,null,c.createElement("style",{"amp-boilerplate":"",dangerouslySetInnerHTML:{__html:"body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}"}}),c.createElement("noscript",null,c.createElement("style",{"amp-boilerplate":"",dangerouslySetInnerHTML:{__html:"body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}"}})))};const _r=function(e){return/^#(?:[a-f0-9]{3}){1,2}$/i.test(e)};const vr=function CustomStyles(){const e=ae.PAGE_RATIO/ae.FULLBLEED_RATIO,t=1/e,n=ae.PAGE_RATIO,r=ae.FULLBLEED_RATIO,a=g.theme.colors.bg.primary,o=_r(a)?a:"#1B1D1C";return c.createElement("style",{"amp-custom":"",dangerouslySetInnerHTML:{__html:`\n              h1, h2, h3 { font-weight: normal; }\n          \n              amp-story-page {\n                background-color: ${o};\n              }\n\n              amp-story-grid-layer {\n                overflow: visible;\n              }\n\n              @media (max-aspect-ratio: 9 / 16)  {\n                @media (min-aspect-ratio: 320 / 678) {\n                  amp-story-grid-layer.grid-layer {\n                    margin-top: calc((100% / ${r} - 100% / ${n}) / 2);\n                  }\n                }\n              }\n          \n              @media not all and (min-resolution:.001dpcm) {\n                @media {\n                  p.text-wrapper > span {\n                    font-size: calc(100% - 0.5px);\n                  }\n                }\n              }\n\n              .page-fullbleed-area,\n              .page-background-overlay-area {\n                position: absolute;\n                overflow: hidden;\n                width: 100%;\n                left: 0;\n                height: calc(${e} * 100%);\n                top: calc((1 - ${e}) * 100% / 2);\n              }\n\n              .element-overlay-area {\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n              }\n\n              .page-safe-area {\n                overflow: visible;\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                width: 100%;\n                height: calc(${t} * 100%);\n                margin: auto 0;\n              }\n\n              .mask {\n                position: absolute;\n                overflow: hidden;\n              }\n\n              .fill {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                margin: 0;\n              }\n\n              @media (prefers-reduced-motion: no-preference) {\n                .animation-wrapper {\n                  opacity: var(--initial-opacity);\n                  transform: var(--initial-transform);\n                }\n              }\n\n              amp-story-grid-layer.align-bottom {\n                align-content: end;\n                padding: 0;\n              }\n\n              .captions-area {\n                padding: 0 32px 0;\n              }\n\n              amp-story-captions {\n                margin-bottom: 16px;\n                text-align: center;\n              }\n\n              amp-story-captions span {\n                display: inline-block;\n                margin: 0;\n                padding: 6px 12px;\n                vertical-align: middle;\n                border-radius: 15px;\n                background: rgba(11, 11, 11, 0.6);\n                color: rgba(255, 255, 255, 1);\n                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;;\n                font-size: calc(4 * var(--story-page-vw));\n                line-height: 1.4;\n                word-break: break-word;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n              }\n              `}})};const wr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"swap";const n=new URL("https://fonts.googleapis.com/css2");n.searchParams.append("display",t);for(const{family:t,variants:r=[]}of e){const e=r.reduce(((e,t)=>{let[n,r]=t;return 1!==n||e.includes("ital")||e.push("ital"),r&&400!==r&&!e.includes("wght")&&e.push("wght"),e}),[]).sort();let a=t;const o=e.join(",");o&&(a+=":"+o);const l=r.sort(((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:e[1]-t[1])).map((t=>{let[n,r]=t;const a=[];return e.includes("ital")&&a.push(n),e.includes("wght")&&a.push(r),a})).join(";"),i="400"===l;l&&!i&&(a+="@"+l),n.searchParams.append("family",a)}return decodeURI(n.toString())};const Tr=function(e,t){const n=function(e){const t=e.split(/[#?]/)[0].split(".").pop().trim();switch(t){case"woff":case"woff2":return t;case"ttf":return"truetype";case"otf":return"opentype";default:return null}}(t);return n?`@font-face {\n    font-family: "${e}";\n    src: url('${t}') format('${n}');\n    font-weight: normal;\n    font-display:swap;\n  }`:null};var Sr=n(56862);const Cr=(e,t)=>e.some((e=>e[0]===t[0]&&e[1]===t[1])),Ir=(e,t)=>Math.abs(e[0]+e[1]-t[0]-t[1]),Ar=(e,t)=>e.reduce(((e,n)=>Ir(n,t)<Ir(e,t)?n:e));const xr=function FontDeclarations(e){let{pages:t}=e;const n=new Map;for(const{elements:e}of t){const t=e.filter((e=>{let{type:t}=e;return"text"===t}));for(const{font:e,content:r}of t){const{service:t,family:a,variants:o=[],url:l}=e;if(!t||"system"===t)continue;const i=n.get(t)||new Map;n.set(t,i);const s=i.get(a)||{family:a,variants:[],url:l},c=(0,Sr.getFontVariants)(r);if(o.length>0)for(const e of c){const t=Ar(o,e),n=Cr(s.variants,t),r=Cr(o,t);!n&&r&&s.variants.push(t)}i.set(a,s)}}return c.createElement(c.Fragment,null,Array.from(n.keys()).map((e=>{const t=n.get(e);switch(e){case"fonts.google.com":return c.createElement("link",{key:e,href:wr(Array.from(t.values())),rel:"stylesheet"});case"custom":return Array.from(t.values()).map((e=>{let{family:t,url:n}=e;const r=Tr(t,n);return c.createElement("style",{key:t,dangerouslySetInnerHTML:{__html:r}})}));default:return null}})))};var kr=n(18535);const Or=7,Nr=!0;var Pr=n(1787);function Rr(e,t){try{return new URL(t,e).href}catch(e){return t}}function Mr(e){try{return new URL(e),!0}catch{return!1}}function Lr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https";return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}function Dr(){return Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dr.apply(this,arguments)}const Br=function WithLink(e){let{element:t,children:n,...r}=e;const a=t.link||{},{url:o,icon:l,desc:i,rel:s=[]}=a;if(!o)return n;s.push("noreferrer");const d=Lr(o);return c.createElement("a",Dr({href:d,"data-tooltip-icon":l||void 0,"data-tooltip-text":i,target:"_blank",rel:s.join(" ")},r),n)};const Fr=function OutputElement(e){let{element:t}=e;const{id:n,opacity:r,type:a,border:o,backgroundColor:l,backgroundTextMode:i,overlay:s}=t,{Output:d}=(0,A.getDefinitionForType)(a),u=(0,Pr.getBox)(t,100,100),{x:p,y:m,width:f,height:g,rotationAngle:h}=u,E={backgroundClip:"content-box",...(0,kr.default)(l)};return c.createElement("div",{style:{position:"absolute",pointerEvents:"none",left:p?`${p}%`:0,top:m?`${m}%`:0,width:`${f}%`,height:`${g}%`,...(0,Ln.shouldDisplayBorder)(t)?(0,Ln.getBorderPositionCSS)({...o,width:`${f}%`,height:`${g}%`,posTop:`${m}%`,posLeft:`${p}%`}):null,transform:h?`rotate(${h}deg)`:null,opacity:void 0!==r?r/100:null}},c.createElement(kn.StoryAnimation.AMPWrapper,{target:n},c.createElement(Ln.OutputWithMask,{className:"text"===t.type?void 0:"mask",element:t,box:u,id:"el-"+n,style:{...(0,Ln.shouldDisplayBorder)(t)?(0,Ln.getBorderStyle)(t):null,pointerEvents:"initial",width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0,zIndex:0,...(0,Ln.getBorderRadius)(t),...i===Dn.BACKGROUND_TEXT_MODE.FILL?E:null},skipDefaultMask:!0},c.createElement(Br,{element:t,style:{width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0}},c.createElement(d,{element:t,box:u})),s&&c.createElement("div",{className:"element-overlay-area",style:(0,kr.default)(s)}))))};function Hr(){return Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hr.apply(this,arguments)}const Ur=function BackgroundAudio(e){let{backgroundAudio:t,id:n}=e;const{resource:r,tracks:a,loop:o}=t||{},{mimeType:l,src:i}=r,s={loop:o?"loop":void 0,id:`page-${n}-background-audio`,"captions-id":a?.length>0?`el-${n}-captions`:void 0},d={type:l,src:i};return c.createElement("amp-story-grid-layer",{template:"fill"},c.createElement("amp-video",Hr({autoPlay:"autoplay",layout:"nodisplay",poster:""},s),c.createElement("source",d),a&&a.map(((e,t)=>{let{srclang:n,label:r,kind:a,track:o,id:l}=e;return c.createElement("track",{srcLang:n,label:r,kind:a,src:o,key:l,default:0===t})}))))};const zr=function(e){return e.sort(((e,t)=>e.y-t.y)).reduce(((e,t)=>{let{id:n,fontSize:r,content:a}=t;if(a.length<=3)return e.set(n,"p"),e;const o=Array.from(e.values()).includes("h1");return r>=36&&!o?(e.set(n,"h1"),e):(r>=27?e.set(n,"h2"):r>=21?e.set(n,"h3"):e.set(n,"p"),e)}),new Map)};const Gr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((e=>{let{type:t,loop:n}=e;const{isMedia:r}=(0,A.getDefinitionForType)(t);return r&&!n})).reduce(((e,n)=>n?.resource?.length?n?.resource?.length<t||e?.resource?.length>n?.resource?.length?e:n:e),void 0)};const jr=function(e){let{animations:t,defaultPageDuration:n=Or,elements:r,backgroundAudio:a,id:o}=e;const{resource:l,loop:i}=a||{},s=(0,kn.getTotalDuration)({animations:t})/1e3,c=!i&&l?.length?l.length:0,d=Gr(r,Math.max(s||1,c));if(d?.id)return`el-${d?.id}-media`;const u=Math.max(s||0,c,n);return u>c?`${u}s`:`page-${o}-background-audio`};const Yr=function Outlink(e){let{ctaText:t,url:n,icon:r,theme:a,rel:o=[]}=e;return c.createElement("amp-story-page-outlink",{layout:"nodisplay","cta-image":r||void 0,theme:a},c.createElement("a",{href:n,rel:o.join(" ")},t||(0,d.__)("Learn more","web-stories")))},Zr=`${ae.PAGE_WIDTH}:${ae.PAGE_HEIGHT}`;const Wr=function OutputPage(e){let{page:t,autoAdvance:n=Nr,defaultPageDuration:r=Or}=e;const{id:a,animations:o,elements:l,backgroundColor:i,backgroundAudio:s={},pageAttachment:d={}}=t,[u,...p]=l,m=u?.resource?.baseColor,f=m?{backgroundColor:m}:{backgroundColor:"white",...(0,kr.default)(i)},g=n?jr({animations:o,elements:l,defaultPageDuration:r,backgroundAudio:s,id:a}):void 0,h=zr(p.filter((e=>{let{type:t}=e;return"text"===t}))),E=p.map((e=>{const{id:t,type:n,tagName:r="auto"}=e;return"text"===n&&"auto"===r&&(e.tagName=h.get(t)),d?.url&&(0,A.isElementBelowLimit)(e)&&delete e.link,e})),b=l.filter((e=>{let{type:t,tracks:n}=e;return t===A.ELEMENT_TYPES.VIDEO&&n?.length>0})).map((e=>{let{id:t}=e;return`el-${t}-captions`})),y=s.resource?.src,_=s.tracks?.length>0,v=!1===s.loop&&s.resource?.length,w=_||v;return y&&_&&b.push(`el-${a}-captions`),c.createElement("amp-story-page",{id:a,"auto-advance-after":g,"background-audio":y&&!w?y:void 0},c.createElement(kn.StoryAnimation.Provider,{animations:o,elements:l},c.createElement(kn.StoryAnimation.AMPAnimations,null),u&&c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":Zr,class:"grid-layer"},c.createElement("div",{className:"page-fullbleed-area",style:f},c.createElement("div",{className:"page-safe-area"},c.createElement(Fr,{element:u}),u.overlay&&c.createElement("div",{className:"page-background-overlay-area",style:(0,kr.default)(u.overlay)})))),c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":Zr,class:"grid-layer"},c.createElement("div",{className:"page-fullbleed-area"},c.createElement("div",{className:"page-safe-area"},E.map((e=>c.createElement(Fr,{key:e.id,element:e}))))))),y&&w&&c.createElement(Ur,{backgroundAudio:s,id:a}),b.length>0&&c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":Zr,class:"grid-layer align-bottom"},c.createElement("div",{className:"captions-area"},b.map((e=>c.createElement("amp-story-captions",{key:e,id:e,layout:"fixed-height",height:"100"}))))),d?.url&&c.createElement(Yr,d))};const Vr=function(e){const t=[];if(0===e.length)return t;for(const{type:n,resource:r,isBackground:a}of e[0].elements){if(!["image","video","gif"].includes(n))continue;if(!a)continue;const e=r?.output?.src||r.src;t.push({url:e,type:"image"===n?"image":"video"})}return t};const $r=function OutputStory(e){let{story:{featuredMedia:t,link:n,title:r,autoAdvance:a,defaultPageDuration:o,backgroundAudio:l,publisherLogo:i},pages:s,metadata:{publisher:d},flags:u}=e;const p=br(s),m=Vr(s),f=t?.url||"",g=i?.url||"";return c.createElement("html",{amp:"",lang:"en"},c.createElement("head",null,c.createElement("meta",{charSet:"utf-8"}),c.createElement("meta",{name:"viewport",content:"width=device-width,minimum-scale=1,initial-scale=1"}),p.map((e=>{let{name:t,src:n}=e;return c.createElement("script",{key:n,async:"async",src:n,"custom-element":t})})),c.createElement(xr,{pages:s}),m.map((e=>{let{url:t,type:n}=e;return c.createElement("link",{key:t,href:t,rel:"preload",as:n})})),c.createElement(yr,null),c.createElement(vr,null),c.createElement("meta",{name:"web-stories-replace-head-start"}),c.createElement("title",null,r),n&&c.createElement("link",{rel:"canonical",href:n}),c.createElement("meta",{name:"web-stories-replace-head-end"})),c.createElement("body",null,c.createElement("amp-story",{standalone:"",publisher:d,"publisher-logo-src":g,title:r,"poster-portrait-src":f,"background-audio":l?.resource?.src??void 0},s.map((e=>c.createElement(Wr,{key:e.id,page:e,autoAdvance:a,defaultPageDuration:o,flags:u}))))))};function qr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,u.renderToStaticMarkup)(c.createElement($r,{story:e,pages:t,metadata:n,flags:r}))}const Xr=function(e){let{story:t,pages:n,metadata:r,flags:a}=e;const{terms:o,...l}=Bn(t,["title","status","author","date","modified","slug","excerpt","featuredMedia","password","currentStoryStyles","globalStoryStyles","autoAdvance","defaultPageDuration","backgroundAudio","terms"]);return{content:qr(t,n,r,a),pages:n,...l,...o,meta:{web_stories_publisher_logo:t.publisherLogo?.id}}};const Kr=function(e){let{storyId:t,pages:n,story:r,updateStory:a}=e;const{actions:{saveStoryById:o}}=X(),{actions:{resetNewChanges:l}}=pr(),{metadata:i,flags:s}=Y(),{showSnackbar:c}=(0,hr.useSnackbar)(),[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),{editLink:h}=r,E=Er(t,h),b=(0,u.useCallback)((e=>{m(!0);const u=["publish","future","private"].includes(r.status),p=(0,L.getTimeTracker)("load_save_story");return o({storyId:t,...Xr({story:r,pages:n,metadata:i,flags:s}),...e}).then((e=>{const{status:t,slug:n,link:r,previewLink:o,editLink:l,embedPostLink:i,featuredMedia:s}=e;a({properties:{status:t,slug:n,link:r,previewLink:o,editLink:l,embedPostLink:i,featuredMedia:s}}),E();const c=["publish","future","private"].includes(e.status);g(!u&&c)})).catch((()=>{c({message:(0,d.__)("Failed to save the story","web-stories"),dismissible:!0})})).finally((()=>{m(!1),l(),p()}))}),[r,n,i,o,t,a,E,c,l,s]);return{saveStory:b,isSaving:p,isFreshlyPublished:f}};function Qr(e){return new URLSearchParams(e.startsWith("#")?e.substr(1):e)}const Jr=function(e,t){const[n,r]=(0,u.useState)((()=>{const n=Qr(window.location.hash);let r=t;try{n.has(e)&&(r=JSON.parse(decodeURI(n.get(e))))}catch(e){}return r}));return(0,u.useEffect)((()=>{const t=Qr(window.location.hash);n?t.set(e,encodeURI(JSON.stringify(n))):t.delete(e),(window.location.hash||t.toString())&&history.replaceState(history.state,"",`#${t.toString()}`)}),[e,n]),[n,r]};var ea=n(30738),ta=n.n(ea);const na=function(e){return t=>{Array.isArray(e)&&e.forEach((e=>{const n=e.split(".");if(!n.length)return;if(1===n.length)return void delete t[n[0]];const r=n.pop(),a=n.pop(),o=n.reduce(((e,t)=>e?.[t]||e),t);Object.prototype.hasOwnProperty.call(o,a)&&"object"==typeof o[a]&&o[a]&&delete o[a][r]}))}},ra=["resource.baseColor","resource.blurHash","resource.id","resource.isMuted","resource.posterId","resource.poster"];const aa=function(e){let{story:t,current:n,pages:r,selection:a,capabilities:o}=e;const{state:{currentEntry:l},actions:{stateToHistory:i}}=pr(),s=(0,u.useRef)();(0,u.useEffect)((()=>{l&&(s.current=ta()(l))}),[l]);const c=(0,u.useRef)(),d=(0,u.useRef)();(0,u.useEffect)((()=>{c.current=n,d.current=a}),[n,a]);const p=e=>ta()(e).map((e=>(e.elements.forEach(na(ra)),e)));(0,u.useEffect)((()=>{let e=!1;if(ra.length&&s.current&&r?.length){const n={story:t,capabilities:o};if(Object.keys(n).every((e=>JSON.stringify(n[e])===JSON.stringify(s.current[e])))){const t=p(r),n=p(s.current.pages);e=JSON.stringify(t)===JSON.stringify(n)}}e||i({story:t,current:c.current,selection:d.current,pages:r,capabilities:o})}),[t,r,i,o])};const oa=function(e){let{restore:t}=e;const{state:{requestedState:n}}=pr();(0,u.useEffect)((()=>{if(!n)return;const{current:e,pages:r,selection:a,story:o,capabilities:l}=n;t({pages:r,current:e,story:o,selection:a,capabilities:l})}),[t,n])},la={addPage:e=>t=>{let{page:n}=t;return e({type:zt,payload:{page:n,position:null}})},addPageAt:e=>t=>{let{page:n,position:r}=t;return e({type:zt,payload:{page:n,position:r}})},copySelectedElement:e=>()=>e({type:en}),deletePage:e=>t=>{let{pageId:n}=t;return e({type:jt,payload:{pageId:n}})},deleteCurrentPage:e=>()=>e({type:jt,payload:{pageId:null}}),updatePageProperties:e=>t=>{let{pageId:n,properties:r}=t;return e({type:Gt,payload:{pageId:n,properties:r}})},updateCurrentPageProperties:e=>t=>{let{properties:n}=t;return e({type:Gt,payload:{pageId:null,properties:n}})},arrangePage:e=>t=>{let{pageId:n,position:r}=t;return e({type:Yt,payload:{pageId:n,position:r}})},setCurrentPage:e=>t=>{let{pageId:n}=t;return e({type:nn,payload:{pageId:n}})},addElements:e=>t=>{let{elements:n}=t;return e({type:Wt,payload:{elements:n}})},addElement:e=>t=>{let{element:n}=t;return e({type:Wt,payload:{elements:[n]}})},deleteElementsById:e=>t=>{let{elementIds:n}=t;return e({type:Zt,payload:{elementIds:n}})},deleteElementById:e=>t=>{let{elementId:n}=t;return e({type:Zt,payload:{elementIds:[n]}})},deleteSelectedElements:e=>()=>e({type:Zt,payload:{elementIds:null}}),updateElementsById:e=>t=>{let{elementIds:n,properties:r}=t;return e({type:Vt,payload:{elementIds:n,properties:r}})},updateElementsByResourceId:e=>t=>{let{id:n,properties:r}=t;return e({type:$t,payload:{id:n,properties:r}})},deleteElementsByResourceId:e=>t=>{let{id:n}=t;return e({type:qt,payload:{id:n}})},updateElementById:e=>t=>{let{elementId:n,properties:r}=t;return e({type:Vt,payload:{elementIds:[n],properties:r}})},duplicateElementsById:e=>t=>{let{elementIds:n}=t;return e({type:Jt,payload:{elementIds:n}})},updateSelectedElements:e=>t=>{let{properties:n}=t;return e({type:Vt,payload:{elementIds:null,properties:n}})},combineElements:e=>t=>{let{firstElement:n,secondId:r,shouldRetainAnimations:a}=t;return e({type:Qt,payload:{firstElement:n,secondId:r,shouldRetainAnimations:a}})},setBackgroundElement:e=>t=>{let{elementId:n}=t;return e({type:Xt,payload:{elementId:n}})},clearBackgroundElement:e=>()=>e({type:Xt,payload:{elementId:null}}),arrangeElement:e=>t=>{let{elementId:n,position:r}=t;return e({type:Kt,payload:{elementId:n,position:r}})},arrangeSelection:e=>t=>{let{position:n}=t;return e({type:Kt,payload:{elementId:null,position:n}})},setSelectedElementsById:e=>t=>{let{elementIds:n}=t;return e({type:rn,payload:{elementIds:n}})},clearSelection:e=>()=>e({type:rn,payload:{elementIds:[]}}),addElementToSelection:e=>t=>{let{elementId:n}=t;return e({type:an,payload:{elementId:n}})},removeElementFromSelection:e=>t=>{let{elementId:n}=t;return e({type:on,payload:{elementId:n}})},toggleElementInSelection:e=>t=>{let{elementId:n}=t;return e({type:ln,payload:{elementId:n}})},updateAnimationState:e=>t=>{let{animationState:n}=t;return e({type:dn,payload:{animationState:n}})},addAnimations:e=>t=>{let{animations:n}=t;return e({type:un,payload:{animations:n}})},updateStory:e=>t=>{let{properties:n}=t;return e({type:cn,payload:{properties:n}})},toggleLayer:e=>t=>{let{metaKey:n,shiftKey:r,elementId:a}=t;return e({type:sn,payload:{metaKey:n,shiftKey:r,elementId:a}})},updateElementsByFontFamily:e=>t=>{let{family:n,properties:r}=t;return e({type:tn,payload:{family:n,properties:r}})}},ia={restore:e=>t=>{let{pages:n,selection:r,current:a,story:o,capabilities:l}=t;return e({type:pn,payload:{pages:n,selection:r,current:a,story:o,capabilities:l}})}};const sa=function(e,t){let{type:n,payload:r}=t;switch(n){case zt:return Tn(e,r);case jt:return Sn(e,r);case Gt:return Cn(e,r);case Yt:return In(e,r);case nn:return jn(e,r);case Wt:return An(e,r);case Zt:return xn(e,r);case Vt:return On(e,r);case $t:return Nn(e,r);case qt:return Pn(e,r);case Qt:return Fn(e,r);case Xt:return Rn(e,r);case Kt:return Mn(e,r);case rn:return Yn(e,r);case an:return Zn(e,r);case on:return Wn(e,r);case ln:return Vn(e,r);case sn:return $n(e,r);case Jt:return Hn(e,r);case cn:return Qn(e,r);case dn:return qn(e,r);case un:return Xn(e,r);case en:return zn(e,r);case pn:return Kn(e,r);case tn:return Gn(e,r);default:return e}},ca={pages:[],capabilities:{},current:null,selection:[],story:{},animationState:kn.STORY_ANIMATION_STATE.RESET,copiedElementState:{}};const da=function(e){const[t,n]=(0,u.useReducer)(sa,{...ca,...e}),{internal:r,api:a}=(0,u.useMemo)((()=>{const e=e=>Object.keys(e).reduce(((t,r)=>({...t,[r]:e[r](n)})),{});return{internal:e(ia),api:e(la)}}),[n]);return{state:t,internal:r,api:a}};const ua=function(e){let{storyId:t,pages:n,story:r}=e;const{actions:{autoSaveById:a}}=X(),{metadata:o,flags:l}=Y(),[i,s]=(0,u.useState)(!1);return{autoSave:(0,u.useCallback)((e=>(s(!0),a({storyId:t,...Xr({story:r,pages:n,metadata:o,flags:l}),...e}).finally((()=>s(!1))))),[r,n,o,a,t,l]),isAutoSaving:i}};var pa=n(45697),ma=n.n(pa);const fa={currentStory:$r,previousStory:$r,dispatchStoryEvent:ma().func.isRequired},ga={onInitialElementAdded:"onInitialElementAdded",onSecondPageAdded:"onSecondPageAdded",onFifthPageAdded:"onFifthPageAdded",onReplaceBackgroundMedia:"onReplaceBackgroundMedia",onReplaceForegroundMedia:"onReplaceForegroundMedia"};function OnInitialElementAddedRegister(e){let{currentStory:t,dispatchStoryEvent:n}=e;const r=(0,u.useRef)(!1);return(0,u.useEffect)((()=>{var e;r.current||(0===(e=t)?.pages?.length||1===e?.pages?.length&&e?.pages[0]?.elements?.length<=1)||(n(ga.onInitialElementAdded),r.current=!0)}),[n,t]),null}function OnPageAddedRegister(e){let{currentStory:t,dispatchStoryEvent:n}=e;const r=(0,u.useRef)({[ga.onSecondPageAdded]:!1,[ga.onFifthPageAdded]:!1});return(0,u.useEffect)((()=>{!r.current[ga.onSecondPageAdded]&&t?.pages?.length>=2&&(n(ga.onSecondPageAdded),r.current[ga.onSecondPageAdded]=!0)}),[n,t?.pages]),(0,u.useEffect)((()=>{!r.current[ga.onFifthPageAdded]&&t?.pages?.length>=5&&(n(ga.onFifthPageAdded),r.current[ga.onFifthPageAdded]=!0)}),[n,t?.pages]),null}OnInitialElementAddedRegister.propType=fa,OnPageAddedRegister.propType=fa;const ha=[OnInitialElementAddedRegister,OnPageAddedRegister],Ea=(0,u.createContext)({state:{},actions:{}});function ba(){return Object.values(ga).reduce(((e,t)=>({...e,[t]:new Map})),{})}function ya(e,t){let[n]=e;return[t,n]}function StoryTriggersProvider(e){let{children:t,story:n}=e;const[[r,a],o]=(0,u.useReducer)(ya,[n,null]),l=(0,u.useMemo)(ba,[]);(0,u.useEffect)((()=>o(n)),[n]);const i=(0,u.useCallback)(((e,t)=>{const n=Symbol();return l[e].set(n,t),()=>l[e].delete(n)}),[l]),s=(0,u.useCallback)((e=>{l[e]?.forEach((e=>e(r)))}),[l,r]),d=(0,u.useMemo)((()=>[i,s]),[i,s]);return c.createElement(Ea.Provider,{value:d},c.createElement(c.Fragment,null,ha.map((e=>c.createElement(e,{key:e.name,currentStory:r,previousStory:a,dispatchStoryEvent:s}))),t))}function _a(e){return e[0]}function va(e){return e[1]}function wa(e,t){const n=(0,u.useContextSelector)(Ea,_a);(0,u.useEffect)((()=>n(e,t)),[e,t,n])}const Ta=function StoryProvider(e){let{storyId:t,initialEdits:n,children:r}=e;const[a,o]=Jr("page",null),{state:l,api:i,internal:{restore:s}}=da({current:a}),{pages:d,current:p,selection:m,story:f,animationState:g,capabilities:h,copiedElementState:E}=l;(0,u.useEffect)((()=>o(p)),[p,o]);let b=null,y=null,_=null,v=null;p&&(b=p,y=d.findIndex((e=>{let{id:t}=e;return t===p})),_=y+1,v=d[y]);const w=(0,u.useMemo)((()=>m.length>0?m:je),[m]),T=!v,S=v?.elements,C=(0,u.useMemo)((()=>{if(T)return je;const e=S.filter((e=>{let{id:t}=e;return m.includes(t)}));return e.length>0?e:je}),[T,S,m]),I=v?.animations,A=(0,u.useMemo)((()=>{if(T)return je;const e=(I||[]).reduce(((e,t)=>{let{targets:n,...r}=t;return n.some((e=>m.includes(e)))?[...e,{targets:n,...r}]:e}),[]);return e.length>0?e:je}),[T,m,I]),x=C.length>0,k=0===d.length;gr({restore:s,shouldLoad:k,storyId:t,story:n?.story}),aa({pages:d,current:p,selection:m,story:f,capabilities:h}),oa({restore:s});const{updateStory:O}=i,{saveStory:N,isSaving:P,isFreshlyPublished:R}=Kr({storyId:t,pages:d,story:f,updateStory:O}),{autoSave:M,isAutoSaving:L}=ua({storyId:t,pages:d,story:f}),D=(0,u.useMemo)((()=>({pages:d,currentPage:v,currentPageId:b,currentPageIndex:y,currentPageNumber:_,selectedElementIds:w,selectedElements:C,selectedElementAnimations:A,hasSelection:x,story:f,animationState:g,capabilities:h,meta:{isSaving:P||L,isSavingStory:P,isAutoSavingStory:L,isFreshlyPublished:R},copiedElementState:E})),[d,v,b,y,_,w,C,A,x,f,g,h,P,L,R,E]),B={state:D,actions:{...i,autoSave:M,saveStory:N},internal:{reducerState:l,restore:s}};return c.createElement(Jn.Provider,{value:B},c.createElement(StoryTriggersProvider,{story:D},r))};const Sa=function(e){return(0,u.useContextSelector)(Jn,e??u.identity)};const Ca=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n}}=X(),{actions:{uploadFile:r}}=Bt(),{storyId:a}=Y(),{updateElementsByResourceId:o}=Sa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),l=(0,u.useCallback)((async(e,t,o)=>{if(!o)return{};o.name||(o.name=t);const l=await r(o,{mediaId:e,mediaSource:"poster-generation"}),{id:i,src:s,width:c,height:d}=l;e&&await n(e,{posterId:i,storyId:a});try{await(0,ee.default)({src:s})}catch{}return{posterId:i,poster:s,posterWidth:c,posterHeight:d}}),[a,n,r]),i=(0,u.useCallback)((async(e,n)=>{const r=(0,L.getTimeTracker)("load_video_poster");try{const a=Ht(n),i=Ye(a),s=await Ut(n),{posterId:c,poster:d,posterWidth:u,posterHeight:p}=await l(e,i,s),m=u&&p&&{width:u,height:p}||null;o({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,posterId:c,poster:d,...m}}}}),t({id:e,data:{posterId:c,poster:d,...m}})}catch(e){(0,L.trackError)("video_poster_generation",e.message)}finally{r()}}),[l,o,t]);return{uploadVideoFrame:i,uploadVideoPoster:l}},Ia=(0,u.createContext)({state:{},actions:{}});const Aa=function CurrentUserProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),{actions:{getCurrentUser:a,updateCurrentUser:o}}=X();(0,u.useEffect)((()=>{let e=!0;return a&&!Object.keys(n).length&&a().then((t=>{e&&r(t)})),()=>{e=!1}}),[n,a]);const l=(0,u.useCallback)((e=>o?o(e).then(r):null),[o]),i=(0,u.useCallback)((()=>l({mediaOptimization:!n.mediaOptimization})),[n,l]),s={state:{currentUser:n},actions:{toggleWebStoriesMediaOptimization:i,updateCurrentUser:l}};return c.createElement(Ia.Provider,{value:s},t)};const xa=function(e){return(0,u.useContextSelector)(Ia,e??u.identity)},ka=["video/3gpp","video/3gpp2","video/MP2T","video/mp4","video/mpeg","video/ogg","video/quicktime","video/webm","video/x-flv","video/x-h261","video/x-h263","video/x-m4v","video/x-matroska","video/x-mjpeg","video/x-ms-asf","video/x-msvideo","video/x-nut"],Oa=e=>{let{size:t}=e;return t>=be},Na={CODEC:["-vcodec","libx264"],SCALE:["-vf",`scale='min(${Se},iw)':'min(${Te},ih)':'force_original_aspect_ratio=decrease',pad='width=ceil(iw/2)*2:height=ceil(ih/2)*2'`],FPS:["-r","24"],FASTSTART:["-movflags","+faststart"],COLOR_PROFILE:["-pix_fmt","yuv420p"],PRESET:["-preset","fast"],SEEK_TO_START:["-ss","00:00:01.000"],SINGLE_FRAME:["-frames:v","1"]},Pa=[...Na.CODEC,...Na.SCALE,...Na.FPS,...Na.FASTSTART,...Na.COLOR_PROFILE,...Na.PRESET];const Ra=function(){const{ffmpegCoreUrl:e,capabilities:{hasUploadMediaAction:t}}=Y(),{currentUser:r}=xa((e=>{let{state:t}=e;return{currentUser:t.currentUser}})),a=Boolean(window?.crossOriginIsolated),o=(0,u.useCallback)((async t=>{const{createFFmpeg:r,fetchFile:a}=await n.e(7098).then(n.t.bind(n,15045,23)),o=r({corePath:e,log:false});return await o.load(),o.FS("writeFile",t.name,await a(t)),o}),[e]),l=(0,u.useCallback)((async e=>{const t=(0,L.getTimeTracker)("load_video_poster_ffmpeg");let n;try{n=await o(e);const r=(0,he.default)()+"."+ye,a=K(e),l=Ye(a);await n.run(...Na.SEEK_TO_START,"-i",e.name,...Na.SINGLE_FRAME,...Na.SCALE,...Na.COLOR_PROFILE,...Na.PRESET,r);const i=n.FS("readFile",r);return me(new Blob([i.buffer],{type:_e}),l,_e)}catch(e){throw console.error(e),(0,L.trackError)("video_poster_generation_ffmpeg",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),i=(0,u.useCallback)((async e=>{const t=(0,L.getTimeTracker)("load_video_transcoding");let n;try{n=await o(e);const r=(0,he.default)()+"."+we,a=K(e)+"."+we;await n.run("-i",e.name,...Pa,r);const l=n.FS("readFile",r);return me(new Blob([l.buffer],{type:ve}),a,ve)}catch(e){throw console.error(e),(0,L.trackError)("video_transcoding",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),s=(0,u.useCallback)((async(e,t,n)=>{const r=(0,L.getTimeTracker)("load_trim_video_transcoding");let a;try{a=await o(e);const l=e?.type||ve,i=Rt(l),s=(0,he.default)()+"."+i,c=K(e)+"-trimmed."+i;await a.run("-i",e.name,"-ss",t,"-to",n,s);const d=a.FS("readFile",s);return me(new Blob([d.buffer],{type:l}),c,l)}catch(e){throw console.log(e),(0,L.trackError)("trim_video_transcoding",e.message),e}finally{try{a.exit()}catch{}r()}}),[o]),c=(0,u.useCallback)((async e=>{const t=(0,L.getTimeTracker)("load_mute_video_transcoding");let n;try{n=await o(e);const r=e?.type||ve,a=Rt(r),l=(0,he.default)()+"."+a,i=K(e)+"-muted."+a;await n.run("-i",e.name,"-vcodec","copy","-an",l);const s=n.FS("readFile",l);return me(new Blob([s.buffer],{type:r}),i,r)}catch(e){throw console.log(e),(0,L.trackError)("mute_video_transcoding",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),d=(0,u.useCallback)((async e=>{const t=(0,L.getTimeTracker)("load_gif_conversion");let n;try{n=await o(e);const r=(0,he.default)()+"."+we,a=K(e)+"."+we;await n.run("-i",e.name,...Pa,r);const l=n.FS("readFile",r);return new me(new Blob([l.buffer],{type:ve}),a,ve)}catch(e){throw console.error(e),(0,L.trackError)("gif_conversion",e.message),e}finally{try{n.exit()}catch(e){}t()}}),[o]),p=(0,u.useCallback)((e=>ka.includes(e.type)),[]),m=Boolean(r?.mediaOptimization),f=t&&m&&a;return(0,u.useMemo)((()=>({isTranscodingEnabled:f,canTranscodeFile:p,isFileTooLarge:Oa,transcodeVideo:i,stripAudioFromVideo:c,getFirstFrameOfVideo:l,convertGifToVideo:d,trimVideo:s})),[f,p,i,c,l,d,s])},Ma={PENDING:"PENDING",CANCELLED:"CANCELLED",UPLOADED:"UPLOADED",UPLOADING:"UPLOADING",TRANSCODED:"TRANSCODED",TRANSCODING:"TRANSCODING",MUTING:"MUTING",MUTED:"MUTED",TRIMMING:"TRIMMING",TRIMMED:"TRIMMED",FINISHED:"FINISHED"};function La(e,t){let{payload:{file:n,resource:r,onUploadStart:a,onUploadProgress:o,onUploadError:l,onUploadSuccess:i,additionalData:s,posterFile:c,muteVideo:d,trimData:u,originalResourceId:p,elementId:m}}=t;const f=(0,he.default)();r.id||(r.id=(0,he.default)());const g={id:f,file:n,state:Ma.PENDING,resource:r,onUploadStart:a,onUploadProgress:o,onUploadError:l,onUploadSuccess:i,additionalData:s,posterFile:c,muteVideo:d,trimData:u,originalResourceId:p,elementId:m};return{...e,queue:[...e.queue,g]}}function Da(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ma.UPLOADING}:e))}}function Ba(e,t){let{payload:{id:n,resource:r}}=t;const a=e.queue.find((e=>e.id===n));return a?(a.resource.src&&a.resource.src!==r.src&&(0,J.revokeBlob)(a.resource.src),r.poster&&a.resource.poster&&a.resource.poster!==r.poster&&(0,J.revokeBlob)(a.resource.poster),{...e,queue:e.queue.map((e=>e.id===n?{...e,resource:{...r,poster:r.poster||e.resource.poster},previousResourceId:e.resource.id,posterFile:null,originalResourceId:null,state:Ma.UPLOADED}:e))}):e}function Fa(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ma.CANCELLED}:e))}}function Ha(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ma.TRANSCODING}:e))}}function Ua(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:Ma.TRANSCODED,resource:{...e.resource,isOptimized:!0},additionalData:{...e.additionalData,...a}}:e))}}function za(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ma.MUTING}:e))}}function Ga(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:Ma.MUTED,resource:{...e.resource,isMuted:!0},additionalData:{...e.additionalData,...a}}:e))}}function ja(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ma.TRIMMING}:e))}}function Ya(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:Ma.TRIMMED,additionalData:{...e.additionalData,...a}}:e))}}function Za(e,t){let{payload:{id:n,resource:r,posterFile:a}}=t;const o=e.queue.find((e=>e.id===n));return o&&o.resource.isPlaceholder?(o.resource.src!==r.src&&((0,J.revokeBlob)(o.resource.src),(0,J.revokeBlob)(o.resource.poster)),{...e,queue:e.queue.map((e=>e.id===n?{...e,resource:{...r,id:e.resource.id,isPlaceholder:!1},posterFile:a}:e))}):e}function Wa(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:Ma.FINISHED}:e))}}function Va(e,t){let{payload:{id:n}}=t;const r=e.queue.filter((e=>e.id!==n));return{...e,queue:r}}const $a={queue:[]};const qa=function(){const{actions:{uploadFile:e}}=Bt(),{isTranscodingEnabled:t,canTranscodeFile:n,transcodeVideo:a,stripAudioFromVideo:o,getFirstFrameOfVideo:l,convertGifToVideo:i,trimVideo:s}=Ra(),[c,d]=(0,u.useReduction)($a,r),{uploadVideoPoster:p}=Ca({updateMediaElement:Ft}),m=(0,u.useRef)(!1),f=(0,u.useRef)(null),g=(0,u.useRef)(null),{startUploading:h,finishUploading:E,cancelUploading:b,startTranscoding:y,startMuting:_,startTrimming:v,finishTranscoding:w,finishMuting:T,finishTrimming:S,replacePlaceholderResource:C}=d;(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:t,file:n,state:r,resource:a}=e;if([Ma.TRIMMED,Ma.MUTED,Ma.TRANSCODED].includes(r)&&a.isPlaceholder&&!a.poster)try{const{resource:e,posterFile:r}=await We(n);if(!m.current)return;C({id:t,resource:e,posterFile:r})}catch{}})))})()}),[c.queue,C]),(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:r,file:a,state:o,resource:i}=e;if(Ma.PENDING!==o||!i.isPlaceholder)return;if(!t||!n(a))return;if(!(null!==g.current)){g.current=r;try{const e=await l(a),t=(0,J.createBlob)(e),{width:n,height:o}=await te(t),s={...i,poster:t,width:n,height:o};if(!m.current)return;C({id:r,resource:s,posterFile:e})}catch{}finally{g.current=null}}})))})()}),[c.queue,t,n,l,C]);const I=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;y({id:t});try{const e=await i(n);if(!m.current)return;r.mediaSource="gif-conversion",r.isMuted=!0,w({id:t,file:e,additionalData:r})}catch(e){b({id:t,error:e}),(0,L.trackError)("upload_media",e?.message)}finally{f.current=null}}),[y,w,i,b]),A=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={},trimData:a}=e;v({id:t});try{const e=await s(n,a.start,a.end);if(!m.current)return;r.meta={...r.meta,trimData:a},S({id:t,file:e,additionalData:r})}catch(e){b({id:t,error:e}),(0,L.trackError)("upload_media",e?.message)}finally{f.current=null}}),[v,S,s,b]),x=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;_({id:t});try{const e=await o(n);if(!m.current)return;r.isMuted=!0,T({id:t,file:e,additionalData:r})}catch(e){b({id:t,error:e}),(0,L.trackError)("upload_media",e?.message)}finally{f.current=null}}),[_,T,o,b]),k=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;y({id:t});try{const e=await a(n);if(!m.current)return;r.mediaSource="video-optimization",w({id:t,file:e,additionalData:r})}catch(e){b({id:t,error:e}),(0,L.trackError)("upload_media",e?.message)}finally{f.current=null}}),[y,w,a,b]),O=(0,u.useCallback)((async t=>{const{id:n,file:r,resource:a,additionalData:o={}}=t;let{posterFile:i}=t,s=await e(r,o);if(m.current){if(!a.poster&&!i)try{i=await l(r)}catch{}try{const e=K(i),{poster:t,posterId:n}=await p(s.id,e,i);if(!m.current)return;s={...s,poster:t||s.poster||a.poster,posterId:n}}catch{}E({id:n,resource:s})}}),[E,l,e,p]),N=(0,u.useCallback)((async t=>{const{id:n,file:r,additionalData:a={}}=t,o=await e(r,a);m.current&&E({id:n,resource:o})}),[E,e]),P=(0,u.useCallback)((async e=>{const{id:t,file:n,resource:r}=e;h({id:t}),(0,L.trackEvent)("upload_media",{file_size:n?.size,file_type:n?.type});const a=(0,L.getTimeTracker)("load_upload_media");try{["video","gif"].includes(r.type)?await O(e):await N(e)}catch(e){b({id:t,error:e}),(0,L.trackError)("upload_media",e?.message)}finally{a()}}),[h,b,N,O]);return(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:r,file:a,state:o,resource:l,additionalData:i={},muteVideo:s,trimData:c}=e;if(Ma.PENDING!==o)return;"video"===l.type&&null!==l.isMuted&&void 0===i?.isMuted&&(i.isMuted=l.isMuted),l?.baseColor&&(i.meta={...i.meta,baseColor:l.baseColor}),l?.blurHash&&!l?.trimData&&(i.meta={...i.meta,blurHash:l.blurHash});const d="image/gif"===l.mimeType&&kt(await a.arrayBuffer()),u=t&&(d||n(a)),p=null!==f.current;if(!u||!p){if(t){if(d)return f.current=r,void I(e);if(n(a))return f.current=r,c?void A(e):s?void x(e):void k(e)}P(e)}})))})()}),[c.queue,t,n,I,A,x,k,P]),(0,u.useEffect)((()=>{c.queue.map((e=>{const{state:t}=e;[Ma.TRANSCODED,Ma.MUTED,Ma.TRIMMED].includes(t)&&P(e)}))}),[c.queue,P]),(0,u.useEffect)((()=>(m.current=!0,()=>{m.current=!1})),[]),(0,u.useMemo)((()=>{const e=c.queue.filter((e=>![Ma.PENDING,Ma.CANCELLED,Ma.UPLOADED,Ma.FINISHED].includes(e.state))),t=c.queue.filter((e=>e.state===Ma.PENDING)),n=c.queue.filter((e=>e.state===Ma.UPLOADED)),r=c.queue.filter((e=>e.state===Ma.FINISHED)),a=c.queue.filter((e=>e.state===Ma.CANCELLED)),o=c.queue.some((e=>![Ma.FINISHED,Ma.CANCELLED,Ma.PENDING].includes(e.state))),l=c.queue.some((e=>e.state===Ma.TRANSCODING)),i=c.queue.some((e=>e.state===Ma.MUTING)),s=c.queue.some((e=>e.state===Ma.TRIMMING));return{state:{progress:e,pending:t,uploaded:n,failures:a,finished:r,isUploading:o,isTranscoding:l,isMuting:i,isTrimming:s,isCurrentResourceMuting:e=>c.queue.some((t=>t.state===Ma.MUTING&&t.resource.id===e)),isCurrentResourceProcessing:e=>c.queue.some((t=>[Ma.TRANSCODING,Ma.TRIMMING,Ma.MUTING].includes(t.state)&&t.resource.id===e)),isCurrentResourceUploading:e=>c.queue.some((t=>[Ma.PENDING,Ma.UPLOADING,Ma.UPLOADED,Ma.FINISHED].includes(t.state)&&(t.resource.id===e||t.previousResourceId===e))),isCurrentResourceTranscoding:e=>c.queue.some((t=>t.state===Ma.TRANSCODING&&t.resource.id===e)),isCurrentResourceTrimming:e=>c.queue.some((t=>t.state===Ma.TRIMMING&&t.resource.id===e)),isNewResourceMuting:e=>c.queue.some((t=>t.state===Ma.MUTING&&t.originalResourceId===e)),isNewResourceProcessing:e=>c.queue.some((t=>[Ma.TRANSCODING,Ma.TRIMMING,Ma.MUTING].includes(t.state)&&t.originalResourceId===e)),isNewResourceTranscoding:e=>c.queue.some((t=>t.state===Ma.TRANSCODING&&t.originalResourceId===e)),isElementTrimming:e=>c.queue.some((t=>t.state===Ma.TRIMMING&&t.elementId===e)),canTranscodeResource:e=>{const{isExternal:t,id:n,src:r}=e||{};return!t&&r&&!c.queue.some((e=>e.resource.id===n||e.previousResourceId===n||e.originalResourceId===n))}},actions:{addItem:d.addItem,removeItem:d.removeItem,finishItem:d.finishItem}}}),[c,d])},Xa="/v1/media",Ka="/v1/categories",Qa="/v1/media:registerUsage",Ja={RELEVANCE:"relevance",LATEST:"latest"},eo={TRENDING:"trending"};function to(e,t){if(!(null==t||Object.values(e).indexOf(t.toLowerCase())>-1))throw new Error("Invalid order_by: "+t)}function no(e){if(!(null==e||e>0))throw new Error("Invalid page_size: "+e)}const ro=new class ApiFetcher{async listMedia(){let{languageCode:e=null,filter:t=null,orderBy:n=null,pageSize:r=null,pageToken:a=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){to(Ja,e)}(n),await no(r);const o=new URLSearchParams([["language_code",e],["filter",t],["order_by",n],["page_size",r],["page_token",a]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:o,path:Xa})}async listCategories(){let{filter:e=null,orderBy:t=null,pageSize:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){to(eo,e)}(t),await no(n);const r=new URLSearchParams([["filter",e],["order_by",t],["page_size",n]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:r,path:Ka})}async registerUsage(e){let{registerUsageUrl:t}=e;await function(e){if(!e||!e.includes(Qa))throw new Error("Invalid url: "+e)}(t),await this.fetchUrl({url:new URL(t),method:"POST"})}fetchPath(e){let{path:t,params:n,method:r}=e;const a=new URL("https://media3p.googleapis.com"+t);return n.forEach(((e,t)=>{a.searchParams.append(t,e)})),this.fetchUrl({url:a,method:r})}async fetchUrl(e){let{url:t,method:n}=e;t.searchParams.append("key","AIzaSyDqgPsZ0VnxAuakmX7bjnzmNQsE7Drlvk0");const r=await window.fetch(t.href,{method:n??"GET"});if(!r.ok)throw new Error("Obtained an error from the "+t.pathname+" call, statusCode: "+r.status+", statusText: "+r.statusText);return r.json()}},ao=(0,u.createContext)({actions:{}});const oo=function Media3pApiProvider(e){let{children:t}=e;function n(e){let{provider:t,contentType:n,searchTerm:r,categoryId:a}=e;if(!Object.keys(vt).includes(t))throw new Error(`Unsupported provider: ${t}`);if(a&&r)throw new Error("searchTerm and categoryId are mutually exclusive.");return[`provider:${t}`,n&&`type:${n}`,a&&`category:${a}`,r].filter(Boolean).join(" ")}const r={actions:{listMedia:async function(e){let{provider:t,filter:r,orderBy:a,pageToken:o}=e;const{contentType:l,searchTerm:i,categoryId:s}=r??{},c=await ro.listMedia({filter:n({provider:t,contentType:l,searchTerm:i,categoryId:s}),orderBy:a,pageSize:20,pageToken:o});return{media:(c.media||[]).map(xt),nextPageToken:c.nextPageToken}},listCategories:async function(e){let{provider:t,orderBy:r}=e;const a=n({provider:t});return{categories:(await ro.listCategories({filter:a,orderBy:r})).categories.map((e=>({id:e.name,label:e.displayName})))}},registerUsage:async function(e){let{registerUsageUrl:t}=e;await ro.registerUsage({registerUsageUrl:t})}}};return c.createElement(ao.Provider,{value:r},t)};const lo=function(){return(0,u.useContextSelector)(ao,u.identity)},io=["Karla","Lato","Lora","Merriweather","Montserrat","Nunito","Oswald","Playfair Display","Poppins","Raleway","Roboto","Roboto Condensed","Source Serif Pro","Titillium Web","Work Sans","Alegreya","Arimo","EB Garamond","IBM Plex Mono","IBM Plex Serif","Inconsolata","Mulish","Noto Sans","Noto Serif","Open Sans","PT Mono","PT Sans","PT Serif","Roboto Mono","Source Sans Pro","Ubuntu","Anton","BioRhyme","Bungee","Bungee Shade","Cookie","Dancing Script","Monoton","Nothing You Could Do","Parisienne","Rock Salt","UnifrakturMaguntia"];var so=n(58860);const co=(0,u.createContext)({state:{},actions:{}});function uo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?[e].map((e=>e.replace(/[\s./_]/g,"-"))).map((e=>t?e:e.replace(/^-+|-+$/g,""))).map((e=>t?e:e.replace(/--+/g,"-"))).map((e=>e.normalize("NFD"))).map((e=>e.replace(/[\u0300-\u036f]/g,""))).map((e=>t?e:e.replace(/[^a-zA-Z0-9-_]/g,""))).map((e=>e.toLowerCase())).pop():""}const po=function(){const e=(0,u.useCallback)((async e=>{const{family:t,service:n,variants:r,url:a}=e,o=`web-stories-${uo(t)}-font-css`;if(!document.getElementById(o))switch(n){case"fonts.google.com":await(0,so.loadStylesheet)(wr([{family:t,variants:r}],"auto"),o);break;case"custom":await(0,so.loadInlineStylesheet)(o,Tr(t,a));break;default:return}}),[]),t=(0,u.useCallback)((t=>Promise.allSettled(t.map((async t=>{let{font:n,fontWeight:r,fontStyle:a,content:o}=t;const{family:l,service:i}=n;if(!l||"system"===i)return null;const s=`\n              ${a||""} ${r||""} 0 '${l}'\n            `.trim();return await e(n),(0,so.ensureFontLoaded)(s,o)})))),[e]);return{maybeEnqueueFontStyle:t,maybeLoadFont:e}};const mo=function FontProvider(e){let{children:t}=e;const n=(0,S.useFeature)("customFonts"),[r,a]=(0,u.useState)([]),[o,l]=(0,u.useState)([]),[i,s]=(0,u.useState)([]),[d,p]=(0,u.useState)(null),{actions:{getFonts:m}}=X(),f=r.length>0?r:o,g=(0,u.useCallback)((async()=>{if(d||!m||!n)return;const e=await m({service:"custom"});if(!e.length)return;const t=e.map((e=>({...e,id:e.family,name:e.family,value:e.family})));p(t)}),[m,d,n]),h=(0,u.useCallback)((async()=>{if(o.length||!m)return;const e=await m({include:io.join(",")});if(!e.length)return;const t=e.map((e=>({id:e.family,name:e.family,value:e.family,...e})));l(t)}),[m,o]),{maybeEnqueueFontStyle:E,maybeLoadFont:b}=po(),y=(0,u.useCallback)((e=>{const t=f.find((t=>t.family===e));return t||{}}),[f]),_=(0,u.useCallback)((async e=>{if(e.length<2)return a([]),[];const t=(await m({search:e,service:n?null:"builtin"})).map((e=>({...e,id:e.family,name:e.family,value:e.family})));return a(t),t}),[m,n]),v=(0,u.useCallback)((e=>{const t=[{name:Ee[400],value:400}],n=y(e);let r=t;if(n){const{weights:e}=n;e&&(r=e.map((e=>({name:Ee[e],value:e}))))}return r}),[y]),w=(0,u.useCallback)((e=>{const t=y(e);return t?.fallbacks?t.fallbacks:[]}),[y]),T=(0,u.useCallback)((e=>{const t=[e];i.forEach((n=>{e.family!==n.family&&t.push(n)})),s(t.slice(0,5))}),[i]),C=(0,u.useRef)([]),I=(0,u.useCallback)((e=>{const t=e.filter((e=>!C.current.includes(e)));if(!t?.length)return;C.current=C.current.concat(t);const n=`https://fonts.googleapis.com/css?family=${encodeURIComponent(t.join("|"))}&subset=menu&display=swap`;(0,so.loadStylesheet)(n,"web-stories-google-fonts-menu-css").catch((()=>{C.current=C.current.filter((e=>!t.includes(e)))}))}),[]),A=(0,u.useCallback)((e=>{for(const t of e){const e=d.find((e=>{let{family:n}=e;return n===t}));e&&b(e)}}),[d,b]),x={state:{fonts:r.length>0?r:o,curatedFonts:o,customFonts:d,recentFonts:i},actions:{getFontsBySearch:_,getFontByName:y,maybeEnqueueFontStyle:E,getFontWeight:v,getFontFallback:w,ensureMenuFontsLoaded:I,ensureCustomFontsLoaded:A,addRecentFont:T,getCustomFonts:g,getCuratedFonts:h}};return c.createElement(co.Provider,{value:x},t)};const fo=function(e){return(0,u.useContextSelector)(co,e??u.identity)};var go=n(52935);const ho=async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`An error has occured: ${t.status}`);return await t.blob()};const Eo=async function(e,t){const n=await ho(e),r=function(e){const t=Ht(e),n=t.split(/[#?]/)[0].split(".").pop().trim();return t.replace(`.${n}`,`-optimized.${n}`)}(e);return me(n,r,t)};const bo=function(e){let{uploadMedia:t,postProcessingResource:n,updateMedia:r,deleteMediaElement:a}=e;const{actions:{getOptimizedMediaById:o,getMutedMediaById:l}}=X(),{updateElementsByResourceId:i,updateElementById:s}=Sa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId,updateElementById:e.actions.updateElementById}))),c=(0,u.useCallback)((e=>{let{oldResource:t,resource:n}=e;const{id:r,alt:a}=t;i({id:r,properties:()=>({type:n.type,resource:{...n,alt:a}})})}),[i]),d=(0,u.useCallback)((e=>{let{elementId:t,oldResource:n,resource:r}=e;const{alt:a}=n;s({elementId:t,properties:()=>({type:r.type,resource:{...r,alt:a}})})}),[s]),p=(0,u.useCallback)(((e,t)=>{s({elementId:e,properties:e=>({resource:{...e.resource,...t}})})}),[s]),m=(0,u.useCallback)(((e,t)=>{i({id:e,properties:e=>({resource:{...e.resource,...t}})})}),[i]),f=(0,u.useCallback)(((e,t,n)=>{r(e,{mediaSource:n,optimizedId:t})}),[r]),g=(0,u.useCallback)(((e,t)=>{r(e,{mutedId:t})}),[r]),h=(0,u.useCallback)((e=>{let{resource:r}=e;const{id:l,src:i,mimeType:s}=r,d=()=>m(l,{isOptimized:!1}),u=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),f(l,t.id,"source-video"),a({id:l}),n(t)},p=e=>{let{resource:t}=e;const n={...t,id:r.id};m(l,{...n})};(async()=>{const e=await o(l);if(e)return void m(l,e);let n=!1;try{n=await Eo(i,s)}catch(e){return}await t([n],{onUploadSuccess:u,onUploadError:d,onUploadProgress:p,additionalData:{originalId:r.id,isMuted:r.isMuted},originalResourceId:r.id})})()}),[m,c,f,a,n,o,t]),E=(0,u.useCallback)((e=>{let{resource:r,canvasResourceId:a,elementId:o,start:l,end:i}=e;const{id:s,...c}=r,{src:u,mimeType:m,poster:f,isMuted:g,isOptimized:h}=r,E={original:s,start:l,end:i},b=()=>p(o,{trimData:E}),y=()=>p(o,{trimData:r.trimData||{}}),_=e=>{let{resource:t}=e;const l={alt:r.alt,id:a};d({elementId:o,oldResource:l,resource:t}),n(t)},v=e=>{let{resource:t}=e;const n={...t,id:a};p(o,{...n})};return(async()=>{let e=!1,n=!1;try{e=await Eo(u,m)}catch(e){return}if(f)try{n=await ho(f)}catch(e){}await t([e],{onUploadSuccess:_,onUploadStart:b,onUploadError:y,onUploadProgress:v,additionalData:{originalId:s,isMuted:g,mediaSource:h?"video-optimization":"editor"},elementId:o,trimData:E,resource:{...c,trimData:E},originalResourceId:a,posterFile:n})})()}),[p,d,n,t]),b=(0,u.useCallback)((e=>{let{resource:r}=e;const{id:a,...o}=r,{src:i,mimeType:s,poster:d,isOptimized:u}=r,p=()=>{m(a,{isMuted:!1})},f=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),g(r.id,t.id),n(t)},h=e=>{let{resource:t}=e;const n={...t,id:r.id};m(a,{...n})};(async()=>{const e=await l(a);if(e)return void m(a,e);let n=!1,r=!1;try{n=await Eo(i,s)}catch(e){return}if(d)try{r=await ho(d)}catch(e){}await t([n],{onUploadSuccess:f,onUploadError:p,onUploadProgress:h,additionalData:{originalId:a,mediaSource:u?"video-optimization":"editor"},muteVideo:!0,resource:{...o,isMuted:!0},originalResourceId:a,posterFile:r})})()}),[m,c,g,n,l,t]);return{optimizeVideo:h,optimizeGif:(0,u.useCallback)((e=>{let{resource:r}=e;const{id:o,src:l,mimeType:i}=r,s=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),f(r.id,t.id,"source-image"),a({id:r.id}),n(t)},d=e=>{let{resource:t}=e;const n={...t,id:r.id};m(o,{...n})};return(async()=>{let e=!1;try{e=await Eo(l,i)}catch(e){return}const n=await e.arrayBuffer();kt(n)&&await t([e],{onUploadSuccess:s,onUploadProgress:d,additionalData:{original_id:o},originalResourceId:o})})()}),[c,f,a,n,m,t]),muteExistingVideo:b,trimExistingVideo:E}},yo={PANEL:"web_stories_ui_panel_settings",TEXT_SET_SETTINGS:"web_stores_text_set_settings",TERMS_MEDIA3P:"web_stories_media3p_terms_agreement",VIDEO_OPTIMIZATION_DIALOG_DISMISSED:"web_stories_video_optimization_dialog_dismissed",HELP_CENTER:"web_stories_help_center",DELETE_COLOR_PRESET_DIALOG_DISMISSED:"web_stories_delete_color_preset_dialog_dismissed",DELETE_STYLE_PRESET_DIALOG_DISMISSED:"web_stories_delete_style_preset_dialog_dismissed",DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT:"web_stories_default_template_view",BACKGROUND_IS_SET_DIALOG_DISMISSED:"web_stories_background_is_set_dialog_dismissed"};const _o={getItemByKey:function(e){let t=null;try{const n=localStorage.getItem(e);t=JSON.parse(n)}catch(e){(0,L.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){(0,L.trackError)("local_storage_write",e.message)}}},vo=yo.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;const wo=function(e){let{media:t,prependMedia:n,updateMediaElement:r,deleteMediaElement:a}=e;const{actions:{validateFileForUpload:o}}=Bt(),{showSnackbar:l}=(0,hr.useSnackbar)(),i=rr(),{state:{isUploading:s,isTranscoding:c,pending:p,progress:m,uploaded:f,failures:g,finished:h,isNewResourceProcessing:E,isCurrentResourceProcessing:b,isNewResourceTranscoding:y,isNewResourceMuting:_,isElementTrimming:v,isCurrentResourceUploading:w,isCurrentResourceTranscoding:T,isCurrentResourceMuting:S,isCurrentResourceTrimming:C,canTranscodeResource:I},actions:{addItem:A,removeItem:x,finishItem:k}}=qa(),{isTranscodingEnabled:O,canTranscodeFile:N,isFileTooLarge:P}=Ra(),R=(0,u.useRef)();R.current=t,(0,u.useEffect)((()=>{i("upload",s)}),[s,i]),(0,u.useEffect)((()=>{const e=Boolean(_o.getItemByKey(vo));c&&e&&l({message:(0,d.__)("Video optimization in progress","web-stories"),dismissible:!0})}),[c,l]),(0,u.useEffect)((()=>{const e=p.filter((e=>{let{resource:{id:t}}=e;return!R.current.find((e=>{let{id:n}=e;return n===t}))}));if(!e.length)return;for(const{onUploadStart:t,resource:n}of e)t&&t({resource:n});const t=e.map((e=>{let{resource:t}=e;return t}));n({media:t})}),[p,n]),(0,u.useEffect)((()=>{for(const{onUploadProgress:e,resource:t}of m){const{id:n}=t;t&&(r({id:n,data:t}),e&&e({id:n,resource:t}))}}),[m,r]),(0,u.useEffect)((()=>{for(const{id:e,resource:t,onUploadSuccess:n,previousResourceId:a}of f){const{id:o}=t;t&&(r({id:o,data:t}),a&&r({id:a,data:t}),n&&(n({id:o,resource:t}),a&&n({id:a,resource:t})),k({id:e}))}}),[f,r,k]),(0,u.useEffect)((()=>{for(const{id:e}of h)x({id:e})}),[h,x]),(0,u.useEffect)((()=>{for(const{id:e,onUploadError:t,error:n,resource:r}of g){const{id:o}=r;t&&t({id:o}),a({id:o}),x({id:e});const i=r&&["video","gif"].includes(r.type)?r.poster:r.src;l({message:n?.message||(0,d.__)("File could not be uploaded. Please try a different file.","web-stories"),thumbnail:i&&{src:i,alt:r?.alt},dismissible:!0})}}),[g,a,x,l]);const M=(0,u.useCallback)((async function(e){let{onUploadStart:t,onUploadProgress:n,onUploadError:r,onUploadSuccess:a,additionalData:i,muteVideo:s,trimData:c,resource:d,posterFile:u,originalResourceId:p,elementId:m}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?.length&&await Promise.all(e.reverse().map((async e=>{const f=O&&N(e),g=f&&P(e);try{o(e,f,g)}catch(e){return void l({message:e.message,dismissible:!0})}if(!d||!u){const{resource:t,posterFile:n}=await We(e);u=n,d=t}A({file:e,resource:d,onUploadStart:t,onUploadProgress:n,onUploadError:r,onUploadSuccess:a,additionalData:i,posterFile:u,muteVideo:s,trimData:c,originalResourceId:p,elementId:m})})))}),[l,o,A,N,O,P]);return{uploadMedia:M,isUploading:s,isTranscoding:c,isNewResourceProcessing:E,isCurrentResourceProcessing:b,isNewResourceTranscoding:y,isNewResourceMuting:_,isElementTrimming:v,isCurrentResourceUploading:w,isCurrentResourceTranscoding:T,isCurrentResourceMuting:S,isCurrentResourceTrimming:C,canTranscodeResource:I}};const To=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n}}=X(),{updateElementsByResourceId:r}=Sa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:a}}=Y(),o=(0,u.useCallback)((async(e,o)=>{if(a)try{const a=await ie(o);await ue(a);const l=pe(a);r({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,isMuted:!l}}}}),t({id:e,data:{isMuted:!l}}),await n(e,{isMuted:!l})}catch(e){}}),[a,r,t,n]);return{updateVideoIsMuted:o}};const So=function(e){return`#${e.map((e=>e.toString(16))).map((e=>e.padStart(2,"0"))).join("")}`};async function Co(e){const{default:t}=await n.e(7498).then(n.bind(n,80269));return new Promise(((n,r)=>{try{const r=(new t).getColor(e);n(So(r))}catch(e){(0,L.trackError)("image_base_color",e.message),r(e)}}))}const Io=async function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";if(!e)throw new Error("No source to image");const o=(0,L.getTimeTracker)("load_get_base_color");try{n=await(0,ee.default)({src:e,width:r,height:a}),t=await Co(n)}catch(e){if("TypeError"!==e?.name)throw e;t="#ffffff"}finally{n?.remove(),o()}return t};const Ao=function(){const{actions:{getProxyUrl:e}}=X(),t=(0,u.useCallback)((async e=>{let t=!1;if(!e)return t;try{await fetch(e,{method:"HEAD"})}catch(e){t=!0}return t}),[]),n=(0,u.useCallback)(((t,n)=>{const{needsProxy:r}=t;return r&&n?e(n):n}),[e]);return{getProxiedUrl:n,checkResourceAccess:t}};const xo=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n,getPosterMediaById:r}}=X(),{updateElementsByResourceId:a}=Sa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:o}}=Y(),{getProxiedUrl:l}=Ao(),i=(0,u.useCallback)((async(e,r)=>{let{id:l,isExternal:i}=e;try{a({id:l,properties:e=>{let{resource:t}=e;return{resource:{...t,baseColor:r}}}}),i||(t({id:l,data:{baseColor:r}}),o&&await n(l,{baseColor:r}))}catch(e){}}),[a,t,o,n]),s=(0,u.useCallback)((async e=>{const{type:t,poster:n,id:a,isExternal:o}=e;let s=n;if("image"===t)s=(0,go.default)(0,e);else if(!o){const e=r?await r(a):null;e&&(s=(0,go.default)(0,e))}if(!s)return;const c=l(e,s);try{const t=await Io(c);await i(e,t)}catch(e){}}),[l,r,i]);return{updateBaseColor:s}};var ko=n(20477),Oo=n.n(ko);function Worker_fn(){return Oo()('(()=>{"use strict";const t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],a=(a,o)=>{var r="";for(let e=1;e<=o;e++){let h=Math.floor(a)/Math.pow(83,o-e)%83;r+=t[Math.floor(h)]}return r},o=t=>{let a=t/255;return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)},r=t=>{let a=Math.max(0,Math.min(1,t));return a<=.0031308?Math.round(12.92*a*255+.5):Math.round(255*(1.055*Math.pow(a,1/2.4)-.055)+.5)},e=(t,a)=>(t<0?-1:1)*Math.pow(Math.abs(t),a);class ValidationError extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}}const h=(t,a,r,e)=>{let h=0,n=0,s=0;const l=4*a;for(let M=0;M<a;M++)for(let a=0;a<r;a++){const r=e(M,a);h+=r*o(t[4*M+0+a*l]),n+=r*o(t[4*M+1+a*l]),s+=r*o(t[4*M+2+a*l])}let M=1/(a*r);return[h*M,n*M,s*M]},n=(t,o,n,s,l)=>{if(s<1||s>9||l<1||l>9)throw new ValidationError("BlurHash must have between 1 and 9 components");if(o*n*4!==t.length)throw new ValidationError("Width and height must match the pixels array");let M=[];for(let a=0;a<l;a++)for(let r=0;r<s;r++){const e=0==r&&0==a?1:2,s=h(t,o,n,((t,h)=>e*Math.cos(Math.PI*r*t/o)*Math.cos(Math.PI*a*h/n)));M.push(s)}const i=M[0],c=M.slice(1);let m,f="";if(f+=a(s-1+9*(l-1),1),c.length>0){let t=Math.max(...c.map((t=>Math.max(...t)))),o=Math.floor(Math.max(0,Math.min(82,Math.floor(166*t-.5))));m=(o+1)/166,f+=a(o,1)}else m=1,f+=a(0,1);var u;return f+=a((r((u=i)[0])<<16)+(r(u[1])<<8)+r(u[2]),4),c.forEach((t=>{f+=a(((t,a)=>19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[0]/a,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[1]/a,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[2]/a,.5)+9.5)))))(t,m),2)})),f},s=function(t){const{image:a,width:o,height:r,componentX:e,componentY:h}=t.data;try{const t=n(a,o,r,e,h);postMessage({type:"success",blurHash:t})}catch(t){postMessage({type:"error",error:t})}};self.onmessage=s})();',"Worker",void 0,n.p+"generateBlurhash.worker.worker.js")}const No=async e=>{let t;try{t=await(0,ee.default)({src:e})}catch{return Promise.reject(new Error("Failed to get blurhash from image"))}const n=(e=>{const{width:t,height:n}=e,r=document.createElement("canvas");r.width=t,r.height=n;const a=r.getContext("2d");return a.drawImage(e,0,0),a.getImageData(0,0,t,n)})(t),{data:r,width:a,height:o}=n,l=(0,L.getTimeTracker)("load_get_blurhash");return new Promise(((e,t)=>{const n=new Worker_fn;n.postMessage({image:r,width:a,height:o,componentX:4,componentY:4}),n.addEventListener("message",(function(r){n.terminate(),l(),"success"===r.data.type?e(r.data.blurHash):((0,L.trackError)("blurhash_generation",r.data.error?.message),t(r.data.error))})),n.addEventListener("error",(e=>{n.terminate(),l(),(0,L.trackError)("blurhash_generation",e?.message),t(e)}))}))};const Po=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n,getPosterMediaById:r}}=X(),{updateElementsByResourceId:a}=Sa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:o}}=Y(),{getProxiedUrl:l}=Ao(),i=(0,u.useCallback)((async(e,r)=>{try{a({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,blurHash:r}}}}),t({id:e,data:{blurHash:r}}),o&&await n(e,{blurHash:r})}catch(e){}}),[a,t,o,n]);return{updateBlurHash:(0,u.useCallback)((async e=>{let{resource:t}=e;const{type:n,poster:a,id:o,isExternal:s}=t;let c=a;if("image"===n)c=(0,go.default)(300,t);else if(!s){const e=r?await r(o):null;e&&(c=(0,go.default)(300,e))}if(!c)return;const d=l(t,c);try{const e=await No(d);await i(t.id,e)}catch(e){(0,L.trackError)("blurhash_generation",e?.message)}}),[l,r,i])}},Ro="LOCAL_MEDIA_RESET_FILTERS",Mo="LOCAL_MEDIA_SET_SEARCH_TERM",Lo="LOCAL_MEDIA_SET_MEDIA_TYPE",Do="LOCAL_MEDIA_SET_MEDIA",Bo="LOCAL_MEDIA_PREPEND_MEDIA",Fo="LOCAL_MEDIA_REMOVE_AUDIO_PROCESSING",Ho="LOCAL_MEDIA_ADD_AUDIO_PROCESSING",Uo="LOCAL_MEDIA_REMOVE_BASE_COLOR_PROCESSING",zo="LOCAL_MEDIA_ADD_BASE_COLOR_PROCESSING",Go="LOCAL_MEDIA_REMOVE_BLURHASH_PROCESSING",jo="LOCAL_MEDIA_ADD_BLURHASH_PROCESSING",Yo="LOCAL_MEDIA_REMOVE_POSTER_PROCESSING",Zo="LOCAL_MEDIA_ADD_POSTER_PROCESSING",Wo="LOCAL_MEDIA_TYPE_ALL";function Vo(e,t,n){const{selectedProvider:r,searchTerm:a}=t,{pageToken:o,isMediaLoading:l,isMediaLoaded:i,categories:{categories:s,selectedCategoryId:c}}=t[e],{fetchMediaStart:d,fetchMediaSuccess:p,fetchMediaError:m,fetchCategoriesStart:f,fetchCategoriesSuccess:g,fetchCategoriesError:h}=n;return function(e){let{provider:t,selectedProvider:n,searchTerm:r,selectedCategoryId:a,pageToken:o,isMediaLoading:l,isMediaLoaded:i,fetchMediaStart:s,fetchMediaSuccess:c,fetchMediaError:d}=e;const{actions:{listMedia:p}}=lo(),{showSnackbar:m}=(0,hr.useSnackbar)(),f=(0,u.useRef)();(0,u.useEffect)((()=>{const e=f.current;f.current={pageToken:o,searchTerm:r,selectedCategoryId:a,isMediaLoading:l,isMediaLoaded:i};const u=e&&(o!==e.pageToken||r!==e.searchTerm||a!==e.selectedCategoryId),g=!e||!e.isMediaLoading&&!e.isMediaLoaded||u;t===n&&g&&async function(){s({provider:t,pageToken:o});try{const{media:e,nextPageToken:n}=await p({provider:t,filter:{contentType:vt[t].contentTypeFilter,searchTerm:a?null:r,categoryId:a},pageToken:o});c({provider:t,media:e,pageToken:o,nextPageToken:n})}catch(e){d({provider:t,pageToken:o}),m({message:vt[t].fetchMediaErrorMessage,dismissible:!0})}}()}),[n,o,r,a,t,p,d,s,c,m,f])}({provider:e,selectedProvider:r,pageToken:o,isMediaLoading:l,isMediaLoaded:i,searchTerm:a,selectedCategoryId:c,fetchMediaStart:d,fetchMediaSuccess:p,fetchMediaError:m}),function(e){let{provider:t,selectedProvider:n,categories:r,fetchCategoriesStart:a,fetchCategoriesSuccess:o,fetchCategoriesError:l}=e;const{actions:{listCategories:i}}=lo(),{showSnackbar:s}=(0,hr.useSnackbar)();(0,u.useEffect)((()=>{t===n&&vt[t].supportsCategories&&!r?.length&&async function(){a({provider:t});try{const{categories:e}=await i({provider:t});o({provider:t,categories:e})}catch(e){l({provider:t}),s({message:vt[t].fetchCategoriesErrorMessage,dismissible:!0})}}()}),[s,n,r,t,i,a,o,l])}({provider:e,selectedProvider:r,categories:s,fetchCategoriesStart:f,fetchCategoriesSuccess:g,fetchCategoriesError:h}),{state:t[e],actions:{setNextPage:(0,u.useCallback)((()=>n.setNextPage({provider:e})),[n,e]),selectCategory:(0,u.useCallback)((t=>n.selectCategory({provider:e,categoryId:t})),[n,e]),deselectCategory:(0,u.useCallback)((()=>n.deselectCategory({provider:e})),[n,e])}}}function $o(e,t){const n={};for(const r of Object.keys(vt))n[r]=Vo(r,e,t);return n}const qo="FETCH_MEDIA_START",Xo="FETCH_MEDIA_SUCCESS",Ko="FETCH_MEDIA_ERROR",Qo="SET_NEXT_PAGE",Jo="UPDATE_MEDIA_ELEMENT",el="DELETE_MEDIA_ELEMENT",tl={media:[],pageToken:void 0,nextPageToken:void 0,hasMore:!0,totalPages:1,isMediaLoading:!1,isMediaLoaded:!1,totalItems:0},nl={...tl,audioProcessing:[],audioProcessed:[],blurHashProcessed:[],blurHashProcessing:[],baseColorProcessed:[],baseColorProcessing:[],posterProcessing:[],posterProcessed:[],mediaType:"",searchTerm:""};const rl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case qo:return{...e,isMediaLoaded:!1,isMediaLoading:!0};case Xo:{const{media:t,pageToken:r,nextPageToken:a,totalPages:o,totalItems:l}=n;return{...e,media:r?[...e.media,...t]:t,nextPageToken:a,totalPages:o,hasMore:Boolean(a),isMediaLoaded:!0,isMediaLoading:!1,totalItems:l}}case Ko:return{...e,isMediaLoaded:!0,isMediaLoading:!1};case Qo:return e.nextPageToken?{...e,pageToken:e.nextPageToken}:e;case Jo:{const{id:t,provider:r,data:a}=n,o=e.media.findIndex((e=>e.id===t));if(-1===o)return e;const l={...e.media[o],provider:r,...a},i=[...e.media.slice(0,o),l,...e.media.slice(o+1)];return{...e,media:i}}case el:{const{id:t}=n;return{...e,media:e.media.filter((e=>e.id!==t))}}default:return e}};const al=function(e,t){let{type:n,payload:r}=t;return"local"==r?.provider?rl(e,{type:n,payload:r}):e};const ol=function(e,t){let{type:n,payload:r}=t;const{provider:a,mediaType:o,searchTerm:l}=r;return"local"===a&&o===e.mediaType&&l===e.searchTerm?rl(e,{type:n,payload:r}):e};const ll=function(e,t){let{mediaType:n}=t;return n===e.mediaType?e:{...nl,media:e.media.filter((e=>{let{local:t}=e;return t})),audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed],searchTerm:e.searchTerm,mediaType:n}};const il=function(e,t){let{searchTerm:n}=t;return n===e.searchTerm?e:{...nl,audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed],mediaType:e.mediaType,searchTerm:n}};const sl=function(e){return{...nl,audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed]}};const cl=function(e,t){let{media:n}=t;return{...e,media:n}};const dl=function(e,t){let{media:n}=t;return{...e,media:[...n,...e.media]}};const ul=function(e,t){let{id:n}=t;return!n||e.baseColorProcessing.includes(n)?e:{...e,baseColorProcessing:[...e.baseColorProcessing,n]}};const pl=function(e,t){let{id:n}=t;if(!n||!e.baseColorProcessing.includes(n))return e;const r=[...e.baseColorProcessing].filter((e=>e!==n));return{...e,baseColorProcessing:r,baseColorProcessed:[...e.baseColorProcessed,n]}};const ml=function(e,t){let{id:n}=t;return!n||e.posterProcessing.includes(n)?e:{...e,posterProcessing:[...e.posterProcessing,n]}};const fl=function(e,t){let{id:n}=t;if(!n||!e.posterProcessing.includes(n))return e;const r=[...e.posterProcessing].filter((e=>e!==n));return{...e,posterProcessing:r,posterProcessed:[...e.posterProcessed,n]}};const gl=function(e,t){let{id:n}=t;return!n||e.audioProcessing.includes(n)?e:{...e,audioProcessing:[...e.audioProcessing,n]}};const hl=function(e,t){let{id:n}=t;if(!n||!e.audioProcessing.includes(n))return e;const r=[...e.audioProcessing].filter((e=>e!==n));return{...e,audioProcessing:r,audioProcessed:[...e.audioProcessed,n]}};const El=function(e,t){let{id:n}=t;return!n||e.blurHashProcessing.includes(n)?e:{...e,blurHashProcessing:[...e.blurHashProcessing,n]}};const bl=function(e,t){let{id:n}=t;if(!n||!e.blurHashProcessing.includes(n))return e;const r=[...e.blurHashProcessing].filter((e=>e!==n));return{...e,blurHashProcessing:r,blurHashProcessed:[...e.blurHashProcessed,n]}};const yl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Xo:return ol(e,{type:t,payload:n});case Ro:return sl(e);case Mo:return il(e,n);case Lo:return ll(e,n);case Do:return cl(e,n);case Bo:return dl(e,n);case Zo:return ml(e,n);case Yo:return fl(e,n);case zo:return ul(e,n);case Uo:return pl(e,n);case jo:return El(e,n);case Go:return bl(e,n);case Ho:return gl(e,n);case Fo:return hl(e,n);default:return al(e,{type:t,payload:n})}},_l="INITIAL_STATE",vl="MEDIA3P_SET_SELECTED_PROVIDER",wl="MEDIA3P_SET_SEARCH_TERM",Tl="FETCH_MEDIA_CATEGORIES_START",Sl="FETCH_MEDIA_CATEGORIES_SUCCESS",Cl="FETCH_MEDIA_CATEGORIES_ERROR",Il="SELECT_CATEGORY",Al="DESELECT_CATEGORY",xl={isLoading:!0,isLoaded:!1,categories:[],selectedCategoryId:void 0};const kl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Tl:return{...e,isLoading:!0,isLoaded:!1};case Sl:{const{categories:t}=n;return{...e,categories:t,isLoading:!1,isLoaded:!0}}case Cl:return{...e,isLoading:!1,isLoaded:!0};case Il:{const{categoryId:t}=n;return{...e,selectedCategoryId:t}}case Al:case wl:return{...e,selectedCategoryId:void 0};default:return e}},Ol={...tl,categories:xl};const Nl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ol,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(e={...rl(e,{type:t,payload:n}),categories:kl(e.categories,{type:t,payload:n})},t){case wl:return{...e,isMediaLoaded:!1,pageToken:void 0,nextPageToken:void 0};case Il:case Al:return{...e,pageToken:void 0,nextPageToken:void 0};default:return e}},Pl={selectedProvider:void 0,searchTerm:""};function Rl(e,t){let{type:n,payload:r}=t;const a={...e};for(const t of Object.keys(vt))n!=_l&&r?.provider&&t!=r?.provider||(a[t]=Nl(e[t],{type:n,payload:r}));return(0,u.shallowEqual)(a,e)?e:a}const Ml=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(e=Rl(e,{type:t,payload:n}),t){case vl:return{...e,selectedProvider:n.provider};case wl:return{...e,searchTerm:n.searchTerm};default:return e}},Ll=e=>t=>{let{provider:n,pageToken:r}=t;e({type:qo,payload:{provider:n,pageToken:r}})},Dl=e=>t=>{let{provider:n,media:r,nextPageToken:a,totalPages:o,...l}=t;e({type:Xo,payload:{provider:n,media:r,nextPageToken:a,totalPages:o,...l}})},Bl=e=>t=>{let{provider:n}=t;e({type:Ko,payload:{provider:n}})},Fl=e=>t=>{let{provider:n}=t;e({type:Qo,payload:{provider:n}})},Hl=e=>t=>{let{provider:n,id:r,data:a}=t;e({type:Jo,payload:{provider:n,id:r,data:a}})},Ul=e=>t=>{let{provider:n,id:r}=t;e({type:el,payload:{provider:n,id:r}})},zl=e=>t=>Ll(e)({...t,provider:"local"}),Gl=e=>t=>Dl(e)({...t,provider:"local"}),jl=e=>t=>Bl(e)({...t,provider:"local"}),Yl=e=>t=>Fl(e)({...t,provider:"local"}),Zl=e=>t=>{let{id:n,data:r}=t;return Hl(e)({provider:"local",id:n,data:r})},Wl=e=>t=>Ul(e)({...t,provider:"local"}),Vl=e=>()=>{e({type:Ro})},$l=e=>t=>{let{searchTerm:n}=t;e({type:Mo,payload:{searchTerm:n}})},ql=e=>t=>{let{mediaType:n}=t;e({type:Lo,payload:{mediaType:n}})},Xl=e=>t=>{let{id:n}=t;e({type:Ho,payload:{id:n}})},Kl=e=>t=>{let{id:n}=t;e({type:Fo,payload:{id:n}})},Ql=e=>t=>{let{id:n}=t;e({type:zo,payload:{id:n}})},Jl=e=>t=>{let{id:n}=t;e({type:Uo,payload:{id:n}})},ei=e=>t=>{let{id:n}=t;e({type:jo,payload:{id:n}})},ti=e=>t=>{let{id:n}=t;e({type:Go,payload:{id:n}})},ni=e=>t=>{let{id:n}=t;e({type:Zo,payload:{id:n}})},ri=e=>t=>{let{id:n}=t;e({type:Yo,payload:{id:n}})},ai=e=>t=>{let{media:n}=t;e({type:Do,payload:{media:n}})},oi=e=>t=>{let{media:n}=t;e({type:Bo,payload:{media:n}})},li=e=>t=>{let{provider:n}=t;e({type:Tl,payload:{provider:n}})},ii=e=>t=>{let{provider:n,categories:r}=t;e({type:Sl,payload:{provider:n,categories:r}})},si=e=>t=>{let{provider:n}=t;e({type:Cl,payload:{provider:n}})},ci=e=>t=>{let{provider:n,categoryId:r}=t;e({type:Il,payload:{provider:n,categoryId:r}})},di=e=>t=>{let{provider:n}=t;e({type:Al,payload:{provider:n}})},ui=e=>t=>{let{provider:n}=t;e({type:vl,payload:{provider:n}})},pi=e=>t=>{let{searchTerm:n}=t;e({type:wl,payload:{searchTerm:n}})};function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return{local:yl(e.local,{type:t,payload:n}),media3p:Ml(e.media3p,{type:t,payload:n})}}const fi=(e,t)=>{if(e instanceof Function)return e(t);const n=e;return Object.keys(n).reduce(((e,r)=>({...e,[r]:fi(n[r],t)})),{})};const gi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi,t=arguments.length>1?arguments[1]:void 0;const n=(0,u.useMemo)((()=>({local:a,media3p:o})),[]);t=t??n;const r=(0,u.useMemo)((()=>e(void 0,{type:_l})),[e]),[l,i]=(0,u.useReducer)(e,r),s=(0,u.useMemo)((()=>fi(t,i)),[t]);return{state:l,actions:s}},hi=(0,u.createContext)({local:{state:{},actions:{}},media3p:{state:{},actions:{}}});const Ei=function MediaProvider(e){let{children:t}=e;const{state:n,actions:r}=gi(),a=function(e,t){const{media:n,pageToken:r,mediaType:a,searchTerm:o}=e,{fetchMediaStart:l,fetchMediaSuccess:i,fetchMediaError:s,resetFilters:c,prependMedia:d,setMediaType:p,setSearchTerm:m,setNextPage:f,setAudioProcessing:g,removeAudioProcessing:h,setPosterProcessing:E,removePosterProcessing:b,setBaseColorProcessing:y,removeBaseColorProcessing:_,setBlurhashProcessing:v,removeBlurhashProcessing:w,updateMediaElement:T,deleteMediaElement:S}=t,{actions:{getMedia:C,updateMedia:I}}=X(),A=(0,u.useRef)(!1);(0,u.useEffect)((()=>(A.current=!0,()=>{A.current=!1})),[]);const x=(0,u.useCallback)((function(){let{searchTerm:e="",pageToken:t=1,mediaType:n,cacheBust:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(!C)return null;l({pageToken:t});const o=(0,L.getTimeTracker)("load_media");return C({mediaType:n===Wo?"":n,searchTerm:e,pagingNum:t,cacheBust:r}).then((r=>{let{data:o,headers:l}=r;if(!A.current)return;const i=parseInt(l.totalPages),s=parseInt(l.totalItems);a({media:o,mediaType:n,searchTerm:e,pageToken:t,nextPageToken:t<i?t+1:void 0,totalPages:i,totalItems:s})})).catch(s).finally((()=>{o()}))}),[s,l,C]),{uploadMedia:k,isUploading:O,isTranscoding:N,isNewResourceProcessing:P,isCurrentResourceProcessing:R,isNewResourceTranscoding:M,isNewResourceMuting:D,isElementTrimming:B,isCurrentResourceUploading:F,isCurrentResourceTranscoding:H,isCurrentResourceMuting:U,isCurrentResourceTrimming:z,canTranscodeResource:G}=wo({media:n,prependMedia:d,updateMediaElement:T,deleteMediaElement:S}),{uploadVideoFrame:j}=Ca({updateMediaElement:T}),{updateVideoIsMuted:Z}=To({updateMediaElement:T}),{updateBaseColor:W}=xo({updateMediaElement:T}),{updateBlurHash:V}=Po({updateMediaElement:T}),{allowedMimeTypes:{video:$},capabilities:{hasUploadMediaAction:q}}=Y(),K=(0,u.useRef)();K.current=e;const Q=(0,u.useCallback)((()=>{const{mediaType:e}=K.current;c();const t=!K.current.pageToken;e||K.current.searchTerm||!t||x({mediaType:e,cacheBust:!0},i)}),[x,i,c]);(0,u.useEffect)((()=>{x({searchTerm:o,pageToken:r,mediaType:a},i)}),[x,i,a,r,o]);const J=(0,u.useCallback)(((e,t)=>{const{posterProcessed:n,posterProcessing:r}=K.current;(async()=>{n.includes(e)||r.includes(e)||(E({id:e}),await j(e,t),b({id:e}))})()}),[E,j,b]),ee=(0,u.useCallback)(((e,t)=>{const{audioProcessed:n,audioProcessing:r}=K.current;(async()=>{n.includes(e)||r.includes(e)||(g({id:e}),await Z(e,t),h({id:e}))})()}),[g,Z,h]),te=(0,u.useCallback)((e=>{const{baseColorProcessed:t,baseColorProcessing:n}=K.current,{id:r}=e;(async()=>{t.includes(r)||n.includes(r)||(y({id:r}),await W(e),_({id:r}))})()}),[y,W,_]),ne=(0,u.useCallback)((e=>{const{blurHashProcessed:t,blurHashProcessing:n}=K.current,{id:r}=e;(async()=>{t.includes(r)||n.includes(r)||(v({id:r}),await V({resource:e}),w({id:r}))})()}),[K,v,V,w]),re=(0,u.useCallback)((e=>{if(!e)return;const{type:t,isMuted:n,baseColor:r,src:a,id:o,posterId:l,mimeType:i,poster:s,blurHash:c}=e;if(!G(e))return;q&&(!$.includes(i)&&"gif"!==t||l||J(o,a),$.includes(i)&&null===n&&ee(o,a));const d="image"===t?(0,go.default)(0,e):s;d&&!r&&te(e),d&&!c&&ne(e)}),[G,$,te,ne,ee,J,q]),{optimizeVideo:ae,optimizeGif:oe,muteExistingVideo:le,trimExistingVideo:ie}=bo({postProcessingResource:re,uploadMedia:k,updateMedia:I,deleteMediaElement:S});(0,u.useEffect)((()=>{n?.forEach((e=>re(e)))}),[n,a,o,re]);const se=Boolean(K.current?.posterProcessing?.length);return{state:{...e,isUploading:O||se,isTranscoding:N,isNewResourceProcessing:P,isCurrentResourceProcessing:R,isNewResourceTranscoding:M,isNewResourceMuting:D,isElementTrimming:B,isCurrentResourceUploading:F,isCurrentResourceTranscoding:H,isCurrentResourceMuting:U,isCurrentResourceTrimming:z,canTranscodeResource:G},actions:{setNextPage:f,setMediaType:p,setSearchTerm:m,resetFilters:c,uploadMedia:k,resetWithFetch:Q,uploadVideoPoster:J,postProcessingResource:re,deleteMediaElement:S,updateMediaElement:T,optimizeVideo:ae,optimizeGif:oe,muteExistingVideo:le,trimExistingVideo:ie}}}(n.local,r.local);var o,l;const i={local:a,media3p:(o=n.media3p,l=r.media3p,{state:{selectedProvider:o.selectedProvider,searchTerm:o.searchTerm},actions:{setSelectedProvider:l.setSelectedProvider,setSearchTerm:l.setSearchTerm},...$o(o,l)})};return c.createElement(hi.Provider,{value:i},t)};const bi=function(e){return(0,u.useContextSelector)(hi,e??u.identity)};const yi=function(e){return bi((t=>{let{local:n}=t;return(e??u.identity)(n)}))},_i=(0,u.createContext)({state:{},actions:{}});function vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{})}function wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return e[n]={...r,...e[n]},e}),{...t})}function Ti(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce(((e,n)=>(e[n[t]]=n,e)),{})}function Si(){return Si=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Si.apply(this,arguments)}const Ci=function TaxonomyProvider(e){const[t,n]=(0,u.useState)([]),[r,a]=(0,u.useState)({}),[o,l]=(0,u.useState)(!0),{actions:{clearHistory:i}}=pr(),{updateStory:s,isStoryLoaded:d,terms:p,hasTaxonomies:m}=Sa((e=>{let{state:{pages:t,story:n},actions:{updateStory:r}}=e;return{updateStory:r,isStoryLoaded:t.length>0,terms:n.terms,hasTaxonomies:n?.taxonomies?.length>0}})),{getTaxonomyTerm:f,createTaxonomyTerm:g,getTaxonomies:h}=X((e=>{let{actions:t}=e;return t}));(0,u.useEffect)((()=>{m&&async function(){try{const e=await h();n(e)}catch(e){console.error(e.message)}}()}),[m,h]);const E=(0,u.useRef)(!1);(0,u.useEffect)((()=>{if(t.length>0&&d&&!E.current){const e=Ti(t,"slug"),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return vi(Object.entries(e).map((e=>{let[n,r]=e;return[t(n),r]})))}(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>((t||[]).forEach((t=>{e[t.taxonomy]=e[t.taxonomy]||{},e[t.taxonomy][t.slug]=t})),e)),{})}(p),(t=>e[t]?.restBase)),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return vi(Object.entries(e).map((e=>{let[n,r]=e;return[n,t(r)]})))}(n,(e=>Object.values(e).map((e=>e.id))));a(n),i(),s({properties:{terms:r}}),E.current=!0}}),[p,d,t,a,i,s]);const b=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];s({properties:n=>{const r="function"==typeof t?t(n.terms[e.restBase]):t;return{...n,terms:{...n.terms,[e.restBase]:r}}}})}),[s]),y=(0,u.useCallback)(((e,t)=>{b(e,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.includes(t.id)?e:[...e,t.id]}))}),[b]),_=(0,u.useCallback)((async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];const o=e?.restPath;if(!o)return[];try{r=await f(o,t)}catch(e){console.error(e.message)}if(r.length<1)return r;const l={[e.restBase]:Ti(r,"slug")};if(a((e=>wi(e,l))),n&&t.search){const n=uo(t.search),a=r.find((e=>e.slug===n));a&&y(e,a)}return r}),[f,y]),v=(0,u.useCallback)((async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const l={name:t};n?.id&&(l.parent=n.id,l.slug=`${n.slug}-${uo(l.name)}`);const i=l?.slug||uo(t),s=r[e.restBase]?.[i];if(s)return void(o&&y(e,s));const c=e?.restPath;if(c)try{const t=await g(c,l),n={[e.restBase]:{[t.slug]:t}};a((e=>wi(e,n))),o&&y(e,t)}catch(n){"term_exists"===n.code&&_(e,{search:t},o)}}),[g,r,_,y]);(0,u.useEffect)((()=>{if(o&&t?.length){t.filter((e=>e.hierarchical)).forEach((e=>_(e,{per_page:-1}))),l(!1)}}),[_,o,t]);const w=(0,u.useMemo)((()=>({state:{taxonomies:t,termCache:r,terms:Array.isArray(p)?{}:p},actions:{createTerm:v,addSearchResultsToCache:_,setTerms:b,addTermToSelection:y}})),[r,p,t,v,_,b,y]);return c.createElement(_i.Provider,Si({},e,{value:w}))};const Ii=function(e){return(0,u.useContextSelector)(_i,e??u.identity)};var Ai=n(14071);const xi=[1,0];function ki(e){return"number"==typeof e}const Oi=function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const{updateForResizeEvent:l,defaultAttributes:i}=(0,A.getDefinitionForType)(e);if(ki(t)||(t=ki(n)?n*a:o?Math.min(o.width*ae.DEFAULT_DPR,.8*ae.PAGE_WIDTH):ae.PAGE_WIDTH/2),!ki(n)&&l&&(n=l({...i,...r},xi,t).height),ki(n)||(n=t/a),t>ae.PAGE_WIDTH||n>ae.PAGE_HEIGHT){const e=t/n;e<=ae.PAGE_WIDTH/ae.PAGE_HEIGHT?n=(t=Math.min(t,ae.PAGE_WIDTH))/e:t=(n=Math.min(n,ae.PAGE_HEIGHT))*e}return{width:t=(0,Pr.dataPixels)(t),height:n=(0,Pr.dataPixels)(n)}};function Ni(e){return"number"==typeof e}const Pi=function(e,t){let{resource:n,x:r,y:a,width:o,height:l,mask:i,rotationAngle:s=0,scale:c=100,focalX:d=50,focalY:u=50,sticker:p,...m}=t;const{isMaskable:f}=(0,A.getDefinitionForType)(e),g={type:e,...m},h=p&&Ai.default?.[p?.type]?.aspectRatio,E=n&&Ni(n.width)&&Ni(n.height)?n.width/n.height:1,b=Oi(e,o,l,g,h||E,n);return o=b.width,l=b.height,Ni(r)||(r=48),Ni(a)||(a=0),r=(0,Pr.dataPixels)(r),a=(0,Pr.dataPixels)(a),{...g,resource:n,x:r,y:a,width:o,height:l,rotationAngle:s,scale:c,focalX:d,focalY:u,...f?{mask:i||Ln.DEFAULT_MASK}:{},...p?{sticker:p}:{}}},Ri=(0,u.createContext)({state:{},actions:{}}),Mi=A.MEDIA_ELEMENT_TYPES,Li=A.MEDIA_ELEMENT_TYPES.concat(A.ELEMENT_TYPES.SHAPE),Di=e=>Mi.includes(e),Bi=e=>Li.includes(e);const Fi=function DropTargetsProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)(null),[a,o]=(0,u.useState)({}),[l,i]=(0,u.useState)(null),{actions:{pushTransform:s}}=(0,C.useTransform)(),{currentPage:d,combineElements:p}=Sa((e=>{let{state:{currentPage:t},actions:{combineElements:n}}=e;return{currentPage:t,combineElements:n}})),m=(0,u.useMemo)((()=>d?.elements||[]),[d?.elements]),f=(0,u.useMemo)((()=>m.filter((e=>{let{id:t}=e;return t in a})).map((e=>{let{id:t}=e;return t})).reverse()),[a,m]),g=(0,u.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=document.elementsFromPoint(e,t);return f.find((e=>r.includes(a[e])&&e!==n))||null}),[f,a]),h=(0,u.useCallback)(((e,t)=>{o((n=>({...n,[e]:t})))}),[]),E=(0,u.useCallback)((e=>{o((t=>{const{[e]:n,...r}=t;return r}))}),[]),b=(0,u.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!Di(e?.type))return;const a=Pi(e.type,{resource:e}),o=m.find((e=>{let{id:t}=e;return t===r})),c=o?.scale??a.scale,d=o?.focalX??a.focalX,u=o?.focalY??a.focalY,p=o?.flip??a.flip,f=g(t,n,r);f&&f!==l?(s(f,{dropTargets:{active:!0,replacement:{resource:e,scale:c,focalX:d,focalY:u,flip:p}}}),r&&s(r,{dropTargets:{hover:!0}})):f||r&&s(r,{dropTargets:{hover:!1}}),i(f),m.filter((e=>{let{id:t}=e;return t!==f})).forEach((e=>s(e.id,{dropTargets:{active:!1,replacement:null}})))}),[l,m,g,s]),y=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Di(e?.type))return;if(!l||l===t)return void Object.keys(a).filter((e=>e!==t)).map((e=>s(e,null)));const n={secondId:l},r=m.find((e=>{let{id:n}=e;return n===t}));n.firstElement=r||Pi(e.type,{resource:e}),p(n),m.filter((e=>{let{id:n}=e;return a[n]&&n!==t})).forEach((e=>{s(e.id,{dropTargets:{active:!1,replacement:null}}),s(e.id,null)})),i(null);const{onDropHandler:o}=(0,A.getDefinitionForType)(e.type);o&&e.src&&!e.isPlaceholder&&o(l)}),[l,p,m,a,s]),_=(0,tr.useGlobalIsKeyPressed)("mod"),v={state:{dropTargets:a,activeDropTargetId:l,draggingResource:n,isDropTargetingDisabled:_},actions:{registerDropTarget:_?Ft:h,unregisterDropTarget:E,isDropSource:_?()=>!1:Di,isDropTarget:_?()=>!1:Bi,handleDrag:_?Ft:b,handleDrop:_?Ft:y,setDraggingResource:_?Ft:r}};return c.createElement(Ri.Provider,{value:v},t)};const Hi=function(e,t){return(0,u.useContextSelector)(Ri,e??u.identity,t)};var Ui=n(63594),zi=n.n(Ui),Gi=n(93991);const ji=function UnitsProvider(e){let{pageSize:t,children:n}=e;const{width:r,height:a}=t,o=(0,u.useMemo)((()=>({state:{pageSize:{width:r,height:a}},actions:{dataToEditorX:e=>(0,Pr.dataToEditorX)(e,r),dataToEditorY:e=>(0,Pr.dataToEditorY)(e,a),editorToDataX:(e,t)=>(0,Pr.editorToDataX)(e,r,t),editorToDataY:(e,t)=>(0,Pr.editorToDataY)(e,a,t),getBox:e=>(0,Pr.getBox)(e,r,a)}})),[r,a]);return c.createElement(Gi.default.Provider,{value:o},n)},Yi=(0,u.createContext)({actions:{setZoomSetting:()=>{}},state:{}});const Zi=function(e){return(0,u.useContextSelector)(Yi,e??u.identity)},Wi=72,Vi={zoomSetting:Ae.FIT,zoomLevel:null,workspaceSize:{width:null,height:null,availableHeight:null},scrollOffset:{left:0,top:0}},$i={setZoomSetting:(e,t)=>{let{payload:n}=t;return{...e,zoomSetting:n,scrollOffset:{left:0,top:0}}},setZoomLevel:(e,t)=>{let{payload:n}=t;return{...e,zoomLevel:n,zoomSetting:Ae.FIXED}},setScrollOffset:(e,t)=>{let{payload:n}=t;return{...e,scrollOffset:n}},setWorkspaceSize:(e,t)=>{let{payload:n}=t;return{...e,workspaceSize:n}}};const qi=function(){const[e,t]=(0,u.useReduction)(Vi,$i),{zoomSetting:n,zoomLevel:r,workspaceSize:a,scrollOffset:o}=e,l=(0,u.useMemo)((()=>function(e,t,n){let r;const a=e.width/e.availableHeight;switch(t){case Ae.FILL:r=a>ae.FULLBLEED_RATIO?e.width-P.SCROLLBAR_WIDTH-Wi:(e.availableHeight-P.SCROLLBAR_WIDTH)*ae.FULLBLEED_RATIO-Wi;break;case Ae.FIT:{const t=e.width-144;r=a>ae.FULLBLEED_RATIO?Math.min(t,(e.availableHeight-Wi)*ae.FULLBLEED_RATIO):t;break}default:if(isNaN(n))break;r=n*ae.PAGE_WIDTH}r=Math.max(0,r);const o=Oe*Math.floor(r/Oe),l=o/ae.PAGE_RATIO,i=o/ae.FULLBLEED_RATIO,s=o>=e.width-Wi-24,c=l>=e.availableHeight-Wi-24,d=s||c,u=!d&&o<e.width-200,p=d?Wi:12;return{pageWidth:o,pageHeight:l,hasHorizontalOverflow:s,hasVerticalOverflow:c,hasPageNavigation:u,pagePadding:p,viewportWidth:d?e.width:o+p,viewportHeight:d?e.availableHeight:i+p}}(a,n,r)),[a,n,r]),{pageWidth:i}=l,s=(0,u.useMemo)((()=>{const e=Math.ceil(i/Oe*Oe);switch(n){case Ae.FILL:case Ae.FIT:return e/ae.PAGE_WIDTH;default:return r}}),[r,i,n]);return{state:{...l,zoomSetting:n,zoomLevel:s,workspaceWidth:a.width,workspaceHeight:a.height,scrollLeft:o.left,scrollTop:o.top},actions:t}},Xi=[xe.OPENING,xe.CLOSING],Ki={openCarousel:e=>e===xe.CLOSED?xe.OPENING:e,closeCarousel:e=>e===xe.OPEN?xe.CLOSING:e,completeTransition:e=>({[xe.OPENING]:xe.OPEN,[xe.CLOSING]:xe.CLOSED}[e]||e)};const Qi=function(){const[e,t]=(0,u.useReduction)(xe.OPEN,Ki),n=Xi.includes(e),{openCarousel:r,closeCarousel:a,completeTransition:o}=t;return(0,u.useEffect)((()=>{if(!n)return;const e=setTimeout(o,ke);return()=>clearTimeout(e)}),[n,o]),{state:{carouselState:e,isCarouselInTransition:n},actions:{openCarousel:r,closeCarousel:a}}};const Ji=function LayoutProvider(e){let{children:t}=e;const n=qi(),r=Qi(),a={state:{...n.state,...r.state},actions:{...n.actions,...r.actions}};return c.createElement(Yi.Provider,{value:a},t)};const utils_nativeCopyPasteExpected=function(){const{activeElement:e}=document,{tagName:t,type:n,contentEditable:r}=e;if("true"===r||"textarea"===t.toLowerCase()||"input"===t.toLowerCase()&&["text","number","search","email","tel","url"].includes(n))return!0;const a=window.getSelection(),o=a.rangeCount?a.getRangeAt(0):null;return Boolean(o&&!o.collapsed)};const es=function(e,t){(0,u.useEffect)((()=>{const n=t=>{const{clipboardData:n}=t;utils_nativeCopyPasteExpected()||n?.types?.length||e(t)},r=e=>{utils_nativeCopyPasteExpected()||t(e)};return document.addEventListener("copy",n),document.addEventListener("cut",n),document.addEventListener("paste",r),()=>{document.removeEventListener("copy",n),document.removeEventListener("cut",n),document.removeEventListener("paste",r)}}),[e,t])},ts="_DOUBLEDASH_";const ns=function(){const{updateElementsByResourceId:e}=Sa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId})));return{updateElementDimensions:(0,u.useCallback)((t=>{let{id:n,resource:r}=t;e({id:n,properties:e=>e.resource.width!==r.width||e.resource.height!==r.height?{resource:r,type:r.type,width:r.width,height:r.height,x:ae.PAGE_WIDTH/2-r.width/2,y:ae.PAGE_HEIGHT/2-r.height/2}:{type:r.type,resource:r}})}),[e])}};const rs=function(){const e=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];setTimeout((()=>{const t=window.document;e&&t.activeElement&&t.activeElement!==t.body&&t.activeElement.blur();const n=new window.FocusEvent("focusout");t.dispatchEvent(n)}))}),[]);return(0,tr.useGlobalKeyDownEffect)({key:"mod+option+2",editable:!0},(()=>e(!0)),[e]),e};const as=function(){const{addElement:e}=Sa((e=>{let{actions:t}=e;return{addElement:t.addElement}})),{setZoomSetting:t}=Zi((e=>{let{actions:{setZoomSetting:t}}=e;return{setZoomSetting:t}})),n=rs();return(0,u.useCallback)(((r,a)=>{t(Ae.FIT);const o=function(e,t){return(0,A.createNewElement)(e,Pi(e,t))}(r,a),{id:l,resource:i}=o;return e({element:o}),"video"===r&&i?.src&&!i.isPlaceholder&&setTimeout((()=>{const e=document.getElementById(`video-${l}`);e&&e.play().catch((()=>{}))})),n(),o}),[e,n,t])};const os=function(){const{uploadMedia:e,postProcessingResource:t}=yi((e=>{let{actions:{uploadMedia:t,postProcessingResource:n}}=e;return{uploadMedia:t,postProcessingResource:n}})),n=as(),{updateElementDimensions:r}=ns(),{deleteElementsByResourceId:a}=Sa((e=>({deleteElementsByResourceId:e.actions.deleteElementsByResourceId}))),o=(0,u.useCallback)((e=>{let{resource:t}=e;n(t.type,{resource:t})}),[n]),l=(0,u.useCallback)((e=>{let{id:t,resource:n}=e;r({id:t,resource:n})}),[r]),i=(0,u.useCallback)((e=>{let{id:n,resource:a}=e;r({id:n,resource:a}),t(a)}),[r,t]),s=(0,u.useCallback)((e=>{let{id:t}=e;a({id:t})}),[a]);return(0,u.useCallback)((t=>{e(t,{onUploadStart:o,onUploadProgress:l,onUploadError:s,onUploadSuccess:i})}),[e,o,l,s,i])},ls=186,is=145,ss=120,cs=200,ds=70,us=56,ps=40,ms={locked:!0,topLeft:2,topRight:2,bottomRight:2,bottomLeft:2},fs={locked:!0,hasHiddenPadding:!1,horizontal:0,vertical:0},gs="left",hs={content:(0,d._x)("Lorem ipsum dolor sit amet, consectetur adipiscing elit.","text preset content","web-stories"),fontSize:(0,Pr.dataFontEm)(1.33),lineHeight:1.2,x:ps,y:(ae.PAGE_HEIGHT-(0,Pr.dataFontEm)(1.33))/2,font:A.TEXT_ELEMENT_DEFAULT_FONT,width:cs,borderRadius:ms,backgroundTextMode:Dn.BACKGROUND_TEXT_MODE.NONE,padding:fs,textAlign:gs},Es=[{title:(0,d._x)("Title 1","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Be}">${(0,d._x)("Title 1","text preset content","web-stories")}</span>`,fontSize:(0,Pr.dataFontEm)(2.667),lineHeight:1.19,x:ps,y:(ae.PAGE_HEIGHT-(0,Pr.dataFontEm)(2.667))/2,font:A.TEXT_ELEMENT_DEFAULT_FONT,width:ls,borderRadius:ms,backgroundTextMode:Dn.BACKGROUND_TEXT_MODE.NONE,padding:fs,textAlign:gs}},{title:(0,d._x)("Title 2","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Be}">${(0,d._x)("Title 2","text preset content","web-stories")}</span>`,fontSize:(0,Pr.dataFontEm)(2),lineHeight:1.2,x:ps,y:(ae.PAGE_HEIGHT-(0,Pr.dataFontEm)(2))/2,font:A.TEXT_ELEMENT_DEFAULT_FONT,width:is,borderRadius:ms,backgroundTextMode:Dn.BACKGROUND_TEXT_MODE.NONE,padding:fs,textAlign:gs}},{title:(0,d._x)("Title 3","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Be}">${(0,d._x)("Title 3","text preset content","web-stories")}</span>`,fontSize:(0,Pr.dataFontEm)(1.6),lineHeight:1.2,x:ps,y:(ae.PAGE_HEIGHT-(0,Pr.dataFontEm)(1.6))/2,font:A.TEXT_ELEMENT_DEFAULT_FONT,width:ss,borderRadius:ms,backgroundTextMode:Dn.BACKGROUND_TEXT_MODE.NONE,padding:fs,textAlign:gs}},{title:(0,d._x)("Paragraph","text preset title","web-stories"),element:hs},{title:(0,d._x)("Caption","text preset title","web-stories"),element:{content:`<span style="font-weight: ${De}">${(0,d._x)("Caption","text preset content","web-stories")}</span>`,fontSize:(0,Pr.dataFontEm)(1),lineHeight:1.2,x:ps,y:(ae.PAGE_HEIGHT-(0,Pr.dataFontEm)(1))/2,font:A.TEXT_ELEMENT_DEFAULT_FONT,width:ds,borderRadius:ms,backgroundTextMode:Dn.BACKGROUND_TEXT_MODE.NONE,padding:fs,textAlign:gs}},{title:(0,d._x)("Label","text preset title","web-stories").toUpperCase(),element:{content:(0,d._x)("Label","text preset content","web-stories").toUpperCase(),fontSize:(0,Pr.dataFontEm)(.888),lineHeight:1.2,x:ps,y:(ae.PAGE_HEIGHT-(0,Pr.dataFontEm)(.888))/2,font:A.TEXT_ELEMENT_DEFAULT_FONT,width:us,borderRadius:ms,backgroundTextMode:Dn.BACKGROUND_TEXT_MODE.NONE,padding:fs,textAlign:gs}}];const bs=function(){const{currentPage:e,addElements:t,updateCurrentPageProperties:n,deleteElementById:r,combineElements:a,addAnimations:o}=Sa((e=>{let{state:{currentPage:t},actions:{addElements:n,deleteSelectedElements:r,updateCurrentPageProperties:a,deleteElementById:o,combineElements:l,addAnimations:i}}=e;return{currentPage:t,addElements:n,deleteSelectedElements:r,updateCurrentPageProperties:a,deleteElementById:o,combineElements:l,addAnimations:i}})),l=(0,u.useBatchingCallback)((function(l){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===l.length)return!1;const s=l.find((e=>{let{isBackground:t}=e;return t}));let c=i;if(s){const t=e.elements[0];s.isDefaultBackground?(t.isDefaultBackground||r({elementId:t.id}),n({properties:{backgroundColor:s.backgroundColor}})):(c=i.map((e=>e.targets.includes(s.id)?{...e,targets:[t.id]}:e)),a({firstElement:s,secondId:t.id,shouldRetainAnimations:!1}))}const d=l.filter((e=>{let{isBackground:t}=e;return!t}));return d.length&&t({elements:d}),o({animations:c}),!0}),[t,e,n,a,r,o]);return l};const ys=function(){const e=bs(),{currentPage:t,selectedElements:n,deleteSelectedElements:r,selectedElementAnimations:a}=Sa((e=>{let{state:{currentPage:t,selectedElements:n,selectedElementAnimations:r},actions:{deleteSelectedElements:a}}=e;return{currentPage:t,selectedElements:n,deleteSelectedElements:a,selectedElementAnimations:r}})),o=os(),l=as(),i=(0,Sr.usePasteTextContent)(l,hs),s=(0,u.useCallback)((e=>{const{type:o}=e;0!==n.length&&(!function(e,t,n,r){if(!t.length||!r)return;const{clipboardData:a}=r,o={sentinel:"story-elements",items:t.map((t=>({...t,...t.isDefaultBackground?{backgroundColor:e.backgroundColor}:null,basedOn:t.id,id:void 0}))),animations:n},l=JSON.stringify(o).replace(/--/g,ts),i=t.map((e=>{const{type:t}=e,{TextContent:n}=(0,A.getDefinitionForType)(t);return n?n(e):t})).join("\n"),s=t.map((e=>{const{type:t,x:n,y:r,rotationAngle:a}=e,{Output:o}=(0,A.getDefinitionForType)(t);return(0,u.renderToStaticMarkup)(c.createElement(o,{element:e,box:{width:100,height:100,x:n,y:r,rotationAngle:a}}))})).join("\n");a.setData("text/plain",i),a.setData("text/html",`\x3c!-- ${l} --\x3e${s}`)}(t,n,a,e),"cut"===o&&r(),e.preventDefault())}),[t,r,n,a]),d=(0,u.useBatchingCallback)((n=>{const{elements:r,animations:a}=function(e,t){let n={animations:[],elements:[]};for(let r=e.firstChild;r;r=r.nextSibling){if(8!==r.nodeType||-1!==r.nodeValue?.indexOf("Fragment"))continue;const e=JSON.parse(r.nodeValue.replace(new RegExp(ts,"g"),"--"));if("story-elements"!==e.sentinel)continue;const a=e.items.reduce(((n,r)=>{let{elements:a,animations:o}=n;const{element:l,elementAnimations:i}=(0,A.duplicateElement)({element:{...r,id:r.basedOn},animations:e.animations,existingElements:t.elements});return{elements:[...a,l],animations:[...o,...i]}}),{animations:[],elements:[]});return n={animations:[...n.animations,...a.animations],elements:[...n.elements,...a.elements]},n}return n}(n,t);return e(r,a)}),[e,t]),p=(0,u.useCallback)((e=>{const{clipboardData:t}=e;try{const n=!t.files?.length&&(t.getData("text/html")||t.getData("text/plain"));if(n){const t=document.createElement("template");t.innerHTML=n.replace(/<meta[^>]+>/g,"").replace(/<\/?html>/g,"").replace(/<\/?body>/g,"");let r=d(t.content);r||(r=i(t.innerHTML)),r&&e.preventDefault()}const{items:r}=t,a=[];for(let e=0;e<r.length;e++){const t=r[e].getAsFile();t&&a.push(t)}a.length>0&&o(a)}catch(e){}}),[d,i,o]);es(s,p)};function _s(e,t){let{editingElement:n,editingElementState:r={}}=t;return{...e,editingElement:n,editingElementState:r}}const vs=function(){const[e,t]=(0,u.useReducer)(_s,{editingElement:null,editingElementState:{}}),[n,r]=(0,u.useState)({}),a=(0,u.useCallback)((()=>{t({editingElement:null})}),[]),o=(0,u.useCallback)((e=>{t({editingElement:e})}),[]),l=(0,u.useCallback)(((e,n)=>{t({editingElement:e,editingElementState:n})}),[]),i=(0,u.useCallback)(((e,t)=>r((n=>({...n,[e]:t})))),[r]),s=(0,u.useRef)(null);s.current=n;const c=(0,u.useCallback)((e=>s.current[e]),[]),{editingElement:d,editingElementState:p}=e;return(0,u.useMemo)((()=>({nodesById:n,editingElement:d,editingElementState:p,setEditingElementWithState:l,setEditingElementWithoutState:o,clearEditing:a,getNodeForElement:c,setNodeForElement:i})),[n,d,p,l,o,a,c,i])};var ws=n(70333);function Ts(e,t,n,r,a){const{topLeftPoint:o,topRightPoint:l,bottomRightPoint:i,bottomLeftPoint:s}=(0,ws.getCorners)(e,t,n,r,a);return new(zi().Polygon)(new(zi().Vector),[new(zi().Vector)(o.x,o.y),new(zi().Vector)(s.x,s.y),new(zi().Vector)(i.x,i.y),new(zi().Vector)(l.x,l.y)])}const Ss=(0,u.createContext)({actions:{},state:{}}),Cs="canvasContainer",Is="pageContainer";const As=function CanvasProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),[a,o]=(0,u.useState)(null),l=(0,u.useRef)(null),[i,s]=(0,u.useState)(null),[d,p]=(0,u.useState)(null),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(null),[E,b]=(0,u.useState)(null),[y,_]=(0,u.useState)(!1),[v,w]=(0,u.useState)(null),[T,S]=(0,u.useState)(null),[C,I]=(0,u.useState)(null),[A,x]=(0,u.useState)(null),k=(0,u.useMemo)((()=>new window.IntersectionObserver((e=>{for(const t of e){if(!t.target.dataset.rectObservationKey)return;r((e=>({...e,[t.target.dataset.rectObservationKey]:t.boundingClientRect})))}}))),[]);(0,u.useEffect)((()=>()=>k.disconnect()),[k]);const O=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),{nodesById:N,editingElement:P,editingElementState:R,setEditingElementWithState:M,setEditingElementWithoutState:L,clearEditing:D,getNodeForElement:B,setNodeForElement:F}=vs(),{elements:H,backgroundElementId:U,selectedElementIds:z,toggleElementInSelection:G,setSelectedElementsById:j}=Sa((e=>{let{state:{currentPage:t,selectedElementIds:n},actions:{toggleElementInSelection:r,setSelectedElementsById:a}}=e;const o=t?.elements||[];return{elements:o,backgroundElementId:o[0]?.id,selectedElementIds:n,toggleElementInSelection:r,setSelectedElementsById:a}})),Y=(0,u.useCallback)(((e,t)=>{P&&P!==e&&D(),l.current===e&&"focus"===t.type||(l.current=e,t.shiftKey?G({elementId:e}):j({elementIds:[e]}),t.currentTarget.focus({preventScroll:!0}),U!==e&&t.stopPropagation(),"mousedown"===t.type&&(o(t),t.target.ownerDocument.addEventListener("mouseup",(()=>window.setTimeout(o,0,null)),{once:!0,capture:!0})))}),[P,U,D,G,j]),Z=(0,u.useCallback)((e=>{let{x:t,y:n,width:r,height:a}=e;const o=Ts(0,t,n,r,a),l=H.filter((e=>{let{isBackground:t}=e;return!t})).map((e=>{let{id:t,rotationAngle:n,x:r,y:a,width:l,height:i}=e;const s=Ts(n,r,a,l,i);return zi().testPolygonPolygon(o,s)?t:null})).filter((e=>e));j({elementIds:l})}),[H,j]);(0,u.useEffect)((()=>{!P||1===z.length&&z[0]===P||D(),l.current&&!z.includes(l.current)&&(l.current=null)}),[P,z,D]),ys();const[W,V]=(0,u.useState)(null),$=(0,u.useMemo)((()=>({state:{pageContainer:d,canvasContainer:i,fullbleedContainer:m,nodesById:N,editingElement:P,editingElementState:R,isEditing:Boolean(P),lastSelectionEvent:a,displayLinkGuidelines:y,pageAttachmentContainer:E,designSpaceGuideline:g,isEyedropperActive:C,eyedropperCallback:A,eyedropperImg:v,eyedropperPixelData:T,boundingBoxes:n,clientRectObserver:k,onMoveableMount:W},actions:{setPageContainer:p,setFullbleedContainer:f,getNodeForElement:B,setNodeForElement:F,setEditingElement:L,setEditingElementWithState:M,clearEditing:D,handleSelectElement:Y,selectIntersection:Z,setDisplayLinkGuidelines:_,setPageAttachmentContainer:b,setCanvasContainer:s,setDesignSpaceGuideline:h,setIsEyedropperActive:I,setEyedropperCallback:x,setEyedropperImg:w,setEyedropperPixelData:S,setMoveableMount:V}})),[d,i,m,N,P,R,a,y,E,g,C,A,v,T,n,k,B,F,L,M,D,Y,Z,W,V]);return c.createElement(Ss.Provider,{value:$},c.createElement(ji,{pageSize:O},t))};const xs=function(e){return(0,u.useContextSelector)(Ss,e??u.identity)};function ks(e){const t=(0,u.useContextSelector)(Ss,(e=>{let{state:t}=e;return t.clientRectObserver})),n=(0,u.useRef)(null);return(0,u.useCallback)((r=>{n.current&&t.unobserve?.(n.current),r&&(r.dataset.rectObservationKey=e,t.observe(r)),n.current=r}),[t,e])}function Os(e){return(0,u.useContextSelector)(Ss,(t=>{let{state:n}=t;return n.boundingBoxes?.[e]}))}var Ns=n(80475);const Ps="addBackgroundMedia",Rs="cropSelectedElements",Ms="cropElementsWithShapes",Ls="safeZone",Ds="previewStory",Bs="addLinks",Fs="enableSwipe",Hs="done",Us={[Ps]:{title:(0,d.__)("Add background media","web-stories"),figureSrc:"images/help-center/add_bg_module_1",description:[(0,d.__)("Double click any image or video to enter edit mode. To scale, use the slider. To change the focal point, drag the image or video.","web-stories")]},[Rs]:{title:(0,d.__)("Crop selected element","web-stories"),figureSrc:"images/help-center/media_edit_mode_module_2",description:[(0,d.__)("Double click any image or video element to enter edit mode. Then, use the slider to scale the element or move its focal point by dragging it.","web-stories")]},[Ms]:{title:(0,d.__)("Crop elements using shapes","web-stories"),figureSrc:"images/help-center/media_bg_shape_module_3",description:[(0,d.__)("Select a shape from the Shape menu to create a frame.","web-stories")]},[Ls]:{title:(0,d.__)("Stay within the safe zone","web-stories"),figureSrc:"images/help-center/safe_zone_module_4",description:[(0,d.__)("Elements work best when you keep them within the safe zone. Outside of the safe zone, elements like links and buttons may get cropped out or not function properly.","web-stories")]},[Ds]:{title:(0,d.__)("Preview your Web Story","web-stories"),figureSrc:"images/help-center/preview_module_5",description:[(0,d.__)("Use Preview Mode to view your Story before publishing.","web-stories"),(0,d.__)("Make sure buttons, links, logos, and text aren’t too close to the edge of your screen and that no Story element overlaps with the navigation bar.","web-stories")]},[Bs]:{title:(0,d.__)("Add links to story elements","web-stories"),figureSrc:"images/help-center/add_link_module_6",description:[(0,d.__)('Go to the Design tab. Scroll down to <strong>Link</strong> and enter a URL. To remove a link, select the "X" <screenreader> (clear)</screenreader> button next to the URL box.',"web-stories")]},[Fs]:{title:(0,d.__)("Enable swipe-up option","web-stories"),figureSrc:"images/help-center/page_attachment_module_7",description:[(0,d.__)("Go to the Design tab. Navigate to <strong>Page Attachment</strong> and enter a web address and a call to action to describe the link.","web-stories")]}},zs=[Hs,{title:(0,d.__)("Done!","web-stories"),description:[(0,d.__)("You’re caught up with quick tips. We’ll notify you when we add new tips, but feel free to come back whenever you need help.","web-stories")]}],Gs=500,js=1,Ys=2,Zs="help_center_companion",Ws=Dn.FOCUSABLE_SELECTORS.map((e=>`#${Zs} ${e}`)).join(", "),Vs=(0,u.createContext)({state:{},actions:{}}),$s=(e,t)=>t.navigationIndex<0;const qs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(t,n)=>e.reduce(((e,r)=>({...n,...e,...r(t,e)})),n)},Xs=qs([(e,t)=>{const n=!e.isOpen&&t.isOpen,r=!e.isOpeningToTip&&t.isOpeningToTip;return{navigationIndex:n&&!r?-1:t.navigationIndex}},(e,t)=>{if(!((e,t)=>e.navigationIndex<0&&t.navigationIndex>=0)(e,t))return{};const n=t.tipKeys.slice(0,t.navigationIndex).filter((e=>!t.readTips[e]));return{navigationFlow:[...t.tipKeys,...n,zs[0]]}},(e,t)=>({hasBottomNavigation:!$s(0,t)}),(e,t)=>({isLeftToRightTransition:!$s(0,t)&&t.navigationIndex-e.navigationIndex>0}),(e,t)=>({isPrevDisabled:t.navigationIndex<=0,isNextDisabled:t.navigationIndex>=t.navigationFlow?.length-1}),(e,t)=>{const n=!$s(0,t)&&((e,t)=>(t.navigationFlow||[]).filter((e=>t.tipKeys.includes(e))))(0,t)?.[t.navigationIndex];return{readTips:n?{...t.readTips,[n]:!0}:t.readTips}},function(e,t){return{unreadTipsCount:t.tipKeys.filter((e=>!t.readTips[e]))?.length||0}},function(e,t){if(((e,t)=>!e.isHydrated&&t.isHydrated)(e,t)){return e.unreadTipsCount<t.unreadTipsCount?{isOpen:!0}:{}}return{}},function(e,t){return{isOpeningToTip:t.isOpeningToTip&&!e.isOpeningToTip}}]),Ks=(e,t)=>{let{state:n,actions:r}=e;const a={...n,...t(n)};return{state:Xs(n,a),actions:r}},Qs=qs([function(e){return Boolean(e?.unreadTipsCount)&&void 0!==e?.isOpen?{isOpen:e?.isOpen}:{}},function(e){return e?.unreadTipsCount?{unreadTipsCount:e?.unreadTipsCount}:{}}]),Js=_o.getItemByKey(yo.HELP_CENTER),ec=e=>({isOpen:!1,isOpeningToTip:!1,navigationIndex:-1,navigationFlow:Object.keys({...Us,...e.additionalTips}),isLeftToRightTransition:!0,hasBottomNavigation:!1,isPrevDisabled:!0,isNextDisabled:!1,readTips:{},readError:!1,unreadTipsCount:Js?.unreadTipsCount??0,isHydrated:!1,tips:{...Us,...e.additionalTips},tipKeys:Object.keys({...Us,...e.additionalTips})});const tc=function HelpCenterProvider(e){let{children:t}=e;const{additionalTips:n={}}=Y(),{actions:{updateCurrentUser:r}}=X(),a=Boolean(r),[o,l]=(0,u.useReducer)(Ks,{state:Qs(Js,ec({additionalTips:n})),actions:{goToNext:()=>e=>{let{navigationIndex:t,navigationFlow:n}=e;return{navigationIndex:(0,Ns.clamp)(t+1,{MIN:0,MAX:n.length-1})}},goToPrev:()=>e=>{let{navigationIndex:t,navigationFlow:n}=e;return{navigationIndex:(0,Ns.clamp)(t-1,{MIN:0,MAX:n.length-1})}},goToMenu:()=>()=>({navigationIndex:-1}),goToTip:e=>t=>{let{navigationFlow:n}=t;return{navigationIndex:n.findIndex((t=>t===e))}},openToUnreadTip:e=>t=>{let{navigationFlow:n,readTips:r}=t;return r[e]?{}:{isOpen:!0,isOpeningToTip:!0,navigationIndex:n.findIndex((t=>t===e))}},toggle:()=>e=>{let{isOpen:t}=e;return(0,L.trackEvent)("help_center_toggled",{status:t?"closed":"open"}),{isOpen:!t}},close:()=>e=>{let{isOpen:t}=e;return t&&(0,L.trackEvent)("help_center_toggled",{status:"closed"}),{isOpen:!1}},hydrateReadTipsSuccess:e=>t=>({readTips:{...e?.readTips??{},...t.readTips},isHydrated:!0}),persistingReadTipsError:()=>()=>({readError:!0})}}),{currentUser:i,updateCurrentUser:s}=xa((e=>{let{state:t,actions:n}=e;return{currentUser:t.currentUser,updateCurrentUser:n.updateCurrentUser}})),d=(0,u.useMemo)((()=>Object.entries(o.actions).reduce(((e,t)=>{let[n,r]=t;return e[n]=function(){return l(r(...arguments))},e}),{})),[o.actions]),{isHydrated:p,unreadTipsCount:m}=o.state;(0,u.useEffect)((()=>{if(p){const e=_o.getItemByKey(yo.HELP_CENTER);_o.setItemByKey(yo.HELP_CENTER,{...e,unreadTipsCount:m})}}),[p,m]);const{isOpen:f}=o.state;(0,u.useEffect)((()=>{const e=_o.getItemByKey(yo.HELP_CENTER);_o.setItemByKey(yo.HELP_CENTER,{...e,isOpen:f})}),[f]),(0,u.useEffect)((()=>{!p&&i?.onboarding&&d.hydrateReadTipsSuccess({readTips:i.onboarding})}),[d,i,p]);const g=(h=o.state.readTips,Object.keys(h||{}).join(" "));var h;const E=(0,u.useRef)(!1);(0,u.useEffect)((()=>{var e;(g||p)&&a&&(E.current?s({onboarding:(e=g,e.split(" ").sort(((e,t)=>e.localeCompare(t))).reduce(((e,t)=>({...e,[t]:!0})),{}))}).catch(d.persistingReadTipsError):E.current=!0)}),[d,s,a,g,p]);const[b,y]=(0,u.useState)(o.state);(0,u.useEffect)((()=>y(o.state)),[o.state]);const _=!b.isOpen&&o.state.isOpen?o.state.navigationIndex:b.navigationIndex;(0,u.useEffect)((()=>{if(_>-1&&o.state.navigationFlow.length>=_){const e=o.state.navigationFlow[_];(0,L.trackEvent)("help_center_read_tip",{name:e,unread_count:o.state.unreadTipsCount}),o.state.unreadTipsCount===o.state.navigationFlow.length&&(0,L.trackEvent)("tutorial_begin"),"done"===e&&(0,L.trackEvent)("tutorial_complete")}}),[_]);const v=(0,u.useMemo)((()=>({state:{...o.state,navigationIndex:_},actions:d})),[d,o.state,_]);return c.createElement(Vs.Provider,{value:v},t)};function nc(e){return(0,u.useContextSelector)(Vs,e??u.identity)}const rc={SAFE_ZONE:"safeZone"};const ac=(0,u.createContext)({});const oc=function(e){return(0,u.useContextSelector)(ac,e??u.identity)};const lc=function(){const e=Sa((e=>{let{state:{pages:t=[]}}=e;return t.reduce(((e,t)=>(e.push(...t.elements.filter((e=>{let{type:t,isExternal:n}=e;return["image","video","gif"].includes(t)&&!n})).map((e=>{let{resource:t}=e;return t.id}))),e)),[])})),{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}=yi((e=>{let{state:{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}}=e;return{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}}));return(0,u.useMemo)((()=>Boolean(e?.some((e=>t(e)||n(e))))),[e,t,n])};const ic=function AutoSaveHandler(){const{autoSaveInterval:e}=Y(),{state:{hasNewChanges:t}}=pr(),{status:n,saveStory:r}=Sa((e=>{let{state:{story:{status:t}},actions:{saveStory:n}}=e;return{status:t,saveStory:n}})),a=lc(),o="draft"===n||!n,l=(0,u.useRef)(r);return(0,u.useEffect)((()=>{l.current=r}),[r]),(0,u.useEffect)((()=>{if(!o||!t||!e||a)return;const n=setTimeout((()=>l.current()),1e3*e);return()=>clearTimeout(n)}),[e,o,t,a]),null},sc=(0,u.createContext)({actions:{},state:{}});const cc=function(e){return(0,u.useContextSelector)(sc,e??u.identity)},dc=window.requestIdleCallback||function(e,t){const n=(t=t||{}).timeout||1,r=performance.now();return setTimeout((function(){e({get didTimeout(){return!t.timeout&&performance.now()-r-1>n},timeRemaining:function(){return Math.max(0,performance.now()-r+1)}})}),1)},uc=window.cancelIdleCallback||function(e){clearTimeout(e)};const pc=function(){const e=(0,u.useRef)([]),t=(0,u.useRef)(!1),n=(0,u.useRef)([null,null]),r=(0,u.useCallback)((()=>{if(t.current=!0,!e.current.length)return void(t.current=!1);const[a,o]=e.current.shift(),l=dc((async()=>{await o(),n.current=[null,null],r()}));n.current=[a,l]}),[]),a=(0,u.useCallback)((t=>{e.current=e.current.filter((e=>{let[n]=e;return n!==t}));const[a,o]=n.current;t===a&&(uc(o),n.current=[null,null],r())}),[r]);return(0,u.useCallback)((n=>{let[o,l]=n;return a(o),e.current.push([o,l]),t.current||r(),()=>{a(o)}}),[r,a])};var mc=n(6114);const fc=ma().shape({width:ma().number,height:ma().number,containerHeight:ma().number});A.StoryPropTypes.story=ma().shape({storyId:ma().number,title:ma().string.isRequired,status:ma().string.isRequired,author:ma().shape({id:ma().oneOfType([ma().number,ma().string]),name:ma().string.isRequired}),slug:ma().string.isRequired,date:ma().string.isRequired,modified:ma().string.isRequired,excerpt:ma().string.isRequired,featuredMedia:ma().shape({id:ma().number.isRequired,url:ma().string.isRequired,width:ma().number.isRequired,height:ma().number.isRequired}),password:ma().string.isRequired,currentStoryStyles:ma().object,autoAdvance:ma().bool,defaultPageDuration:ma().number,backgroundAudio:ma().shape({resource:A.BackgroundAudioPropType})}),A.StoryPropTypes.size=ma().exact({width:ma().number.isRequired,height:ma().number.isRequired});ma().shape(kn.AnimationProps);function gc(){return gc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gc.apply(this,arguments)}const hc=p.default.div.attrs((e=>{let{previewMode:t,x:n,y:r,width:a,height:o,rotationAngle:l}=e;return t?{style:{position:"absolute",zIndex:1,left:`${n}px`,top:`${r}px`,width:`${a}px`,height:`${o}px`,transform:`rotate(${l}deg)`}}:{}})).withConfig({displayName:"displayElement__Wrapper",componentId:"sc-1uos4dq-0"})([""," "," "," contain:layout;transition:opacity 0.15s cubic-bezier(0,0,0.54,1);",""],(e=>{let{previewMode:t}=e;return!t&&x.elementWithPosition}),(e=>{let{previewMode:t}=e;return!t&&x.elementWithSize}),(e=>{let{previewMode:t}=e;return!t&&x.elementWithRotation}),(e=>{let{isBackground:t,theme:n}=e;return t&&(0,p.css)(["border-radius:",";overflow:hidden;"],n.borders.radius.small)})),Ec=p.default.div.withConfig({displayName:"displayElement__BackgroundOverlay",componentId:"sc-1uos4dq-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;"]),bc=p.default.div.withConfig({displayName:"displayElement__ReplacementContainer",componentId:"sc-1uos4dq-2"})(["transition:opacity 0.25s cubic-bezier(0,0,0.54,1);pointer-events:none;opacity:",";height:100%;"],(e=>{let{hasReplacement:t}=e;return t?1:0}));function AnimationWrapper(e){let{children:t,id:n,isAnimatable:r}=e;return r?c.createElement(kn.StoryAnimation.WAAPIWrapper,{target:n},t):t}const yc=(0,u.memo)((function DisplayElement(e){let{element:t,previewMode:n,isAnimatable:r=!1}=e;const{getBox:a,dataToEditorX:o}=(0,mc.default)((e=>({getBox:e.actions.getBox,dataToEditorX:e.actions.dataToEditorX}))),{getProxiedUrl:l}=Ao(),{actions:{maybeEnqueueFontStyle:i}}=fo(),[s,d]=(0,u.useState)(null),p=Boolean(s),{id:m,opacity:f,type:g,isBackground:h,overlay:E,border:b={},flip:y}=t,{isCurrentResourceProcessing:_,isCurrentResourceUploading:v}=yi((e=>{let{state:t}=e;return A.ELEMENT_TYPES.IMAGE===g?{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}:{}})),w=p?{...t,type:s.resource.type,resource:s.resource,scale:s.scale,focalX:s.focalX,focalY:s.focalY,flip:h?s.flip:y,overlay:h?s.overlay:E}:null,{Display:T}=(0,A.getDefinitionForType)(g),{Display:S}=(0,A.getDefinitionForType)(s?.resource.type)||{},I=(0,u.useRef)(null),k=a(t);(0,C.useTransformHandler)(m,(e=>{const t=I.current;if(null===e)t.style.transform="",t.style.width="",t.style.height="";else{const{translate:n,rotate:r,resize:a,dropTargets:o}=e;t.style.transform=`translate(${n?.[0]}px, ${n?.[1]}px) rotate(${r}deg)`,a&&0!==a[0]&&0!==a[1]&&(t.style.width=`${a[0]}px`,t.style.height=`${a[1]}px`),void 0!==o?.hover&&(t.style.opacity=o.hover?0:1),void 0!==o?.replacement&&d(o.replacement||null)}}));const O=(0,u.useRef)(null);(0,x.useColorTransformHandler)({id:m,targetRef:O,resetOnNullTransform:!1});const N=(0,Ln.getResponsiveBorder)(b,n,o);return c.createElement(hc,gc({ref:I,"data-element-id":m,isBackground:t.isBackground,previewMode:n},k),c.createElement(AnimationWrapper,{id:m,isAnimatable:r},c.createElement(Ln.DisplayWithMask,{element:t,fill:!0,box:k,style:{opacity:void 0!==f?f/100:null,...(0,Ln.shouldDisplayBorder)(t)?(0,Ln.getBorderPositionCSS)({...N,width:`${k.width}px`,height:`${k.height}px`}):null},previewMode:n,responsiveBorder:N},c.createElement(T,{element:t,previewMode:n,box:k,getProxiedUrl:l,isCurrentResourceProcessing:_,isCurrentResourceUploading:v,maybeEnqueueFontStyle:i})),!n&&c.createElement(bc,{hasReplacement:p},w&&c.createElement(Ln.DisplayWithMask,{element:w,fill:!0,box:k,style:{opacity:f?f/100:null},previewMode:n},c.createElement(S,{element:w,box:k,getProxiedUrl:l,isCurrentResourceProcessing:_,isCurrentResourceUploading:v,maybeEnqueueFontStyle:i}))),h&&E&&!p&&c.createElement(Ec,{ref:O,style:(0,kr.default)(E)})))})),_c=p.default.div.withConfig({displayName:"storyPageToNode__Page",componentId:"sc-rgshjs-0"})(["display:block;position:relative;padding:0;border:0;background-color:transparent;height:","px;width:","px;flex:none;outline:0;"],(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t})),vc=p.default.div.withConfig({displayName:"storyPageToNode__PreviewWrapper",componentId:"sc-rgshjs-1"})(["height:100%;position:relative;overflow:hidden;background-color:",";border-radius:4px;",""],(e=>{let{theme:t}=e;return t.colors.fg.white}),(e=>{let{background:t}=e;return(0,kr.default)(t)})),wc=p.default.div.withConfig({displayName:"storyPageToNode__FullHeight",componentId:"sc-rgshjs-2"})(["position:absolute;top:","px;bottom:","px;right:0;left:0;"],(e=>{let{yOffset:t}=e;return t}),(e=>{let{yOffset:t}=e;return t})),Tc=(0,u.forwardRef)((function PageWithDependencies(e,t){let{page:n,width:r,height:a,renderFullHeightThumb:o=!1,containerHeight:l}=e;return c.createElement(p.ThemeProvider,{theme:g.theme},c.createElement(mo,null,c.createElement(C.TransformProvider,null,c.createElement(ji,{pageSize:{width:r,height:a}},c.createElement(_c,{ref:t,height:o?l:a,width:r},c.createElement(vc,{background:n.backgroundColor},c.createElement(wc,{yOffset:o?(l-a)/2:0},n.elements.map((e=>c.createElement(yc,{key:e.id,previewMode:!0,element:e}))))))))))}));const Sc=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{renderFullHeightThumb:r=!1}=n,a=t*(1/ae.PAGE_RATIO),o=t*(1/ae.FULLBLEED_RATIO),l=document.createElement("div");l.style.cssText=`\n     contain: strict;\n     position: absolute;\n     top: 0;\n     left: 0;\n     width: ${t}px;\n     height: ${o}px;\n     opacity: 0;\n     transform: translate(-100%, -100%);\n     pointer-events: none;\n   `;const i=await new Promise((n=>{(0,u.render)(c.createElement(Tc,{ref:e=>{e&&n(e)},page:e,width:t,height:a,containerHeight:o,renderFullHeightThumb:r}),l)}));document.body.appendChild(l);const s=()=>{(0,u.unmountComponentAtNode)(l),document.body.removeChild(l)};return[i,s]};const Cc=async function(e,t){let{width:r=400,...a}=t;const o=await n.e(3182).then(n.bind(n,87559)),[l,i]=await Sc(e,r),s=await o.toJpeg(l,{...a,width:r,height:r*(1/ae.PAGE_RATIO),canvasHeight:r*(1/ae.PAGE_RATIO),canvasWidth:r});return i(),s};const Ic=function PageDataUrlProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),a=pc(),o=(0,u.useCallback)((e=>{const t=e.id,n=a([t,async()=>{const t=await Cc(e,{});r((n=>({...n,[e.id]:t})))}]);return()=>{n()}}),[a]),l=(0,u.useMemo)((()=>({state:{dataUrls:n},actions:{queuePageImageGeneration:o}})),[o,n]);return c.createElement(sc.Provider,{value:l},t)};const Ac=async function(e,t){let{width:r=400,...a}=t;const o=await n.e(3182).then(n.bind(n,87559)),[l,i]=await Sc(e,r,{renderFullHeightThumb:!0}),s=await o.toCanvas(l,{...a,fontEmbedCss:"",pixelRatio:1});return i(),s};var xc=n(88862);function kc(e){const{r:t,g:n,b:r,a=1}=e;return xc.relativeLuminance({r:t/255,g:n/255,b:r/255,a})}function Oc(e){const t=xc.str2rgba(e);return xc.relativeLuminance(t)}function Nc(e,t,n){const r=xc.contrast(e,t);return{ratio:r,WCAG_AA:xc.aa(r,n)}}function Pc(e,t,n){return Nc(kc({r:e[0],g:e[1],b:e[2]}),kc({r:t[0],g:t[1],b:t[2]}),n)}const Rc=(0,u.createContext)({actions:{},state:{}});const Mc=function(e,t){const n=e.getContext("2d"),r=(e.width/ae.FULLBLEED_RATIO-e.width/ae.PAGE_RATIO)/2,a=(0,Pr.getBox)({...t,height:t.height?t.height:(0,k.calculateTextHeight)(t,t.width)},e.width,e.height-2*r),{x:o,y:l,width:i,height:s}=a,c=l+r;return n.getImageData(o,c,i,s).data},Lc={},Dc={setPageCanvas:(e,t)=>{const{pageId:n,canvas:r}=t.payload;return{...e,[n]:r}},clearPageCanvas:(e,t)=>{const{pageId:n}=t.payload;return gn(e,[n])}};const Bc=function(){return(0,u.useReduction)(Lc,Dc)};const Fc=function(){const[e,t]=(0,u.useState)(null),n=(0,u.useRef)(e);n.current=e;const r=(0,u.useCallback)((e=>e.backgroundColor===n.current?.backgroundColor&&(0,u.shallowEqual)(e.elements,n.current?.elements)?n.current.canvas:null),[]),a=(0,u.useCallback)((e=>{let{page:n,canvas:r}=e;t({elements:n.elements,backgroundColor:n.backgroundColor,canvas:r})}),[]);return{setSnapshot:a,getSnapshotCanvas:r}};function PageCanvasCacheValidator(e){let{pageId:t,clearPageCanvasCache:n}=e;const r=Sa((e=>{let{state:n}=e;return gn(n.pages.find((e=>{let{id:n}=e;return n===t})),["animations"])}));return(0,u.useEffect)((()=>{n({pageId:r.id})}),[r,n]),(0,u.useEffect)((()=>()=>n({pageId:t})),[n,t]),null}PageCanvasCacheValidator.propTypes={pageId:ma().oneOfType([ma().string,ma().number]),clearPageCanvasCache:ma().func};const Hc=(0,u.memo)(PageCanvasCacheValidator);const Uc=function(e,t){return{...e,elements:e.elements.filter((e=>{let{id:n}=e;return!t.includes(n)}))}};const zc=function PageCanvasProvider(e){let{children:t}=e;const n=pc(),[r,a]=Bc(),{getSnapshotCanvas:o,setSnapshot:l}=Fc(),i=Sa((e=>{let{state:t}=e;return t.pages.map((e=>{let{id:t}=e;return t}))})),{currentPage:s,singleElementSelection:d}=Sa((e=>{let{state:t}=e;return{singleElementSelection:1===t.selectedElementIds?.length?t.selectedElementIds:je,currentPage:t.currentPage}})),p={currentPageValue:s,pageCanvasMapValue:r,singleElementSelectionValue:d},m=(0,u.useRef)(p);m.current=p;const f=(0,u.useCallback)((e=>{let[t,r]=e;const o=n([t,async()=>{const e=await Ac(r,{});a.setPageCanvas({pageId:r.id,canvas:e})}]);return o}),[n,a]),g=(0,u.useCallback)((()=>{const{currentPageValue:e,pageCanvasMapValue:t}=m.current;t[e.id]||f([e.id,e])}),[f]),h=(0,u.useCallback)((async(e,t)=>{const n=Uc(e,t);let r=o(n);return r||(r=await Ac(n,{}),l({page:n,canvas:r})),r}),[l,o]),E=(0,u.useCallback)((async e=>{const{pageCanvasMapValue:t}=m.current;let n=t[e.id];return n||(n=await Ac(e,{}),a.setPageCanvas({pageId:e.id,canvas:n})),n}),[a]),b=(0,u.useCallback)((async e=>{const{currentPageValue:t,singleElementSelectionValue:n}=m.current;let r;r=n.includes(e.id)?await h(t,n):await E(t);const{fontSize:a}=e,o=function(e,t){const n=[255,255,255,255],r=[0,0,0,255],a=[],o={r:255,g:255,b:255,a:1},l={r:0,g:0,b:0,a:1};for(let t=0;t<e.length;t+=4)a.push([e[t],e[t+1],e[t+2],e[t+3]]);const i=a.map((e=>Pc(r,e,t)));if(!i.some((e=>{let{WCAG_AA:t}=e;return!t})))return{color:l};const s=a.map((e=>Pc(n,e,t)));if(!s.some((e=>{let{WCAG_AA:t}=e;return!t})))return{color:o};const c=i.reduce(((e,t)=>e+t.ratio),0)<s.reduce(((e,t)=>e+t.ratio),0);return c?{color:l,backgroundColor:{...o,a:.7}}:{color:o,backgroundColor:{...l,a:.7}}}(Mc(r,e),a);return o}),[h,E]);return c.createElement(Rc.Provider,{value:{state:{pageCanvasMap:r},actions:{calculateAccessibleTextColors:b,generateDeferredPageCanvas:f,generateDeferredCurrentPageCanvas:g}}},i.map((e=>c.createElement(Hc,{key:e,pageId:e,clearPageCanvasCache:a.clearPageCanvas}))),t)};const Gc=function(){return(0,u.useContextSelector)(Rc,(e=>{let{actions:t}=e;return t.calculateAccessibleTextColors}))};const jc=function(e){return(0,u.useContextSelector)(Rc,e??u.identity)},Yc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGElEQVQYV2NkYGD4////fwZGEMnIyMgAAEvqB/6wfXLSAAAAAElFTkSuQmCC",Zc=p.default.div.withConfig({displayName:"devTools__Container",componentId:"sc-1mo3vwv-0"})(["position:fixed;z-index:2147483646;bottom:0;left:0;display:flex;flex-direction:column;width:35%;height:50%;border:6px solid ",";background:",";color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Wc=p.default.textarea.withConfig({displayName:"devTools__Textarea",componentId:"sc-1mo3vwv-1"})(["flex:1;border:0;background:",";color:",";white-space:nowrap;overflow:auto;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Vc=p.default.div.withConfig({displayName:"devTools__Options",componentId:"sc-1mo3vwv-2"})(["display:flex;justify-content:space-between;padding:6px;"]),$c=p.default.label.withConfig({displayName:"devTools__Label",componentId:"sc-1mo3vwv-3"})(["margin-right:6px;"]),qc=p.default.button.withConfig({displayName:"devTools__Button",componentId:"sc-1mo3vwv-4"})(["margin-left:6px;"]),Xc=e=>{const t=[];return[{...e,pages:e.pages.map((e=>({...e,elements:e.elements.map((e=>{const n={...e};return"resource"in e&&(n.resource={...e.resource},"video"===e.type&&(n.resource.mimeType="video/mp4",n.resource.src="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAPEbW9vdgAAAGxtdmhkAAAAANrF/AXaxfwFAAAD6AAAB9AAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE///////wAAAzh0cmFrAAAAXHRraGQAAAAB2sX8BdrF/AUAAAABAAAAAAAAB9AAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAABQAAAAUAAAAAAKwbWRpYQAAACBtZGhkAAAAANrF/AXaxfwFAAAD6AAAB9BVxAAAAAAAIWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAAAAAAACZ21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAq3N0c2QAAAAAAAAAAQAAAJthdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAABQAFABIAAAASAAAAAAAAAABDkpWVC9BVkMgQ29kaW5nAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAM2F2Y0MBTUAK/+EAG2dNQArsxLzzzUBAQZAAAAMAEAAAAwFI8SJZoAEABWjpeyyAAAAAEmNvbHJuY2xjAAEAAQAGAAAAGHN0dHMAAAAAAAAAAQAAABQAAABkAAAAZHN0c3oAAAAAAAAAAAAAABQAAAC1AAAADAAAAAwAAAAMAAAADAAAAGcAAAAOAAAADQAAAAwAAADEAAAADwAAAA4AAAAMAAAAmgAAAA8AAAAMAAAADAAAABEAAAAOAAAADAAAABxzdHNjAAAAAAAAAAEAAAABAAAACgAAAAEAAAAgY282NAAAAAAAAAACAAAAAAAAA/QAAAAAAAAGKwAAAKhjdHRzAAAAAAAAABMAAAABAAAAyAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAfQAAAABAAAAyAAAAAEAAAAAAAAAAQAAAGQAAAABAAAB9AAAAAEAAADIAAAAAQAAAAAAAAABAAAAZAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAZAAAAACAAAAZAAAABRzdHNzAAAAAAAAAAEAAAABAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAH0AAAAMgAAQAAAAAAAW1kYXQAAAAAAAADXAAAALFliIQAIf8tERhKDUPN//6tPIlfMgqs2j4bf1chdW+++2VwQdh75gd9Y8UGeNAnhlaisT01Zs49a/0nV0aO/GLhqiGwvWR/s1K9W3zBx2od2cS1bT/kb2rz7FeHrWTqTLX6Gx65Y6i33pdJ/uLJd1nt76ybxnGFuPrIHacdB39MBmZsd4t/m7wPBzhrJIjUCiCUcSaxJPxvEH+6DID5TqxsXtv0RS9+hTuYECGa+YWdx4EAAAAIQZokbEMfi4AAAAAIQZ5COIc/0YEAAAAIAZ5hNEEH1YAAAAAIAZ5jakEH1YEAAABjQZpoSahBaJlMCM/eVhjnGE9A+AdJ7SwN5vlKUC/otPa/5jefanvcx5sQZ4c8/3tiMqvDgQF8rydFoFe3gcpkTP4xG9DP5oXTv1DTSsVi1O/u9fkq6BMYR61X6/n148wbBk3hAAAACkGehi5RMJfxO6sAAAAJAZ6lKRDn87czAAAACAGep25Cn8WAAAAAwEGarDUILakymAT/lvijvmpe6mLGpu6rJNoev4/97f/3/AViMdt7WMTLeGSxGKwsecwmz+Z5NTf4Lgky4aLbYBjw9pUtNg4bov9E4yT+OadpewkQxiWZZozDDf98P4PN72xr+rkQJcODW8z2LOkQVijjHcWSmTAvF7/ANFm8TO5l9vC/tz7FvEis+ba+dTueI87l9hdLXQfWqKN+J9j1fj5cguj08byzEmWnKbLlqG1uTZmu0LDedc3Ugo76bySHIAAAAAtBnspklERc3+sNqQAAAAoBnukpEZ/3fsMPAAAACAGe625N/6+AAAAAlkGa8DUILakymARfBGYe5snAbMic1iEEu9W/yugK09WdqQ1/7ftt/lUz4i6orQg+4cIz2nHYVKTXCJJbyOrz/tGL+TWtNtUBVK2kbTsfCYF8ddhk+qL5Jr82IUEUALXNsKpx1hhGIJnvqqlGTOyyOpmwbHhNUa2TaBkzzVzuaVnuHnaL3sjfLR0XEc/T6ntUXHacPLf94QAAAAtBnw5klERd//FEowAAAAgBny1pFf+ngQAAAAgBny9uf+yhJAAAAA1BmzM1CC2pMpgE/xwwAAAACkGfUWSURFz/kYEAAAAIAZ9ybkv/mIA=",n.resource.poster=Yc,t.push(n.id)),"image"===e.type&&(n.resource.mimeType="image/png",n.resource.src=Yc)),n}))})))},t]},Kc=e=>{if(!e.length)return e;const t=e.match(/\/([^/?#]+)[^/]*$/);return t.length>1?`__WEB_STORIES_TEMPLATE_BASE_URL__/images/templates/%%templateName%%/${t[1]}`:e};const Qc=function DevTools(){const[e,t]=(0,u.useState)(!1),[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[l,i]=(0,u.useState)(!1),{showSnackbar:s}=(0,hr.useSnackbar)(),d=(0,u.useRef)(),{reducerState:p,restore:m}=Sa((e=>{let{internal:t}=e;return{reducerState:t.reducerState,restore:t.restore}})),{pages:f,current:g,selection:h,story:{globalStoryStyles:E}}=p,b={current:g,selection:h,story:{globalStoryStyles:E},version:er.DATA_VERSION,pages:f},y=a?Xc(b)[0]:l?(_=b,{..._,current:null,selection:[],story:{},pages:_.pages.map((e=>({...e,elements:e.elements.map((e=>{const t={...e};return"resource"in e&&(t.resource={...e.resource},"video"===e.type&&(t.resource.id=0,t.resource.posterId=0,t.resource.src=Kc(t.resource.src),t.resource.poster=Kc(t.resource.poster)),"image"===e.type&&(t.resource.id=0,t.resource.sizes=[],t.resource.src=Kc(t.resource.src))),t})),pageTemplateType:e?.pageTemplateType??""})))}):b;var _;const v=()=>t((e=>!e));(0,tr.useGlobalKeyDownEffect)({key:"mod+shift+alt+j",editable:!0},v);const w=JSON.stringify(y,null,2),T=n?window.btoa(w):w,[S,C]=(0,u.useState)(T);return(0,u.useEffect)((()=>C(T)),[T]),e?c.createElement(Zc,null,c.createElement(Vc,null,c.createElement("div",null,c.createElement($c,{title:"For easier sharing thru various channels"},c.createElement("input",{type:"checkbox",checked:n,onChange:()=>r((e=>!e))}),"Base64"),c.createElement($c,{title:"Replace resources with dummy resources"},c.createElement("input",{type:"checkbox",checked:a,onChange:()=>o((e=>!e))}),"Dummy resources"),c.createElement($c,{title:"Export as Template"},c.createElement("input",{type:"checkbox",checked:l,onChange:()=>i((e=>!e))}),"Template")),c.createElement("div",null,c.createElement(qc,{title:"Load data from input",onClick:()=>{let e=S;try{e=window.atob(e)}catch(e){}const t=JSON.parse(e),n={...t,story:{...p.story,...t.story},capabilities:p.capabilities},[r,o]=a?Xc(n):[n];m(r),o.length>0&&o.forEach((e=>{const t=document.getElementById(`video-${e}`);t&&t.load()})),s({message:"Story restored from input",timeout:1200})}},"Load"),c.createElement(qc,{title:"Copy data to clipboard",onClick:()=>{d.current.select(),document.execCommand("copy"),d.current.setSelectionRange(0,0),s({message:"Copied to clipboard",timeout:1200})}},"Copy"),c.createElement(qc,{title:"Close DevTools",onClick:v},"X"))),c.createElement(Wc,{ref:d,className:"mousetrap",value:S,onChange:e=>C(e.target.value)})):null},Jc=(0,p.createGlobalStyle)([".react-calendar__tile--now.react-calendar__month-view__days__day:focus{background-color:#eeeec1;}"]),ed="useskeyboard",td=(0,p.createGlobalStyle)(["body:not(",") *:focus{outline:none !important;}"],".useskeyboard"),nd=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Digit1","Digit2","Digit3"];const rd=()=>{const[e,t]=(0,u.useState)(!1),n=n=>{!e&&nd.includes(n.code)&&t(!0)},r=()=>{e&&t(!1)};return document.addEventListener("keydown",n,!0),document.addEventListener("mousedown",r,!0),(0,u.useEffect)((()=>function(){document.removeEventListener("keydown",n,!0),document.removeEventListener("mousedown",r,!0)})),(0,u.useEffect)((()=>{document.body.classList.toggle(ed,e)}),[e]),c.createElement(td,null)},ad=()=>({locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},allowedMimeTypes:{audio:["audio/mpeg","audio/aac","audio/wav","audio/ogg"],image:["image/png","image/jpeg","image/jpg","image/gif","image/webp"],caption:["text/vtt"],vector:["image/svg+xml"],video:["video/mp4","video/webm"]},isRTL:!1,storyId:1,cdnURL:"https://wp.stories.google/static/main/",maxUpload:314572800,capabilities:{hasUploadMediaAction:!1,canManageSettings:!1},metadata:{publisher:""},canViewDefaultTemplates:!0,showMedia3p:!0,encodeMarkup:!0,ffmpegCoreUrl:"https://wp.stories.google/static/main/js/@ffmpeg/core@0.10.0/dist/ffmpeg-core.js",apiCallbacks:{},MediaUpload:()=>null,styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const od=function StoryEditor(e){let{config:t,initialEdits:n,children:r}=e;const a=(0,v.default)(ad(),t),{storyId:o,isRTL:l,flags:i}=a;return(0,u.useEffect)((()=>{N.default.forEach(A.registerElementType)}),[]),c.createElement(S.FlagsProvider,{features:i},c.createElement(p.StyleSheetManager,{stylisPlugins:l?[_.default]:[]},c.createElement(p.ThemeProvider,{theme:M},c.createElement(z,null,c.createElement(j,{config:a},c.createElement(q,null,c.createElement(oo,null,c.createElement(ur,{size:50},c.createElement(w.default,null,c.createElement(Ta,{storyId:o,initialEdits:n},c.createElement(Ci,null,c.createElement(Aa,null,c.createElement(mo,null,c.createElement(Ei,null,c.createElement(ic,null),c.createElement(C.TransformProvider,null,c.createElement(Fi,null,c.createElement(tc,null,c.createElement(zc,null,c.createElement(Ic,null,c.createElement(R,null),c.createElement(Qc,null),c.createElement(I.DefaultMoveableGlobalStyle,null),c.createElement(I.CropMoveableGlobalStyle,null),c.createElement(T.ModalGlobalStyle,null),c.createElement(Jc,null),c.createElement(rd,null),r)))))))))))))))))))};const ld=(0,u.memo)((function PreviewPageElements(e){let{page:t}=e;return t.elements.map((e=>c.createElement(yc,{previewMode:!0,key:e.id,page:t,element:e,isAnimatable:!0})))})),id=p.default.div.withConfig({displayName:"previewPage__FullBleedPreviewWrapper",componentId:"sc-1r5t7dq-0"})(["height:",";width:100%;overflow:hidden;position:relative;display:flex;align-items:center;background-color:white;",";"],(e=>{let{pageSize:t}=e;return`${t.containerHeight}px`}),(e=>{let{background:t}=e;return(0,kr.default)(t)})),sd=p.default.div.withConfig({displayName:"previewPage__PreviewSafeZone",componentId:"sc-1r5t7dq-1"})(["width:100%;height:",";overflow:visible;position:absolute;margin:0;"],(e=>{let{pageSize:t}=e;return`${t.height}px`}));function PreviewPageAnimationController(e){let{animationState:t}=e;const n=(0,kn.useStoryAnimationContext)((e=>{let{actions:t}=e;return t.WAAPIAnimationMethods}));return(0,u.useEffect)((()=>{switch(t){case kn.STORY_ANIMATION_STATE.PLAYING:return n.play(),()=>{};case kn.STORY_ANIMATION_STATE.RESET:return n.reset(),()=>{};case kn.STORY_ANIMATION_STATE.SCRUBBING:case kn.STORY_ANIMATION_STATE.PAUSED:return n.pause(),()=>{};default:return()=>{}}}),[t,n]),(0,u.useEffect)((()=>()=>n.reset()),[n]),null}const cd=(0,u.memo)((0,u.forwardRef)((function PreviewPageDisplay(e,t){let{page:n,pageSize:r}=e;return c.createElement(id,{ref:t,pageSize:r,background:n.backgroundColor},c.createElement(sd,{pageSize:r},c.createElement(ld,{page:n})))})));(0,u.forwardRef)((function PreviewPage(e,t){let{page:n,pageSize:r,animationState:a=kn.STORY_ANIMATION_STATE.RESET,onAnimationComplete:o}=e;return c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(kn.StoryAnimation.Provider,{animations:n.animations,elements:n.elements,onWAAPIFinish:o},c.createElement(cd,{ref:t,page:n,pageSize:r}),c.createElement(PreviewPageAnimationController,{animationState:a})))}));PreviewPageAnimationController.propTypes={animationState:ma().oneOf(Object.values(kn.STORY_ANIMATION_STATE))};var dd;function ud(){return ud=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ud.apply(this,arguments)}const SvgArrowDownLeftCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ud({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,dd||(dd=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.001 19.467V12.5a.5.5 0 0 1 1 0v5.041C10.149 14.209 13.641 12 17.465 12c2.815 0 5.384 1.183 7.384 3.13a.5.5 0 0 1-.698.716C22.314 14.057 19.988 13 17.465 13c-3.756 0-7.244 2.39-9.162 6h6.37a.5.5 0 0 1 0 1H7.511a.498.498 0 0 1-.51-.533Z",fill:"currentColor"})))},pd=(0,c.memo)(SvgArrowDownLeftCurved);var md;function fd(){return fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fd.apply(this,arguments)}const SvgArrowDownRightCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",fd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,md||(md=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.849 15.846C9.686 14.057 12.012 13 14.534 13c3.757 0 7.245 2.39 9.163 6h-6.37a.5.5 0 1 0 0 1h7.162a.498.498 0 0 0 .51-.523V12.5a.5.5 0 0 0-1 0v5.042C21.853 14.209 18.36 12 14.536 12c-2.815 0-5.384 1.183-7.384 3.13a.5.5 0 1 0 .698.716Z",fill:"currentColor"})))},gd=(0,c.memo)(SvgArrowDownRightCurved);var hd,Ed=n(27856),bd=n(73715);function yd(){return yd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yd.apply(this,arguments)}function Tooltip(e){let{placement:t=Ed.PLACEMENT.BOTTOM,...n}=e;const{isRTL:r}=Y(),a=r?Ed.RTL_PLACEMENT[t]:t;return c.createElement(bd.Tooltip,yd({placement:a},n))}function _d(){return _d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_d.apply(this,arguments)}function HistoryButton(e){let{title:t,shortcut:n,children:r,...a}=e;return c.createElement(Tooltip,{title:t,shortcut:n,hasTail:!0},c.createElement(m.Button,_d({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL},a),r))}function Redo(){const{state:{canRedo:e},actions:{redo:t}}=pr(),{isRTL:n}=Y(),r=(0,u.useCallback)((()=>t()),[t]);return c.createElement(HistoryButton,{title:(0,d.__)("Redo","web-stories"),shortcut:"shift+mod+z",disabled:!e,onClick:r,"aria-label":(0,d.__)("Redo Changes","web-stories")},n?c.createElement(pd,null):c.createElement(gd,null))}function Undo(){const{state:{canUndo:e},actions:{undo:t}}=pr(),{isRTL:n}=Y(),r=(0,u.useCallback)((()=>t()),[t]);return c.createElement(HistoryButton,{title:(0,d.__)("Undo","web-stories"),shortcut:"mod+z",disabled:!e,onClick:r,"aria-label":(0,d.__)("Undo Changes","web-stories")},n?c.createElement(gd,null):c.createElement(pd,null))}function vd(){return vd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vd.apply(this,arguments)}const SvgEye=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",vd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hd||(hd=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.023 16.229C9.948 12.71 12.996 11 16 11c3.004 0 6.052 1.711 7.977 5.229a.23.23 0 0 1-.007.214C21.878 19.503 18.923 21 16 21s-5.877-1.497-7.97-4.557l-.412.283.412-.283a.23.23 0 0 1-.007-.215Zm16.831-.48C22.774 11.947 19.41 10 16 10c-3.41 0-6.775 1.948-8.854 5.748l.439.24-.439-.24c-.213.39-.193.892.059 1.26C9.465 20.314 12.717 22 16 22c3.283 0 6.535-1.686 8.795-4.992.252-.368.272-.87.059-1.26ZM14 16a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z",fill:"currentColor"})))},wd=(0,c.memo)(SvgEye);const Td=function PreviewErrorDialog(e){let{isOpen:t,onClose:n,onRetry:r}=e;return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Open preview","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:r,primaryText:(0,d.__)("Try again","web-stories")},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("The preview window failed to open.","web-stories")))},Sd="story-preview";const Cd=function PreviewButton(e){let{forceIsSaving:t=!1}=e;const{isSaving:n,previewLink:r,status:a,autoSave:o,saveStory:l}=Sa((e=>{let{state:{meta:{isSaving:t},story:{status:n,previewLink:r}},actions:{autoSave:a,saveStory:o}}=e;return{isSaving:t,status:n,previewLink:r,autoSave:a,saveStory:o}})),i=lc(),[s,p]=(0,u.useState)(null),g="draft"===a||!a,h=e=>{const t=new URL(e);return t.hash="#development=1",t.toString()},E=(0,u.useCallback)((()=>{let e;(0,L.trackEvent)("preview_story");try{if(e=window.open("about:blank",Sd),e){e.document.write("<!DOCTYPE html><html><head>"),e.document.write("<title>"),e.document.write((0,so.escapeHTML)((0,d.__)("Generating the preview…","web-stories"))),e.document.write("</title>"),e.document.write("</head><body>"),e.document.write((0,so.escapeHTML)((0,d.__)("Please wait. Generating the preview…","web-stories")));const t=h(r);e.document.write(`<script>\n            setTimeout(function() {\n              location.replace(${JSON.stringify(t)});\n            }, 5000);\n          <\/script>`)}}catch(e){}(g?l:o)().then((t=>{if(e&&!e.closed&&e.location.href){const n=h(t?.previewLink??r);e.location.replace(n)}})).catch((()=>p(r)))}),[o,g,r,l]),b=(0,u.useCallback)((e=>{p(null);const t=h(s);window.open(t,Sd+Math.random()),e.preventDefault()}),[s]),y=(0,u.useCallback)((()=>p(null)),[]),_=(0,d.__)("Preview","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:_,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:E,disabled:n||t||i,"aria-label":_},c.createElement(wd,null))),c.createElement(Td,{isOpen:Boolean(s),onClose:y,onRetry:b}))};var Id=n(29042),Ad=n(49599),xd=n(42699),kd=n(18444),Od=n(68057),Nd=n(60427),Pd=n(96764),Rd=n(63415);const Md=function(e){const t=(0,Od.getSettings)(),{timeFormat:n}=t;return(0,Nd.default)(e,n)};const Ld=function(){const e=(0,Od.getSettings)(),{timeFormat:t}=e;return!t||/a(?!\\)/.test(t.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""))},Dd=(0,u.createContext)({state:{},actions:{}}),Bd=e=>{let{children:t}=e;const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(),[l,i]=(0,u.useState)(!1),s=(0,u.useCallback)((e=>{o(e)}),[o]),d=(0,u.useCallback)((()=>{(0,L.trackEvent)("checklist_toggled",{status:n?"closed":"open"}),r((e=>!e))}),[n]),p=(0,u.useCallback)((()=>{(0,L.trackEvent)("checklist_toggled",{status:"closed"}),r(!1)}),[]),m=(0,u.useCallback)((()=>{(0,L.trackEvent)("checklist_toggled",{status:"open"}),r(!0)}),[]),f=(0,u.useMemo)((()=>({state:{isOpen:n,isChecklistMounted:l,openPanel:a},actions:{toggle:d,close:p,open:m,setIsChecklistMounted:i,setOpenPanel:s}})),[p,a,n,m,d,s,i,l]);return c.createElement(Dd.Provider,{value:f},t)};function Fd(e){return(0,u.useContextSelector)(Dd,e??u.identity)}var Hd=n(36798),Ud=n(86376);const zd=70,Gd=Math.floor(1),jd=640,Yd=853,Zd=96,Wd="checklist_companion",Vd=(0,d.__)("Checklist","web-stories"),$d={ACCESSIBILITY:"accessibility",DESIGN:"design",PRIORITY:"priority"},qd={[$d.ACCESSIBILITY]:(0,d.__)("Accessibility","web-stories"),[$d.DESIGN]:(0,d.__)("Design","web-stories"),[$d.PRIORITY]:(0,d.__)("Priority","web-stories")},Xd={fontSizeTooSmall:{title:(0,qe.default)(
/* translators: %d: minimum font size. */
(0,d.__)("Increase font size to %s or above","web-stories"),12),footer:(0,qe.default)(
/* translators: %d: minimum font size. */
(0,d.__)("Ensure legibility by selecting text size %d or greater","web-stories"),12)},imagesMissingAltText:{title:(0,d.__)("Add assistive text to images","web-stories"),footer:(0,d.__)("Optimize accessibility and indexability with meaningful text to better assist users.","web-stories")},linkTappableRegionTooBig:{title:(0,d.__)("Reduce link size","web-stories"),footer:(0,d.__)("Elements with links must not cover most of the page. Decrease the size of elements with links.","web-stories")},linkTappableRegionTooSmall:{title:(0,qe.default)(
/* translators: %s: minimum tappable region size width x minimum tappable region size height. */
(0,d.__)("Increase tap area size to at least %s","web-stories"),"48x48px"),footer:(0,d.__)("Optimize accessibility and indexability with meaningful text to better assist users","web-stories")},lowContrast:{title:(0,d.__)("Increase contrast between text and background color","web-stories"),footer:(0,d.__)("Ensure legibility of text and ease of reading by increasing color contrast","web-stories"),textPanel:(0,d.__)("This color or font size combination may be hard for some people to read.","web-stories"),backgroundPanel:(0,d.__)("This background color may make some text hard to read.","web-stories"),warningIcon:(0,d.__)("Low Warning","web-stories")},videoMissingCaptions:{title:(0,d.__)("Add video captions","web-stories"),footer:(0,d.__)("Keep the audience engaged even when they can't listen to the audio","web-stories")},videoMissingTitle:{title:(0,d.__)("Add video description","web-stories"),footer:(0,d.__)("Improves indexability and accessibility (for videos without captions)","web-stories")}},Kd={storyTooShort:{title:(0,qe.default)(
/* translators: %d: maximum number of pages. */
(0,d._n)("Make Web Story at least %d page","Make Web Story at least %d pages",4,"web-stories"),4),footer:(0,qe.default)(
/* translators: 1: minimum number of pages. 2: maximum number of pages. */
(0,d.__)("It is recommended to have between %1$d and %2$d pages in your story","web-stories"),4,30)},storyTooLong:{title:(0,qe.default)(
/* translators: %d: minimum number of pages. */
(0,d._n)("Make Web Story fewer than %d page","Make Web Story fewer than %d pages",30,"web-stories"),30),footer:(0,qe.default)(
/* translators: 1: minimum number of pages. 2: maximum number of pages. */
(0,d.__)("It is recommended to have between %1$d and %2$d pages in your story","web-stories"),4,30)},tooLittlePageText:{title:(0,d.__)("Add more text to page","web-stories"),footer:(0,qe.default)(
/* translators: %d: minimum number of story characters. */
(0,d._n)("Include at least %d character","Include at least %d characters",100,"web-stories"),100)},tooMuchPageText:{title:(0,d.__)("Reduce text amount on page","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,qe.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Include no more than %d character","Include no more than %d characters",200,"web-stories"),200)),c.createElement("li",null,(0,d.__)("Use a page attachment breaking up the text into multiple screens; or","web-stories")),c.createElement("li",null,(0,qe.default)(
/* translators: %s: maximum percentage of characters, depending on number of pages. */
(0,d.__)("Keep the total number of text-heavy pages under %s of total number of story pages","web-stories"),"10%")))},tooManyLinksOnPage:{title:(0,qe.default)(
/* translators: %s: maximum number of links per page. */
(0,d.__)("Avoid including more than %s links per page","web-stories"),3),footer:(0,qe.default)(
/* translators: %s: maximum number of links per page. */
(0,d.__)("Avoid having more than %s links on one page","web-stories"),3)},imageResolutionTooLow:{title:(0,d.__)("Increase image resolution","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,d.__)("Use larger resolution (2x or 3x) images for best appearance on screens with high pixel density","web-stories")),c.createElement("li",null,(0,qe.default)(
/* translators: %s: minimum image size width x minimum image size height. */
(0,d.__)("For full-screen images, use a resolution of at least %s","web-stories"),"828x1792px")))},videoFrameRateTooLow:{title:(0,qe.default)(
/* translators: %d: minimum number of frames per second for video. */
(0,d.__)("Increase video frame rate to at least %d fps","web-stories"),24),footer:(0,qe.default)(
/* translators: %d: minimum number of frames per second for video. */
(0,d._n)("Ensure your video has a minimum of %d frame per second","Ensure your video has a minimum of %d frames per second",24,"web-stories"),24)},videoResolutionTooLow:{title:(0,d.__)("Increase video resolution","web-stories"),footer:(0,qe.default)(
/* translators: 1: minimum video resolution. 2: minimum video width x minimum video height in pixels. */
(0,d.__)("Consider using a minimum resolution of %1$s (%2$s) to represent portrait videos","web-stories"),"480p","852x480px")},videoTooLong:{title:(0,qe.default)(
/* translators: %d: maximum video length in minutes. */
(0,d._n)("Split videos into segments of %d minute or less","Split videos into segments of %d minutes or less",Gd,"web-stories"),Gd),footer:(0,d.__)("Shorter videos help readers navigate stories","web-stories")}},Qd={storyMissingDescription:{title:(0,d.__)("Add Web Story description","web-stories"),footer:(0,d.__)("Incorporate a brief description for better user experience","web-stories")},storyMissingTitle:{title:(0,d.__)("Add Web Story title","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,qe.default)(
/* translators: %d: maximum story title length in words. */
(0,d._n)("Keep under %d word","Keep under %d words",10,"web-stories"),10)),c.createElement("li",null,(0,qe.default)(
/* translators: %d: maximum story title length in characters. */
(0,d._n)("Don't exceed %d character","Don't exceed %d characters",zd,"web-stories"),zd)))},storyMissingPoster:{title:(0,d.__)("Add poster image","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,d.__)("Use as a representation of the story","web-stories")),c.createElement("li",null,(0,d.__)("Avoid images with embedded text","web-stories")),c.createElement("li",null,(0,qe.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Use an image that's at least %s","web-stories"),"640x853px")),c.createElement("li",null,(0,qe.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"3:4")))},videoMissingPoster:{title:(0,d.__)("Add poster image to every video","web-stories"),footer:(0,d.__)("Ensure a better experience by displaying a poster while users wait for the video to load","web-stories")},storyTitleTooLong:{title:(0,qe.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Shorten title to fewer than %d character","Shorten title to fewer than %d characters",zd,"web-stories"),zd),footer:(0,qe.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Limit story title to %d character or less","Limit story title to %d characters or less",zd,"web-stories"),zd)},logoTooSmall:{title:(0,qe.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Increase size of publisher logo to at least %s","web-stories"),"96x96px"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,qe.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Use an image that's at least %s","web-stories"),"96x96px")),c.createElement("li",null,(0,qe.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"1x1px")))},noPublisherLogo:{title:(0,d.__)("Add a publisher logo to your story","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,qe.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Use an image that's at least %s","web-stories"),"96x96px")),c.createElement("li",null,(0,qe.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"1x1px")))},storyPosterSize:{title:(0,qe.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Correct poster image aspect ratio to %s","web-stories"),"640x853px"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,qe.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Use an image that's at least %s","web-stories"),"640x853px")),c.createElement("li",null,(0,qe.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"3:4")))},videoNotOptimized:{title:(0,d.__)("Optimize videos","web-stories"),footer:(0,qe.default)(
/* translators: %s: video resolution (720p) */
(0,d.__)("Videos larger than %s can cause slower loading and higher bandwidth costs.","web-stories"),"720p")},storyMissingPublisherName:{title:(0,d.__)("Add Site Title","web-stories")},ampValidation:{title:(0,d.__)("Compatibility","web-stories"),footer:c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{href:(0,d.__)("https://wp.stories.google/docs/","web-stories"),rel:"noreferrer",target:"_blank",onClick:e=>(0,L.trackClick)(e,"click_checklist_amp_test"),size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("Your story contains errors that can affect eligibility to appear on Google. Please see <a>our FAQ</a> for more information.","web-stories"))}},Jd={UNAVAILABLE:"unavailable",ONLY_RECOMMENDED:"recommended",ALL:"all"},eu={[Jd.UNAVAILABLE]:[],[Jd.ONLY_RECOMMENDED]:[$d.ACCESSIBILITY,$d.DESIGN],[Jd.ALL]:Object.values($d)},tu={[Jd.UNAVAILABLE]:null,[Jd.ONLY_RECOMMENDED]:$d.DESIGN,[Jd.ALL]:$d.PRIORITY},nu="story is no longer empty",ru="publish button is pressed",au="story 'recommended' section enabled",ou="story 'high priority' section enabled",lu="story is published, regardless of recommendations",iu={[Jd.UNAVAILABLE]:{[nu]:Jd.ONLY_RECOMMENDED,[ru]:Jd.ALL,[lu]:Jd.ALL,[au]:Jd.ONLY_RECOMMENDED},[Jd.ONLY_RECOMMENDED]:{[ou]:Jd.ALL,[ru]:Jd.ALL,[lu]:Jd.ALL},[Jd.ALL]:{}},su=(e,t)=>iu[e][t]||e,cu=(0,u.createContext)({state:{},actions:{}});function ChecklistCheckpointProvider(e){let{children:t}=e;const[n,r]=(0,u.useReducer)(su,Jd.UNAVAILABLE),[a,o]=(0,u.useState)(),[l,i]=(0,u.useState)(),s=a>0||[Jd.UNAVAILABLE,Jd.ONLY_RECOMMENDED].includes(n),d=Sa((e=>{let{state:{story:t}}=e;return t.status}));(0,u.useEffect)((()=>{"publish"===d&&r(lu)}),[d]),wa(ga.onSecondPageAdded,(0,u.useCallback)((()=>{r(au)}),[])),wa(ga.onFifthPageAdded,(0,u.useCallback)((()=>{r(ou)}),[])),wa(ga.onInitialElementAdded,(0,u.useCallback)((()=>{r(nu)}),[]));const p=(0,u.useCallback)((e=>{o(e)}),[]),m=(0,u.useCallback)((()=>{i(!0),r(ru)}),[]),f=(0,u.useCallback)((()=>r(ru)),[]),g=(0,u.useCallback)((()=>{i(!0)}),[]),h=(0,u.useCallback)((()=>{i(!1)}),[]),E=(0,u.useMemo)((()=>({state:{checkpoint:n,shouldReviewDialogBeSeen:s,reviewDialogRequested:l},actions:{updateHighPriorityCount:p,onReviewDialogRequest:m,onResetReviewDialogRequest:h,onPublishDialogChecklistRequest:g,showPriorityIssues:f}})),[n,g,f,m,h,l,s,p]);return c.createElement(cu.Provider,{value:E},t)}function du(e){return(0,u.useContextSelector)(cu,e??u.identity)}const uu=(0,u.createContext)(null),pu=(0,u.createContext)(null),mu={[$d.PRIORITY]:{},[$d.DESIGN]:{},[$d.ACCESSIBILITY]:{}};function ChecklistCountProvider(e){let{hasChecklist:t,children:n}=e;const r=(0,u.useState)({...mu,hasChecklist:t});return c.createElement(uu.Provider,{value:r},n)}function ChecklistCategoryProvider(e){let{children:t,category:n}=e;const r=(0,u.useContext)(uu)?.[1];if(!r)throw new Error("Cannot use `ChecklistCategoryProvider` outside of `ChecklistCountProvider`");const a=(0,u.useCallback)((e=>r((t=>({...t,[n]:{...t[n],...e}})))),[n,r]);return c.createElement(pu.Provider,{value:a},t)}function fu(e,t){const n=(0,u.useContext)(pu);if(!n)throw new Error("Cannot use `useRegisterCheck` outside of `ChecklistCategoryProvider`");(0,u.useEffect)((()=>n({[e]:t})),[e,n,t])}function gu(e){const t=(0,u.useContext)(uu)?.[0];if(!t)throw new Error("Cannot use `useCategoryCount` outside of `ChecklistCountProvider`");return Object.values(t[e]||{}).filter((e=>e)).length}Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const hu=[_.default],Eu=[];const bu=function DirectionAware(e){let{children:t}=e;const{isRTL:n}=Y();return c.createElement(p.StyleSheetManager,{stylisPlugins:n?hu:Eu},t)};var yu=n(12666);function _u(){return _u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_u.apply(this,arguments)}const vu="entering",wu="entered",Tu="exiting",Su="default",Cu={default:{entering:vu},entering:{entered:wu},entered:{exiting:Tu},exiting:{exited:"exited"},exited:{entering:vu}},Iu=(e,t)=>Cu[e]?.[t]||e,Au=(0,u.forwardRef)(((e,t)=>{let{state:n,children:r}=e;const[a,o]=(0,u.useReducer)(Iu,n===wu?n:Su),[l,i]=(0,u.useState)(n);(0,u.useEffect)((()=>{const e=requestAnimationFrame((()=>i(n)));return()=>cancelAnimationFrame(e)}),[n]),(0,u.useEffect)((()=>{o(l)}),[l]);const s=[vu,wu].includes(a)&&"exiting"===n,c=[Tu].includes(a)&&[vu,wu].includes(n)||s;return(0,u.cloneElement)(r(c?n:a),{ref:t})}));function ScheduledTransition(e){let{children:t,...n}=e;const r=(0,u.useRef)();return c.createElement(yu.default,_u({nodeRef:r},n),(e=>c.createElement(Au,{ref:r,state:e},(e=>t(e)))))}const xu=p.default.div.withConfig({displayName:"navigationWrapper__NavigationWrapper",componentId:"sc-1qotgfl-0"})(["position:absolute;",";bottom:0;max-height:calc(100vh - ","px);width:","px;color:",";background-color:",";border:1px solid ",";border-radius:",";overflow:hidden;",""],(e=>{let{alignRight:t=!1}=e;return t?"right: 0":"left: 0"}),161,310,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{isOpen:t}=e;return!t&&(0,p.css)(["&,*{height:0;visibility:hidden;}"])}));xu.propTypes={alignRight:ma().bool,isOpen:ma().bool};const ku=xu;var Ou=n(19901),Nu=n(18969);var Pu=n(35199),Ru=n(33625);const Mu=(0,p.css)(["",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),Lu=(0,p.css)([":focus-within{",";}"],(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)}));var Du,Bu=n(37233);function Fu(){return Fu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fu.apply(this,arguments)}const SvgLockOpen=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Fu({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Du||(Du=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.816 8.415a3.023 3.023 0 0 0-4.161 1.129l-.255.447a.5.5 0 1 0 .87.494l.254-.447a2.023 2.023 0 0 1 2.786-.76 2.101 2.101 0 0 1 .75 2.844L16.964 14H11.5a1.5 1.5 0 0 0-1.5 1.5v7a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5v-7a1.5 1.5 0 0 0-1.5-1.5h-2.379l.805-1.376.002-.005c.836-1.47.343-3.351-1.112-4.204ZM11.5 15a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-9Zm4.5 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",fill:"currentColor"})))},Hu=(0,c.memo)(SvgLockOpen);function Uu(){return Uu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uu.apply(this,arguments)}function ToggleButton(e){let{isToggled:t=!1,type:n=null,...r}=e;const a=n===f.BUTTON_TYPES.QUATERNARY?n:t?f.BUTTON_TYPES.SECONDARY:f.BUTTON_TYPES.TERTIARY;return c.createElement(m.Button,Uu({},r,{type:a,"aria-pressed":t,isToggled:t}))}function LockToggle(e){let{isLocked:t=!1,...n}=e;return c.createElement(m.Button,Uu({},n,{"aria-pressed":t,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE}),t?c.createElement(Bu.default,null):c.createElement(Hu,null))}var zu,Gu,ju;function Yu(){return Yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yu.apply(this,arguments)}const SvgMirrorLeftright=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Yu({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,zu||(zu=c.createElement("path",{d:"M16 8.5v15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.01 4"})),Gu||(Gu=c.createElement("path",{d:"m12.5 16-4-3.5v7l4-3.5Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),ju||(ju=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.17 12.124a.5.5 0 0 1 .83.376v7a.5.5 0 0 1-.83.376l-4-3.5a.5.5 0 0 1 0-.752l4-3.5Z",fill:"currentColor"})))},Zu=(0,c.memo)(SvgMirrorLeftright);var Wu,Vu,$u;function qu(){return qu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qu.apply(this,arguments)}const SvgMirrorUpdown=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",qu({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Wu||(Wu=c.createElement("path",{d:"M23.75 15.75h-15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.01 4"})),Vu||(Vu=c.createElement("path",{d:"m16.25 12.25 3.5-4h-7l3.5 4Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),$u||($u=c.createElement("path",{d:"M20.126 22.92a.5.5 0 0 1-.376.83h-7a.5.5 0 0 1-.376-.83l3.5-4a.5.5 0 0 1 .752 0l3.5 4Z",fill:"currentColor"})))},Xu=(0,c.memo)(SvgMirrorUpdown),Ku=p.default.div.withConfig({displayName:"flipControls__ControlsContainer",componentId:"sc-1gcq876-0"})(["display:flex;justify-content:left;align-items:flex-start;"]),Qu=p.default.div.withConfig({displayName:"flipControls__Space",componentId:"sc-1gcq876-1"})(["width:8px;"]),Ju=(0,p.default)(ToggleButton).withConfig({displayName:"flipControls__StyledToggleButton",componentId:"sc-1gcq876-2"})(["",";"],Mu);const ep=function FlipControls(e){let{value:t,onChange:n}=e;const r=(0,u.useCallback)((e=>!0===t[e]),[t]);return c.createElement(Ku,null,c.createElement(Tooltip,{title:(0,d.__)("Flip horizontally","web-stories")},c.createElement(Ju,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,isToggled:!0===t.horizontal,onClick:()=>n({...t,horizontal:!r("horizontal")}),"aria-label":(0,d.__)("Flip horizontally","web-stories")},c.createElement(Zu,null))),c.createElement(Qu,null),c.createElement(Tooltip,{title:(0,d.__)("Flip vertically","web-stories")},c.createElement(Ju,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,isToggled:!0===t.vertical,onClick:()=>n({...t,vertical:!r("vertical")}),"aria-label":(0,d.__)("Flip vertically","web-stories")},c.createElement(Xu,null))))};var tp=n(98415);const np=function(e){if(!e)return null;switch(e.type){case"radial":return(0,d.__)("Radial","web-stories");case"linear":return(0,d.__)("Linear","web-stories");default:{const{color:{r:t,g:n,b:r}}=e;return function(e,t,n){const r=e=>e.toString(16).padStart(2,"0");return`${r(e)}${r(t)}${r(n)}`.toUpperCase()}(t,n,r)}}};var rp;function ap(){return ap=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ap.apply(this,arguments)}const SvgPipette=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ap({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,rp||(rp=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.247 8.753a2.571 2.571 0 0 0-3.636 0l-2.075 2.075-1.682-1.682a.5.5 0 1 0-.707.708l7 7a.5.5 0 0 0 .707-.708l-1.682-1.682 2.075-2.075a2.571 2.571 0 0 0 0-3.636Zm-2.783 5.004 2.076-2.075a1.571 1.571 0 1 0-2.222-2.222l-2.075 2.076 2.221 2.221Zm-5.05-.61a.5.5 0 0 1 0 .707L9.566 19.7a1.932 1.932 0 1 0 2.733 2.733l5.848-5.848a.5.5 0 1 1 .707.707l-5.848 5.848a2.932 2.932 0 1 1-4.147-4.147l5.848-5.848a.5.5 0 0 1 .707 0Z",fill:"currentColor"})))},op=(0,c.memo)(SvgPipette),lp=e=>{let{onChange:t}=e;const{fullbleedContainer:r,eyedropperPixelData:a,setEyedropperCallback:o,setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}=xs((e=>{let{state:{fullbleedContainer:t,eyedropperPixelData:n},actions:{setEyedropperCallback:r,setIsEyedropperActive:a,setEyedropperImg:o,setEyedropperPixelData:l}}=e;return{fullbleedContainer:t,setEyedropperCallback:r,eyedropperPixelData:n,setIsEyedropperActive:a,setEyedropperImg:o,setEyedropperPixelData:l}})),{zoomSetting:c,setZoomSetting:d}=Zi((e=>{let{state:{zoomSetting:t},actions:{setZoomSetting:n}}=e;return{zoomSetting:t,setZoomSetting:n}})),p=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return async()=>{if(!e&&c!==Ae.FIT)return;e&&l(!0);a&&e||(e&&d(Ae.FIT),await new Promise((e=>{setTimeout((()=>{n.e(3182).then(n.bind(n,87559)).then((t=>{t.toCanvas(r,{preferredFontFormat:"woff2",pixelRatio:1}).then((t=>{const n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;s(n),i(t.toDataURL()),e()})).catch((()=>{e()}))}))}))}))),o((()=>e=>{t(e),l(!1),i(null),s(null)}))}}),[r,t,a,c,l,o,i,s,d]);return{initEyedropper:p}};const ip=function(e,t){if(!e)return null;const{type:n}=e;if(!n||"solid"===n){const{color:{r:n,g:r,b:a}}=e;return{color:{r:n,g:r,b:a,a:t}}}return{...e,alpha:t}};var sp=n(93302),cp=n.n(sp);function dp(e,t){let{allowEmpty:n,isFloat:r,min:a,max:o}=t;if(`${e}`.length>0){const t=r?parseFloat(e):parseInt(e);let n=t;return void 0!==a&&(n=Math.max(a,t)),void 0!==o&&(n=Math.min(o,t)),isNaN(n)?null:n}return n?"":null}const up=e=>{let{allowEmpty:t,isFloat:n,max:r,min:a,onChange:o,value:l}=e;const i=(0,u.useRef)(null),s=(0,u.useRef)(l),c=(0,u.useRef)(!1),[d,p]=(0,u.useState)(l),m=(0,u.useMemo)((()=>({allowEmpty:t,isFloat:n,max:r,min:a})),[t,n,r,a]),f=(0,u.useCallback)((e=>{let t=dp(s.current,m);if(!c.current){const e=dp(d,m);null!==e&&(t=e)}c.current=!1,null!==t&&(p(t),t!==s.current&&o(e,t))}),[d,o,m]),g=(0,u.useCallback)((e=>{p(e.target.value)}),[]),h=(0,u.useCallback)((e=>{const{altKey:t,key:n}=e,l=function(e,t){let{allowEmpty:n,isFloat:r,max:a,min:o}=t;if(n&&0===`${e}`.length)return!0;const l=r?parseFloat(e):parseInt(e);return!(void 0!==o&&l<o||void 0!==a&&l>a||isNaN(l))}(d,m);let i=l?dp(d,m):0;const s=cp()(m.isFloat&&t?.1:1);"ArrowUp"===n?i=void 0!==r?Math.min(r,cp()(i).plus(s)):cp()(i).plus(s):"ArrowDown"===n&&(i=void 0!==a?Math.max(a,cp()(i).minus(s)):cp()(i).minus(s)),o(e,Number(i))}),[d,r,a,o,m]),E=(0,u.useCallback)((()=>{p(s.current),c.current=!0,i&&i.current?.blur()}),[]);return(0,u.useEffect)((()=>{s.current=l,p(l)}),[l]),{currentValue:d,inputRef:i,handleBlur:f,handleChange:g,handleEsc:E,handleKeyUpAndDown:h,isIndeterminate:s.current===d}};var pp=n(6215);function mp(){return mp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mp.apply(this,arguments)}const fp=p.default.div.withConfig({displayName:"input__Container",componentId:"sc-1dusq6m-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),gp=(0,p.default)(Ke.Text).withConfig({displayName:"input__Label",componentId:"sc-1dusq6m-1"})(["margin-bottom:12px;display:inline-block;"]),hp=(0,p.default)(Ke.Text).withConfig({displayName:"input__Hint",componentId:"sc-1dusq6m-2"})(["display:inline-block;margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:n}=e;return n.colors.fg[t?"negative":"tertiary"]})),Ep=(0,p.default)(Ke.Text).withConfig({displayName:"input__Suffix",componentId:"sc-1dusq6m-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),bp=p.default.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1dusq6m-4"})((e=>{let{focused:t,hasError:n,theme:r,styleOverride:a}=e;return(0,p.css)(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],r.colors.border[n?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!n&&(0,p.css)(["border-color:",";"],r.colors.border.defaultActive),t&&(0,p.css)(["","{color:",";}"],Ep,r.colors.fg.primary),(0,Ru.focusCSS)(r.colors.border.focus),a)})),yp=p.default.input.withConfig({displayName:"input__BaseInput",componentId:"sc-1dusq6m-5"})((e=>{let{hasSuffix:t,theme:n}=e;return(0,p.css)(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],t&&(0,p.css)(["padding-right:8px;"]),n.colors.fg.primary,Pu.expandPresetStyles({preset:{...n.typography.presets.paragraph[Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:n}),n.colors.fg.tertiary,n.colors.fg.disable,n.colors.border.disable,Ep,n.colors.fg.disable,n.colors.fg.primary)})),_p=(0,u.forwardRef)(((e,t)=>{let{className:n,disabled:r,hasError:a,hint:o,id:l,label:i,onBlur:s,onFocus:d,hasFocus:p=!1,suffix:m,unit:f="",value:g="",isIndeterminate:h=!1,containerStyleOverride:E="",...b}=e;const y=(0,u.useMemo)((()=>l||(0,he.default)()),[l]),[_,v]=(0,u.useState)(p),[w,T]=(0,u.useState)(!1);let S=g;f&&g.length&&(S=`${g}${_?"":`${f}`}`),h&&(S="");const C=Boolean(m);return c.createElement(fp,{className:n},i&&c.createElement(gp,{htmlFor:y,forwardedAs:"label",disabled:r},i),c.createElement(bp,{focused:_,hasError:a,styleOverride:E},c.createElement(yp,mp({id:y,disabled:r,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&_&&!w&&(e.select(),T(!0))},onFocus:e=>{d?.(e),v(!0),T(!1)},onBlur:e=>{s?.(e),v(!1)},value:S,hasSuffix:C},b)),C&&c.createElement(Ep,{hasLabel:Boolean(i),forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:()=>v(!0)},m)),o&&c.createElement(hp,{hasError:a},o))}));pp.default,ma().string,ma().bool,ma().bool,ma().string,ma().string,pp.default,ma().func,ma().func.isRequired,ma().func,ma().node,ma().string,ma().string,ma().bool,ma().oneOfType([ma().object,ma().array]);function vp(){return vp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vp.apply(this,arguments)}_p.displayName="Input";const NumericInput=e=>{let{allowEmpty:t,isFloat:n,onChange:r,max:a,min:o,value:l="",isIndeterminate:i,...s}=e;const{currentValue:d,handleBlur:u,handleChange:p,handleEsc:m,handleKeyUpAndDown:f,inputRef:g,isIndeterminate:h}=up({allowEmpty:t,isFloat:n,onChange:r,max:a,min:o,value:l,isIndeterminate:i});return(0,tr.useKeyDownEffect)(g,{key:["up","alt+up","down","alt+down"],editable:!0},f,[f]),(0,tr.useKeyDownEffect)(g,{key:["escape"],editable:!0},m,[m]),(0,tr.useKeyDownEffect)(g,{key:["enter"],editable:!0},u,[u]),c.createElement(_p,vp({ref:g,onBlur:u,onChange:p,value:String(d),isIndeterminate:h&&i},s))};var wp;function Tp(){return Tp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tp.apply(this,arguments)}const SvgColorDrop=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Tp({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,wp||(wp=c.createElement("path",{d:"M20.245 12.706 16 8.316l-4.245 4.39A6.346 6.346 0 0 0 10 17.087c0 1.554.585 3.193 1.755 4.404A5.89 5.89 0 0 0 16 23.317a5.89 5.89 0 0 0 4.245-1.826C21.415 20.28 22 18.641 22 17.087c0-1.554-.585-3.17-1.755-4.381Zm-9.166 4.66c.007-1.553.56-2.999 1.415-3.877L16 9.831l3.64 3.784c.855.87 1.341 2.198 1.349 3.752h-9.91Z",fill:"currentColor"})))},Sp=(0,c.memo)(SvgColorDrop);const Cp=function(e){if(!e||e===Ce)return null;if(!("solid"===e.type||!e.type)){const{alpha:t=1}=e;return 100*t}const{color:{a:t=1}}=e;return Math.round(100*t)},Ip=(0,p.default)(NumericInput).withConfig({displayName:"opacityInput__Input",componentId:"sc-xy6710-0"})(["min-width:100px;div{background-color:transparent;}"]),Ap=(0,p.css)(["",";width:70px;padding-right:6px;"],Lu);const xp=function OpacityInput(e){let{value:t,onChange:n,isInDesignMenu:r}=e;const[a,o]=(0,u.useState)(""),l=(0,u.useCallback)(((e,t)=>{o(t),isNaN(t)||n(t/100)}),[n]),i=(0,u.useCallback)((()=>o(Cp(t))),[t]);(0,u.useEffect)((()=>i()),[i,t]);const s=r?null:(0,d._x)("%","Percentage","web-stories"),p=r?Ap:Lu;return c.createElement(Ip,{"aria-label":(0,d.__)("Opacity","web-stories"),onChange:l,value:a,unit:s,suffix:c.createElement(Sp,null),min:0,max:100,allowEmpty:!1,isFloat:!1,containerStyleOverride:p})};const kp=function(e){if(!e.type||"solid"===e.type){const{color:t}=e;return{color:{...t,a:1}}}return t=e,n=["alpha"],Object.keys(t).filter((e=>!n.includes(e))).reduce(((e,n)=>({...e,[n]:t[n]})),{});var t,n};const Op=function(e){const t=(e||"").toUpperCase().trim().replace(/^#/,"");return/[^0-9a-f]/i.test(t)?null:6===t.length?t:1===t.length?t.repeat(6):2===t.length?t.repeat(3):3===t.length?t.replace(/./g,"$&$&"):4===t.length?`${t.substring(0,2).repeat(2)}${t.substring(2)}`:null};function Np(){return Np=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Np.apply(this,arguments)}const Pp=(0,u.forwardRef)((function Hex(e,t){let{value:n,placeholder:r,onChange:a,...o}=e;const[l,i]=(0,u.useState)(""),s=(0,u.useRef)(null),d=(0,u.useRef)(!1),p=np(n);(0,u.useEffect)((()=>i(p)),[p]);const m=(0,u.useCallback)((e=>{const t=e.target.value.trim().replace(/^#/,"");i(t)}),[]),f=(0,u.useCallback)((()=>{const e=Op(l)??p;if(i(e),e!==p){const{red:t,green:r,blue:o}=(0,Xe.parseToRgb)(`#${e}`),l=n.color.a;a({color:{r:t,g:r,b:o,a:l}})}}),[l,p,a,n]),g=(0,u.useCallback)((()=>{f()}),[f]),h=(0,u.useCallback)((()=>{d.current||f(),d.current=!1}),[f]),E=(0,u.useCallback)((()=>{i(p),d.current=!0;(t?.current?t:s).current.blur()}),[p,t]);return(0,tr.useKeyDownEffect)(s,{key:["escape"],editable:!0},E,[E]),(0,tr.useKeyDownEffect)(s,{key:["enter"],editable:!0},g,[g]),c.createElement(_p,Np({ref:t||s,value:l||"",onChange:m,onBlur:h,placeholder:r},o))}));function Rp(e){return void 0!==e.a&&e.a<1}const Mp=function(e){const{color:t,alpha:n,stops:r}=e;if(t)return Boolean(Rp(t));if("number"==typeof n&&n<1)return!0;for(const e of r||[])if(Rp(e.color))return!0;return!1};const Lp=function(e){return Boolean(e?.type)&&"solid"!==e.type};var Dp=n(19362);function Bp(){return Bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bp.apply(this,arguments)}const Fp=24,Hp=p.default.div.withConfig({displayName:"swatch__Transparent",componentId:"sc-180wh7-0"})(["width:100%;height:100%;position:absolute;border-radius:100%;",""],Dp.transparentBg),Up=p.default.button.withConfig({displayName:"swatch__SwatchButton",componentId:"sc-180wh7-1"})(["cursor:pointer;background-color:transparent;border-color:transparent;padding:0;border-width:0;display:block;width:","px;height:","px;border-radius:100%;overflow:hidden;position:relative;"," ",";::after{content:'';position:absolute;pointer-events:none;left:0;top:0;width:100%;height:100%;border-radius:50%;border:1px solid ",";}"],Fp,Fp,(e=>{let{disabled:t}=e;return t&&(0,p.css)(["opacity:0.4;cursor:default;pointer-events:none;"])}),(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus)}),(e=>{let{theme:t}=e;return t.colors.divider.primary})),zp=(0,p.default)(Up).attrs({as:"div",type:""}).withConfig({displayName:"swatch__SwatchPreview",componentId:"sc-180wh7-2"})([""]),Gp=p.default.div.withConfig({displayName:"swatch__SwatchItem",componentId:"sc-180wh7-3"})(["transform:rotate(","deg);display:block;width:100%;height:100%;font-size:13px;position:relative;svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));color:",";transform:rotate(","deg);}"],(e=>{let{displaySplit:t}=e;return t?-45:0}),Fp,Fp,12,12,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{displaySplit:t}=e;return t?45:0})),jp=p.default.div.withConfig({displayName:"swatch__OpaqueColorWrapper",componentId:"sc-180wh7-4"})(["height:","px;width:50%;overflow:hidden;position:absolute;left:0;top:0;"],Fp),Yp=p.default.div.withConfig({displayName:"swatch__OpaqueColor",componentId:"sc-180wh7-5"})(["height:","px;width:","px;position:absolute;top:0;left:0;",""],Fp,Fp,(e=>{let{pattern:t}=e;return(0,kr.default)(t)}));function Swatch(e){let{pattern:t,children:n,isPreview:r=!1,isDisabled:a=!1,isIndeterminate:o=!1,className:l="",...i}=e;if(!t)return null;const s=Mp(t),d=Lp(t),u=s?kp(t):t,p=!d&&s&&!o,m=r?zp:Up;return c.createElement(m,Bp({disabled:a,className:l},i),s&&c.createElement(Hp,null),c.createElement(Gp,{style:(0,kr.default)(t),displaySplit:p},p&&c.createElement(jp,null,c.createElement(Yp,{style:(0,kr.default)(u)})),n))}var Zp=n(47394),Wp=n(34761),Vp=n(37723);const $p=function(e){let{ref:t}=e;const n=e=>{const n=(r=t.current)?[...r.querySelectorAll('a[href], button, textarea, input[type]:not([type="hidden"]), select')].filter((e=>!e.hasAttribute("disabled")&&"-1"!==e.getAttribute("tabindex"))):[];var r;const a=n[0],o=n[n.length-1];e.shiftKey||document.activeElement!==o?e.shiftKey&&document.activeElement===a&&(o.focus(),e.preventDefault()):(a.focus(),e.preventDefault())};(0,tr.useKeyDownEffect)(t,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},n),(0,tr.useKeyDownEffect)(t,{key:["tab"],allowDefault:!0,editable:!0},n)};var qp,Xp=n(80852);function Kp(){return Kp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kp.apply(this,arguments)}const SvgArrowLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Kp({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,qp||(qp=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.422 10.856a.5.5 0 0 0-.702-.712l-5.571 5.5a.5.5 0 0 0 0 .712l5.57 5.5a.5.5 0 0 0 .703-.711L10.718 16.5H22.5a.5.5 0 1 0 0-1H10.718l4.704-4.644Z",fill:"currentColor"})))},Qp=(0,c.memo)(SvgArrowLeft);var Jp=n(42096);function em(){return em=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},em.apply(this,arguments)}const tm=function(){let{r:e=0,g:t=0,b:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return`rgb(${e},${t},${n})`},nm=e=>{let{r:t,g:n,b:r,a}=e;const o=e=>255*(1-a)+a*e;return`rgb(${o(t)}, ${o(n)}, ${o(r)})`},rm=16,am=p.default.div.attrs((e=>{let{currentColor:t={},withAlpha:n}=e;return{style:{background:n?nm(t):tm(t)}}})).withConfig({displayName:"pointer__PointerElement",componentId:"sc-1444lan-0"})(["width:","px;height:","px;transform:translate( "," );background:transparent;border:","px solid ",";border-radius:100%;position:relative;&:before{content:'';display:block;width:","px;height:","px;position:absolute;top:-","px;left:-","px;}"],rm,rm,(e=>{let{offsetX:t=0,offsetY:n=0,isRTL:r}=e;return`${(r?-1:1)*t}px, ${n}px`}),2,(e=>{let{theme:t}=e;return t.colors.fg.primary}),32,32,10,10);const om=function Pointer(e){const{isRTL:t}=Y();return c.createElement(am,em({},e,{isRTL:t}))},lm=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.EditableInput}))))),im=p.default.button.withConfig({displayName:"editablePreview__Preview",componentId:"sc-cdmcf1-0"})(["margin:0;padding:5px 7px;border:1px solid ",";border-radius:4px;background:transparent;color:",";width:100%;",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),Mu),sm=p.default.div.withConfig({displayName:"editablePreview__Wrapper",componentId:"sc-cdmcf1-1"})(["input{",";}"],Mu);function EditablePreview(e){let{label:t,value:n,width:r,format:a,onChange:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useCallback)((()=>i(!0)),[]),d=(0,u.useCallback)((()=>i(!1)),[]),p=(0,u.useRef)(null),m=(0,u.useRef)(),f=(0,u.useMemo)((()=>({input:{textAlign:"center",textTransform:"lowercase",width:"100%",padding:"6px 12px",border:"1px solid #5E6668",color:"#E4E5E6",borderRadius:"4px",background:"transparent",lineHeight:"18px"},wrap:{lineHeight:0,maxWidth:`${r}px`}})),[r]);(0,tr.useKeyDownEffect)(p,{key:"esc",editable:!0},d,[l]);if((0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{l&&m.current&&(m.current.input.focus(),m.current.input.select(),m.current.input.setAttribute("aria-label",t))}));return()=>clearTimeout(e)}),[l,t]),!l)return c.createElement(im,{"aria-label":t,onClick:s,onFocus:s},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},a(n)));const g="transparent"===n?"000000":n;return c.createElement(sm,{ref:p,tabIndex:-1,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||d()}},c.createElement(u.Suspense,{fallback:null},c.createElement(lm,{value:g,ref:m,onChange:o,onChangeComplete:d,style:f})))}EditablePreview.defaultProps={label:"",value:""};const cm=EditablePreview,dm=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Saturation}))))),um=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Hue}))))),pm=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Alpha}))))),mm=p.default.div.withConfig({displayName:"currentColorPicker__BodyFallback",componentId:"sc-eqs4bc-0"})(["height:","px;display:flex;align-items:center;justify-content:center;"],240),fm=p.default.div.withConfig({displayName:"currentColorPicker__SaturationWrapper",componentId:"sc-eqs4bc-1"})(["position:relative;margin:0 16px;flex:0 1 ","px;"],116),gm=(0,p.css)(["margin:0 16px;border:1px solid ",";flex:0 0 ","px;position:relative;border-radius:","px;background-clip:padding-box;"],(e=>{let{theme:t}=e;return t.colors.shadow.active}),20,50),hm=p.default.div.withConfig({displayName:"currentColorPicker__HueWrapper",componentId:"sc-eqs4bc-2"})(["",""],gm),Em=p.default.div.withConfig({displayName:"currentColorPicker__AlphaWrapper",componentId:"sc-eqs4bc-3"})([""," div:first-child div:first-child div:first-child{background-image:conic-gradient( "," 0.25turn,transparent 0turn 0.5turn,"," 0turn 0.75turn,transparent 0turn 1turn ) !important;background-size:8px 8px !important;}"],gm,(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),bm=p.default.div.withConfig({displayName:"currentColorPicker__Footer",componentId:"sc-eqs4bc-4"})(["height:","px;line-height:19px;position:relative;margin:0 16px;display:flex;justify-content:space-between;"],36),ym=p.default.div.withConfig({displayName:"currentColorPicker__HexValue",componentId:"sc-eqs4bc-5"})(["width:","px;"],74),_m=p.default.div.withConfig({displayName:"currentColorPicker__Opacity",componentId:"sc-eqs4bc-6"})(["width:","px;"],52);function CurrentColorPicker(e){let{rgb:t,hsl:n,hsv:r,hex:a,onChange:o,showOpacity:l,hasEyedropper:i}=e;const s=String(Math.round(100*t.a)),p="#"===a[0]?a.substr(1):a,g=(0,u.useCallback)((e=>("transparent"===e&&(e="000000"),`#${e}`)),[]),h=(0,u.useCallback)((e=>`${e}%`),[]),E=(0,u.useCallback)((e=>o({hex:e})),[o]),b=(0,u.useCallback)((e=>o({...t,a:isNaN(e)?1:parseInt(e)/100})),[t,o]),{initEyedropper:y}=lp({onChange:o});return c.createElement(c.Fragment,null,c.createElement(u.Suspense,{fallback:null},c.createElement(fm,null,c.createElement(dm,{radius:"8px",pointer:()=>c.createElement(om,{offsetX:-8,offsetY:-8,currentColor:t}),hsl:n,hsv:r,onChange:o})),c.createElement(hm,null,c.createElement(um,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>c.createElement(om,{offsetX:-8,offsetY:1,currentColor:t}),hsl:n,onChange:o})),l&&c.createElement(Em,null,c.createElement(pm,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>c.createElement(om,{offsetX:-8,offsetY:1,currentColor:t,withAlpha:!0}),rgb:t,hsl:n,onChange:o}))),c.createElement(bm,null,i&&c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,"aria-label":(0,d.__)("Pick a color from canvas","web-stories"),onClick:y(),onPointerEnter:y(!1)},c.createElement(op,null)),c.createElement(ym,null,c.createElement(cm,{label:(0,d.__)("Edit hex value","web-stories"),value:p,onChange:E,width:80,format:g})),l&&c.createElement(_m,null,c.createElement(cm,{label:(0,d.__)("Edit opacity","web-stories"),value:s,width:52,format:h,onChange:b}))))}CurrentColorPicker.defaultProps={showOpacity:!0};const vm=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function DynamicFetcher(e){const r=(0,u.useRef)(!1),[a,o]=(0,u.useState)(null);return(0,u.useEffect)((()=>(r.current=!0,n.e(341).then(n.bind(n,66286)).then((e=>{let{CustomPicker:n}=e;r.current&&o({component:n(...t)})})),()=>{r.current=!1})),[]),a?c.createElement(a.component,e):c.createElement(mm,null,c.createElement(Jp.default,null))}return DynamicFetcher}(CurrentColorPicker);var wm;function Tm(){return Tm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tm.apply(this,arguments)}const SvgArrowsLeftright=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Tm({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,wm||(wm=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.354 8.854a.5.5 0 0 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L5.707 12.5H17.5a.5.5 0 1 0 0-1H5.707l2.647-2.646ZM23.646 16.854a.5.5 0 1 1 .707-.707l3.5 3.5a.5.5 0 0 1 0 .707l-3.5 3.5a.5.5 0 0 1-.707-.708l2.647-2.646H14.5a.5.5 0 1 1 0-1h11.793l-2.647-2.646Z",fill:"currentColor"})))},Sm=(0,c.memo)(SvgArrowsLeftright);var Cm;function Im(){return Im=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Im.apply(this,arguments)}const SvgArrowRightCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Im({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Cm||(Cm=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.281 9.144a.5.5 0 0 0-.703.712l4.704 4.644H15.5A6.5 6.5 0 0 0 9 21v1.5a.5.5 0 1 0 1 0V21a5.5 5.5 0 0 1 5.5-5.5h5.783l-4.705 4.645a.5.5 0 0 0 .703.711l5.57-5.5a.5.5 0 0 0 0-.711l-5.57-5.5Z",fill:"currentColor"})))},Am=(0,c.memo)(SvgArrowRightCurved);var xm;function km(){return km=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},km.apply(this,arguments)}const SvgTailedRectangle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",km({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,xm||(xm=c.createElement("path",{d:"M6.5 7.095c0-.854.743-1.595 1.722-1.595h15.556c.98 0 1.722.741 1.722 1.595v15.81c0 .854-.743 1.595-1.722 1.595H19.8c-.92 0-1.856.356-2.367 1.211l-.894 1.499c-.23.387-.847.387-1.078 0l-.895-1.499c-.488-.819-1.397-1.311-2.366-1.311H8.222c-.98 0-1.722-.742-1.722-1.595V7.095Z",stroke:"currentColor"})))},Om=(0,c.memo)(SvgTailedRectangle);var Nm=n(4251);const Pm=112,Rm=12,Mm="solid",Lm="linear",Dm="radial",Bm="DELETE_COLOR_PRESET_DIALOG_DISMISSED",Fm=e=>(0,Nm.default)(`#${e}`),Hm=[Fm("00000000"),Fm("000000"),Fm("454545"),Fm("B6B6B6"),Fm("EEEEEE"),Fm("FFFFFF"),Fm("003BAD"),Fm("0044C9"),Fm("0354F2"),Fm("1263FF"),Fm("347EFF"),Fm("6D9FFF"),Fm("4B1283"),Fm("5A189A"),Fm("7B2CBF"),Fm("9D4EDD"),Fm("C77DFF"),Fm("E0AAFF"),Fm("E03568"),Fm("FF477E"),Fm("FF5C8A"),Fm("FF7096"),Fm("FF85A1"),Fm("FF99AC"),Fm("590D22"),Fm("800F2F"),Fm("A4133C"),Fm("C9184A"),Fm("FF4D6D"),Fm("FF758F"),Fm("DBCA09"),Fm("FFD900"),Fm("FFE747"),Fm("FFEE70"),Fm("FFF599"),Fm("FFFFB7"),Fm("E06E04"),Fm("EA7D00"),Fm("FF9500"),Fm("FFA811"),Fm("FFBC35"),Fm("FFCC4A"),Fm("607047"),Fm("79895D"),Fm("839568"),Fm("A5B98B"),Fm("C1D3AA"),Fm("D4E4C0"),Fm("603809"),Fm("603808"),Fm("6F4518"),Fm("8B5E34"),Fm("A47148"),Fm("BC8A5F")],Um=p.default.button.attrs((e=>{let{position:t}=e;return{style:{right:t*Pm-6+"px"}}})).withConfig({displayName:"gradientStop__Stop",componentId:"sc-1kqiqwc-0"})(["position:absolute;top:-","px;background:transparent;border:0;padding:0;&:focus{outline:none;}"],24),zm=(0,p.css)(["position:absolute;left:0;top:0;width:100%;height:100%;"]),Gm=p.default.div.withConfig({displayName:"gradientStop__Background",componentId:"sc-1kqiqwc-1"})([""," ",""],zm,(e=>{let{color:t}=e;return(0,kr.default)(t)})),jm=p.default.div.withConfig({displayName:"gradientStop__Transparent",componentId:"sc-1kqiqwc-2"})([""," width:100%;height:100%;position:absolute;top:0;"],Dp.transparentBg),Ym=p.default.div.withConfig({displayName:"gradientStop__StopPointer",componentId:"sc-1kqiqwc-3"})(["transform:translate(",",0);width:","px;height:","px;border-radius:2px;overflow:hidden;"],(e=>{let{offset:t}=e;return`${t}px`}),14,14),Zm=p.default.div.withConfig({displayName:"gradientStop__IconWrapper",componentId:"sc-1kqiqwc-4"})(["position:absolute;left:-","px;top:-8px;color:",";svg{width:32px;height:32px;}"],10,(e=>{let{theme:t,isSelected:n}=e;return n?t.colors.fg.primary:t.colors.fg.tertiary}));const Wm=(0,u.forwardRef)((function GradientStopWithRef(e,t){let{position:n,index:r,isSelected:a,color:o,onSelect:l}=e;return c.createElement(Um,{ref:t,key:r,isSelected:a,position:n,onFocus:()=>l(r),onClick:()=>l(r),"aria-label":(0,qe.default)(
/* translators: %d: stop percentage */
(0,d.__)("Gradient stop at %d%%","web-stories"),Math.round(100-100*n))},c.createElement(Zm,{isSelected:a},c.createElement(Om,null)),c.createElement(Ym,{offset:-1},c.createElement(jm,null),c.createElement(Gm,{color:o})))}));Wm.propTypes={position:ma().number.isRequired,index:ma().number.isRequired,isSelected:ma().bool.isRequired,color:ma().object.isRequired,onSelect:ma().func.isRequired};const Vm=Wm;const $m=function(e,t){(0,tr.useKeyDownEffect)(e,"left",(()=>t(.01)),[t]),(0,tr.useKeyDownEffect)(e,"right",(()=>t(-.01)),[t])};const qm=function(e,t,n,r){(0,tr.useKeyDownEffect)(e,"enter",(()=>{return t((e=function(e,t){const n=t===e.length-1;if(n&&e[t].position<1)return 1;if(0===t&&e[0].position>0)return 0;const r=n?e[t-1]:e[t],a=n?e[t]:e[t+1];return r.position+(a.position-r.position)/2}(n,r),a=4,Number(e.toFixed(a))));var e,a}),[t,n,r])};const Xm=function(e,t){(0,tr.useKeyDownEffect)(e,"delete",(()=>{e.current.focus(),t()}),[t,e])};const Km=function(e,t,n){const r=t.length,a=(0,u.useMemo)((()=>Array.from({length:r}).map(u.createRef)),[r]);return(0,u.useLayoutEffect)((()=>{e.current.contains(document.activeElement)&&a[n].current.focus()}),[n,a,r,e]),a};function Qm(e){return e.pageX||e.clientX}const Jm=function(e,t){const[n,r]=(0,u.useState)(null);return(0,u.useLayoutEffect)((()=>{const n=e.current,a=n.getBoundingClientRect().left,o=e=>{if(e.target!==n)return;const o=(Qm(e)-a+7)/Pm;t(1.0625-o),r(null)},l=e=>{e.target===n?r(Qm(e)-a):r(null)},i=e=>{e.target===n&&r(null)};return n.addEventListener("pointermove",l),n.addEventListener("pointerleave",i),n.addEventListener("pointerdown",o),()=>{n.removeEventListener("pointermove",l),n.removeEventListener("pointerleave",i),n.removeEventListener("pointerdown",o)}}),[e,t]),n};const ef=function(e,t){const n=(0,u.useRef)(null);(0,u.useLayoutEffect)((()=>{const r=e.current,a=e=>{const r=Qm(e)-n.current;n.current=Qm(e),t(-r/Pm)},o=e=>{n.current=null,function(e){e.target.releasePointerCapture&&e.target.releasePointerCapture(e.pointerId)}(e),e.target.removeEventListener("pointermove",a),e.target.removeEventListener("pointerup",o)},l=e=>{e.target!==r&&(n.current=Qm(e),function(e){e.target.setPointerCapture&&e.target.setPointerCapture(e.pointerId)}(e),e.target.addEventListener("pointermove",a),e.target.addEventListener("pointerup",o))};return r.addEventListener("pointerdown",l),()=>r.removeEventListener("pointerdown",l)}),[e,t])},tf=p.default.div.withConfig({displayName:"gradientLine__Line",componentId:"sc-1k22wp0-0"})([""," width:","px;height:","px;border-radius:2px;position:relative;&:focus{outline:none;}"],Dp.transparentBg,Pm,Rm),nf=p.default.div.attrs((e=>{let{stops:t}=e;return{style:(0,kr.default)({type:"linear",stops:t,rotation:.25})}})).withConfig({displayName:"gradientLine__Background",componentId:"sc-1k22wp0-1"})(["position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;"]),rf=(0,p.default)(om).attrs((e=>{let{x:t}=e;return{style:{left:`${t}px`},offsetX:-6}})).withConfig({displayName:"gradientLine__TempPointer",componentId:"sc-1k22wp0-2"})(["height:","px;width:","px;opacity:0.6;top:1px;pointer-events:none;"],10,10);const af=function GradientLine(e){let{stops:t,currentStopIndex:n,onSelect:r,onAdd:a,onDelete:o,onMove:l}=e;const i=(0,u.useRef)();$m(i,l),qm(i,a,t,n),Xm(i,o);const s=Km(i,t,n);ef(i,l);const p=Jm(i,a);return c.createElement(tf,{ref:i,"aria-label":(0,d.__)("Gradient line","web-stories"),tabIndex:"-1"},c.createElement(nf,{stops:t}),t.map(((e,t)=>{let{position:a,color:o}=e;return c.createElement(Vm,{ref:e=>s[t].current=e,key:t,index:t,isSelected:t===n,position:a,onSelect:r,color:{color:o}},c.createElement(om,{offsetX:-6}))})),p&&c.createElement(rf,{"aria-label":(0,qe.default)(
/* translators: %d: stop percentage */
(0,d.__)("Temporary gradient stop at %d%%","web-stories"),Math.round(p/Pm*100)),x:p}))},of=p.default.div.withConfig({displayName:"gradientPicker__Wrapper",componentId:"sc-a6h8ls-0"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 16px 0;height:60px;"]),lf=p.default.div.withConfig({displayName:"gradientPicker__Buttons",componentId:"sc-a6h8ls-1"})(["display:flex;gap:8px;"]),sf=(0,p.default)(m.Button).withConfig({displayName:"gradientPicker__SmallButton",componentId:"sc-a6h8ls-2"})(["width:24px;height:24px;padding:0;svg{width:24px;height:24px;}"]);const cf=function GradientPicker(e){let{stops:t,currentStopIndex:n,type:r,onSelect:a,onAdd:o,onDelete:l,onMove:i,onRotate:s,onReverse:u}=e;const p=(0,d.__)("Reverse gradient stops","web-stories"),m=(0,d.__)("Rotate gradient","web-stories"),g="radial"!==r;return c.createElement(of,null,c.createElement(af,{stops:t,currentStopIndex:n,onSelect:a,onAdd:o,onDelete:l,onMove:i}),c.createElement(lf,null,c.createElement(Tooltip,{hasTail:!0,title:p},c.createElement(sf,{"aria-label":p,onClick:u,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(Sm,null))),g&&c.createElement(Tooltip,{hasTail:!0,title:m},c.createElement(sf,{onClick:s,"aria-label":m,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(Am,{id:"gradient-rotator"})))))};var df=n(25252);function uf(){return uf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uf.apply(this,arguments)}const pf=p.default.div.withConfig({displayName:"header__Wrapper",componentId:"sc-3jvjbz-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),mf=p.default.div.withConfig({displayName:"header__Actions",componentId:"sc-3jvjbz-1"})(["display:flex;margin-left:auto;"]),ff=(0,p.default)(m.Button).withConfig({displayName:"header__StyledButton",componentId:"sc-3jvjbz-2"})(["margin-left:8px;",";"],Mu);const gf=function Header(e){let{children:t,handleClose:n,isEditMode:r=!1,setIsEditMode:a=(()=>{}),hasPresets:o=!1}=e;const l=(0,u.useRef)();(0,u.useEffect)((()=>{l.current?.focus()}),[]);const i={type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:e=>{e.stopPropagation(),a(!r)},isEditMode:r};return c.createElement(pf,null,t,c.createElement(mf,null,o&&c.createElement(ff,uf({},i,{"aria-label":r?(0,d.__)("Exit edit mode","web-stories"):(0,d.__)("Edit colors","web-stories")}),r?(0,d.__)("Done","web-stories"):c.createElement(df.default,null)),c.createElement(ff,{"aria-label":(0,d.__)("Close","web-stories"),onClick:n,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,ref:l},c.createElement(Nu.default,null))))};var hf;function Ef(){return Ef=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ef.apply(this,arguments)}const SvgPatternSolid=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ef({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hf||(hf=c.createElement("circle",{cx:16,cy:16,r:11.5,fill:"currentColor",stroke:"currentColor"})))},bf=(0,c.memo)(SvgPatternSolid);var yf,_f,vf;function wf(){return wf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wf.apply(this,arguments)}const SvgPatternLinear=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,yf||(yf=c.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),_f||(_f=c.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),vf||(vf=c.createElement("defs",null,c.createElement("linearGradient",{id:"a",x1:16,y1:4,x2:16,y2:35.8,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"currentColor",stopOpacity:.52}),c.createElement("stop",{offset:.802,stopColor:"currentColor",stopOpacity:0})))))},Tf=(0,c.memo)(SvgPatternLinear);var Sf,Cf,If;function Af(){return Af=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Af.apply(this,arguments)}const SvgPatternRadial=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Af({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Sf||(Sf=c.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),Cf||(Cf=c.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),If||(If=c.createElement("defs",null,c.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(90 0 16) scale(23.4)"},c.createElement("stop",{stopColor:"currentColor",stopOpacity:.64}),c.createElement("stop",{offset:.573,stopColor:"currentColor",stopOpacity:0})))))},xf=(0,c.memo)(SvgPatternRadial),kf=p.default.div.withConfig({displayName:"patternTypePicker__Wrapper",componentId:"sc-1mq6bg0-0"})(["display:flex;justify-content:flex-start;align-items:center;height:","px;padding:0 16px;position:relative;gap:8px;"],52);const Of=function PatternTypePicker(e){let{type:t,setToGradient:n,setToSolid:r}=e;const a=(0,u.useCallback)((()=>n("linear")),[n]),o=(0,u.useCallback)((()=>n("radial")),[n]);return c.createElement(kf,null,c.createElement(ToggleButton,{"aria-label":(0,d.__)("Solid pattern type","web-stories"),onClick:r,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"solid"===t},c.createElement(bf,null)),c.createElement(ToggleButton,{"aria-label":(0,d.__)("Linear gradient pattern type","web-stories"),onClick:a,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"linear"===t},c.createElement(Tf,null)),c.createElement(ToggleButton,{"aria-label":(0,d.__)("Radial gradient pattern type","web-stories"),onClick:o,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"radial"===t},c.createElement(xf,null)))};const Nf=function(e,t){const n=e.findIndex((e=>{let{position:n}=e;return n>t}));if(-1===n)return{index:e.length,color:e[e.length-1].color};if(0===n)return{index:0,color:e[0].color};const r=e[n-1],a=e[n],o=(t-r.position)/(a.position-r.position),{color:{r:l,g:i,b:s,a:c=1}}=r,{color:{r:d,g:u,b:p,a:m=1}}=a,f=(e,t)=>e+(t-e)*o,g={r:Math.round(f(l,d)),g:Math.round(f(i,u)),b:Math.round(f(s,p)),a:f(c,m)};return{index:n,color:1===g.a?{r:g.r,g:g.g,b:g.b}:g}};function Pf(e){return e.map((e=>{let{color:{r:t,g:n,b:r,a},position:o}=e;return{color:(0,Xp.default)(t,n,r,a).color,position:o}}))}const Rf=function(e){const{regenerate:t,type:n}=e;if(!t)return null;switch(n){case Mm:return function(e){let{currentColor:{r:t,g:n,b:r,a}}=e;return(0,Xp.default)(t,n,r,a)}(e);case Lm:return function(e){let{stops:t,rotation:n,alpha:r}=e;const a={type:Lm,stops:Pf(t)};return 0!==n&&(a.rotation=n),1!==r&&void 0!==r&&(a.alpha=r),a}(e);case Dm:return function(e){let{stops:t,center:n,size:r,alpha:a}=e;const o={type:Dm,stops:Pf(t)};return!n||.5===n.x&&.5===n.y||(o.center=n),!r||1===r.w&&1===r.h||(o.size=r),1!==a&&void 0!==a&&(o.alpha=a),o}(e);default:return null}},Mf={type:Mm,regenerate:!1,stops:[],currentColor:{r:0,g:0,b:0,a:0},currentStopIndex:0,rotation:.5,alpha:1,center:{x:.5,y:.5},size:{w:1,h:1}},Lf={load:(e,t)=>{let{payload:n}=t;const{type:r,color:a,stops:o,rotation:l,center:i,size:s,alpha:c}=n,d=r&&r!==Mm&&(e.type!==r||o?.length!==e.stops?.length)?{currentColor:o[0].color,currentStopIndex:0}:{};switch(r){case Lm:return{...e,...d,type:r,regenerate:!1,stops:o,alpha:isNaN(c)?e.alpha:c,rotation:isNaN(l)?0:l};case Dm:return{...e,...d,type:r,regenerate:!1,stops:o,center:void 0!==i?i:e.center,size:void 0!==s?s:e.size,alpha:isNaN(c)?e.alpha:c};default:return{...e,type:Mm,regenerate:!1,currentColor:a}}},setToSolid:e=>({...e,type:Mm,regenerate:!0}),setToGradient:(e,t)=>{let{payload:n}=t;const r=e.stops&&e.stops.length>=2?e.stops:[{color:e.currentColor,position:0},{color:e.currentColor,position:1}];return{...e,regenerate:!0,type:n,stops:r}},addStopAt:(e,t)=>{let{payload:n}=t;if(n=Number(n.toFixed(2)),e.stops.some((e=>{let{position:t}=e;return t===n})))return e;const{index:r,color:a}=Nf(e.stops,n),o=[...e.stops.slice(0,r),{color:a,position:n},...e.stops.slice(r)];return{...e,regenerate:!0,currentColor:a,currentStopIndex:r,stops:o}},moveCurrentStopBy:(e,t)=>{let{payload:n}=t;const r=e.currentStopIndex,a=e.stops[r].position,o=Math.max(0,Math.min(1,Number((a+n).toFixed(2))));if(o===a)return e;const l=[...e.stops.slice(0,r),{...e.stops[r],position:o},...e.stops.slice(r+1)];l.sort(((e,t)=>e.position-t.position));const i=l.findIndex((e=>{let{position:t}=e;return t===o}));return{...e,regenerate:!0,stops:l,currentStopIndex:i}},removeCurrentStop:e=>{if(2===e.stops.length)return e;const t=e.currentStopIndex,n=[...e.stops];n.splice(t,1);const r=t===n.length?t-1:t;return{...e,regenerate:!0,stops:n,currentColor:n[r].color,currentStopIndex:r}},updateCurrentColor:(e,t)=>{let{payload:{rgb:n}}=t;const r={...n},a={...e,regenerate:!0,currentColor:r};return e.type!==Mm&&(a.stops=[...e.stops.slice(0,e.currentStopIndex),{...e.stops[e.currentStopIndex],color:r},...e.stops.slice(e.currentStopIndex+1)]),a},rotateClockwise:e=>({...e,rotation:(e.rotation+.25)%1,regenerate:!0}),selectStop:(e,t)=>{let{payload:n}=t;const r=Math.max(0,Math.min(e.stops.length-1,n)),a=e.stops[r].color;return{...e,currentStopIndex:r,currentColor:a}},reverseStops:e=>{const t=e.stops.map((e=>{let{color:t,position:n}=e;return{color:t,position:1-n}})).reverse(),n=t.length-e.currentStopIndex-1;return{...e,stops:t,currentStopIndex:n,regenerate:!0}}};const Df=function(){const[e,t]=(0,u.useReduction)(Mf,Lf),n=Rf(e);return{state:{...e,generatedColor:n},actions:t}},Bf=(0,p.default)(m.Button).withConfig({displayName:"addCustomColor__StyledButton",componentId:"sc-4t2ps2-0"})(["flex:0 0 32px;margin:0 16px 16px;"]);const Ff=function AddCustomColor(e){let{color:t,onSave:n}=e;const{updateStory:r,globalStoryStyles:a}=Sa((e=>{let{state:{story:{globalStoryStyles:t}},actions:{updateStory:n}}=e;return{globalStoryStyles:t,updateStory:n}})),o=(0,u.useCallback)((()=>{r({properties:{globalStoryStyles:{...a,colors:mr([...a.colors,t].filter(Boolean))}}}),n()}),[n,t,a,r]);return c.createElement(Bf,{onClick:o,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Add to Saved Colors","web-stories"))};const Hf=function CustomColorPicker(e){let{color:t,allowsGradient:n,allowsOpacity:r,handleColorChange:a,handleClose:o,hideCustomPicker:l,allowsSavedColors:i,hasEyedropper:s}=e;const{state:{type:p,stops:g,currentStopIndex:h,currentColor:E,generatedColor:b},actions:{load:y,updateCurrentColor:_,reverseStops:v,selectStop:w,addStopAt:T,removeCurrentStop:S,rotateClockwise:C,moveCurrentStopBy:I,setToSolid:A,setToGradient:x}}=Df();return(0,u.useEffect)((()=>{b&&a(b)}),[a,b]),(0,u.useEffect)((()=>{y(t||(0,Xp.default)(0,0,0))}),[t,y]),c.createElement(c.Fragment,null,c.createElement(gf,{handleClose:o},c.createElement(m.Button,{"aria-label":(0,d.__)("Go back","web-stories"),onClick:l,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(Qp,null))),n&&c.createElement(Of,{type:p,setToGradient:x,setToSolid:A}),"solid"!==p&&c.createElement(cf,{stops:g,currentStopIndex:h,onSelect:w,onReverse:v,onAdd:T,onDelete:S,onRotate:C,onMove:I,type:p}),c.createElement(vm,{color:E,onChange:_,showOpacity:r,hasEyedropper:s}),i&&c.createElement(Ff,{color:b||t,onSave:l}))};var Uf;function zf(){return zf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zf.apply(this,arguments)}const SvgPlusOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Uf||(Uf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm4 0a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",fill:"currentColor"})))},Gf=(0,c.memo)(SvgPlusOutline),jf='[tabIndex="-1"]:not(:disabled)';function Yf(e,t){let n,r=t;for(;r>0;)n=n?n?.parentElement:e.parentElement,r--;return n}function Zf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"firstChild";const r=Yf(e,t),a=r.parentNode[n];return a.querySelector(jf)}function Wf(e){const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}function Vf(e,t,n){return n>0?function(e,t,n){const r=Yf(e,n);if(r){const e=r[t];return e?e.querySelector(jf):null}return null}(e,t,n):function(e,t){let n=e[t];for(;n&&n.disabled;)n=n[t];return n}(e,t)}function $f(e,t){return(e?"ArrowRight"===t||"ArrowUp"===t||"PageUp"===t:"ArrowLeft"===t||"ArrowUp"===t||"PageUp"===t)?"previousSibling":"nextSibling"}function qf(e,t,n){const r=Wf(e);let a=null,o=null,l=null;for(let c=Vf(e,t,n);c;c=Vf(c,t,n)){const e=Wf(c);if(Math.floor(e.y)===Math.floor(r.y))continue;if(a&&Math.floor(e.y)>Math.floor(o.y))break;const t=(i=r,s=e,Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2));(!l||t<l)&&(l=t,o=e,a=c)}var i,s;return a}function Xf(e){let{ref:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{isRTL:a}=Y(),o=(0,u.useCallback)((e=>{let{key:t,target:n}=e;const o=n,l=$f(a,t),i=e=>{if(e){const t=r>0?Yf(e,r):e;o.tabIndex=-1,e.tabIndex=0,e.focus(),t.scrollIntoView("previousSibling"===l)}};if("ArrowLeft"===t||"ArrowRight"===t){const e=Vf(o,l,r);e&&i(e)}else if("ArrowUp"===t||"ArrowDown"===t){const e=qf(o,l,r);if(e)o.tabIndex=-1,e.tabIndex=0,e.focus();else if("ArrowUp"===t){i(r>0?Zf(o,r):o.parentNode.firstChild)}else{i(r>0?Zf(o,r,"lastChild"):o.parentNode.lastChild)}}else if("Home"===t){i(r>0?Zf(o,r):o.parentNode.firstChild)}else if("End"===t){i(r>0?Zf(o,r,"lastChild"):o.parentNode.lastChild)}else if("PageDown"===t||"PageUp"===t){let e=o;for(let t=0;Vf(e,l,r)&&t<5;e=Vf(e,l,r))t++;i(e)}}),[a,r]);(0,tr.useKeyDownEffect)(t,{key:["up","down","left","right","pageup","pagedown","home","end"]},o,[t,o,...n])}var Kf;function Qf(){return Qf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qf.apply(this,arguments)}const SvgPlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Qf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Kf||(Kf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.5 9a.5.5 0 0 0-1 0v6.498h-7a.5.5 0 0 0 0 1h7v7.498a.5.5 0 1 0 1 0v-7.498h6.996a.5.5 0 1 0 0-1H16.5V9Z",fill:"currentColor"})))},Jf=(0,c.memo)(SvgPlus);var eg=n(63247),tg=n(76611);const ng=["backgroundColor","backgroundTextMode","font","fontSize","lineHeight","padding","textAlign"];function rg(e,t,n){const r=t.colors,a=n?"color":"background";return r.find((t=>{try{return(0,eg.default)(t,e,a)}catch(e){return!1}}))}function ag(e,t){const{color:n,backgroundColor:r,font:a,fontWeight:o,backgroundTextMode:l,textAlign:i,letterSpacing:s,lineHeight:c,isItalic:d,isUnderline:u,padding:p,fontSize:m}=e;let f={textAlign:i,letterSpacing:s/100+"em",fontWeight:o,textDecoration:u?"underline":null,fontStyle:d?"italic":null,fontFamily:(0,O.generateFontFamily)(a),...(0,kr.default)(n,"color")};return t||(f={...f,fontSize:m,lineHeight:c,padding:p,backgroundTextMode:l}),l===Dn.BACKGROUND_TEXT_MODE.NONE||t&&l===Dn.BACKGROUND_TEXT_MODE.HIGHLIGHT||(f={...f,...(0,kr.default)(r,"background")}),f}function og(e){return e!==Ce?e:null}function lg(e){const{color:t,fontWeight:n,isItalic:r,isUnderline:a,letterSpacing:o}=(0,Sr.getHTMLInfo)(e);return{color:t!==Ce?t:(0,Xp.default)(0,0,0),fontWeight:og(n),isItalic:og(r),isUnderline:og(a),letterSpacing:og(o)}}function ig(e,t,n,r){const a=ze===n?[]:e.map((e=>{let{content:t,backgroundColor:n}=e;return r?n:(0,Sr.getHTMLInfo)(t).color})).filter((e=>e!==Ce)).filter((e=>e&&!rg(e,t,!0))),o=Ge===n?[]:e.map((e=>({...Bn(e,ng),...lg(e.content)}))).filter((e=>!function(e,t){const n=t.textStyles,r=(0,tg.default)(ag(e));return n.find((e=>r===(0,tg.default)(ag(e))))}(e,t)));return{colors:a,textStyles:o}}function sg(e,t){const n=e.map((e=>{let{backgroundColor:t}=e;return t||null})).filter((e=>e&&!rg(e,t,!1)));return{colors:n}}function cg(e,t){return t.length>0&&t.every((t=>{let{type:n}=t;return e===n}))}const dg=function(e){let{presetType:t,isBackgroundColor:n}=e;const{currentPage:r,currentStoryStyles:a={colors:[]},selectedElements:o,globalStoryStyles:l={colors:[],textStyles:[]},updateStory:i}=Sa((e=>{let{state:{currentPage:t,selectedElements:n,story:{globalStoryStyles:r,currentStoryStyles:a}},actions:{updateStory:o}}=e;return{currentPage:t,currentStoryStyles:a,selectedElements:n,globalStoryStyles:r,updateStory:o}})),{colors:s,textStyles:c}=l,{colors:d}=a,p=cg("text",o),m=o?.[0]?.id===r?.elements?.[0]?.id,f=(0,u.useCallback)(((e,a)=>{return p?{...e,...ig(o,a,t,n)}:m?{...e,...(l=r,i=a,{colors:[l.backgroundColor].filter((e=>e&&!rg(e,i,!1)))})}:{...e,...sg(o,a)};var l,i}),[r,m,p,t,o,n]),g=(0,u.useCallback)((e=>{i({properties:{currentStoryStyles:{colors:mr([...d,...e.colors])}}})}),[d,i]),h=(0,u.useCallback)((e=>{i({properties:{globalStoryStyles:{textStyles:mr([...c,...e.textStyles]),colors:mr([...s,...e.colors])}}})}),[s,c,i]),E=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?a:l;if((e=f(e,n)).colors?.length>0||e.textStyles?.length>0)return t?g(e,n):h(e,n),e}),[f,a,l,h,g]);return{addGlobalPreset:e=>(e.stopPropagation(),E({textStyles:[],colors:[]})),addLocalPreset:e=>(e.stopPropagation(),E({colors:[]},!0))}};function ug(){return ug=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ug.apply(this,arguments)}const pg=p.default.button.withConfig({displayName:"colorAdd__AddColorAction",componentId:"sc-1s3q8di-0"})(["cursor:pointer;background-color:transparent;color:",";border-color:",";border-width:1px;border-style:dashed;border-radius:50%;height:","px;width:","px;padding:0;svg{height:100%;width:100%;}:hover{border-color:",";}",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),24,24,(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),Mu);const mg=function ColorAdd(e){let{isLocal:t=!1,isGlobal:n=!1,isBackground:r=!1,...a}=e;const{addGlobalPreset:o,addLocalPreset:l}=dg({presetType:Ge,isBackgroundColor:r});if(!t&&!n)return null;const i=t?(0,d.__)("Add local color","web-stories"):(0,d.__)("Add global color","web-stories");return c.createElement(pg,ug({tabIndex:"0",onClick:t?l:o,"aria-label":i},a),c.createElement(Jf,null))};function fg(){return fg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fg.apply(this,arguments)}const gg=(0,p.css)(["",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),hg=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"basicColorList__SwatchList",componentId:"sc-10h6tzp-0"})(["display:flex;max-width:100%;flex-wrap:wrap;gap:6px;"]),Eg=(0,p.default)(Swatch).attrs((e=>{let{isSelected:t}=e;return{role:"option","aria-selected":t}})).withConfig({displayName:"basicColorList__StyledSwatch",componentId:"sc-10h6tzp-1"})(["",";",""],gg,(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["border:2px solid ",";"],n.colors.border.defaultActive)}));function bg(e){if(!e)return"";const t=(0,kr.default)(e);return t.backgroundColor||t.backgroundImage}function ConditionalTooltip(e){let{tooltip:t,children:n}=e;return t?c.createElement(Tooltip,{title:t},n):n}const yg=function BasicColorList(e){let{color:t,colors:n,handleClick:r,allowsOpacity:a,allowsGradient:o,isLocal:l=!1,isGlobal:i=!1,isEditMode:s,changedStyle:p,...m}=e;const f=bg(t),g=(0,u.useRef)(null);Xf({ref:g});const h=n.map(bg).findIndex((e=>f===e));let E=0;const b=l?(0,d.__)("local","web-stories"):(0,d.__)("global","web-stories"),y="background"===p;return c.createElement(c.Fragment,null,n.length>0&&c.createElement(hg,fg({ref:g},m),n.map(((e,t)=>{const n=!a&&Mp(e),i=!o&&Lp(e),u=(n||i)&&!s;let p=null;u&&!s&&(p=n?(0,d.__)("Page background colors cannot have an opacity.","web-stories"):(0,d.__)("Gradient not allowed for Text","web-stories"));const m=bg(e),g=s?(0,qe.default)(
/* translators: First %s is the color type, second %s is the color as a string */
(0,d.__)("Delete %1$s color: %2$s","web-stories"),b,m):m,y=f===m;let _=t===E?0:-1;return h>=0?_=y?0:-1:u&&t===E&&(E++,_=-1),c.createElement(ConditionalTooltip,{key:m,tooltip:p},c.createElement(Eg,{onClick:()=>r(e,l),pattern:e,isSelected:y,isDisabled:u,tabIndex:_,title:g},s&&c.createElement(Nu.default,null)))})),(l||i)&&c.createElement(mg,{isLocal:l,isGlobal:i,isBackground:y})),!n.length&&(l||i)&&c.createElement(mg,{isLocal:l,isGlobal:i,isBackground:y}))},_g=p.default.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-bvt4vo-0"})(["margin-left:12px;"]),vg=p.default.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-bvt4vo-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const wg=function ConfirmationDialog(e){let{onClose:t,onPrimary:n}=e;const[r,a]=(0,u.useState)(_o.getItemByKey(yo[Bm])),o=`cb-${(0,he.default)()}`;return c.createElement(y,{isOpen:!0,onClose:t,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:n,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("This is a global color. Deleting this color will remove it from the Saved Colors across all stories and the color will no longer be available to any other users on the site.","web-stories")),c.createElement(vg,null,c.createElement(tp.Checkbox,{id:o,checked:r,onChange:()=>{_o.setItemByKey(yo[Bm],!r),a(!r)}}),c.createElement(_g,{htmlFor:o},c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Don't ask for confirmation again.","web-stories")))))};const Tg=function(e){let{onEmpty:t=(()=>{})}=e;const{currentStoryStyles:n,globalStoryStyles:r,updateStory:a}=Sa((e=>{let{state:{story:{globalStoryStyles:t,currentStoryStyles:n}},actions:{updateStory:r}}=e;return{currentStoryStyles:n,globalStoryStyles:t,updateStory:r}})),{colors:o}=r||{},{colors:l}=n||{},i=l?.length>0,s=(0,u.useCallback)((e=>{const n=o.filter((t=>t!==e));a({properties:{globalStoryStyles:{...r||{},colors:n}}}),0!==n.length||i||t()}),[o,a,i,r,t]),c=(0,u.useCallback)((e=>{const n=l.filter((t=>t!==e));a({properties:{currentStoryStyles:{colors:n}}}),0===n.length&&0===o.length&&t()}),[o,l,a,t]);return{deleteLocalColor:c,deleteGlobalColor:s}},Sg=p.default.div.withConfig({displayName:"basicColorPicker__Body",componentId:"sc-c2cm2c-0"})(["display:flex;flex-direction:column;padding:8px 16px 0;overflow:auto;",";"],P.scrollbarCSS),Cg=p.default.div.withConfig({displayName:"basicColorPicker__Footer",componentId:"sc-c2cm2c-1"})(["padding:8px 16px 16px;display:flex;flex-direction:column;"]),Ig=p.default.div.withConfig({displayName:"basicColorPicker__SavedColors",componentId:"sc-c2cm2c-2"})(["border-bottom:1px solid ",";padding-bottom:16px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),Ag=p.default.div.withConfig({displayName:"basicColorPicker__DefaultColors",componentId:"sc-c2cm2c-3"})([""]),xg=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"basicColorPicker__Label",componentId:"sc-c2cm2c-4"})(["color:",";margin:12px 0 10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),kg=(0,p.default)(xg).withConfig({displayName:"basicColorPicker__DefaultText",componentId:"sc-c2cm2c-5"})(["margin:0 0 0 8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Og=(0,p.default)(m.Button).withConfig({displayName:"basicColorPicker__StyledButton",componentId:"sc-c2cm2c-6"})(["display:flex;justify-content:center;align-items:center;gap:4px;flex-basis:100%;"]),Ng=(0,p.default)(Ke.Text).withConfig({displayName:"basicColorPicker__StyledText",componentId:"sc-c2cm2c-7"})(["padding:5px 10px;"]),Pg=(0,p.default)(Gf).withConfig({displayName:"basicColorPicker__StyledPlus",componentId:"sc-c2cm2c-8"})(["width:32px;margin:-8px 0;"]),Rg=p.default.div.withConfig({displayName:"basicColorPicker__EyedropperWrapper",componentId:"sc-c2cm2c-9"})(["display:flex;"]);const Mg=function BasicColorPicker(e){let{color:t,handleColorChange:n,allowsOpacity:r,allowsGradient:a,allowsSavedColors:o,showCustomPicker:l,handleClose:i,showDialog:s,setShowDialog:p,changedStyle:g,hasEyedropper:h,allowsSavedColorDeletion:E,shouldCloseOnSelection:b}=e;const{savedColors:y,storyColors:_}=Sa((e=>({savedColors:e.state.story?.globalStoryStyles?.colors||[],storyColors:e.state.story?.currentStoryStyles?.colors||[]}))),[v,w]=(0,u.useState)(!1),[T,S]=(0,u.useState)(null),C=_.length>0||y.length>0,{initEyedropper:I}=lp({onChange:e=>n({color:e})}),{deleteLocalColor:A,deleteGlobalColor:x}=Tg({onEmpty:()=>w(!1)}),k=e=>{n(e),b&&i()},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!v)return void k(e);if(t)return void A(e);const n=_o.getItemByKey(yo[Bm]);n?x(e):(p(!0),S(e))},N=!b||E;return c.createElement(c.Fragment,null,N&&c.createElement(gf,{handleClose:i,isEditMode:v,setIsEditMode:w,hasPresets:C&&o},c.createElement(kg,null,(0,d.__)("Color","web-stories"))),c.createElement(Sg,null,h&&c.createElement(Rg,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,"aria-label":(0,d.__)("Pick a color from canvas","web-stories"),onClick:I(),onPointerEnter:I(!1)},c.createElement(op,null)),c.createElement(Ng,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Sample color","web-stories"))),o&&c.createElement(Ig,null,c.createElement(xg,{id:"colorpicker-story-colors-title"},(0,d.__)("Current story","web-stories")),c.createElement(yg,{color:t,colors:_,handleClick:O,isLocal:!0,allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-story-colors-title",isEditMode:v,"data-testid":"saved-story-colors",changedStyle:g}),c.createElement(xg,{id:"colorpicker-saved-colors-title"},(0,d.__)("Saved colors","web-stories")),c.createElement(yg,{color:t,colors:y,isGlobal:!0,handleClick:O,allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-saved-colors-title",isEditMode:v,changedStyle:g})),c.createElement(Ag,null,c.createElement(xg,{id:"colorpicker-default-colors-title"},(0,d.__)("Default","web-stories")),c.createElement(yg,{color:t,colors:Hm,handleClick:e=>{k(e),w(!1)},allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-default-colors-title",isEditMode:!1}))),c.createElement(Cg,null,c.createElement(Og,{onClick:l,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Custom","web-stories"),c.createElement(Pg,null))),s&&c.createElement(wg,{onClose:()=>p(!1),onPrimary:()=>{x(T),S(null),p(!1)}}))},Lg=p.default.div.withConfig({displayName:"colorPicker__Container",componentId:"sc-1xsejx6-0"})(["border-radius:8px;background:",";user-select:none;display:flex;flex-direction:column;gap:12px;align-items:stretch;",";overflow:hidden;&.picker-appear{opacity:0.01;margin-top:-10px;&.picker-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{maxHeight:t}=e;return t?`\n          height: ${t}px;\n          width: ${208+P.SCROLLBAR_WIDTH}px;\n        `:"\n          width: 208px;\n        "}));const Dg=function ColorPicker(e){let{onChange:t,isEyedropperActive:n=!1,color:r=null,allowsGradient:a=!1,allowsOpacity:o=!0,allowsSavedColors:l=!1,hasEyedropper:i=!0,maxHeight:s=null,onClose:p=(()=>{}),changedStyle:m="background",onDimensionChange:f=(()=>{}),allowsSavedColorDeletion:g=!0,shouldCloseOnSelection:h=!1}=e;const[E,b]=(0,u.useState)(!1),[y,_]=(0,u.useState)(Lp(r)),v=(0,u.useCallback)((()=>{_(!0),f()}),[f]),w=(0,u.useCallback)((()=>{_(!1),f()}),[f]),{actions:{pushTransform:T}}=(0,C.useTransform)(),{selectedElementIds:S=[]}=Sa((e=>{let{state:{selectedElementIds:t}}=e;return{selectedElementIds:t}})),I=(0,u.useDebouncedCallback)(t,100,{leading:!0}),A=(0,u.useCallback)((e=>{I(e),S.forEach((t=>{T(t,{color:e,style:m,staticTransformation:!0})}))}),[I,S,m,T]),x=(0,u.useRef)();(0,u.useFocusOut)(x,(()=>{n||E||p()}),[n,E]);const k=(0,u.useRef)(document.activeElement),O=(0,u.useCallback)((e=>{k.current&&k.current.focus(),p(e)}),[p]);(0,tr.useKeyDownEffect)(x,"esc",O),$p({ref:x});const N=y?Hf:Mg;return c.createElement(Vp.default,{nodeRef:x,in:!0,appear:!0,classNames:"picker",timeout:300},c.createElement(Lg,{role:"dialog","aria-label":(0,d.__)("Color and gradient picker","web-stories"),ref:x,maxHeight:s},c.createElement(N,{color:r,allowsGradient:a,allowsOpacity:o,handleColorChange:A,showCustomPicker:v,hideCustomPicker:w,handleClose:O,hasEyedropper:i,allowsSavedColors:l,showDialog:E,setShowDialog:b,changedStyle:m,allowsSavedColorDeletion:g,shouldCloseOnSelection:h})))},Bg=(0,u.createContext)({state:{},actions:{},tabs:{},refs:{}});const Fg=function(e){return(0,u.useContextSelector)(Bg,e??u.identity)};function Hg(){return Hg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hg.apply(this,arguments)}const Ug=p.default.div.withConfig({displayName:"colorInput__Preview",componentId:"sc-1h4cp44-0"})(["height:36px;color:",";cursor:pointer;position:relative;width:100%;padding:0;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),zg=(0,p.default)(Pp).withConfig({displayName:"colorInput__Input",componentId:"sc-1h4cp44-1"})(["min-width:100px;div{background-color:transparent;}input{padding-left:26px;}"]),Gg=(0,p.default)(Tooltip).withConfig({displayName:"colorInput__Tooltip",componentId:"sc-1h4cp44-2"})(["width:100%;height:100%;"]),jg=(0,p.css)(["position:absolute;top:0;left:0;border-radius:50px;width:24px;height:24px;"]),Yg=(0,p.css)(["overflow:hidden;border:1px solid ",";outline:none;background:transparent;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),Zg=(0,p.css)(["",";padding-right:6px;"],Lu),Wg=(0,p.default)(Ug).attrs({as:"button",type:"button"}).withConfig({displayName:"colorInput__ColorButton",componentId:"sc-1h4cp44-3"})(["border-radius:4px;"," display:flex;&:focus{box-shadow:0px 0px 0 2px ",",0px 0px 0 4px ",";border-color:",";}"],Yg,(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.defaultHover})),Vg=p.default.div.withConfig({displayName:"colorInput__ColorPreview",componentId:"sc-1h4cp44-4"})([""," top:6px;left:6px;padding:0;background:transparent;cursor:pointer;"],jg),$g=p.default.div.withConfig({displayName:"colorInput__TextualPreview",componentId:"sc-1h4cp44-5"})(["padding:6px 12px 6px 38px;text-align:left;flex-grow:1;height:32px;"]),qg=(0,p.default)($g).withConfig({displayName:"colorInput__MixedLabel",componentId:"sc-1h4cp44-6"})(["align-self:center;padding:6px 6px 6px 38px;"]),Xg=(0,p.default)(Swatch).withConfig({displayName:"colorInput__StyledSwatch",componentId:"sc-1h4cp44-7"})(["",";"],Mu),Kg=p.default.div.withConfig({displayName:"colorInput__ChevronContainer",componentId:"sc-1h4cp44-8"})(["width:",";display:flex;justify-content:",";align-items:center;align-self:center;svg{width:24px;height:24px;}"],(e=>{let{isSmall:t}=e;return t?"28px":"58px"}),(e=>{let{isSmall:t}=e;return t?"center":"flex-end"})),Qg=()=>n.e(341).then(n.bind(n,66286)),Jg=(0,u.forwardRef)((function ColorInput(e,t){let{onChange:n,value:r=null,label:a=null,changedStyle:o,pickerPlacement:l=Ed.PLACEMENT.RIGHT_START,isInDesignMenu:i=!1,hasInputs:s=!0,pickerProps:p,spacing:m,tooltipPlacement:f}=e;const g=r===Ce;r=g?"":r;const h=r?kp(r):{color:{r:0,g:0,b:0,a:0}},E=np(r),[b,y]=(0,u.useState)(!1),_=(0,u.useRef)(null),{isEyedropperActive:v}=xs((e=>{let{state:{isEyedropperActive:t}}=e;return{isEyedropperActive:t}})),{isRTL:w,styleConstants:{topOffset:T}={}}=Y(),[S,C]=(0,u.useState)(l),{refs:{sidebar:I}}=Fg(),A=(0,u.useCallback)((e=>{if(l?.startsWith("top")){const{top:t}=e.current?.getBoundingClientRect()||{};t<=T&&C(l.replace("top","bottom"))}}),[l,T]),x=r?.type,k=(!x||"solid"===x)&&s,O={onClick:()=>y(!0),"aria-label":a,onPointerEnter:()=>Qg(),onFocus:()=>Qg()};(0,u.useUnmount)((()=>()=>y(!1)));const N=(0,u.useCallback)((()=>y(!1)),[]),P=(0,d.__)("Open color picker","web-stories"),R=i?Zg:Lu;return c.createElement(c.Fragment,null,k?c.createElement(Ug,{ref:_},c.createElement(zg,{ref:t,"aria-label":a,value:g?null:r,onChange:n,isIndeterminate:g,placeholder:g?Ie:"",containerStyleOverride:R}),c.createElement(Vg,null,c.createElement(Gg,{title:P,hasTail:!0,placement:f},c.createElement(Xg,Hg({isSmall:!0,pattern:h},O))))):c.createElement(Gg,{title:P,hasTail:!0,placement:f},c.createElement(Wg,Hg({ref:_},O),c.createElement(Vg,null,c.createElement(Swatch,{isPreview:!0,role:"status",tabIndex:"-1",pattern:h,isIndeterminate:g})),s?c.createElement($g,null,c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},E)):c.createElement(c.Fragment,null,g&&c.createElement(qg,null,c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"span"},Ie)),c.createElement(Kg,{isSmall:g},c.createElement(Wp.default,null))))),c.createElement(Zp.Popup,{isRTL:w,anchor:_,dock:i?null:I,isOpen:b,placement:S,spacing:m,invisible:v,topOffset:T,refCallback:A,resetXOffset:!0,renderContents:e=>{let{propagateDimensionChange:t}=e;return c.createElement(Dg,Hg({color:g?null:r,isEyedropperActive:v,onChange:n,onClose:N,changedStyle:o,onDimensionChange:t},p))}}))})),eh=Jg,th={FLOATING_MENU:{x:0,y:12},DEFAULT_SIDEBAR:{x:12,y:0}},nh=(0,p.css)(["display:flex;align-items:center;"]),rh=p.default.section.withConfig({displayName:"color__Container",componentId:"sc-c7i660-0"})([""," gap:","px;width:",";"],nh,(e=>{let{isInDesignMenu:t}=e;return t?6:8}),(e=>{let{width:t}=e;return t?`${t}px`:"inherit"}));rh.propTypes={isInDesignMenu:ma().bool,width:ma().number};const ah=p.default.div.withConfig({displayName:"color__ColorInputsWrapper",componentId:"sc-c7i660-1"})([""," gap:","px;"],nh,(e=>{let{isInDesignMenu:t}=e;return t?0:6})),oh=p.default.div.withConfig({displayName:"color__Space",componentId:"sc-c7i660-2"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),lh=p.default.div.withConfig({displayName:"color__InputWrapper",componentId:"sc-c7i660-3"})(["",""],(e=>{let{hasInputs:t}=e;return t&&"width: calc(53% - 10px);"})),ih=p.default.div.withConfig({displayName:"color__OpacityWrapper",componentId:"sc-c7i660-4"})(["width:",";"],(e=>{let{isInDesignMenu:t}=e;return t?"calc(39% - 10px)":"calc(47% - 10px)"})),sh=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"color__EyeDropperButton",componentId:"sc-c7i660-5"})(["",";"],Mu),ch=(0,u.forwardRef)((function Color(e,t){let{onChange:n,allowsGradient:r=!1,allowsOpacity:a=!0,allowsSavedColors:o=!1,value:l=null,label:i=null,changedStyle:s=null,hasEyedropper:p=!1,pickerHasEyedropper:m=!0,maxHeight:f=null,shouldCloseOnSelection:g=!1,allowsSavedColorDeletion:h=!0,pickerPlacement:E=Ed.PLACEMENT.RIGHT_START,isInDesignMenu:b=!1,hasInputs:y=!0,width:_}=e;const v=(0,u.useCallback)((e=>n(ip(l,e))),[l,n]),w=(0,qe.default)(
/* translators: %s: color input label name. */
(0,d.__)("Color input: %s","web-stories"),i),T=l!==Ce&&Boolean(np(l))&&y,{initEyedropper:S}=lp({onChange:e=>n({color:e})}),C=(0,d.__)("Pick a color from canvas","web-stories"),I=b||p?Ed.PLACEMENT.BOTTOM:Ed.PLACEMENT.BOTTOM_START,A=_&&l===Ce;return c.createElement(rh,{"aria-label":w,isInDesignMenu:b,width:!A&&_?_:null},p&&c.createElement(Tooltip,{title:C,hasTail:!0,placement:b?Ed.PLACEMENT.BOTTOM:Ed.PLACEMENT.BOTTOM_START},c.createElement(sh,{"aria-label":C,onClick:S(),onPointerEnter:S(!1)},c.createElement(op,null))),c.createElement(ah,{isInDesignMenu:b},c.createElement(lh,{hasInputs:y},c.createElement(eh,{ref:t,onChange:n,value:l,label:i,changedStyle:s,pickerPlacement:E,hasInputs:y,isInDesignMenu:b,spacing:b?th.FLOATING_MENU:th.DEFAULT_SIDEBAR,tooltipPlacement:I,pickerProps:{allowsGradient:r,allowsOpacity:a,allowsSavedColors:o,hasEyedropper:m,allowsSavedColorDeletion:h,maxHeight:f,shouldCloseOnSelection:g}})),a&&T&&c.createElement(c.Fragment,null,c.createElement(oh,null),c.createElement(ih,{isInDesignMenu:b},c.createElement(xp,{value:l,onChange:v,isInDesignMenu:b})))))})),dh=ch;function uh(){return uh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uh.apply(this,arguments)}const ph=(0,p.css)(["width:100%;height:100%;position:absolute;top:0;left:0;border-radius:",";"],(e=>{let{theme:t}=e;return t.borders.radius.small})),mh=p.default.div.withConfig({displayName:"filterToggle__Overlay",componentId:"sc-1xtaed1-0"})(["",";"],ph),fh=p.default.div.withConfig({displayName:"filterToggle__Filter",componentId:"sc-1xtaed1-1"})(["",";",";"],ph,(e=>{let{filter:t}=e;return(0,kr.default)(t)})),gh=p.default.button.withConfig({displayName:"filterToggle__Button",componentId:"sc-1xtaed1-2"})((e=>{let{theme:t}=e;return(0,p.css)(["border-radius:",";width:100%;height:48px;position:relative;display:flex;align-items:center;justify-content:space-around;box-sizing:border-box;padding:0;margin:0;background:transparent;border:none;cursor:pointer;",";img{width:100%;height:100%;border-radius:",";}","{",";}&:active > ","{box-shadow:0px 0px 0 2px ",",0px 0px 0 3px ",";}&:disabled{pointer-events:none;","{background-color:",";}}transition:background-color ",",color ",";"],t.borders.radius.small,Mu,t.borders.radius.small,mh,(e=>{let{isToggled:n}=e;return n&&`\n        box-shadow:\n          0px 0px 0 2px ${t.colors.bg.secondary},\n          0px 0px 0 3px ${t.colors.fg.primary}`}),mh,t.colors.bg.secondary,t.colors.fg.primary,mh,t.colors.opacity.black64,f.BUTTON_TRANSITION_TIMING,f.BUTTON_TRANSITION_TIMING)})),hh=p.default.div.withConfig({displayName:"filterToggle__Wrapper",componentId:"sc-1xtaed1-3"})(["width:60px;"]),Eh=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"filterToggle__StyledText",componentId:"sc-1xtaed1-4"})(["color:",";margin-top:8px;text-align:center;width:100%;display:block;"],(e=>{let{theme:t}=e;return t.colors.border.defaultActive}));const bh=function FilterToggle(e){let{isToggled:t,filter:n=null,children:r,label:a,...o}=e;return c.createElement(hh,null,c.createElement(gh,uh({},o,{isToggled:t,"aria-pressed":t}),r,c.createElement(fh,{filter:n}),c.createElement(mh,null)),a&&c.createElement(Eh,null,a))},yh={CIRCLE:"circle",RECTANGLE:"rectangle",NONE:"none"};var _h,vh,wh=n(36471);function Th(){return Th=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Th.apply(this,arguments)}const SvgLandscape=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Th({fill:"none",viewBox:"0 0 100 93",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_h||(_h=c.createElement("path",{d:"M33 52 .5 93h99L75 60 58 82z",fill:"currentColor",opacity:.2})),vh||(vh=c.createElement("circle",{cx:79,cy:13,fill:"currentColor",opacity:.1,r:13})))},Sh=(0,c.memo)(SvgLandscape);function Ch(){return Ch=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ch.apply(this,arguments)}const Ih=p.default.section.withConfig({displayName:"mediaInput__MediaRectangle",componentId:"sc-1aevzta-0"})(["width:100%;height:100%;background-color:",";border-radius:4px;position:relative;"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),Ah=(0,p.default)(Ih).withConfig({displayName:"mediaInput__MediaCircle",componentId:"sc-1aevzta-1"})(["border-radius:100px;height:100%;width:100%;"]),xh=p.default.div.withConfig({displayName:"mediaInput__EmptyMediaWrapper",componentId:"sc-1aevzta-2"})([""]),kh=p.default.div.withConfig({displayName:"mediaInput__ImageWrapper",componentId:"sc-1aevzta-3"})(["border-radius:","px;overflow:hidden;height:100%;display:flex;"],(e=>{let{variant:t}=e;return t===yh.CIRCLE?100:4})),Oh=p.default.div.withConfig({displayName:"mediaInput__DefaultImageWrapper",componentId:"sc-1aevzta-4"})(["padding:8px;"]),Nh=(0,p.default)(Sh).withConfig({displayName:"mediaInput__DefaultImage",componentId:"sc-1aevzta-5"})(["width:100%;height:100%;display:block;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),Ph=p.default.img.withConfig({displayName:"mediaInput__Img",componentId:"sc-1aevzta-6"})(["width:100%;height:100%;object-fit:cover;"]),Rh=(0,p.css)(["min-width:100px;margin-top:0;li{display:block;}"]),Mh=(0,p.default)(m.Button).withConfig({displayName:"mediaInput__Button",componentId:"sc-1aevzta-7"})((e=>{let{showImage:t}=e;return(0,p.css)(["background-color:",";position:relative;"," &:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),t&&(0,p.css)(["position:absolute;bottom:-8px;right:-8px;"]),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}))})),Lh={[yh.RECTANGLE]:Ih,[yh.CIRCLE]:Ah,[yh.NONE]:xh},Dh=(0,p.keyframes)(["0%,20%{color:transparent;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}40%{color:white;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}60%{text-shadow:6px 0 0 ",",12px 0 0 transparent;}80%,100%{text-shadow:6px 0 0 ",",12px 0 0 ",";}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white})),Bh=p.default.div.withConfig({displayName:"mediaInput__LoadingDots",componentId:"sc-1aevzta-8"})(["position:absolute;top:0px;left:0px;width:100%;height:100%;pointer-events:none;border-radius:50%;flex-direction:column;justify-content:center;align-items:center;display:flex;&:after{pointer-events:none;color:",";content:'.';font-weight:bold;animation:"," 1s steps(5,end) infinite;margin-left:-12px;}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),Dh),Fh=(0,u.forwardRef)((function Media(e,t){let{className:n,onBlur:r,alt:a=(0,d.__)("Preview image","web-stories"),value:o,ariaLabel:l=(0,d.__)("Choose an image","web-stories"),variant:i=yh.RECTANGLE,isLoading:s,menuOptions:p=[],onMenuOption:m,openMediaPicker:g,canUpload:h=!0,menuProps:E={},imgProps:b={},isRTL:y=!1,..._}=e;const v=p?.length>0,[w,T]=(0,u.useState)(!1),S=(0,u.useMemo)((()=>`list-${(0,he.default)()}`),[]),C=(0,u.useMemo)((()=>`button-${(0,he.default)()}`),[]),I=(0,u.useRef)(null),A=Lh[i],x=[{group:p}];return c.createElement(A,{className:n},i!==yh.NONE&&c.createElement(kh,{variant:i},o?c.createElement(Ph,{src:o,alt:a,crossOrigin:"anonymous",decoding:"async",width:b?.width||null,height:b?.height||null}):c.createElement(Oh,null,c.createElement(Nh,null)),s&&c.createElement(Bh,null)),h&&c.createElement(bd.Tooltip,{title:v?null:(0,d.__)("Open media picker","web-stories")},c.createElement(Mh,Ch({ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),I.current=e},id:C,showImage:i!==yh.NONE,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,"aria-label":l,onClick:v?()=>T(!0):g,"aria-owns":v?S:null,"aria-pressed":w,"aria-expanded":w},_),c.createElement(df.default,null))),c.createElement(Zp.Popup,{placement:Ed.PLACEMENT.BOTTOM_END,anchor:I,isOpen:w,isRTL:y},c.createElement(wh.Menu,Ch({parentId:C,listId:S,hasMenuRole:!0,options:x,onMenuItemClick:(e,t)=>{m(e,t),T(!1)},onDismissMenu:()=>T(!1),menuStylesOverride:Rh},E))))}));function Hh(){return Hh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hh.apply(this,arguments)}const Uh=(0,p.default)(Fh).withConfig({displayName:"media__StyledInput",componentId:"sc-17cx4v4-0"})(["button:focus{","}"],(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),MediaInputField=e=>{let{open:t,dropdownOptions:n,onChange:r,forwardedRef:a,value:o,isRTL:l,...i}=e;const s=(0,u.useCallback)(((e,n)=>{switch(n){case"edit":t(e);break;case"remove":case"reset":r(null)}}),[r,t]);return c.createElement(Uh,Hh({onMenuOption:s,menuOptions:n,openMediaPicker:t,ref:a,value:o===Ce?null:o,isRTL:l},i))};const zh=(0,u.forwardRef)((function(e,t){let{buttonInsertText:n=(0,d.__)("Choose an image","web-stories"),menuOptions:r=[],onChange:a,onChangeErrorText:o=(0,d.__)("Unable to use this file type, please select a valid image type.","web-stories"),title:l=(0,d.__)("Choose an image","web-stories"),type:i="image",value:s,cropParams:p,...m}=e;const{MediaUpload:f,isRTL:g}=Y(),h=(0,u.useCallback)((e=>{const n=[{label:(0,d.__)("Edit","web-stories"),value:"edit"},{label:(0,d.__)("Remove","web-stories"),value:"remove"},{label:(0,d.__)("Reset","web-stories"),value:"reset"}],o=s===Ce?[]:n.filter((e=>{let{value:t}=e;return r.includes(t)}));return c.createElement(MediaInputField,Hh({open:e,onChange:a,dropdownOptions:o,forwardedRef:t,value:s,isRTL:g},m))}),[a,r,t,s,m,g]);return c.createElement(f,{title:l,buttonInsertText:n,onSelect:a,onSelectErrorMessage:o,type:i,cropParams:p,render:h})})),Gh=zh;function jh(){return jh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jh.apply(this,arguments)}const Yh=(0,p.default)(Gh).withConfig({displayName:"linkIcon__StyledMedia",componentId:"sc-1078kj7-0"})(["width:54px;height:54px;"]);const Zh=function LinkIcon(e){let{handleChange:t,icon:n,isLoading:r=!1,...a}=e;const{allowedMimeTypes:{image:o},capabilities:{hasUploadMediaAction:l}}=Y(),i=(0,u.useMemo)((()=>o.map((e=>Mt(e))).flat()),[o]),s=(0,u.useMemo)((()=>{let e=(0,d.__)("No image file types are currently supported.","web-stories");return i.length&&(e=(0,qe.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as an icon.","web-stories"),(0,Ot.default)(i))),e}),[i]),p=l?["edit","remove"]:["remove"];return c.createElement(Yh,jh({value:n||"",cropParams:{width:96,height:96},onChange:t,onChangeErrorText:s,title:(0,d.__)("Select as link icon","web-stories"),ariaLabel:(0,d.__)("Edit link icon","web-stories"),buttonInsertText:(0,d.__)("Select as link icon","web-stories"),type:o,isLoading:r,variant:yh.CIRCLE,canUpload:n&&!l||l,menuOptions:n?p:[]},a))},Wh=p.default.div.withConfig({displayName:"row__Row",componentId:"sc-1olml0k-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:16px;"," ",""],(e=>{let{spaceBetween:t=!0}=e;return t&&"justify-content: space-between;"}),(e=>{let{expand:t=!0}=e;return t&&"flex: 1;"}));function Vh(){return Vh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vh.apply(this,arguments)}const $h={MIN:2,MAX:2048},qh=(0,u.forwardRef)((function LinkInput(e,t){let{onChange:n,onBlur:r,onFocus:a,value:o="",hint:l,hasError:i,...s}=e;const u=(o||"").trim(),p=Mr(Lr(u)),m=u.length>0&&!p;return c.createElement(Wh,null,c.createElement(_p,Vh({ref:t,placeholder:(0,d.__)("Web address","web-stories"),onChange:e=>n(e.target.value),onBlur:()=>{if(u?.length){const e=Lr(u);e!==u&&n(e)}r&&r()},onFocus:a,value:o||"",minLength:$h.MIN,maxLength:$h.MAX,hasError:m||i,hint:m?(0,d.__)("Invalid web address.","web-stories"):l,containerStyleOverride:Lu},s)))})),Xh=qh;const Kh=function MediaUploadButton(e){let{onInsert:t,renderButton:n,buttonInsertText:r}=e;const{allowedMimeTypes:{image:a,vector:o,video:l},MediaUpload:i}=Y(),s=(0,u.useMemo)((()=>[...a,...o,...l]),[a,o,l]),p=(0,u.useMemo)((()=>s.map((e=>Mt(e))).flat()),[s]),{canTranscodeResource:m,resetWithFetch:f,postProcessingResource:g,optimizeVideo:h,optimizeGif:E}=yi((e=>{let{state:{canTranscodeResource:t},actions:{resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}}=e;return{canTranscodeResource:t,resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}})),{isTranscodingEnabled:b}=Ra(),{showSnackbar:y}=(0,hr.useSnackbar)(),_=(0,u.useMemo)((()=>b?[...ka,...a,...o,...l]:[...a,...o,...l]),[a,o,l,b]),v=(0,u.useMemo)((()=>ka.filter((e=>!l.includes(e)))),[l]);let w=(0,d.__)("No file types are currently supported.","web-stories");p.length&&(w=(0,qe.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,Ot.default)(p)));const T=(0,u.useCallback)((e=>{try{b&&m(e)&&(v.includes(e.mimeType)&&h({resource:e}),"image/gif"===e.mimeType&&E({resource:e})),t(e),g(e)}catch(e){y({message:e.message,dismissible:!0})}}),[b,m,t,E,h,g,y,v]);return c.createElement(i,{onSelect:T,onSelectErrorMessage:w,onClose:f,type:_,render:n,buttonInsertText:r})};var Qh=n(22437);function Jh(){return Jh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jh.apply(this,arguments)}const eE="ON",tE="OFF",nE=p.default.h3.withConfig({displayName:"switch__VisuallyHiddenRadioGroupLabel",componentId:"sc-1kebe5q-0"})(["",";"],Qh.visuallyHidden),rE=p.default.span.withConfig({displayName:"switch__SlidingButton",componentId:"sc-1kebe5q-1"})(["position:absolute;display:block;top:0;left:0;width:50%;height:","px;border-radius:100px;transition:all 0.15s ease-out;z-index:0;",""],32,(e=>{let{hasOffset:t}=e;return t&&"left: 50%"})),aE=p.default.div.withConfig({displayName:"switch__SwitchContainer",componentId:"sc-1kebe5q-2"})(["position:relative;height:","px;display:flex;flex-direction:row;justify-content:center;align-items:center;appearance:none;background:",";border-radius:100px;color:",";cursor:pointer;",";"],32,(e=>{let{theme:t}=e;return t.colors.divider.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{disabled:t,theme:n}=e;return t?(0,p.css)(["cursor:default;background:",";","{background-color:",";}"],n.colors.divider.tertiary,rE,n.colors.interactiveBg.disable):(0,p.css)([":hover ","{background-color:",";}"],rE,n.colors.interactiveBg.primaryHover)})),oE=p.default.input.attrs({type:"radio"}).withConfig({displayName:"switch__HiddenRadioButton",componentId:"sc-1kebe5q-3"})(["position:absolute;height:0;width:0;padding:0;min-width:unset;appearance:none;border:0;box-shadow:none;margin:-1px;outline:none;overflow:hidden;opacity:0;"]),lE=(0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"switch__RadioButtonLabel",componentId:"sc-1kebe5q-4"})(["display:flex;align-items:center;justify-content:center;flex:1;height:","px;width:50%;padding:0px 6px;z-index:1;color:",";background-color:",";border-radius:100px;cursor:pointer;overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap;transition:all 0.15s ease-out;",":focus-within ~ span{",";}"],32,(e=>{let{isActive:t,theme:n}=e;return t?n.colors.inverted.fg.primary:n.colors.fg.secondary}),(e=>{let{isActive:t,theme:n}=e;return t&&n.colors.interactiveBg.primaryNormal}),(e=>{let{disabled:t,theme:n}=e;return t&&(0,p.css)(["cursor:default;color:",";"],n.colors.fg.disable)}),Ru.focusCSS),iE=(0,u.forwardRef)((function(e,t){let{className:n,disabled:r,groupLabel:a,id:o,offLabel:l,onChange:i,onLabel:s,value:d,...p}=e;const m=(0,u.useMemo)((()=>({group:o||(0,he.default)(),offInput:(0,he.default)(),onInput:(0,he.default)()})),[o]),f=(0,u.useCallback)((e=>{i(e,e.target.value===eE)}),[i]);return c.createElement(aE,{ref:t,className:n,role:"radiogroup","aria-labelledby":m.group,"aria-disabled":r,disabled:r},c.createElement(nE,{id:m.group},a),c.createElement(lE,{htmlFor:m.onInput,isActive:d,disabled:r},s,c.createElement(oE,Jh({checked:d,disabled:r,id:m.onInput,onChange:f,value:eE},p))),c.createElement(lE,{htmlFor:m.offInput,isActive:!d,disabled:r},l,c.createElement(oE,Jh({checked:!d,disabled:r,id:m.offInput,onChange:f,value:tE},p))),c.createElement(rE,{hasOffset:!d}))}));iE.displayName="Switch";ma().string,ma().bool,ma().string.isRequired,ma().string,ma().string.isRequired,ma().string.isRequired,ma().func.isRequired,ma().string.isRequired,ma().bool;function sE(){return sE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sE.apply(this,arguments)}iE.defaultProps={value:!1};const cE=(0,p.default)(iE).withConfig({displayName:"switch__StyledSwitch",componentId:"sc-xytur2-0"})(["label:focus-within ~ span{",";}"],(e=>{let{theme:t}=e;return`box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;`}));const dE=function(e){let{offLabel:t=(0,d.__)("Off","web-stories"),onChange:n,onLabel:r=(0,d.__)("On","web-stories"),value:a,...o}=e;const l=(0,u.useRef)(null),i=(0,u.useCallback)((e=>{n(e,!a)}),[n,a]);return(0,tr.useKeyDownEffect)(l,["space","enter","left","right","up","down"],i,[i,a]),c.createElement(cE,sE({ref:l,offLabel:t,onChange:n,onLabel:r,value:a},o))};function uE(){return uE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uE.apply(this,arguments)}const pE=p.default.div.withConfig({displayName:"textArea__Container",componentId:"sc-sryd46-0"})(["position:relative;width:100%;min-width:100px;"]),mE=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"textArea__CounterText",componentId:"sc-sryd46-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),fE=(0,p.default)(Ke.Text).withConfig({displayName:"textArea__Label",componentId:"sc-sryd46-2"})(["margin-bottom:12px;"]),gE=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"textArea__Hint",componentId:"sc-sryd46-3"})(["margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:n}=e;return n.colors.fg[t?"negative":"tertiary"]})),hE=p.default.div.withConfig({displayName:"textArea__InputContainer",componentId:"sc-sryd46-4"})((e=>{let{focused:t,hasError:n,theme:r,styleOverride:a}=e;return(0,p.css)(["box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";:focus-within{",";}",";"],r.colors.border[n?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!n&&(0,p.css)(["border-color:",";"],r.colors.border.defaultActive),(0,Ru.focusCSS)(r.colors.border.focus),a)})),EE=p.default.textarea.withConfig({displayName:"textArea__StyledTextArea",componentId:"sc-sryd46-5"})((e=>{let{theme:t}=e;return(0,p.css)(["height:100%;width:100%;padding:0;background-color:inherit;border:none;outline:none;color:",";resize:none;box-shadow:none;",";",";:focus{box-shadow:none;}:disabled{color:",";border-color:",";}:active{color:",";}::placeholder{color:",";}"],t.colors.fg.primary,P.scrollbarCSS,Pu.expandPresetStyles({preset:t.typography.presets.paragraph[Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:t}),t.colors.fg.disable,t.colors.border.disable,t.colors.fg.primary,t.colors.fg.tertiary)})),bE=p.default.div.withConfig({displayName:"textArea__Counter",componentId:"sc-sryd46-6"})(["text-align:right;align-self:flex-end;span{color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),yE=(0,u.forwardRef)(((e,t)=>{let{className:n,disabled:r,hasError:a,hint:o,id:l,label:i,onBlur:s,onFocus:d,value:p,showCount:m=!1,maxLength:f,isIndeterminate:g=!1,containerStyleOverride:h="",...E}=e;const b=(0,u.useMemo)((()=>l||(0,he.default)()),[l]),y=m&&f>0,[_,v]=(0,u.useState)(!1),[w,T]=(0,u.useState)(!1);let S=p;return g&&(S=""),c.createElement(pE,{className:n},i&&c.createElement(fE,{htmlFor:b,forwardedAs:"label",disabled:r},i),c.createElement(hE,{focused:_,hasError:a,styleOverride:h},c.createElement(EE,uE({id:b,disabled:r,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&_&&!w&&(e.select(),T(!0))},onFocus:e=>{d?.(e),v(!0),T(!1)},onBlur:e=>{s?.(e),v(!1)},value:S,maxLength:f},E)),y&&c.createElement(bE,null,c.createElement(mE,null,`${p.length}/${f}`))),o&&c.createElement(gE,{hasError:a},o))}));function _E(){return _E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_E.apply(this,arguments)}yE.displayName="TextArea";const vE=(0,u.forwardRef)(((e,t)=>{let{className:n,placeholder:r,value:a,disabled:o,rows:l,onChange:i,onBlur:s,...d}=e;const[p,m]=(0,u.useState)(a),f=(0,u.useCallback)((e=>{p!==a&&i(e)}),[p,i,a]);(0,u.useEffect)((()=>{m(a)}),[a]);const g=(0,u.useCallback)((e=>{f(e),s&&s(e)}),[s,f]);return c.createElement(yE,_E({placeholder:r,value:p},d,{containerStyleOverride:Lu,onChange:e=>m(e.target.value),onBlur:g,ref:t}))}));vE.displayName="TextArea",vE.defaultProps={showTextLimit:!0,rows:2};const wE=vE,TE=(0,u.createContext)({isMultiple:!1,registerPresubmitHandler:()=>{}});const SE=function(e){return(0,u.useContextSelector)(TE,e??u.identity)};const CE=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=SE((e=>e.registerPresubmitHandler));(0,u.useEffect)((()=>n(e)),[n].concat(t||[]))},IE=p.default.div.withConfig({displayName:"timeZone__Wrapper",componentId:"sc-1n80l1r-0"})(["white-space:nowrap;"]),AE=(0,p.default)(Ke.Text).withConfig({displayName:"timeZone__StyledText",componentId:"sc-1n80l1r-1"})(["color:",";line-height:30px;"],(e=>{let{theme:t}=e;return t.colors.fg.disable}));const xE=function TimeZone(e){let{date:t}=e;const{timezone:n,gmtOffset:r}=(0,Od.getSettings)(),a=(new Date).getTimezoneOffset()/60*-1;if(Number(r)===a)return null;const{timeZone:o}=(0,Pd.default)(),l=n?.length?(0,Nd.default)(t,"T"):`UTC${o}`,i="UTC"===l?(0,d.__)("Coordinated Universal Time","web-stories"):n;return c.createElement(IE,null,c.createElement(Tooltip,{hasTail:!0,title:i,placement:Ed.PLACEMENT.TOP},c.createElement(AE,{forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},l)))},kE=p.default.div.withConfig({displayName:"timePicker__TimeWrapper",componentId:"sc-14og2kb-0"})(["margin-bottom:1em;padding:0 20px;"]),OE=p.default.fieldset.withConfig({displayName:"timePicker__Fieldset",componentId:"sc-14og2kb-1"})(["margin-top:0.5em;position:relative;"]),NE=p.default.legend.withConfig({displayName:"timePicker__Legend",componentId:"sc-14og2kb-2"})(["position:absolute;top:-999em;left:-999em;"]),PE=p.default.div.withConfig({displayName:"timePicker__InputRow",componentId:"sc-14og2kb-3"})(["display:flex;"]),RE=(0,p.css)(["min-height:30px;box-shadow:0 0 0 transparent;transition:box-shadow 0.1s linear;border-radius:4px;border:1px solid #006edc;height:28px;vertical-align:middle;background-color:",";color:#32373c;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),ME=p.default.input.withConfig({displayName:"timePicker__NumberInput",componentId:"sc-14og2kb-4"})([""," padding:0;margin-right:4px;text-align:center;width:50%;max-width:50px;::-webkit-inner-spin-button,::-webkit-outer-spin-button{margin:0;appearance:none;}"],RE),LE=p.default.span.withConfig({displayName:"timePicker__TimeSeparator",componentId:"sc-14og2kb-5"})(["padding:0 3px 0 0;color:#555d66;"]),DE=p.default.button.withConfig({displayName:"timePicker__Button",componentId:"sc-14og2kb-6"})(["display:inline-flex;text-decoration:none;font-size:13px;margin:0;border:0;cursor:pointer;transition:box-shadow 0.1s linear;padding:0 10px;line-height:2;height:30px;border-radius:3px;white-space:nowrap;border-width:1px;border-style:solid;color:#006edc;border-color:#006edc;background:#f3f5f6;&:focus{outline:2px solid transparent;background:#f3f5f6;color:rgb(0,93,140);border-color:",";box-shadow:0 0 0 1px ",";text-decoration:none;}",""],(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{isToggled:t}=e;return t&&"\n  background: #edeff0;\n  border-color: #8f98a1;\n  box-shadow: inset 0 2px 5px -3px #555d66;\n  "})),BE=p.default.div.withConfig({displayName:"timePicker__InputGroup",componentId:"sc-14og2kb-7"})(["flex-basis:100%;"]),FE=(0,p.default)(DE).withConfig({displayName:"timePicker__AMButton",componentId:"sc-14og2kb-8"})(["margin-right:-1px;border-radius:3px 0 0 3px;"]),HE=(0,p.default)(DE).withConfig({displayName:"timePicker__PMButton",componentId:"sc-14og2kb-9"})(["margin-left:-1px;border-radius:0 3px 3px 0;"]);const UE=function TimePicker(e){let{onChange:t,is12Hour:n,localData:r,setLocalData:a}=e;const o=e=>t=>{a({...r,[e]:parseInt(t.target.value)})},l=()=>n?12:23,i=()=>n?1:0,s=e=>{const{am:t}=r;return n?"AM"===t?e%12:(e%12+12)%24:e},p=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a({...r,...n,date:e}),t(e.toISOString())},m=e=>()=>{const{am:t,date:n,hours:a}=r;if(t===e)return;const o=n;"PM"===e?o.setHours((a%12+12)%24):o.setHours(a%12),p(o,{am:e})},f=(0,u.useRef)();(0,u.useEffect)((()=>{f.current.focus()}),[]);const g="AM"===r.am,h="PM"===r.am;return c.createElement(kE,null,c.createElement(OE,null,c.createElement(NE,null,(0,d.__)("Time","web-stories")),c.createElement(PE,null,c.createElement(BE,null,c.createElement(ME,{ref:f,"aria-label":(0,d.__)("Hours","web-stories"),type:"number",step:1,min:i(),max:l(),value:parseInt(r.hours),onChange:o("hours"),onBlur:()=>{const{hours:e,date:t}=r,n=parseInt(e);if(!(isNaN(n)||n<i()||n>l())&&t.getHours()!==s(e)){const n=t;n.setHours(s(e)),p(n)}}}),c.createElement(LE,null,":"),c.createElement(ME,{"aria-label":(0,d.__)("Minutes","web-stories"),type:"number",min:0,max:59,value:parseInt(r.minutes),onChange:o("minutes"),onBlur:()=>{const{minutes:e,date:t}=r,n=parseInt(e);if(!(isNaN(n)||n<0||n>59)&&t.getMinutes()!==e){const n=t;n.setMinutes(e),p(n)}}})),n&&c.createElement(BE,null,c.createElement(FE,{"aria-pressed":g,type:"button",isToggled:g,onClick:m("AM")},(0,d.__)("AM","web-stories")),c.createElement(HE,{"aria-pressed":h,type:"button",isToggled:h,tabIndex:"-1",onClick:m("PM")},(0,d.__)("PM","web-stories"))),c.createElement(xE,{date:r?.date}))))};n(81476);const zE=(0,u.lazy)((()=>n.e(2392).then(n.bind(n,73)))),GE=p.default.div.withConfig({displayName:"datePicker__CalendarWrapper",componentId:"sc-9qun1q-0"})(["min-height:236px;"]),jE=p.default.div.withConfig({displayName:"datePicker__FallbackCalendar",componentId:"sc-9qun1q-1"})(["height:256px;width:350px;display:flex;align-items:center;justify-content:center;"]);const YE=function DatePicker(e){let{currentDate:t,onChange:n,onViewChange:r}=e;const a=(0,u.useRef)(),o=(0,u.useMemo)((()=>new Date(t)),[t]),l=(0,u.useCallback)((e=>{e.setHours(o.getHours()),e.setMinutes(o.getMinutes()),n(e.toISOString(),!0)}),[o,n]),i=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.current){const t=[...a.current.querySelectorAll(".react-calendar__navigation button")];t[0].tabIndex="0",t.shift();for(const e of t)e.tabIndex="-1";const n=[...a.current.querySelectorAll(".react-calendar__viewContainer button")];let r=!1;for(const t of n)t.classList.contains("react-calendar__tile--now")?(t.tabIndex="0",e&&t.focus(),r=!0):t.tabIndex="-1";r||(n[0].tabIndex="0",n[0].focus())}}),[a]);return(0,u.useEffect)((()=>{const e=setTimeout((()=>{i()}));return()=>{clearTimeout(e)}}),[i]),c.createElement(u.Suspense,{fallback:c.createElement(jE,null,c.createElement(Jp.default,null))},c.createElement(GE,{ref:a},c.createElement(zE,{value:o,onChange:l,onViewChange:r,onActiveStartDateChange:()=>i(!0),nextAriaLabel:(0,d._x)("Next","This label can apply to next month, year and/or decade","web-stories"),prevAriaLabel:(0,d._x)("Previous","This label can apply to previous month, year and/or decade","web-stories"),next2AriaLabel:(0,d._x)("Jump forward","This label can apply to month, year and/or decade","web-stories"),prev2AriaLabel:(0,d._x)("Jump backwards","This label can apply to month, year and/or decade","web-stories")})))},ZE=p.default.div.withConfig({displayName:"dateTime__DateTimeWrapper",componentId:"sc-15cbv9f-0"})(["border-radius:4px;box-shadow:0 3px 30px rgba(25,30,35,0.1);border:1px solid ",";background-color:",";width:100%;padding:4px;"],(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.black,.2)}),(e=>{let{theme:t}=e;return t.colors.standard.white})),WE=(0,p.default)(m.Button).withConfig({displayName:"dateTime__StyledButton",componentId:"sc-15cbv9f-1"})(["color:#006edc;margin:5px 0;"]);const VE=function DateTime(e){let{value:t,onChange:n,onViewChange:r,is12Hour:a=!0,forwardedRef:o,onClose:l,canReset:i=!1}=e;const s=t?new Date(t):new Date,p=s.getHours(),[m,g]=(0,u.useState)({minutes:s.getMinutes(),am:p<12?"AM":"PM",hours:a?p%12||12:p,date:s}),h=(0,u.useRef)(document.activeElement),E=(0,u.useCallback)((e=>{h.current&&h.current.focus(),l(e)}),[l]);return(0,tr.useKeyDownEffect)(o,{key:["esc"],editable:!0},E),Xf({ref:o}),$p({ref:o}),c.createElement(ZE,{ref:o},c.createElement(UE,{localData:m,setLocalData:g,onChange:n,is12Hour:a}),c.createElement(YE,{currentDate:t,onChange:n,onViewChange:r}),i&&c.createElement(WE,{size:f.BUTTON_SIZES.SMALL,onClick:()=>{n(null),l()},"aria-label":(0,d.__)("Reset publish time","web-stories")},(0,d.__)("Reset","web-stories")))},$E=p.default.div.withConfig({displayName:"required__RequiredWrapper",componentId:"sc-19c61h7-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;"]),qE=(0,p.default)(Ke.Text).attrs({as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"required__StyledText",componentId:"sc-19c61h7-1"})(["color:",";font-size:12px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const XE=function Required(){return c.createElement($E,null,c.createElement(qE,null,(0,d._x)("Required","Required form input","web-stories")))};var KE=n(19722);function QE(){return QE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QE.apply(this,arguments)}const JE=24,eb=p.default.div.withConfig({displayName:"radio__Container",componentId:"sc-dphfhc-0"})(["display:flex;align-items:center;min-height:","px;padding:8px 0;"],44),tb=p.default.div.withConfig({displayName:"radio__RadioInputContainer",componentId:"sc-dphfhc-1"})(["position:relative;height:","px;width:","px;"],JE,JE),nb=p.default.div.withConfig({displayName:"radio__LabelContainer",componentId:"sc-dphfhc-2"})(["display:flex;flex-direction:column;margin:0 12px;gap:","px;"],8),rb=p.default.span.withConfig({displayName:"radio__RadioBorder",componentId:"sc-dphfhc-3"})((e=>{let{theme:t}=e;return(0,p.css)(["display:inline-block;height:","px;width:","px;border:","px solid ",";border-radius:",";pointer-events:none;transition:all 0.15s;"],JE,JE,1,t.colors.border.defaultNormal,t.borders.radius.round)})),ab=p.default.span.withConfig({displayName:"radio__InnerButton",componentId:"sc-dphfhc-4"})((e=>{let{theme:t}=e;return(0,p.css)(["pointer-events:none;display:none;:after{content:'';position:absolute;height:","px;width:","px;top:50%;left:50%;transform:translate(-50%,-50%);background-color:",";border-radius:",";}"],16,16,t.colors.fg.primary,t.borders.radius.round)})),ob=p.default.input.attrs({type:"radio"}).withConfig({displayName:"radio__HiddenInput",componentId:"sc-dphfhc-5"})(["position:absolute;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:hover ~ ","{border-color:",";}:focus{outline:none;}:focus ~ ",",&."," ~ ","{",";border-color:",";}:active ~ ","{box-shadow:0 0 0 8px ",";}:checked ~ ","{display:block;}:disabled{cursor:auto;~ ","{border-color:",";}~ ","::after{background-color:",";}}"],JE,JE,rb,(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),rb,KE.FOCUS_VISIBLE_SELECTOR,rb,(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus)}),(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),rb,(e=>{let{theme:t}=e;return t.colors.shadow.active}),ab,rb,(e=>{let{theme:t}=e;return t.colors.border.disable}),ab,(e=>{let{theme:t}=e;return t.colors.fg.disable})),lb=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"radio__Hint",componentId:"sc-dphfhc-6"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),ib=(0,u.forwardRef)((function RadioButton(e,t){let{className:n,hint:r,id:a,label:o,...l}=e;const i=(0,u.useMemo)((()=>a||(0,he.default)()),[a]);return c.createElement(eb,{className:n},c.createElement(tb,null,c.createElement(ob,QE({id:i,ref:t},l)),c.createElement(rb,null),c.createElement(ab,null)),c.createElement(nb,null,c.createElement(Ke.Text,{htmlFor:i,as:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o),r&&c.createElement(lb,null,r)))}));const sb=function(e){const t=(0,u.useCallback)((t=>{const n=e.current;if(!n)return;const r=Array.from(n.querySelectorAll('input[type="radio"]')),a=r.indexOf(document.activeElement);if(-1===a)return;const o=a+t;o<0||o>=r.length||(r[o].focus(),r[o].click())}),[e]),n=(0,u.useCallback)((()=>t(-1)),[t]);(0,tr.useKeyDownEffect)(e,["up","left"],n,[n]);const r=(0,u.useCallback)((()=>t(1)),[t]);(0,tr.useKeyDownEffect)(e,["down","right"],r,[r])};p.default.h3.withConfig({displayName:"radioGroup__VisuallyHiddenLabel",componentId:"sc-k5v4js-0"})(["",";"],Qh.visuallyHidden),(0,p.default)(ib).withConfig({displayName:"radioGroup__StyledRadio",componentId:"sc-k5v4js-1"})(["input:focus + span,input&."," + span{",";}"],KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return`box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;`}));var cb=n(71577);function db(){return db=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},db.apply(this,arguments)}const ub=p.default.div.withConfig({displayName:"select__Container",componentId:"sc-1pv4s6p-0"})(["position:relative;width:100%;"]),pb=(0,p.default)(cb.DropDown).withConfig({displayName:"select__StyledDropDown",componentId:"sc-1pv4s6p-1"})(["background-color:transparent;border:0;width:auto;"]),mb=(0,p.css)(["top:-14px;right:unset;width:auto;"]),fb=(0,p.css)(["border:none;width:auto;margin-right:auto;padding-left:0;",";"],Mu),gb=(0,p.css)(["margin-right:-12px;"]);const hb=function Select(e){return c.createElement(ub,null,c.createElement(pb,db({isInline:!0,hasSearch:!1,menuStylesOverride:mb,selectButtonStylesOverride:fb,selectValueStylesOverride:gb},e)))};var Eb=n(37309);const bb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((t=>{const n=e[t.id];return{...t,options:n&&n.length?bb(e,n):[]}}))},yb=e=>{const t=e.map((e=>({options:[],parent:0,...e}))),n=(r="parent",t.reduce(((e,t)=>(e[t[r]]?e[t[r]].push(t):e[t[r]]=[t],e)),{}));var r;return bb(n,n[0])},_b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{options:n,...r}=e;let a=[];if(n)for(let e=0;e<n.length;e++)a=a.concat(_b(n[e],t));const o=e.label.toLowerCase().includes(t.trim().toLowerCase()),l={...r,options:a};return o||a.length?[l]:[]},vb=(e,t)=>e.reduce(((e,n)=>e.concat(_b(n,t))),[]);function wb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.flatMap((e=>{let{options:n,...r}=e;return[{...r,$level:t},...wb(n,t+1)]}))}function Tb(){return Tb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tb.apply(this,arguments)}const Sb=p.default.div.withConfig({displayName:"hierarchical__Container",componentId:"sc-1pgjcwl-0"})(["margin-bottom:8px;display:block;"]),Cb=(0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"hierarchical__Label",componentId:"sc-1pgjcwl-1"})(["margin:0 12px;"]),Ib=p.default.div.withConfig({displayName:"hierarchical__Border",componentId:"sc-1pgjcwl-2"})(["padding-top:4px;margin-top:-4px;border:1px solid ",";border-top:none;border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return`0 0 ${t.borders.radius.small} ${t.borders.radius.small}`})),Ab=p.default.ul.withConfig({displayName:"hierarchical__CheckboxArea",componentId:"sc-1pgjcwl-3"})(["max-height:175px;padding:12px 12px 0 12px;overflow-y:scroll;margin-top:4px;margin-bottom:0;",";:focus-within{",";}"],P.scrollbarCSS,(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),xb=p.default.li.withConfig({displayName:"hierarchical__CheckboxContainer",componentId:"sc-1pgjcwl-4"})(["display:flex;align-items:center;margin-bottom:8px;margin-left:","px;"],(e=>{let{$level:t}=e;return 20*t})),kb=(0,p.default)(Ke.Text).withConfig({displayName:"hierarchical__NoResultsText",componentId:"sc-1pgjcwl-5"})(["margin-bottom:12px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Ob=e=>`hierarchical_term_option_${e}`,Option=e=>{let{optionRefs:t={current:{}},$level:n=0,...r}=e;const{id:a,label:o,onBlur:l,onChange:i,onFocus:s,checked:d,value:u}=r,p=Ob(r.id),m=`hierarchical_term_${r.label}`;return c.createElement(xb,{"aria-selected":d,role:"treeitem",$level:n},c.createElement(tp.Checkbox,{id:p,ref:e=>{t.current[a]=e},value:u,checked:d,name:m,onChange:e=>i(e,r),onBlur:l,onFocus:s,tabIndex:-1}),c.createElement(Cb,{htmlFor:p},o))},Nb=e=>{let{className:t,inputValue:n,onInputChange:r,label:a,noOptionsText:o,options:l,onChange:i,...s}=e;const p=(0,Eb.default)("assertive"),m=(0,u.useDebouncedCallback)(p,500),f=(0,u.useRef)(null),g=(0,u.useRef)(null),[h,E]=(0,u.useState)(-1),b=(0,u.useRef)({}),y=(0,u.useCallback)((e=>{if(document.activeElement===f.current){if(!l.length)return;if(f.current.contains(e.relatedTarget))return void g.current?.focus();if(-1===h){const e=l.find((e=>e.checked))?.id;E(e||0)}else b.current[h]?.focus()}}),[h,l]),_=(0,u.useCallback)((e=>{const t=l.findIndex((e=>e.id===h));switch(e.key){case Dn.KEYS.UP:t>0&&E(l[t-1].id);break;case Dn.KEYS.DOWN:t<l.length-1&&E(l[t+1].id)}}),[l,h]),v=(0,u.useCallback)((e=>{r(e.target.value)}),[r]),w=(0,u.useCallback)(((e,t)=>{i(e,{id:t.id,checked:!t.checked})}),[i]),T=(0,u.usePrevious)(n);(0,u.useEffect)((()=>{if(T!==n){const e=l.length,t=(0,qe.default)(
/* Translators: %d: Number of results. */
(0,d._n)("%d result found.","%d results found.","web-stories","web-stories"),e);m(t)}}),[m,l,n,T]),(0,tr.useKeyDownEffect)(f,{key:["up","down","shift+up","shift+down"]},_,[_]),(0,u.useEffect)((()=>{f.current?.contains(document.activeElement)&&b.current[h]?.focus()}),[h]);const S=Boolean(l.length)||Boolean(n.length);return c.createElement(Sb,{className:t},c.createElement(_p,Tb({ref:g,value:n,onChange:v,label:a,type:"search",placeholder:(0,d.__)("Search","web-stories")},s)),S&&c.createElement(Ib,null,c.createElement(bu,null,c.createElement(Ab,{id:"checkbox_list",ref:f,tabIndex:0,onFocus:y,role:"tree","aria-activedescendant":-1!==h?Ob(h):void 0,"aria-multiselectable":!0},l.length?l.map((e=>c.createElement(Option,Tb({key:e.id},e,{onChange:w,optionRefs:b})))):c.createElement(kb,{role:"treeitem",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o)))))},Pb=[{key:"sponsored",title:(0,d.__)("Sponsored","web-stories")},{key:"nofollow",title:(0,d.__)("Nofollow","web-stories")}],Rb=p.default.div.withConfig({displayName:"linkRelations__CheckboxWrapper",componentId:"sc-123e3hl-0"})(["display:flex;padding:9px 0;"]),Mb=p.default.label.withConfig({displayName:"linkRelations__Label",componentId:"sc-123e3hl-1"})(["margin-left:12px;"]),Lb=(0,p.default)(Ke.Text).withConfig({displayName:"linkRelations__StyledText",componentId:"sc-123e3hl-2"})(["color:",";padding:8px 0;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const Db=function LinkRelations(e){let{rel:t,onChangeRel:n}=e;const r=(0,d.__)("https://developers.google.com/search/docs/advanced/guidelines/qualify-outbound-links?hl=en","web-stories"),a=(0,u.useCallback)((e=>{const r=t.includes(e)?t.filter((t=>t!==e)):[...t,e];n(r)}),[n,t]);return c.createElement(Wh,null,c.createElement("div",null,c.createElement(Lb,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Qualify outbound links","web-stories")),Pb.map((e=>{let{key:n,title:r}=e;return c.createElement(Rb,{key:n},c.createElement(tp.Checkbox,{id:n,name:n,checked:t?.includes(n),onChange:()=>a(n)}),c.createElement(Mb,{htmlFor:n},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"span"},r)))})),c.createElement(Ud.Link,{rel:"noopener noreferrer",target:"_blank",href:r,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Learn more","web-stories"))))};function Bb(e,t){return void 0===e?t:e}const Fb=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r="function"==typeof t?t:e=>e[t],a=Bb(r(e[0]),n),o=e.every((e=>Bb(r(e),n)===a));return o?a:Ce};const Hb=function(e,t,n){const r={},a=e.map((e=>e[t]||n));return Object.keys(n).forEach((e=>{r[e]=Fb(a,e)})),r};const Ub=function(e,t){return(0,u.useMemo)((()=>{const n=e.map((e=>e[t]));if(0===n.length)return null;if(1===n.length)return n[0];const r={};return n.forEach((e=>{const t=(0,tg.default)((0,kr.default)(e));t in r||(r[t]=e)})),1===Object.keys(r).length?Object.values(r)[0]:Ce}),[e,t])};const zb=function(e,t,n){const r=Hb(e,t,n),a=Object.keys(n).map((e=>r[e]));return(0,u.useMemo)((()=>r),a)},Gb=p.default.div.withConfig({displayName:"components__NavBar",componentId:"sc-1m7fu09-0"})(["display:flex;justify-content:space-between;align-items:center;width:100%;height:","px;background-color:",";",""],48,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),Pu.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]}))),jb=(0,p.default)(m.Button).withConfig({displayName:"components__NavButton",componentId:"sc-1m7fu09-1"})([""," ",";svg{width:32px;}* + *{margin-left:12px;}"],Pu.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),Mu),Yb=p.default.div.withConfig({displayName:"topNavigation__TopNavButtons",componentId:"sc-rirhnw-0"})(["padding-right:15px;"]),Zb=(0,p.default)(Ou.Headline).attrs({as:"h2",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}).withConfig({displayName:"topNavigation__Label",componentId:"sc-rirhnw-1"})(["padding-left:24px;font-weight:",";"],(e=>{let{theme:t}=e;return t.typography.weight.regular}));function TopNavigation(e){let{onClose:t,label:n,popupId:r}=e;return c.createElement(Gb,null,c.createElement(Zb,null,n),c.createElement(Yb,null,c.createElement(jb,{"aria-label":(0,d.__)("Close","web-stories"),onClick:()=>{!function(e){document.querySelector(`[aria-owns=${e}]`)?.focus()}(r),t()},type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE},c.createElement(Nu.default,null))))}const Wb=(0,p.css)(["opacity:1;transform:none;"]),Vb=e=>(0,p.css)(["opacity:0;transform:translateX(","px);"],"left"===e?-20:20),$b={entering:Wb,entered:Wb,exiting:Vb,exited:Vb},qb=p.default.div.withConfig({displayName:"secondaryPopup__Controller",componentId:"sc-b3cg46-0"})(["position:absolute;top:-12px;",":0px;opacity:0;transform:translateX(-20px);transition:opacity ","ms ",",transform ","ms ",";",""],(e=>{let{placement:t}=e;return t}),300,Qe.BEZIER.default,300,Qe.BEZIER.default,(e=>{let{state:t}=e;return $b[t]}));const Xb=function Popup(e){let{isOpen:t,popupId:n,children:r,ariaLabel:a,shouldKeepMounted:o,placement:l="left",onEnter:i=Ft,onExited:s=Ft}=e;return c.createElement(ScheduledTransition,{in:t,timeout:300,mountOnEnter:!o,unmountOnExit:!o,onEnter:i,onExited:s},(e=>c.createElement(qb,{id:n,role:"dialog","aria-label":a,state:e,placement:l},r)))};var Kb=n(76517);const Qb={NORMAL:"normal",DANGER:"danger"},Jb=p.default.div.attrs({role:"tablist"}).withConfig({displayName:"styles__Tablist",componentId:"sc-oyok4o-0"})(["background:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));Jb.propTypes={"aria-label":ma().string.isRequired};const ey=(0,p.default)(Ou.Headline).attrs({as:"h3",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"styles__PanelText",componentId:"sc-oyok4o-1"})(["transition:background-color 300ms ease-in;"]),ty=p.default.div.withConfig({displayName:"styles__TabButtonWrapper",componentId:"sc-oyok4o-2"})(["position:relative;height:60px;width:100%;padding:5px 4px;&,:hover,:focus-within,.","{background-color:",";}"],KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.bg.secondary})),ny=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.PLAIN}).withConfig({displayName:"styles__TabButton",componentId:"sc-oyok4o-3"})(["position:absolute;display:flex;justify-content:space-between;width:calc(100% - 8px);height:calc(100% - 10px);padding:16px;border-radius:0;&,:hover,:focus,.","{background-color:",";}",";","{opacity:0.8;}",";"],KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}),ey,(e=>{let{status:t}=e;return t===Qb.DANGER&&(0,p.css)(["&,","{color:",";}","{background-color:",";}"],ey,(e=>{let{theme:t}=e;return t.colors.fg.negative}),ly,(e=>{let{theme:t}=e;return t.colors.fg.negative}))})),ry=p.default.div.withConfig({displayName:"styles__PanelWrapper",componentId:"sc-oyok4o-4"})(["width:100%;background:",";&:not(:first-child) > ","{box-shadow:0px -1px 0 0 ",";margin-top:1px;}",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),ny,(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{isExpanded:t,theme:n}=e;return t&&(0,p.css)(["& ",",& ","{:not(:last-child){box-shadow:none;}",";","{opacity:1;}&,:hover,:focus{background-color:",";}svg{transform:rotate(0);}}","{height:560px;","{visibility:visible;}}"],ny,ty,Ru.focusableOutlineCSS,ey,n.colors.bg.primary,iy,sy)})),ay=p.default.div.withConfig({displayName:"styles__ButtonText",componentId:"sc-oyok4o-5"})(["display:flex;align-items:center;justify-content:center;margin-left:-12px;"]),oy=p.default.div.withConfig({displayName:"styles__IconContainer",componentId:"sc-oyok4o-6"})(["height:32px;width:32px;color:",";svg{transform:rotate(-90deg);transition:transform 300ms ease-in-out;}"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),ly=p.default.div.withConfig({displayName:"styles__Badge",componentId:"sc-oyok4o-7"})(["display:flex;align-items:center;justify-content:center;height:20px;width:20px;border-radius:",";background-color:",";","{color:",";line-height:20px;}"],(e=>{let{theme:t}=e;return t.borders.radius.round}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),ey,(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),iy=p.default.div.withConfig({displayName:"styles__ScrollableContent",componentId:"sc-oyok4o-8"})(["height:0;max-height:",";overflow-y:",";transition:height 300ms ease-in;"],(e=>{let{maxHeight:t}=e;return t?`calc(${t})`:"none"}),(e=>{let{maxHeight:t}=e;return t?"scroll":"hidden"})),sy=p.default.div.withConfig({displayName:"styles__TabPanel",componentId:"sc-oyok4o-9"})(["padding:0;visibility:hidden;overflow:hidden;background:",";transition:all 300ms ease-in;margin:0 0 16px 16px;",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),P.scrollbarCSS),cy=e=>{let{badgeCount:t=0,children:n,className:r,id:a,isExpanded:o,onClick:l,maxHeight:i,status:s=Qb.NORMAL,title:p}=e;const m=(0,u.useMemo)(he.default,[]),f=a||m;return c.createElement(ry,{className:r,isExpanded:o},c.createElement(ty,null,c.createElement(ny,{"aria-controls":f,"aria-selected":o,onClick:l,role:"tab",status:s},c.createElement(ay,null,c.createElement(oy,null,c.createElement(Kb.default,null)),c.createElement(ey,{id:`${p}-${f}`,"aria-label":(0,qe.default)(
/* translators: 1: number of issues. 2: type of issue, for example "High Priority". */
(0,d._n)("%1$d %2$s issue","%1$d %2$s issues",t,"web-stories"),t,p)},p)),c.createElement(ly,null,c.createElement(ey,{"aria-hidden":!0},t)))),c.createElement(iy,{"aria-hidden":!o,maxHeight:i},c.createElement(sy,{id:f,"aria-labelledby":`${p}-${f}`,role:"tabpanel"},n)))};var dy,uy;function py(){return py=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},py.apply(this,arguments)}const SvgCheckbox=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",py({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,dy||(dy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.897 18.146a.5.5 0 0 1 .707.708l-4.493 4.493-.007.007a.498.498 0 0 1-.708 0l-.006-.007-2.494-2.493a.5.5 0 0 1 .708-.708l2.146 2.147 4.147-4.147z",fill:"currentColor"})),uy||(uy=c.createElement("path",{d:"M20.333 15.5v-5.083C20.333 9.634 19.7 9 18.917 9h-6.5C11.634 9 11 9.634 11 10.417v11.166c0 .783.634 1.417 1.417 1.417H14.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},my=(0,c.memo)(SvgCheckbox);function fy(){return fy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fy.apply(this,arguments)}const gy=(0,p.default)(m.Button).withConfig({displayName:"toggleButton__Button",componentId:"sc-1de7s10-0"})(["height:36px;width:","px;display:inline-block;border:1px solid ",";padding:2px 0;color:",";"," ",""],(e=>{let{isSquare:t}=e;return t?36:58}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isOpen:t,theme:n}=e;return t&&(0,p.css)(["border-color:",";background-color:",";"],n.colors.bg.secondary,n.colors.bg.secondary)}),(e=>{let{hasText:t,theme:n}=e;return t&&(0,p.css)(["padding:2px 0 2px 8px;width:auto;",";span{padding-left:6px;}"],Pu.expandPresetStyles({preset:{...n.typography.presets.paragraph[Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:n}))}));gy.propTypes={hasText:ma().bool,isOpen:ma().bool};const hy=p.default.div.withConfig({displayName:"toggleButton__Wrapper",componentId:"sc-1de7s10-1"})(["width:100%;height:100%;display:flex;justify-content:space-around;align-items:center;"]),Ey=(0,p.default)(Ke.Text).attrs({as:"span"}).withConfig({displayName:"toggleButton__NotificationCount",componentId:"sc-1de7s10-2"})(["margin:-2px 0 -2px;padding-right:6px;line-height:20px;color:",";"],(e=>{let{theme:t}=e;return t.colors.violet[20]})),by=(0,u.forwardRef)(((e,t)=>{let{copy:n,isOpen:r=!1,notificationCount:a=0,MainIcon:o,label:l,shortcut:i,popupZIndexOverride:s,...d}=e;const u=a>0;return c.createElement(bd.Tooltip,{hasTail:!0,title:l,placement:Ed.PLACEMENT.TOP,shortcut:i,popupZIndexOverride:s},c.createElement(gy,fy({ref:t,"aria-haspopup":!0,"aria-pressed":r,"aria-expanded":r,hasText:Boolean(n),isOpen:r,isSquare:!u,type:f.BUTTON_TYPES.TERTIARY,variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.MEDIUM},d),c.createElement(hy,null,o&&c.createElement(o,null),n,u&&c.createElement(Ey,null,a))))}));by.displayName="ToggleButton";const yy=(0,p.default)(my).withConfig({displayName:"toggle__MainIcon",componentId:"sc-1kcse2p-0"})(["height:32px;width:auto;display:block;"]),_y=(0,p.default)(by).withConfig({displayName:"toggle__StyledToggleButton",componentId:"sc-1kcse2p-1"})(["display:block;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));function Toggle(e){let{isOpen:t=!1,popupId:n="",onClick:r=Ft}=e;const a=gu($d.PRIORITY),{checkpoint:o}=du((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}})),l=(0,u.useMemo)((()=>o===Jd.ALL?a:0),[o,a]);return c.createElement(_y,{"aria-owns":n,onClick:r,isOpen:t,MainIcon:yy,label:(0,d.__)("Checklist","web-stories"),"aria-label":l>0?(0,qe.default)(
/* translators: %s:  number of unaddressed issues. */
(0,d._n)("Checklist: %s unaddressed issue","Checklist: %s unaddressed issues",l,"web-stories"),l):(0,d.__)("Checklist","web-stories"),notificationCount:l})}const vy=(0,p.default)(cy).withConfig({displayName:"styles__StyledTablistPanel",componentId:"sc-1rujego-0"})(["height:",";visibility:",";button{display:",";}"],(e=>{let{badgeCount:t}=e;return 0===t?0:"auto"}),(e=>{let{badgeCount:t}=e;return 0===t?"hidden":"visible"}),(e=>{let{badgeCount:t}=e;return 0===t?"none":"auto"})),wy=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styles__PanelText",componentId:"sc-1rujego-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function Ty(){return Fd((e=>{let{state:t}=e;return t.isChecklistMounted}))}function DesignPanel(e){let{badgeCount:t=0,isOpen:n,maxHeight:r,onClick:a,title:o,children:l}=e;return Ty()?c.createElement(vy,{badgeCount:t,isExpanded:Boolean(t)&&n,onClick:a,maxHeight:r,title:o},c.createElement(wy,null,(0,d.__)("Follow best practices for Web Stories.","web-stories")),l):l}function DesignChecks(e){return c.createElement(ChecklistCategoryProvider,{category:$d.DESIGN},c.createElement(DesignPanel,e,e.children))}function AccessibilityPanel(e){let{children:t,badgeCount:n,isOpen:r,onClick:a,maxHeight:o,title:l}=e;return Ty()?c.createElement(vy,{badgeCount:n,isExpanded:Boolean(n)&&r,onClick:a,maxHeight:o,title:l},c.createElement(wy,null,(0,d.__)("Make your Web Story accessible.","web-stories")),t):t}function AccessibilityChecks(e){return c.createElement(ChecklistCategoryProvider,{category:$d.ACCESSIBILITY},c.createElement(AccessibilityPanel,e,e.children))}function PriorityPanel(e){let{children:t,badgeCount:n=0,isOpen:r,onClick:a,maxHeight:o,title:l}=e;return Ty()?c.createElement(vy,{badgeCount:n,isExpanded:Boolean(n)&&r,onClick:a,maxHeight:o,status:Qb.DANGER,title:l},c.createElement(wy,null,(0,d.__)("Make this Web Story easier to discover.","web-stories")),t):t}function PriorityChecks(e){const t=gu($d.PRIORITY),{updateHighPriorityCount:n}=du((e=>{let{actions:{updateHighPriorityCount:t}}=e;return{updateHighPriorityCount:t}}));return(0,u.useEffect)((()=>{n(t)}),[n,t]),c.createElement(ChecklistCategoryProvider,{category:$d.PRIORITY},c.createElement(PriorityPanel,e,e.children))}var Sy,Cy;function Iy(){return Iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iy.apply(this,arguments)}const SvgCheckmarkCircle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Iy({viewBox:"0 0 58 58",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Sy||(Sy=c.createElement("path",{d:"M29 54.146c13.888 0 25.147-11.259 25.147-25.147C54.147 15.11 42.888 3.852 29 3.852c-13.888 0-25.147 11.258-25.147 25.147 0 13.888 11.259 25.147 25.147 25.147z",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})),Cy||(Cy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M43.198 18.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037z",fill:"currentColor"})))},Ay=(0,c.memo)(SvgCheckmarkCircle),xy=p.default.div.withConfig({displayName:"emptyContent__Wrapper",componentId:"sc-83zuqv-0"})(["display:grid;grid-template-rows:113px 64px;width:308px;margin:0 auto 32px;& > *{display:flex;align-self:center;justify-self:center;color:",";}p{width:226px;text-align:center;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),ky=p.default.div.withConfig({displayName:"emptyContent__IconContainer",componentId:"sc-83zuqv-1"})(["height:50px;width:50px;"]),EmptyContent=()=>c.createElement(xy,null,c.createElement(ky,null,c.createElement(Ay,null)),c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("You are all set for now. Return to this checklist as you build your Web Story for tips on how to improve it.","web-stories"))),Oy=()=>{const e=gu($d.ACCESSIBILITY),t=gu($d.DESIGN),n=gu($d.PRIORITY),{checkpoint:r}=du((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}}));return e+t+n===0||r===Jd.UNAVAILABLE?c.createElement(EmptyContent,null):null},Ny=p.default.div.withConfig({displayName:"checklist__Wrapper",componentId:"sc-ai4sw8-0"})(["z-index:",";"],3),Py=(0,p.default)(ku).withConfig({displayName:"checklist__StyledNavigationWrapper",componentId:"sc-ai4sw8-1"})([""]),Ry=(0,u.forwardRef)((function ThroughputPopup(e,t){let{isOpen:n,children:r,close:a}=e;const{isChecklistMounted:o,setIsChecklistMounted:l}=Fd((e=>{let{state:{isChecklistMounted:t},actions:{setIsChecklistMounted:n}}=e;return{isChecklistMounted:t,setIsChecklistMounted:n}}));return c.createElement(Xb,{popupId:Wd,isOpen:n,ariaLabel:Vd,shouldKeepMounted:!0,onEnter:()=>l(!0),onExited:()=>l(!1)},o?c.createElement(Py,{ref:t,isOpen:n},c.createElement(TopNavigation,{onClose:a,label:Vd,popupId:Wd}),c.createElement(Jb,{id:"pre-publish-checklist","data-isexpanded":n,"aria-label":(0,d.__)("Potential Story issues by category","web-stories")},r),c.createElement(Oy,null)):r)}));function Checklist(e){let{items:t={}}=e;const{close:n,openPanel:r,toggle:a,isOpen:o,isChecklistMounted:l,setOpenPanel:i}=Fd((e=>{let{actions:{close:t,toggle:n,setOpenPanel:r},state:{isOpen:a,isChecklistMounted:o,openPanel:l}}=e;return{close:t,toggle:n,isOpen:a,isChecklistMounted:o,openPanel:l,setOpenPanel:r}})),s=gu($d.PRIORITY),d=gu($d.DESIGN),p=gu($d.ACCESSIBILITY),{checkpoint:m}=du((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}})),f=(0,u.useRef)(),g=(0,u.useCallback)((e=>()=>i((t=>t===e?null:e))),[i]);(0,u.useEffect)((()=>{if(l){const e=f.current?.querySelector(Dn.FOCUSABLE_SELECTORS.join(", "));e?.focus()}}),[l]),(0,u.useEffect)((()=>{m&&i(tu[m])}),[m,i]);const h=eu[m],E=h.includes($d.PRIORITY)?s:0,b=h.includes($d.DESIGN)?d:0,y=h.includes($d.ACCESSIBILITY)?p:0,_=(e=>{if(e)return`100vh - ${48+60*e+92+69}px`})([E,b,y].filter((e=>Boolean(e))).length),{Priority:v,Design:w,Accessibility:T}=t;return c.createElement(bu,null,c.createElement(Ny,{role:"region","aria-label":Vd},c.createElement(Ry,{ref:f,close:n,isOpen:o},v&&c.createElement(PriorityChecks,{badgeCount:E,isOpen:o&&r===$d.PRIORITY,onClick:g($d.PRIORITY),maxHeight:_,title:qd[$d.PRIORITY]},c.createElement(v,null)),w&&c.createElement(DesignChecks,{badgeCount:b,isOpen:o&&r===$d.DESIGN,onClick:g($d.DESIGN),maxHeight:_,title:qd[$d.DESIGN]},c.createElement(w,null)),T&&c.createElement(AccessibilityChecks,{badgeCount:y,isOpen:o&&r===$d.ACCESSIBILITY,onClick:g($d.ACCESSIBILITY),maxHeight:_,title:qd[$d.ACCESSIBILITY]},c.createElement(T,null))),c.createElement(Toggle,{isOpen:o,onClick:a,popupId:Wd})))}const My=(0,p.keyframes)(["50%{background-color:",";}"],(0,Xe.rgba)(g.theme.colors.standard.white,.3)),Ly=(0,p.css)(["background-color:",";animation:"," 0.3s ease-in-out 2;"],(0,Xe.rgba)(g.theme.colors.standard.white,0),My),Dy=(0,p.css)(["",";"],Ru.focusCSS),By=(0,u.createContext)({});const Fy=function(e){return(0,u.useContextSelector)(By,e??u.identity)},Hy="insert",Uy="design",zy="document";function Gy(e,t){return!!e?.dataTransfer?.types&&(Array.isArray(e.dataTransfer.types)?e.dataTransfer.types.includes(t):e.dataTransfer.types.contains(t))}const jy=(0,u.createContext)({}),Yy=p.default.div.withConfig({displayName:"dropTarget__DropTargetComponent",componentId:"sc-12rok6t-0"})(["position:relative;width:100%;height:100%;"]),Zy=p.default.div.withConfig({displayName:"dropTarget__Content",componentId:"sc-12rok6t-1"})(["position:relative;width:100%;height:100%;"]),Wy=p.default.div.withConfig({displayName:"dropTarget__Glasspane",componentId:"sc-12rok6t-2"})(["position:absolute;z-index:1000;top:0;left:0;width:100%;height:100%;"]);function Vy(e){e.preventDefault(),e.stopPropagation()}function UploadDropTarget(e){let{disabled:t,label:n,labelledBy:r,onDrop:a,children:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useCallback)((e=>{const{dataTransfer:n}=e;(function(e){return Gy(e,"Files")})(e)&&(Vy(e),t?n.effectAllowed="none":(n.effectAllowed="copy",i(!0)))}),[t]),d=(0,u.useCallback)((e=>{Vy(e),i(!1)}),[]),p=(0,u.useCallback)((e=>{Vy(e),i(!1),!t&&a&&a([...e.dataTransfer.files])}),[t,a]);return c.createElement(Yy,{onDragEnter:s,onDrop:p,onDragOver:Vy},l&&c.createElement(Wy,{onDragEnter:s,onDragLeave:d,onDragOver:Vy,onDrop:p,"aria-label":n,"aria-labelledby":r}),c.createElement(jy.Provider,{value:{isDragging:l}},c.createElement(Zy,null,o)))}UploadDropTarget.defaultProps={disabled:!1,label:null,labelledBy:null,onDrop:null};const $y=UploadDropTarget;var qy;function Xy(){return Xy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(this,arguments)}const SvgArrowCloud=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Xy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,qy||(qy=c.createElement("path",{d:"m13.5 16 3-3m0 0 3 3m-3-3v7m-6-7-.59.131A4.994 4.994 0 0 0 6 18.006v0A4.994 4.994 0 0 0 10.994 23h12.048A3.958 3.958 0 0 0 27 19.042v0a3.958 3.958 0 0 0-3.52-3.933L22.5 15c0-1-1-6-6-6-3.5 0-5.5 2.5-6 4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Ky=(0,c.memo)(SvgArrowCloud);const Qy=function(e){return(0,u.useContextSelector)(jy,e??u.identity)};function Jy(){return Jy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jy.apply(this,arguments)}const e_=p.default.div.withConfig({displayName:"overlay__Overlay",componentId:"sc-u0s4sf-0"})(["position:absolute;z-index:999;top:0;left:0;width:100%;height:100%;background-color:",";"],(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.bg.primary,.6)}));const t_=(0,u.forwardRef)((function UploadDropTargetOverlayWithRef(e,t){const{isDragging:n}=Qy((e=>({isDragging:e.isDragging})));return n?c.createElement(e_,Jy({ref:t},e)):null})),n_=(0,p.default)(t_).withConfig({displayName:"message__Container",componentId:"sc-1cdb29v-0"})(["display:flex;align-items:center;justify-content:center;"]),r_=p.default.div.withConfig({displayName:"message__Box",componentId:"sc-1cdb29v-1"})(["width:100%;max-width:240px;padding:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;"]),a_=(0,p.default)(Ke.Text).withConfig({displayName:"message__Text",componentId:"sc-1cdb29v-2"})(["color:",";margin-bottom:14px;margin-top:0px;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),o_=(0,p.default)(Ky).withConfig({displayName:"message__Icon",componentId:"sc-1cdb29v-3"})(["height:52px;width:52px;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white}));const l_=(0,u.memo)((function UploadDropTargetMessage(e){let{message:t,...n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o}}=Y(),l=(0,u.useMemo)((()=>[...r,...a,...o]),[r,o,a]),i=(0,u.useMemo)((()=>l.map((e=>Mt(e))).flat()),[l]);let s=(0,d.__)("No file types are currently supported.","web-stories");return i.length&&(s=(0,qe.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can upload %s.","web-stories"),(0,Ot.default)(i))),c.createElement(n_,n,c.createElement(r_,null,c.createElement(o_,null),c.createElement(a_,{isBold:!0,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},t),c.createElement(a_,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s)))}));var i_=n(98663),s_=n(49785);function c_(){return c_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c_.apply(this,arguments)}const d_=p.default.ul.attrs({role:"tablist","aria-orientation":"horizontal"}).withConfig({displayName:"tabview__Tabs",componentId:"sc-10d408-0"})(["display:flex;flex-direction:row;align-items:stretch;width:100%;max-width:100%;justify-content:space-between;margin:0;padding:0;list-style:none;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.secondary})),u_=p.default.li.attrs((e=>{let{isActive:t}=e;return{tabIndex:t?0:-1,role:"tab","aria-selected":t}})).withConfig({displayName:"tabview__TabElement",componentId:"sc-10d408-1"})(["cursor:pointer;border:none;background:none;padding:0 4px;margin:","px 12px 9px;height:","px;display:flex;align-items:center;justify-content:center;position:relative;transition:color 0.2s ease;color:",";border-radius:",";",";:hover{color:",";}"," svg{display:block;width:32px;height:32px;margin:0 -4px;transform-origin:center center;transition:transform 0.3s ease,color 0.2s ease;color:",";border-radius:",";pointer-events:none;}svg.alert{width:","px;margin-left:4px;color:",";}span,svg:not(.alert){",";}&:hover span,&:hover svg:not(.alert),&:active span,&:active svg:not(.alert){color:",";}&.",",&[data-focus-visible-added]{svg:not(.alert){background-color:",";}}"],10,32,(e=>{let{theme:t,isActive:n}=e;return n?t.colors.fg.primary:t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isActive:t,theme:n}=e;return t&&(0,p.css)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-10px;left:4px;right:4px;}"],n.colors.border.selection)}),(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),28,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isActive:t,theme:n}=e;return t&&`color: ${n.colors.fg.primary}`}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover})),p_=(0,p.default)(Ou.Headline).attrs({as:"p",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"tabview__TabText",componentId:"sc-10d408-2"})(["color:inherit;"]),tabview_noop=()=>{};const m_=(0,u.forwardRef)((function UnreffedTab(e,t){let{children:n,tooltip:r=null,placement:a,refId:o,tabRefs:l,...i}=e;const{id:s}=i,d=s.includes("library")?i_.TRACKING_EVENTS.LIBRARY_PANEL_CLICK:i_.TRACKING_EVENTS.DESIGN_PANEL_CLICK;(0,s_.default)({node:l?.[o]?.current,eventData:{...d,label:`${o}_tab`}});const u=c.createElement(u_,c_({ref:t},i),n);return null!==r?c.createElement(Tooltip,{title:r,placement:a,isDelayed:!0},u):u}));const f_=function TabView(e){let{getTabId:t=(e=>e),getAriaControlsId:n,onTabChange:r=tabview_noop,onTabRefUpdated:a=tabview_noop,tabs:o=[],label:l="",shortcut:i="",tab:s,tabRefs:d,...p}=e;const{isRTL:m}=Y(),f=(0,u.useRef)(),g=(0,u.useRef)(),h=(0,u.useRef)({}),E=(0,u.useCallback)((e=>{d?.[e]?.current?d[e].current?.focus():h?.current[e]&&h.current[e]?.focus(),g.current=e}),[d]),b=(0,u.useCallback)((e=>{E(e),r(e)}),[E,r]);(0,tr.useGlobalKeyDownEffect)({key:i,editable:!0},(()=>b(s)),[b,s]);const y=(0,u.useCallback)((e=>{const t=o[(e+o.length)%o.length];E(t.id)}),[o,E]),_=(0,u.useCallback)((e=>{const t=m?-e:e,n=o.findIndex((e=>{let{id:t}=e;return t===g.current}));y(n+t)}),[m,o,y]);return(0,tr.useKeyDownEffect)(f,"left",(()=>_(-1)),[_]),(0,tr.useKeyDownEffect)(f,"right",(()=>_(1)),[_]),(0,tr.useKeyDownEffect)(f,["up","down"],(()=>{}),[]),(0,tr.useKeyDownEffect)(f,"home",(()=>y(0)),[y]),(0,tr.useKeyDownEffect)(f,"end",(()=>y(-1)),[y]),(0,tr.useKeyDownEffect)(f,{key:["enter","space"],allowDefault:!0},(e=>{"tab"===e.target.getAttribute("role")&&(b(g.current),e.preventDefault())}),[b],{}),c.createElement(d_,c_({"aria-label":l,ref:f},p),o.map((e=>{let{id:r,title:o,icon:l,...i}=e;return c.createElement(m_,c_({key:r,ref:e=>{d?d[r].current=e:h.current[r]=e,a(e,r)},id:t(r),isActive:s===r,"aria-controls":n?n(r):null,"aria-selected":s===r,onClick:()=>b(r),onFocus:()=>{g.current=s},refId:r,tabRefs:d},i),Boolean(o)&&c.createElement(p_,null,o),Boolean(l)&&c.createElement(l,{isActive:r===s}))})))},g_=e=>`sidebar-tab-${e}`,h_=p.default.div.attrs({role:"tabpanel"}).withConfig({displayName:"sidebarContent__SidebarPane",componentId:"sc-1f2hu7i-0"})(["height:100%;overflow:overlay;"]),E_=p.default.section.withConfig({displayName:"sidebarContent__SidebarPanes",componentId:"sc-1f2hu7i-1"})(["height:100%;"]);const b_=function Sidebar(){const{state:{tab:e},data:{tabs:t}}=Fg();return c.createElement(E_,null,t.map((t=>{let{id:n,Pane:r}=t;return c.createElement(h_,{"aria-labelledby":n,id:g_(n),key:n,hidden:n!==e},n===e&&c.createElement(r,null))})))},y_=p.default.section.attrs({"aria-label":(0,d.__)("Sidebar","web-stories")}).withConfig({displayName:"sidebarLayout__Layout",componentId:"sc-hpe4no-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),__=p.default.div.withConfig({displayName:"sidebarLayout__SidebarContainer",componentId:"sc-hpe4no-1"})(["height:100%;padding:0;overflow:auto;"]),v_=(0,p.default)(f_).withConfig({displayName:"sidebarLayout__UnjustifiedTabView",componentId:"sc-hpe4no-2"})(["justify-content:center;"]);const w_=function SidebarLayout(){const{state:{tab:e,tabRefs:t},actions:{setSidebarContentNode:n,setTab:r},refs:{sidebar:a},data:{tabs:o}}=Fg(),l=(0,u.useCallback)((e=>{r(e),(0,L.trackEvent)("inspector_tab_change",{name:e})}),[r]);return(0,tr.useEscapeToBlurEffect)(a),c.createElement(y_,{ref:a},c.createElement(v_,{label:(0,d.__)("Sidebar Selection","web-stories"),tabs:o,tab:e,tabRefs:t,onTabChange:l,getAriaControlsId:g_,shortcut:"mod+option+3"}),c.createElement(__,{ref:n},c.createElement(b_,null)))};const T_=function(){return c.createElement($y,{disabled:!0},c.createElement(w_,null))};var S_=n(65727);const C_=(0,p.default)(S_.default).withConfig({displayName:"searchInput__StyledSearchInput",componentId:"sc-145nauf-0"})(["input{",";}"],Mu);const I_=function WrappedSearchInput(e){let{initialValue:t,placeholder:n,onSearch:r,disabled:a=!1,incremental:o=!1,delayMs:l=500}=e;const[i,s]=(0,u.useState)(t),p=(0,u.useDebouncedCallback)((()=>{r(i)}),l),m=(0,u.useCallback)((e=>{o&&l?p():r(e)}),[p,r,l,o]),f=(0,u.useCallback)((e=>{const t=e.target.value;s(t),(o||""===t)&&m(t)}),[m,o]),g=(0,u.useCallback)((()=>{s(""),m("")}),[m]),h=(0,u.useCallback)((e=>{e.preventDefault(),m(i)}),[m,i]),E=i.length>0;return c.createElement("form",{onSubmit:h},c.createElement(C_,{inputValue:i,placeholder:n,onChange:f,handleClearInput:g,disabled:a,ariaClearLabel:(0,d.__)("Clear Search","web-stories"),isOpen:E,"aria-label":(0,d.__)("Search","web-stories")}))},A_=p.default.div.withConfig({displayName:"section__Container",componentId:"sc-emh1dh-0"})(["position:relative;margin-top:28px;margin-bottom:28px;&:first-child{margin-top:0px;}"]),x_=(0,p.default)(Ou.Headline).attrs({as:"h2",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"section__Title",componentId:"sc-emh1dh-1"})(["flex:1 1 auto;color:",";margin-bottom:28px;"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));function Section(e){let{title:t,children:n,...r}=e;return c.createElement(A_,r,c.createElement(x_,null,t),n)}p.default.h3.withConfig({displayName:"common__Title",componentId:"sc-q5ifvb-0"})(["color:",";margin:0;font-size:19px;line-height:1.4;flex:3 0 0;display:flex;align-items:center;padding:2px 0;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),p.default.div.withConfig({displayName:"common__Header",componentId:"sc-q5ifvb-1"})(["display:flex;margin:0 0 25px;"]);var k_=n(32214),O_=n(99832);const N_=function(e){let{sectionRef:t,innerContainerRef:n,isExpanded:r,setFocusedRowOffset:a,collapsedHeight:o,bottomMargin:l,topMargin:i}=e;(0,u.useLayoutEffect)((()=>{if(!t.current||!n.current)return;let e;e=r?`${n.current.offsetHeight+i+l}px`:`${o}px`,t.current.style.height=e,t.current.style.minHeight=e,a(0)}),[l,o,n,r,t,a,i])};const P_=function(e){let{innerContainerRef:t,isExpanded:n,setFocusedRowOffset:r,selectedItemId:a,itemRefs:o,offsetSpacing:l=0}=e;(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=o.current?.[a]?o.current[a]:null;!n&&e&&r(e?.offsetTop-l||0)}),[t,n,o,l,a,r]),(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=o.current?.[a]?o.current[a]:null,r=e?.offsetTop||0;for(const t of o.current){if(!t)continue;const a=e&&t.offsetTop===r;!e||a||n?t.classList.remove("invisible"):t.classList.add("invisible")}}),[t,n,a,o])},R_=p.default.div.withConfig({displayName:"chipGroup__Section",componentId:"sc-emvo4b-0"})(["height:","px;min-height:","px;background-color:",";display:flex;flex-direction:column;align-items:flex-start;flex:0 1 auto;position:relative;transition:height 0.2s,min-height 0.2s;"],80,80,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),M_=p.default.div.withConfig({displayName:"chipGroup__Container",componentId:"sc-emvo4b-1"})(["overflow:hidden;margin:","px 12px ","px 24px;"],16,20),L_=p.default.div.withConfig({displayName:"chipGroup__InnerContainer",componentId:"sc-emvo4b-2"})(["display:flex;justify-content:center;flex-wrap:wrap;position:relative;padding:4px 0;transition:transform 0.2s;column-gap:8px;row-gap:14px;"]),D_=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE}).withConfig({displayName:"chipGroup__ExpandButton",componentId:"sc-emvo4b-3"})(["display:flex;position:absolute;bottom:-24px;background:",";max-height:none;width:32px;height:32px;"," visibility:inherit;align-self:center;justify-content:center;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary}),(e=>{let{isExpanded:t}=e;return t&&"transform: scaleY(-1);"})),B_=e=>{let{items:t,selectedItemId:n,selectItem:r,deselectItem:a,ariaLabel:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useRef)(),p=(0,u.useRef)(),m=(0,u.useRef)([]),[f,g]=(0,u.useState)(0),h=(0,u.useCallback)(((e,t)=>{e&&null!==t?a():(i(!1),r(t))}),[a,r]),E=(0,u.useCallback)((()=>i((e=>!e))),[]);N_({sectionRef:s,innerContainerRef:p,isExpanded:l,setFocusedRowOffset:g,collapsedHeight:80,bottomMargin:20,topMargin:16}),P_({isExpanded:l,innerContainerRef:p,selectedItemId:n,setFocusedRowOffset:g,itemRefs:m,offsetSpacing:4});const b=t.length>0;Xf({ref:s},[l]),(0,tr.useKeyDownEffect)(s,l?"":"down",(()=>b&&i(!0)),[l,b]);const y=(0,u.useMemo)((()=>`pill-group-${(0,he.default)()}`),[]);return c.createElement(R_,{ref:s},b&&c.createElement(c.Fragment,null,c.createElement(M_,{id:y,isExpanded:l,role:"listbox","aria-label":o||(0,d.__)("List of filtering options","web-stories")},c.createElement(L_,{role:"presentation",ref:p,style:{transform:`translateY(-${f}px`}},t.map(((e,t)=>{const{id:r,label:a}=e,o=r===n,l=o||!o&&0===t?0:-1;return c.createElement(k_.Chip,{key:r,role:"option",ref:e=>{m.current[r]=e},active:o,"aria-selected":o,onClick:()=>h(o,r),tabIndex:l},a)})))),c.createElement(D_,{onClick:E,isExpanded:l,"aria-controls":y,"aria-expanded":l,"aria-label":(0,d.__)("Expand","web-stories")},c.createElement(O_.default,null))))},F_="1em",H_=p.default.section.attrs((e=>{let{isActive:t}=e;return{role:"tabpanel","aria-expanded":t,hidden:!t}})).withConfig({displayName:"shared__Pane",componentId:"sc-10fhorr-0"})(["padding:1.5em ",";",""],F_,(e=>{let{isOverflowScrollable:t=!1}=e;return t&&(0,p.css)(["overflow-y:scroll;height:100%;"])}));function U_(e){return`library-pane-${e}`}function z_(e){return`library-tab-${e}`}const G_=p.default.div.withConfig({displayName:"shared__LoadingContainer",componentId:"sc-10fhorr-1"})(["display:flex;justify-content:center;margin-top:18px;"]),j_=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.ICON}).withConfig({displayName:"shared__ActionButton",componentId:"sc-10fhorr-2"})(["display:flex;align-items:center;position:absolute;top:calc(50% - ","px);right:calc(50% - ","px);color:",";border-radius:",";width:","px;height:","px;opacity:",";"],8,8,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.round}),16,16,(e=>{let{$display:t}=e;return t?"1":"0"})),Y_=p.default.div.withConfig({displayName:"shared__PageTemplateTitleContainer",componentId:"sc-10fhorr-3"})(["position:absolute;bottom:0;width:100%;padding:8px;background-color:",";opacity:",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{isActive:t}=e;return t?1:0})),Z_=p.default.div.withConfig({displayName:"styles__PaneInner",componentId:"sc-18rwr03-0"})(["height:100%;display:flex;flex-direction:column;"]),W_=p.default.div.withConfig({displayName:"styles__PaneHeader",componentId:"sc-18rwr03-1"})(["padding-top:24px;flex:0 1 auto;"]),V_=p.default.div.withConfig({displayName:"styles__GalleryContainer",componentId:"sc-18rwr03-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;"]),$_=p.default.div.withConfig({displayName:"styles__MediaGalleryContainer",componentId:"sc-18rwr03-3"})(["overflow-y:scroll;overflow-x:hidden;padding:0 ",";margin-top:1em;position:relative;width:100%;flex:1 1 auto;min-height:100px;"],F_),q_=p.default.div.withConfig({displayName:"styles__MediaGalleryInnerContainer",componentId:"sc-18rwr03-4"})(["width:calc(100% + ","px);"],P.SCROLLBAR_WIDTH),X_=p.default.div.withConfig({displayName:"styles__MediaGalleryLoadingPill",componentId:"sc-18rwr03-5"})(["display:block;position:absolute;bottom:20px;left:60px;right:60px;width:240px;text-align:center;padding:8px 80px;background-color:",";border-radius:100px;"],(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.black,.4)})),K_=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"styles__MediaGalleryMessage",componentId:"sc-18rwr03-6"})(["color:",";padding:1em;text-align:center;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Q_=(0,p.default)(H_).withConfig({displayName:"styles__StyledPane",componentId:"sc-18rwr03-7"})(["height:100%;padding:0;overflow:hidden;"]),J_=p.default.div.withConfig({displayName:"styles__SearchInputContainer",componentId:"sc-18rwr03-8"})(["padding:0 ",";"],F_);var ev=n(63240);function tv(){return tv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(this,arguments)}const nv="loading-indicator",rv=p.default.span.withConfig({displayName:"loadingBar__AriaOnlyAlert",componentId:"sc-x990cz-0"})(Qh.visuallyHidden),av=(0,p.keyframes)(["0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}"]),ov=p.default.div.withConfig({displayName:"loadingBar__UploadingIndicator",componentId:"sc-x990cz-1"})(["height:4px;background:",";background-size:400% 400%;position:absolute;bottom:0px;border-radius:",";animation:"," 4s ease infinite;&.","{&.appear{width:0;}&.appear-done{width:100%;transition:1s ease-out;transition-property:width;}}"],(e=>{let{theme:t}=e;return t.colors.gradient.loading}),(e=>{let{theme:t}=e;return`0px 0px ${t.borders.radius.small} ${t.borders.radius.small}`}),av,nv),LoadingBar=e=>{let{loadingMessage:t,...n}=e;const r=(0,u.useRef)();return c.createElement(c.Fragment,null,t&&c.createElement(rv,{role:"status"},t),c.createElement(Vp.default,{nodeRef:r,in:!0,appear:!0,timeout:0,className:nv},c.createElement(ov,tv({ref:r},n))))};var lv,iv=n(38823),sv=n(66044);function cv(){return cv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cv.apply(this,arguments)}const SvgDotsFillSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",cv({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,lv||(lv=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",fill:"currentColor"})))},dv=(0,c.memo)(SvgDotsFillSmall);const uv=function DeleteDialog(e){let{mediaId:t,type:n,onClose:r}=e;const{actions:{deleteMedia:a}}=X(),{showSnackbar:o}=(0,hr.useSnackbar)(),{deleteMediaElement:l}=yi((e=>{let{actions:{deleteMediaElement:t}}=e;return{deleteMediaElement:t}})),{deleteElementsByResourceId:i}=Sa((e=>({deleteElementsByResourceId:e.actions.deleteElementsByResourceId}))),s=(0,u.useCallback)((async()=>{r();try{await a(t),l({id:t}),i({id:t})}catch(e){(0,L.trackError)("local_media_deletion",e.message),o({message:(0,d.__)("Failed to delete media item.","web-stories"),dismissible:!0})}}),[a,l,i,t,r,o]),p=(0,d.__)("Delete Image?","web-stories"),m=(0,d.__)("Delete Video?","web-stories"),f=(0,d.__)("You are about to permanently delete this image from your site. The image will appear broken in any WordPress content that uses it. ","web-stories"),g=(0,d.__)("You are about to permanently delete this video from your site. The video will appear broken in any WordPress content that uses it. ","web-stories");return c.createElement(y,{isOpen:!0,onClose:r,title:"image"===n?p:m,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:s,primaryText:(0,d.__)("Delete","web-stories"),maxWidth:512},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},"image"===n?f:g),c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,d.__)("This action can not be undone.","web-stories")))},pv=(0,p.css)(["display:flex;width:","px;margin-right:28px;"],152),mv=p.default.img.withConfig({displayName:"mediaEditDialog__Image",componentId:"sc-ctku7j-0"})(["",""],pv),fv=p.default.video.withConfig({displayName:"mediaEditDialog__Video",componentId:"sc-ctku7j-1"})(["",""],pv),gv=p.default.div.withConfig({displayName:"mediaEditDialog__DialogBody",componentId:"sc-ctku7j-2"})(["display:flex;justify-content:left;align-items:flex-start;"]),hv=p.default.div.withConfig({displayName:"mediaEditDialog__MetadataTextContainer",componentId:"sc-ctku7j-3"})(["display:flex;flex-direction:column;margin:0 4px;"]),Ev=(0,p.default)(Ke.Text).withConfig({displayName:"mediaEditDialog__DateText",componentId:"sc-ctku7j-4"})(["margin-bottom:8px;"]),bv=(0,p.default)(yE).withConfig({displayName:"mediaEditDialog__AssistiveTextArea",componentId:"sc-ctku7j-5"})(["margin:20px 0 4px;"]),yv=(0,d.__)("Edit Image","web-stories"),_v=(0,d.__)("Edit Video","web-stories"),vv=(0,d.__)("Assistive text","web-stories"),wv=(0,d.__)("Video description","web-stories"),Tv=(0,d.__)("Describe the appearance and function of the image. Leave empty if the image is purely decorative.","web-stories"),Sv=(0,d.__)("For indexability and accessibility. Include any burned-in text inside the video.","web-stories");const Cv=function MediaEditDialog(e){let{resource:t,onClose:n}=e;const{id:r,src:a,creationDate:o,width:l,height:i,type:s,alt:p,poster:m,mimeType:f}=t,{actions:{updateMedia:g}}=X(),{updateMediaElement:h}=yi((e=>{let{actions:{updateMediaElement:t}}=e;return{updateMediaElement:t}})),{showSnackbar:E}=(0,hr.useSnackbar)(),[b,_]=(0,u.useState)(p),v=(0,kd.default)(o),w=(0,u.useCallback)((e=>{_(e.target.value)}),[]),T=(0,u.useCallback)((async()=>{try{await g(r,{altText:b}),h({id:r,data:{alt:b}}),n()}catch(e){(0,L.trackError)("local_media_edit",e.message),E({message:(0,d.__)("Failed to update, please try again.","web-stories"),dismissible:!0})}}),[b,r,n,E,g,h]),S="image"===s;return c.createElement(y,{isOpen:!0,onClose:n,title:S?yv:_v,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:T,primaryText:(0,d.__)("Save","web-stories")},c.createElement(gv,null,"image"===s?c.createElement(mv,{src:(0,go.default)(152,t),alt:p,loading:"lazy",crossOrigin:"anonymous",decoding:"async"}):c.createElement(fv,{key:a,crossOrigin:"anonymous",poster:m,preload:"metadata",muted:!0},c.createElement("source",{src:a,type:f})),c.createElement(hv,null,(0,Ad.default)(v)&&c.createElement(Ev,{forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,qe.default)(
/* translators: %s: upload date of media item. */
(0,d.__)("Uploaded: %s","web-stories"),(0,Rd.default)(o))),c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,qe.default)(
/* translators: 1: image width. 2: image height. */
(0,d.__)("%1$d x %2$d pixels","web-stories"),l,i)),c.createElement(bv,{value:b,"aria-label":S?vv:wv,type:"text",placeholder:S?vv:wv,onChange:w}),c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},S?Tv:Sv))))},Iv=(0,p.default)(j_).withConfig({displayName:"dropDownMenu__MoreButton",componentId:"sc-1eq0xdj-0"})(["top:4px;right:4px;"]),Av=p.default.div.withConfig({displayName:"dropDownMenu__DropDownContainer",componentId:"sc-1eq0xdj-1"})(["margin-top:10px;"]),xv=p.default.div.withConfig({displayName:"dropDownMenu__MenuContainer",componentId:"sc-1eq0xdj-2"})(["z-index:1;"]),kv=(0,p.css)(["min-width:160px;margin-top:0;li{display:block;}"]),Ov="edit",Nv="delete";const Pv=function DropDownMenu(e){let{resource:t,display:n,isMenuOpen:r,onMenuOpen:a,onMenuCancelled:o,onMenuSelected:l,setParentActive:i=sv.noop}=e;const s=[{group:[{label:(0,d.__)("Edit meta data","web-stories"),value:Ov},{label:(0,d.__)("Delete from library","web-stories"),value:Nv}]}],[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),h=(0,u.useRef)(),E=(0,u.useCallback)((()=>{o(),h.current?.focus(),i()}),[o,i]),{canTranscodeResource:b}=yi((e=>{let{state:{canTranscodeResource:t}}=e;return{canTranscodeResource:t}})),y=(0,u.useCallback)((()=>{m(!1),E()}),[m,E]),_=(0,u.useCallback)((()=>{g(!1),E()}),[g,E]);Xf({ref:h.current||null},[],3);const v=rs();(0,tr.useKeyDownEffect)(h.current||null,"tab",v,[v]);const w=(0,u.useMemo)((()=>`list-${(0,he.default)()}`),[]),T=(0,u.useMemo)((()=>`button-${(0,he.default)()}`),[]);return b(t)&&c.createElement(xv,null,c.createElement(Iv,{ref:h,onClick:a,"aria-label":(0,d.__)("More","web-stories"),"aria-pressed":r,"aria-haspopup":!0,"aria-expanded":r,"aria-owns":r?w:null,id:T,$display:n,tabIndex:n||r?0:-1},c.createElement(dv,null)),(n||r)&&c.createElement(Zp.Popup,{anchor:h,placement:Ed.PLACEMENT.BOTTOM_START,isOpen:r},c.createElement(Av,null,c.createElement(wh.Menu,{parentId:T,listId:w,onMenuItemClick:(e,t)=>{switch(l(),t){case Ov:g(!0);break;case Nv:m(!0)}},options:s,onDismissMenu:E,hasMenuRole:!0,menuStylesOverride:kv}))),p&&c.createElement(uv,{mediaId:t.id,type:t.type,onClose:y}),f&&c.createElement(Cv,{resource:t,onClose:_}))},Rv=(0,p.default)(Ke.Text).withConfig({displayName:"attribution__StyledText",componentId:"sc-dg18hp-0"})(["color:",";"],(e=>{let{theme:t,active:n}=e;return(0,Xe.rgba)(t.colors.standard.white,n?1:.6)})),Mv=p.default.a.withConfig({displayName:"attribution__Link",componentId:"sc-dg18hp-1"})(["display:block;position:absolute;left:0;bottom:0;width:100%;padding:8px;background-color:",";text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-decoration:none;"],(e=>{let{theme:t,active:n}=e;return(0,Xe.rgba)(t.colors.bg.primary,n?.8:.6)})),Lv=e=>{let{author:t,url:n}=e;const[r,a]=(0,u.useState)(!1),o=()=>a(!0),l=()=>a(!1);return c.createElement(Mv,{title:t,active:r,onPointerEnter:o,onFocus:o,onPointerLeave:l,onBlur:l,href:n,target:"_blank",rel:"noreferrer"},c.createElement(Rv,{forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},t))};var Dv,Bv,Fv,Hv,Uv,zv=n(33485);function Gv(){return Gv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gv.apply(this,arguments)}const SvgMuted=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Gv({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Dv||(Dv=c.createElement("mask",{id:"a",fill:"currentColor"},c.createElement("path",{fillRule:"evenodd",d:"M6 8.6c.2-.3.5-.3.7-.1L26.1 23c.2.2.3.5.1.7-.1.2-.5.3-.7.1L6.1 9.3a.5.5 0 0 1 0-.7Z",clipRule:"evenodd"}),c.createElement("path",{d:"m11.7 12.2-.5.5H6.6c-.4 0-.8.3-.8.8v5.1c0 .5.4.8.8.8h4.6l4.4 4.5c.5.5 1.3.1 1.3-.6v-7.2l-1-.7v7.4l-4-4.1a.8.8 0 0 0-.7-.3H6.8v-4.7h4.4c.3 0 .5-.1.6-.3l.7-.6-.8-.6Zm4.3 1.9V9.3L13.1 12l-.8-.6 3.2-3.2a.8.8 0 0 1 1.3.6v6l-1-.7Zm4.6 4.7-.7.5c-.2 0-.3.2-.3.5s.3.6.7.4c.4-.2.8-.4 1-.7l-.7-.7Zm1.4-.1-.7-.6a3.7 3.7 0 0 0-1.4-5.4.6.6 0 0 1-.3-.5c0-.4.3-.6.7-.5a4.7 4.7 0 0 1 1.8 7Zm1.4 2.3c-.5.6-1.2 1-1.9 1.4-.1.1-.3.3-.3.5 0 .4.4.6.8.4.8-.4 1.6-1 2.2-1.7l-.8-.6Z"}),c.createElement("path",{d:"m24.8 20.8-.8-.6a7.3 7.3 0 0 0-2.5-10.5.5.5 0 0 1-.3-.5c0-.4.4-.6.8-.4a8.3 8.3 0 0 1 2.8 12Z"}))),Bv||(Bv=c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 8.6c.2-.3.5-.3.7-.1L26.1 23c.2.2.3.5.1.7-.1.2-.5.3-.7.1L6.1 9.3a.5.5 0 0 1 0-.7Z",clipRule:"evenodd"})),Fv||(Fv=c.createElement("path",{fill:"currentColor",d:"m11.7 12.2-.5.5H6.6c-.4 0-.8.3-.8.8v5.1c0 .5.4.8.8.8h4.6l4.4 4.5c.5.5 1.3.1 1.3-.6v-7.2l-1-.7v7.4l-4-4.1a.8.8 0 0 0-.7-.3H6.8v-4.7h4.4c.3 0 .5-.1.6-.3l.7-.6-.8-.6Zm4.3 1.9V9.3L13.1 12l-.8-.6 3.2-3.2a.8.8 0 0 1 1.3.6v6l-1-.7Zm4.6 4.7-.7.5c-.2 0-.3.2-.3.5s.3.6.7.4c.4-.2.8-.4 1-.7l-.7-.7Zm1.4-.1-.7-.6a3.7 3.7 0 0 0-1.4-5.4.6.6 0 0 1-.3-.5c0-.4.3-.6.7-.5a4.7 4.7 0 0 1 1.8 7Zm1.4 2.3c-.5.6-1.2 1-1.9 1.4-.1.1-.3.3-.3.5 0 .4.4.6.8.4.8-.4 1.6-1 2.2-1.7l-.8-.6Z"})),Hv||(Hv=c.createElement("path",{fill:"currentColor",d:"m24.8 20.8-.8-.6a7.3 7.3 0 0 0-2.5-10.5.5.5 0 0 1-.3-.5c0-.4.4-.6.8-.4a8.3 8.3 0 0 1 2.8 12Z"})),Uv||(Uv=c.createElement("path",{fill:"currentColor",d:"m6.7 8.5-.6.8.6-.8ZM26.1 23l-.6.8.6-.8Zm-.6.8.6-.8-.6.8ZM6.1 9.3l-.6.8.6-.8Zm5.6 2.9.6-.8-.7-.6-.6.6.7.8Zm-.5.5v1h.4l.3-.3-.7-.7Zm0 6.7.7-.7-.3-.3h-.4v1Zm4.4 4.5-.7.7.7-.7Zm1.3-7.8h1v-.5l-.4-.3-.6.8Zm-1-.7.6-.8-1.6-1.2v2h1Zm0 7.4-.7.7 1.7 1.7v-2.4h-1Zm-4-4.1-.8.7.7-.7Zm-5.1-.3h-1v1h1v-1Zm0-4.7v-1h-1v1h1Zm5.7-1 .7.8.8-.8-1-.7-.5.8Zm3.4-3.4h1V6.9l-1.7 1.7.7.7Zm0 4.8h-1v.5l.4.3.6-.8Zm-2.7-2-.6.7.7.6.6-.6-.7-.8Zm-.8-.7-.7-.7-.8.9.9.6.6-.8Zm3.2-3.2-.7-.7.7.7Zm1.3 6.7-.6.8 1.6 1.2v-2h-1Zm3.7 4 .6-.9-.6-.4-.7.5.7.7Zm-.7.4.5.8-.5-.8Zm.4 1 .4.8-.4-.9Zm1-.8.8.7.9-.8-1-.7-.6.8Zm0-1.4-.8-.6-.6.8.8.6.6-.8Zm.8.6-.6.8.8.6.6-.8-.8-.6Zm-2.2-6-.4.9.4-1Zm.4-1 .4-.9-.4 1Zm1.2 10.7-.5-.8.5.8Zm1.9-1.4.6-.8-.7-.6-.6.7.7.7ZM22 23.3l.4 1-.4-1Zm2.2-1.7.8.6.7-.8-.9-.6-.6.8Zm-.2-1.4-.8-.6-.5.8.7.6.6-.8Zm.8.6-.6.8.9.6.5-.9-.8-.5ZM21.5 9.7l.5-1-.5 1Zm.5-1-.5 1 .5-1Zm-14.7-1c-.6-.5-1.6-.4-2 .3l1.5 1.2c-.1.2-.4.2-.7 0l1.2-1.5Zm19.4 14.5L7.3 7.7 6.1 9.3l19.4 14.5 1.2-1.6Zm.3 2c.5-.6.4-1.5-.3-2l-1.2 1.6a.5.5 0 0 1 0-.7l1.5 1.2Zm-2 .4c.6.5 1.5.3 2-.3L25.4 23c.2-.2.5-.3.7-.1L25 24.6ZM5.4 10.1 25 24.6l1.2-1.6L6.7 8.5 5.5 10ZM5.2 8c-.4.6-.3 1.6.3 2l1.2-1.5c.3.1.3.5.1.7L5.2 8Zm5.8 3.4-.5.5 1.4 1.5.5-.5-1.4-1.5Zm.2.3H6.6v2h4.6v-2Zm-4.6 0c-1 0-1.8.8-1.8 1.8h2s0 .2-.2.2v-2Zm-1.8 1.8v5.1h2v-5.1h-2Zm0 5.1c0 1 .8 1.8 1.8 1.8v-2l.2.2h-2Zm1.8 1.8h4.6v-2H6.6v2Zm3.9-.2 4.4 4.4 1.4-1.4-4.4-4.5-1.4 1.5Zm4.4 4.4c1.1 1.1 3 .3 3-1.3h-2a.2.2 0 0 1 .2-.2h.2l-1.4 1.5Zm3-1.3v-7.2h-2v7.2h2Zm-.4-8-1-.7-1.2 1.6 1 .7 1.2-1.6Zm-2.6 0v7.5h2v-7.4h-2Zm1.8 6.8L12.5 18l-1.4 1.4 4.1 4.1 1.5-1.4ZM12.5 18c-.3-.4-.8-.6-1.3-.6v2l1.3-1.4Zm-1.3-.6H6.8v2h4.4v-2Zm-3.4 1v-4.7h-2v4.7h2Zm-1-3.7h4.4v-2H6.8v2Zm4.4 0c.5 0 1-.2 1.3-.6l-1.4-1.4h.1v2Zm1.3-.6.7-.6-1.4-1.4-.7.6 1.4 1.4Zm.6-2.1-.8-.6L11 13l.8.6L13 12Zm1.8-2.7V14h2V9.3h-2Zm-1 3.5 2.8-2.8-1.5-1.4-2.7 2.7 1.4 1.5Zm-2.1-.6.8.6 1.2-1.6-.8-.6-1.2 1.6Zm3-4.7-3.1 3.2 1.4 1.4L16.3 9l-1.4-1.4ZM18 8.8c0-1.6-1.9-2.4-3-1.3L16.3 9a.2.2 0 0 1-.2 0H16v-.1h2Zm0 6v-6h-2v6h2Zm-2.6.1 1 .8 1.2-1.6-1-.8-1.2 1.6Zm4.6 3.2-.4.3.9 1.7.8-.5-1.3-1.5Zm-.4.3c-.5.2-.9.7-.9 1.4h2c0 .2-.1.3-.2.3l-1-1.7Zm-.9 1.4c0 1 1 1.8 2 1.3l-.8-1.8h.6l.2.5h-2Zm2 1.3c.6-.2 1-.5 1.5-.9l-1.4-1.5-.9.6.9 1.8Zm1.4-2.4-.8-.7-1.2 1.6.8.7 1.2-1.6Zm-1.3.2.8.6 1.2-1.6-.8-.6-1.2 1.6Zm.3-3c0 .6-.2 1.2-.5 1.6l1.6 1.2c.5-.8.9-1.7.9-2.7h-2Zm-1.5-2.3c.9.4 1.5 1.3 1.5 2.4h2c0-1.9-1-3.4-2.6-4.2l-1 1.8Zm-.9-1.4c0 .6.4 1.1.9 1.4l.9-1.8.2.4h-2Zm2-1.4c-1-.5-2 .4-2 1.4h2c0 .1 0 .3-.2.4h-.6l.9-1.8ZM24 16c0-2.3-1.4-4.3-3.3-5.2l-.9 1.8c1.3.6 2.2 1.9 2.2 3.4h2Zm-1.1 3.3c.7-1 1-2 1-3.3h-2c0 .8-.2 1.5-.6 2.1l1.6 1.2Zm-.9 4c.8-.4 1.5-1 2.1-1.7l-1.4-1.3c-.5.5-1 1-1.7 1.3l1 1.7Zm.2-.4c0 .2 0 .3-.2.4l-1-1.7c-.4.2-.8.7-.8 1.3h2Zm-.7-.4h.5c.2 0 .2.2.2.4h-2c0 1 1.2 1.9 2.2 1.3l-1-1.7Zm2-1.6a10 10 0 0 1-2 1.6l1 1.7c.9-.5 1.7-1.2 2.5-2L23.5 21Zm1.3-.1-.8-.6-1.2 1.6.8.6 1.2-1.6Zm-1.4.2.8.6 1.2-1.6-.8-.6-1.2 1.6Zm1.4-.3c1-1.3 1.5-3 1.5-4.6h-2a6 6 0 0 1-1.1 3.5l1.6 1.1Zm1.5-4.6c0-3.2-1.7-5.9-4.3-7.3l-1 1.7c2 1.1 3.3 3.2 3.3 5.6h2ZM22 8.8l.2.4h-2c0 .6.4 1 .8 1.3l1-1.7Zm.2.4c0 .2 0 .3-.2.4h-.5l1-1.7c-1.1-.6-2.3.2-2.3 1.3h2Zm-.7.4a7.3 7.3 0 0 1 3.8 6.5h2c0-3.6-2-6.7-4.9-8.2l-1 1.7Zm3.8 6.5c0 1.5-.5 3-1.3 4.1l1.6 1.1c1-1.5 1.7-3.3 1.7-5.2h-2Z",mask:"url(#a)"})))},jv=(0,c.memo)(SvgMuted),Yv={...A.ELEMENT_TYPES,MULTIPLE:"multiple",NONE:"none"};var Zv=n(98448);const Wv=(0,u.createContext)({state:{},actions:{}});const Vv=function(e){return(0,u.useContextSelector)(Wv,e??u.identity)};const $v=function FloatingMenuProvider(e){let{handleDismiss:t,children:n}=e;const r={state:{},actions:{handleDismiss:t}};return c.createElement(Wv.Provider,{value:r},n)};var qv;function Xv(){return Xv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xv.apply(this,arguments)}const SvgBorderBox=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Xv({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,qv||(qv=c.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M10 10h12v12H10z"})))},Kv=(0,c.memo)(SvgBorderBox),Qv={left:0,right:0,top:0,bottom:0,lockedWidth:!0,color:(0,Xp.default)(0,0,0)};function Jv(){return Jv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jv.apply(this,arguments)}const ew=function FloatingColor(e){const{hasInputs:t,hasEyedropper:n,allowsGradient:r=!0}=e,a=function(e,t){return(e?178:60)+(t?38:0)}(t,n);return c.createElement(dh,Jv({width:a,maxHeight:362,pickerPlacement:Ed.PLACEMENT.TOP_START,isInDesignMenu:!0,shouldCloseOnSelection:!0,allowsGradient:r,allowsSavedColors:!0,allowsSavedColorDeletion:!1,pickerHasEyedropper:!n},e))};var tw=n(87098);function nw(){return nw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nw.apply(this,arguments)}const rw=p.default.div.withConfig({displayName:"icon__IconWrapper",componentId:"sc-scm7dy-0"})(["width:32px;height:32px;"]);const aw=function(e){let{children:t,title:n,className:r="",...a}=e;return c.createElement(c.Fragment,null,c.createElement(tw.VisuallyHidden,null,n),c.createElement(rw,nw({className:r},a),t))};var ow=n(51537);function lw(){return lw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lw.apply(this,arguments)}const iw=(0,u.forwardRef)((function ToggleButton(e,t){let{isToggled:n,children:r,...a}=e;const o="boolean"==typeof n?{type:n?f.BUTTON_TYPES.SECONDARY:f.BUTTON_TYPES.TERTIARY,"aria-pressed":n}:{};return c.createElement(ow.default,lw({ref:t},o,a),r)}));function sw(){return sw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sw.apply(this,arguments)}const cw=(0,u.memo)((0,u.forwardRef)((function IconButton(e,t){let{Icon:n,title:r,...a}=e;return c.createElement(bd.Tooltip,{placement:Ed.PLACEMENT.BOTTOM,title:r},c.createElement(iw,sw({ref:t},a),c.createElement(aw,{title:r},c.createElement(n,null))))}))),dw=cw,uw=(0,p.default)(NumericInput).withConfig({displayName:"input__Input",componentId:"sc-79zl03-0"})(["width:70px;flex:0 0 70px;"]);var pw=n(77568);const mw=pw.default;function fw(){return fw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fw.apply(this,arguments)}const gw=(0,u.memo)((function TextButton(e){let{text:t,...n}=e;return c.createElement(ow.default,fw({forcePadding:!0},n),t)}));const hw=function(e){return Sa((t=>{let{state:{selectedElements:n}}=t;return Bn(n[0],e)}))};function Ew(e,t){return Object.fromEntries(Object.keys(t).map((n=>{const r=e[n]===Ce,a=void 0!==e[n]&&!function(e,t){const n=e&&"object"==typeof e&&(e.type||e.color),r=t&&"object"==typeof t&&(t.type||t.color);return n&&r?(0,eg.default)(e,t):e===t}(e[n],t[n]);return r||a?[n,Ce]:[n,t[n]]})))}const bw=function(e,t){const{hasCurrentEditor:n,selectionInfo:r,selectionActions:a}=(0,Sr.useRichText)((e=>{let{state:t,actions:n}=e;return{hasCurrentEditor:t.hasCurrentEditor,selectionInfo:t.selectionInfo,selectionActions:n.selectionActions}})),{clearEditing:o}=xs((e=>{let{actions:{clearEditing:t}}=e;return{clearEditing:t}})),l=(0,u.useMemo)((()=>n?r:e.map((e=>{let{content:t}=e;return t})).map(Sr.getHTMLInfo).reduce(Ew,{})),[n,r,e]),i=(0,u.useCallback)((function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t((t=>{let{content:n}=t;return{content:e(n,...r)}}),!0)}),[t]),s=(0,u.useRef)(null),c=(0,u.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.current=t}),[s]);(0,u.useEffect)((()=>{const e=s.current;e&&(i(...e),s.current=null)}),[e,s,i]);const d=(0,u.useMemo)((()=>{const e=(0,Sr.getHTMLFormatters)();return n?{handleClickBold:()=>a.toggleBoldInSelection(),handleSelectFontWeight:a.setFontWeightInSelection,handleClickItalic:a.toggleItalicInSelection,handleClickUnderline:a.toggleUnderlineInSelection,handleClickUppercase:a.toggleUppercaseInSelection,handleSetLetterSpacing:a.setLetterSpacingInSelection,handleSetColor:a.setColorInSelection,handleResetFontWeight:async t=>{await o(),c(e.setFontWeight,t)}}:{handleClickBold:t=>i(e.toggleBold,t),handleSelectFontWeight:t=>i(e.setFontWeight,t),handleClickItalic:t=>i(e.toggleItalic,t),handleClickUnderline:t=>i(e.toggleUnderline,t),handleClickUppercase:t=>i(e.toggleUppercase,t),handleSetLetterSpacing:t=>i(e.setLetterSpacing,t),handleSetColor:t=>i(e.setColor,t),handleResetFontWeight:t=>i(e.setFontWeight,t)}}),[n,a,i,o,c]),p=(0,u.useCallback)((()=>e.filter((e=>{let{type:t}=e;return"text"===t})).length>0),[e]);return(0,tr.useGlobalKeyDownEffect)({key:["mod+b","mod+u","mod+i"]},(e=>{let{key:t}=e;if(p)switch(t){case"b":d.handleClickBold();break;case"i":d.handleClickItalic();break;case"u":d.handleClickUnderline()}}),[d,p]),{textInfo:l,handlers:d}};const yw=function(e,t,n){const r="function"==typeof t?t(e):t;if(!r)return{};let a=Object.keys(r);return a=a.filter((e=>r[e]!==Ce)),n&&(a=a.filter((e=>""!==r[e]))),0===a.length?{}:Object.fromEntries(a.map((e=>[e,r[e]])))};const _w=function(e){let{currentValue:t,handler:n,eventName:r}=e;const{content:a}=hw(["content"]),o=Sa((e=>e.actions.updateSelectedElements)),l=(0,u.useCallback)((e=>{(0,L.trackEvent)("floating_menu",{name:r,element:"text"}),o({properties:t=>yw(t,e,!0)})}),[o,r]),{textInfo:i,handlers:s}=bw([{content:a,type:"text"}],l);return{isToggled:i[t],toggle:()=>{(0,s[n])(!i[t])}}},vw=p.default.div.withConfig({displayName:"borderWidthAndColor__Container",componentId:"sc-1qijom4-0"})(["display:flex;align-items:center;"]),ww=p.default.div.withConfig({displayName:"borderWidthAndColor__Dash",componentId:"sc-1qijom4-1"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}));const Tw={color:{r:0,g:0,b:0}};const Sw=function BorderWidthAndColor(){const{border:e=Qv,mask:t,type:n}=hw(["border","mask","type"]),r=Sa((e=>e.actions.updateSelectedElements)),a=e.left===e.right&&e.left===e.top&&e.left===e.bottom;if(!e.lockedWidth&&!a)return null;const o=(0,Ln.canSupportMultiBorder)({mask:t}),l=function(e){if(!e)return!1;const{left:t,right:n,top:r,bottom:a}=e;return Boolean(t||n||r||a)}(e);return c.createElement(vw,null,c.createElement(uw,{suffix:c.createElement(Kv,null),value:e.left||0,"aria-label":(0,d.__)("Border width","web-stories"),onChange:(t,a)=>(t=>{(0,L.trackEvent)("floating_menu",{name:"set_border_width",element:n}),r({properties:n=>{let{border:r}=n;return{border:{locked:!0,color:e.color,...r,left:t,right:t,top:t,bottom:t}}}})})(a)}),l&&c.createElement(c.Fragment,null,c.createElement(ww,null),c.createElement(ew,{label:(0,d.__)("Border color","web-stories"),value:e.color||Tw,onChange:e=>{(0,L.trackEvent)("floating_menu",{name:"set_border_color",element:n}),r({properties:t=>{let{border:n}=t;return{border:{...n,color:e}}}})},hasInputs:!1,hasEyedropper:!1,allowsOpacity:o,allowsGradient:!1,pickerHasEyedropper:!1,allowsSavedColors:!1})))};var Cw;function Iw(){return Iw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iw.apply(this,arguments)}const SvgCorner=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Iw({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Cw||(Cw=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 10a.5.5 0 0 1 .5.5v6a5.5 5.5 0 0 0 5.5 5.5h6a.5.5 0 0 1 0 1h-6A6.5 6.5 0 0 1 9 16.5v-6a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},Aw=(0,c.memo)(SvgCorner),xw=(0,p.css)(["position:relative;:focus-within{z-index:1;",";}"],(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),kw=(0,p.css)(["width:29px;height:29px;"]),Ow=(0,p.default)(NumericInput).withConfig({displayName:"stackableInput__StackableInput",componentId:"sc-bgp531-0"})(["svg{","}& > div{border-radius:0;margin-left:-1px;padding:2px 7px 2px 12px;",";}"],kw,xw),Nw=p.default.div.withConfig({displayName:"stackableGroup__StackableContainer",componentId:"sc-ogfpu5-0"})(["display:flex;max-width:",";& > ","{border-radius:0;&:first-of-type > div{border-top-left-radius:4px;border-bottom-left-radius:4px;margin-left:0;}&:last-of-type > div{border-top-right-radius:4px;border-bottom-right-radius:4px;}}"],(e=>{let{locked:t}=e;return t?"106px":"none"}),Ow);const Pw=function StackableGroup(e){let{children:t,locked:n,className:r}=e;return c.createElement(Nw,{locked:n,className:r},t)},Rw={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,locked:!0},Mw=p.default.div.withConfig({displayName:"radius__FlexContainer",componentId:"sc-10ryvqs-0"})(["display:flex;"]),Lw=p.default.div.withConfig({displayName:"radius__LockContainer",componentId:"sc-10ryvqs-1"})(["position:relative;display:flex;align-items:center;width:32px;margin-left:8px;"]),Dw=(0,p.default)(LockToggle).withConfig({displayName:"radius__StyledLockToggle",componentId:"sc-10ryvqs-2"})(["",";"],Mu),Bw=(0,p.default)(Aw).withConfig({displayName:"radius__TopLeft",componentId:"sc-10ryvqs-3"})(["transform:rotate(90deg);"]),Fw=(0,p.default)(Aw).withConfig({displayName:"radius__TopRight",componentId:"sc-10ryvqs-4"})(["transform:rotate(180deg);"]),Hw=(0,p.default)(Aw).withConfig({displayName:"radius__BottomRight",componentId:"sc-10ryvqs-5"})(["transform:rotate(270deg);"]);const Uw=function RadiusControls(e){let{selectedElements:t,pushUpdateForObject:n}=e;const r=zb(t,"borderRadius",Rw),a=t.every((e=>(0,Ln.canSupportMultiBorder)(e))),o=!0===r.locked,l=(0,u.useCallback)(((e,t)=>{n("borderRadius",o?{topLeft:t,topRight:t,bottomRight:t,bottomLeft:t}:{[e]:t},Rw,!0)}),[n,o]),i=(0,u.useCallback)((e=>{const t=e?{locked:e,topLeft:r.topLeft,topRight:r.topLeft,bottomRight:r.topLeft,bottomLeft:r.topLeft}:{locked:e};n("borderRadius",t,Rw,!0)}),[n,r]);if(!a)return null;const s=o?(0,d.__)("Corner Radius","web-stories"):(0,d.__)("Top left corner radius","web-stories");return c.createElement(Mw,null,c.createElement(Pw,{locked:o},c.createElement(Ow,{suffix:c.createElement(Bw,null),value:r.topLeft===Ce?"":r.topLeft,"aria-label":s,onChange:(e,t)=>l("topLeft",t),placeholder:r.topLeft===Ce?Ie:"",isIndeterminate:r.topLeft===Ce}),!o&&c.createElement(c.Fragment,null,c.createElement(Ow,{suffix:c.createElement(Fw,null),value:r.topRight===Ce?"":r.topRight,"aria-label":(0,d.__)("Top right corner radius","web-stories"),onChange:(e,t)=>l("topRight",t),placeholder:r.topRight===Ce?Ie:"",isIndeterminate:r.topRight===Ce}),c.createElement(Ow,{value:r.bottomLeft===Ce?"":r.bottomLeft,"aria-label":(0,d.__)("Bottom left corner radius","web-stories"),onChange:(e,t)=>l("bottomLeft",t),placeholder:r.bottomLeft===Ce?Ie:"",suffix:c.createElement(Aw,null),isIndeterminate:r.bottomLeft===Ce}),c.createElement(Ow,{value:r.bottomRight===Ce?"":r.bottomRight,"aria-label":(0,d.__)("Bottom right corner radius","web-stories"),onChange:(e,t)=>l("bottomRight",t),placeholder:r.bottomRight===Ce?Ie:"",suffix:c.createElement(Hw,null),isIndeterminate:r.bottomRight===Ce}))),c.createElement(Lw,null,c.createElement(Tooltip,{title:(0,d.__)("Toggle consistent corner radius","web-stories"),key:r.locked.toString()},c.createElement(Dw,{isLocked:r.locked,onClick:()=>i(!r.locked),"aria-label":(0,d.__)("Toggle consistent corner radius","web-stories")}))))};const zw=function BorderRadius(){const{borderRadius:e=Rw,mask:t,type:n}=hw(["borderRadius","mask","type"]),r=Sa((e=>e.actions.updateSelectedElements)),a=(0,Ln.canSupportMultiBorder)({mask:t}),o=e.topLeft===e.topRight&&e.topLeft===e.bottomLeft&&e.topLeft===e.bottomRight;return a&&(e.locked||o)?c.createElement(c.Fragment,null,c.createElement(uw,{suffix:c.createElement(Aw,null),value:e.topLeft,"aria-label":(0,d.__)("Corner Radius","web-stories"),onChange:(e,t)=>(e=>{(0,L.trackEvent)("floating_menu",{name:"set_border_radius",element:n}),r({properties:{borderRadius:{locked:!0,topLeft:e,topRight:e,bottomRight:e,bottomLeft:e}}})})(t)}),c.createElement(mw,null)):null};const Gw=function Dismiss(e){let{isMultiple:t}=e;const{type:n}=hw(["type"]),{handleDismiss:r}=Vv((e=>{let{actions:{handleDismiss:t}}=e;return{handleDismiss:t}}));return c.createElement(dw,{Icon:Nu.default,title:(0,d.__)("Dismiss menu","web-stories"),onClick:()=>{(0,L.trackEvent)("floating_menu",{name:"dismiss_menu",element:t?"multiple":n}),r()}})};var jw,Yw;function Zw(){return Zw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zw.apply(this,arguments)}const SvgDistributeHorizontal=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Zw({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jw||(jw=c.createElement("path",{d:"M21 8.5v15M11 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Yw||(Yw=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 12a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Ww=(0,c.memo)(SvgDistributeHorizontal);var Vw,$w;function qw(){return qw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qw.apply(this,arguments)}const SvgDistributeVertical=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",qw({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Vw||(Vw=c.createElement("path",{d:"M8.5 11h15M8.5 21h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),$w||($w=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 14a1.5 1.5 0 0 0-1.5 1.5v1a1.5 1.5 0 0 0 1.5 1.5h5a1.5 1.5 0 0 0 1.5-1.5v-1a1.5 1.5 0 0 0-1.5-1.5h-5Z",fill:"currentColor"})))},Xw=(0,c.memo)(SvgDistributeVertical);var Kw,Qw;function Jw(){return Jw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jw.apply(this,arguments)}const SvgAlignLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Jw({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Kw||(Kw=c.createElement("path",{d:"M11 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Qw||(Qw=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 14a1.5 1.5 0 0 0-1.5 1.5v1A1.5 1.5 0 0 0 15 18h5a1.5 1.5 0 0 0 1.5-1.5v-1A1.5 1.5 0 0 0 20 14h-5Z",fill:"currentColor"})))},eT=(0,c.memo)(SvgAlignLeft);var tT,nT;function rT(){return rT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rT.apply(this,arguments)}const SvgAlignCenter=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",rT({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,tT||(tT=c.createElement("path",{d:"M16 8.5v3M16 20.5v3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),nT||(nT=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 14a1.5 1.5 0 0 0-1.5 1.5v1a1.5 1.5 0 0 0 1.5 1.5h5a1.5 1.5 0 0 0 1.5-1.5v-1a1.5 1.5 0 0 0-1.5-1.5h-5Z",fill:"currentColor"})))},aT=(0,c.memo)(SvgAlignCenter);var oT,lT;function iT(){return iT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iT.apply(this,arguments)}const SvgAlignRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",iT({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,oT||(oT=c.createElement("path",{d:"M21 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),lT||(lT=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 14a1.5 1.5 0 0 0-1.5 1.5v1A1.5 1.5 0 0 0 12 18h5a1.5 1.5 0 0 0 1.5-1.5v-1A1.5 1.5 0 0 0 17 14h-5Z",fill:"currentColor"})))},sT=(0,c.memo)(SvgAlignRight);var cT,dT;function uT(){return uT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uT.apply(this,arguments)}const SvgAlignTop=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",uT({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,cT||(cT=c.createElement("path",{d:"M8.5 11h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),dT||(dT=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 13.5A1.5 1.5 0 0 0 14 15v5a1.5 1.5 0 0 0 1.5 1.5h1A1.5 1.5 0 0 0 18 20v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},pT=(0,c.memo)(SvgAlignTop);var mT,fT;function gT(){return gT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gT.apply(this,arguments)}const SvgAlignMiddle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",gT({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,mT||(mT=c.createElement("path",{d:"M8.5 16h3M20.5 16h3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),fT||(fT=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 12a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},hT=(0,c.memo)(SvgAlignMiddle);var ET,bT;function yT(){return yT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yT.apply(this,arguments)}const SvgAlignBottom=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yT({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ET||(ET=c.createElement("path",{d:"M8.5 21h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),bT||(bT=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 10.5A1.5 1.5 0 0 0 14 12v5a1.5 1.5 0 0 0 1.5 1.5h1A1.5 1.5 0 0 0 18 17v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},_T=(0,c.memo)(SvgAlignBottom),vT={startX:0,startY:0,endX:ae.PAGE_WIDTH,endY:ae.PAGE_HEIGHT,width:ae.PAGE_WIDTH,height:ae.PAGE_HEIGHT},wT="left",TT="right",ST="top",CT="bottom";const IT=function(e){let{selectedElements:t,updateElements:n,isFloatingMenu:r}=e;const a=t.length>2,o=(0,u.useMemo)((()=>t.map((e=>{const{id:t,x:n,y:r,width:a,height:o,rotationAngle:l}=e;let i=n,s=r,c=a,d=o;if(l){const e=(0,ws.calcRotatedObjectPositionAndSize)(l,n,r,a,o);i=e.x,s=e.y,c=e.width,d=e.height}return{id:t,x:n,y:r,width:a,height:o,frameX:i,frameY:s,frameWidth:c,frameHeight:d}}))),[t]),l=1===t.length?vT:(0,ws.default)(t),i=e=>{(0,L.trackEvent)(r?"floating_menu":"design_panel",{name:`set_alignment_${e}`,element:"multiple"})},s=e=>{i(e),n((t=>{const{id:n}=t,r=o.find((e=>e.id===n)),{width:a=0,height:i=0,frameWidth:s=0,frameHeight:c=0}=r||{},d=e===wT||e===TT?(s-a)/2:(c-i)/2;return e===wT||e===TT?{x:e===wT?l.startX+d:l.endX-a-d}:{y:e===ST?l.startY+d:l.endY-i-d}}))};return{isDistributionEnabled:a,handleAlignLeft:()=>s(wT),handleAlignCenter:()=>{i("center");const e=(l.endX+l.startX)/2;n((t=>{const{width:n}=t;return{x:e-n/2}}))},handleAlignRight:()=>s(TT),handleAlignTop:()=>s(ST),handleAlignMiddle:()=>{i("middle");const e=(l.endY+l.startY)/2;n((t=>{const{height:n}=t;return{y:e-n/2}}))},handleAlignBottom:()=>s(CT),handleHorizontalDistribution:()=>{i("horizontal_distribution");const e=[...o];e.sort(((e,t)=>(e.frameX+e.frameWidth)/2-(t.frameX+t.frameWidth)/2));const t=e.reduce(((e,t)=>e+t.frameWidth),0),r=l.width-t,a=(0,Pr.dataPixels)(r/(e.length-1)),s={};let c=0;e.forEach(((t,n)=>{const{id:r,x:o,width:l,frameWidth:i}=t;0===n||n===e.length-1?(s[r]={x:o},c=o):s[r]={x:c+(i-l)/2},c+=i+a})),n((e=>{let{id:t}=e;return s[t]}))},handleVerticalDistribution:()=>{i("vertical_distribution");const e=[...o];e.sort(((e,t)=>(e.frameY+e.frameHeight)/2-(t.frameY+t.frameHeight)/2));const t=e.reduce(((e,t)=>e+t.frameHeight),0),r=l.height-t,a=(0,Pr.dataPixels)(r/(e.length-1)),s={};let c=0;e.forEach(((t,n)=>{const{id:r,y:o,height:l,frameHeight:i}=t;0===n||n===e.length-1?(s[r]={y:o},c=o):s[r]={y:c+(i-l)/2},c+=i+a})),n((e=>{let{id:t}=e;return s[t]}))}}};const AT=function ElementAlignment(){const{selectedElements:e,updateSelectedElements:t}=Sa((e=>{let{state:{selectedElements:t},actions:{updateSelectedElements:n}}=e;return{selectedElements:t,updateSelectedElements:n}})),{isDistributionEnabled:n,handleAlignLeft:r,handleAlignCenter:a,handleAlignRight:o,handleAlignTop:l,handleAlignMiddle:i,handleAlignBottom:s,handleHorizontalDistribution:u,handleVerticalDistribution:p}=IT({selectedElements:e,updateElements:e=>t({properties:e}),isFloatingMenu:!0});return c.createElement(c.Fragment,null,n&&c.createElement(c.Fragment,null,c.createElement(dw,{Icon:Ww,title:(0,d.__)("Distribute horizontally","web-stories"),onClick:u}),c.createElement(dw,{Icon:Xw,title:(0,d.__)("Distribute vertically","web-stories"),onClick:p}),c.createElement(mw,null)),c.createElement(dw,{Icon:eT,title:(0,d.__)("Align left","web-stories"),onClick:r}),c.createElement(dw,{Icon:aT,title:(0,d.__)("Align center","web-stories"),onClick:a}),c.createElement(dw,{Icon:sT,title:(0,d.__)("Align right","web-stories"),onClick:o}),c.createElement(dw,{Icon:pT,title:(0,d.__)("Align top","web-stories"),onClick:l}),c.createElement(dw,{Icon:hT,title:(0,d.__)("Align vertical center","web-stories"),onClick:i}),c.createElement(dw,{Icon:_T,title:(0,d.__)("Align bottom","web-stories"),onClick:s}))};const xT=function(e){const{flip:t,type:n}=hw(["flip","type"]),r=Sa((e=>e.actions.updateSelectedElements));return{[e]:t[e]||!1,toggle:()=>{(0,L.trackEvent)("floating_menu",{name:`set_flip_${e}`,element:n}),r({properties:t=>({flip:{...t.flip,[e]:!t.flip[e]||!1}})})}}};const kT=function FlipHorizontal(){const{horizontal:e,toggle:t}=xT("horizontal");return c.createElement(dw,{Icon:Zu,title:(0,d.__)("Flip horizontally","web-stories"),onClick:t,isToggled:e})};const OT=function FlipVertical(){const{vertical:e,toggle:t}=xT("vertical");return c.createElement(dw,{Icon:Xu,title:(0,d.__)("Flip vertically","web-stories"),onClick:t,isToggled:e})};var NT=n(32396);const PT=function(e){const{width:t,height:n,rotationAngle:r,x:a,y:o}=e,l=(0,Pr.dataPixels)((0,k.calculateTextHeight)(e,t)),[i,s]=(0,NT.default)(r,0,0,0,l-n);return{height:l,x:(0,Pr.dataPixels)(a+i),y:(0,Pr.dataPixels)(o+s)}},RT=400;const MT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RT,t=arguments.length>1?arguments[1]:void 0;return e=parseInt(e),isNaN(parseInt(e))?RT:t&&0!==t.length?t.reduce(((t,n)=>{t=parseInt(t),n=parseInt(n);const r=Math.abs(t-e),a=Math.abs(n-e);return r===a?t<n?t:n:a<r?n:t})):e};var LT=n(30963);function DT(){return DT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DT.apply(this,arguments)}const BT=(0,u.forwardRef)((function FontPicker(e,t){let{zIndex:n,onChange:r,currentValue:a,highlightStylesOverride:o,showDropdownLabel:l,listStyleOverrides:i,containerStyleOverrides:s,className:p}=e;const{fonts:m=[],recentFonts:f=[],curatedFonts:g=[],customFonts:h=[],ensureMenuFontsLoaded:E,ensureCustomFontsLoaded:b,getFontsBySearch:y,getCustomFonts:_,getCuratedFonts:v}=fo((e=>{let{actions:t,state:n}=e;return{getFontsBySearch:t.getFontsBySearch,ensureMenuFontsLoaded:t.ensureMenuFontsLoaded,ensureCustomFontsLoaded:t.ensureCustomFontsLoaded,getCuratedFonts:t.getCuratedFonts,getCustomFonts:t.getCustomFonts,recentFonts:n.recentFonts,curatedFonts:n.curatedFonts,fonts:n.fonts,customFonts:n.customFonts}}));(0,u.useEffect)((()=>{_(),v()}),[_,v]);const w=(0,u.useMemo)((()=>{const e=new Map;return m.forEach((t=>{e.set(t.id,t)})),h?.forEach((t=>{e.set(t.id,t)})),e}),[m,h]),T=(0,u.useCallback)((e=>{e.length&&(E(e.filter((e=>"fonts.google.com"===w.get(e)?.service))),b(e.filter((e=>"custom"===w.get(e)?.service))))}),[w,b,E]),S=(0,u.useCallback)(((e,t)=>{let{option:n,...r}=e;return c.createElement(LT.default.Option,DT({ref:t},r,{fontFamily:"fonts.google.com"===n.service?`'${n.name}::MENU'`:n.name}),a===n.id&&c.createElement(LT.default.Selected,{"aria-label":(0,d.__)("Selected","web-stories")}),n.name)}),[a]),C=(0,u.useMemo)((()=>[...h?.length?[{label:(0,d.__)("Your fonts","web-stories"),options:h}]:[],...f?.length?[{label:(0,d.__)("Recently used","web-stories"),options:f}]:[]]),[h,f]);return c.createElement(LT.default.DropDown,{ref:t,zIndex:n,highlightStylesOverride:o,"data-testid":"font",title:(0,d.__)("Available font families","web-stories"),dropdownButtonLabel:(0,d.__)("Font family","web-stories"),options:m,primaryOptions:g,primaryLabel:(0,d.__)("Recommended","web-stories"),priorityOptionGroups:C,searchResultsLabel:(0,d.__)("Search results","web-stories"),selectedId:Ce===a?"":a,placeholder:Ce===a?Ie:a,hasSearch:!0,getOptionsByQuery:y,onChange:r,onObserve:T,renderer:(0,u.forwardRef)(S),disabled:!m?.length,dropDownLabel:l?(0,d.__)("Font","web-stories"):null,listStyleOverrides:i,containerStyleOverrides:s,className:p})})),FT=BT;function HT(){return HT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HT.apply(this,arguments)}const UT=(0,u.forwardRef)((function StoryFontPicker(e,t){let{...n}=e;const{updateSelectedElements:r,selectedElements:a}=Sa((e=>{let{state:t,actions:n}=e;return{updateSelectedElements:n.updateSelectedElements,selectedElements:t.selectedElements}})),o=(0,u.useCallback)(((e,t)=>{r({properties:n=>{const r=yw(n,e,t),a=PT({...n,...r});return{...r,...a}}})}),[r]),{textInfo:{fontWeight:l,isItalic:i},handlers:{handleResetFontWeight:s}}=bw(a,o),{addRecentFont:d,maybeEnqueueFontStyle:p}=fo((e=>{let{actions:t}=e;return{addRecentFont:t.addRecentFont,maybeEnqueueFontStyle:t.maybeEnqueueFontStyle}})),m=Fb(a,(e=>{let{font:t}=e;return t?.family})),f=i?"italic":"normal",g=(0,u.useCallback)((async e=>{(0,L.trackEvent)("font_family_changed",{name:e.name}),await p(a.map((t=>{let{content:n}=t;return{font:e,fontStyle:f,fontWeight:l,content:(0,so.stripHTML)(n)}}))),d(e),o({font:e},!0);const t=MT(400,e.weights);await s(t)}),[d,f,l,p,o,a,s]);return c.createElement(FT,HT({onChange:g,currentValue:m},n,{ref:t}))})),zT=UT,GT=(0,p.default)(zT).withConfig({displayName:"fontFamily__StyledFontPicker",componentId:"sc-sk3dxe-0"})(["width:164px;"]),jT=(0,p.css)(["max-height:200px;"]),YT=(0,p.css)(["border:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}));const ZT=function FontFamily(){return c.createElement(GT,{listStyleOverrides:jT,containerStyleOverrides:YT})};const WT=function(e){const t=[{label:Ee[400],value:"400"}];return e?.weights?e.weights.map((e=>({label:Ee[e],value:e.toString()}))):t},VT={MIN:8,MAX:800},$T=p.default.div.withConfig({displayName:"font__Space",componentId:"sc-1upk4a3-0"})(["flex:0 0 10px;"]),qT=(0,p.default)(NumericInput).withConfig({displayName:"font__StyledNumericInput",componentId:"sc-1upk4a3-1"})(["flex-basis:80px;text-align:center;"]),XT=(0,p.default)(cb.DropDown).withConfig({displayName:"font__StyledDropDown",componentId:"sc-1upk4a3-2"})(["background-color:transparent;"]);const KT=function FontControls(e){let{selectedElements:t,pushUpdate:n,highlightStylesOverride:r,fontDropdownRef:a}=e;const o=Fb(t,(e=>{let{font:t}=e;return t?.family})),l=Fb(t,"fontSize"),{textInfo:{fontWeight:i,isItalic:s},handlers:{handleSelectFontWeight:p}}=bw(t,n),{fonts:m=[],maybeEnqueueFontStyle:f,getFontByName:g}=fo((e=>{let{actions:{maybeEnqueueFontStyle:t,getFontByName:n},state:{fonts:r}}=e;return{maybeEnqueueFontStyle:t,getFontByName:n,fonts:r}})),h=(0,u.useMemo)((()=>WT(g(o))),[g,o]),E=s?"italic":"normal",b=(0,u.useCallback)((async(e,n)=>{await f(t.map((e=>{let{font:t,content:r}=e;return{font:t,fontStyle:E,fontWeight:parseInt(n),content:(0,so.stripHTML)(r)}}))),p(n)}),[E,p,f,t]);return CE((e=>{let{fontSize:t}=e;return{fontSize:(0,Ns.clamp)(t,VT)}}),[]),c.createElement(c.Fragment,null,m&&c.createElement(Wh,null,c.createElement(zT,{ref:a,highlightStylesOverride:r,showDropdownLabel:!0})),c.createElement(Wh,null,h&&c.createElement(c.Fragment,null,c.createElement(XT,{ariaLabel:(0,d.__)("Font weight","web-stories"),placeholder:Ie,options:h,selectedValue:Ce===i?"":i,onMenuItemClick:b,selectButtonStylesOverride:Mu}),c.createElement($T,null)),c.createElement(qT,{"aria-label":(0,d.__)("Font size","web-stories"),isFloat:!0,value:l,onChange:(e,t)=>n({fontSize:t},!0),min:VT.MIN,max:VT.MAX,isIndeterminate:Ce===l,placeholder:Ce===l?Ie:null,containerStyleOverride:Lu})))};const QT=function FontSize(){const{fontSize:e,updateSelectedElements:t}=Sa((e=>{let{state:t,actions:n}=e;return{fontSize:t.selectedElements[0].fontSize,updateSelectedElements:n.updateSelectedElements}})),n=(0,u.useCallback)((e=>{(0,L.trackEvent)("floating_menu",{name:"set_font_size"}),t({properties:t=>{const n=yw(t,e,!0),r=PT({...t,...n});return{...n,...r}}})}),[t]);return c.createElement(uw,{"aria-label":(0,d.__)("Font size","web-stories"),isFloat:!0,value:e,onChange:(e,t)=>n({fontSize:t}),min:VT.MIN,max:VT.MAX,placeholder:e,containerStyleOverride:Lu,selectButtonStylesOverride:Mu})},JT={MIN:0,MAX:100};function eS(e){let{opacity:t}=e;return void 0!==t?t:JT.MAX}const tS=function OpacityControls(e){let{selectedElements:t,pushUpdate:n}=e;const r=Fb(t,eS),a=(0,u.useCallback)(((e,t)=>n({opacity:t??100},!0)),[n]);return c.createElement(NumericInput,{suffix:c.createElement(Sp,null),unit:(0,d._x)("%","Percentage","web-stories"),value:r,onChange:a,min:JT.MIN,max:JT.MAX,"aria-label":(0,d.__)("Opacity in percent","web-stories"),placeholder:r===Ce?Ie:"",isIndeterminate:r===Ce,containerStyleOverride:Lu})};const nS=function LayerOpacity(){const{opacity:e,type:t}=hw(["opacity","type"]),n=Sa((e=>e.actions.updateSelectedElements));return c.createElement(uw,{suffix:c.createElement(Sp,null),value:e||0,"aria-label":(0,d.__)("Opacity in percent","web-stories"),onChange:(e,r)=>{n({properties:()=>({opacity:r??100})}),(0,L.trackEvent)("floating_menu",{name:"set_opacity",element:t})},min:JT.MIN,max:JT.MAX})},rS=(0,p.default)(tp.Checkbox).withConfig({displayName:"loopPanelContent__StyledCheckbox",componentId:"sc-lp7bl3-0"})(["",""],(e=>{let{theme:t}=e;return`\n    input[type='checkbox']&.${KE.FOCUS_VISIBLE_SELECTOR} ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;\n    }\n  `})),aS=p.default.div.withConfig({displayName:"loopPanelContent__Wrapper",componentId:"sc-lp7bl3-1"})(["display:flex;gap:12px;"]);const oS=function LoopPanelContent(e){let{loop:t,className:n="",onChange:r}=e;const a=`cb-${(0,he.default)()}`;return c.createElement(aS,{className:n},c.createElement(rS,{id:a,checked:t,onChange:r}),c.createElement("label",{htmlFor:a},c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Loop","web-stories"))))},lS=(0,p.default)(oS).withConfig({displayName:"loop__StyledLoopContent",componentId:"sc-154lze5-0"})(["gap:8px;"]);const iS=function Loop(){const{loop:e}=hw(["loop"]),t=Sa((e=>e.actions.updateSelectedElements));return c.createElement(lS,{loop:e,onChange:()=>{(0,L.trackEvent)("floating_menu",{name:"set_loop"}),t({properties:e=>{let{loop:t}=e;return{loop:!t}}})}})};const sS=function More(){const e=Fy((e=>{let{setHighlights:t}=e;return t})),t=Sa((e=>{let{state:t}=e;return t.selectedElements[0].type}));return c.createElement(gw,{text:(0,d._x)("More","Link to more options in design panel for selected element","web-stories"),onClick:()=>{e({highlight:Ej.STYLE_PANE}),(0,L.trackEvent)("floating_menu",{name:"click_more_button",element:t})}})},cS=(0,u.createContext)({state:{},actions:{}});const dS=function(e){return(0,u.useContextSelector)(cS,e??u.identity)};const uS=function(e){let{resource:t,elementId:n,isSingleElement:r=!0}=e;const{isTranscodingEnabled:a}=Ra(),{muteExistingVideo:o,isElementTrimming:l,isNewResourceMuting:i,canTranscodeResource:s}=yi((e=>{let{state:{canTranscodeResource:t,isNewResourceMuting:n,isElementTrimming:r},actions:{muteExistingVideo:a}}=e;return{canTranscodeResource:t,isNewResourceMuting:n,isElementTrimming:r,muteExistingVideo:a}})),{isMuted:c,id:d=0}=t,p=!!r&&l(n),m=i(d),f=(0,u.useCallback)((()=>{o({resource:t})}),[t,o]),g=!s(t),h=a&&r&&(!c&&s(t)||m),{hasTrimMode:E,toggleTrimMode:b}=dS((e=>{let{state:{hasTrimMode:t},actions:{toggleTrimMode:n}}=e;return{hasTrimMode:t,toggleTrimMode:n}}));return{state:{canTrim:E,canMute:h,isTrimming:p,isMuting:m,isDisabled:g},actions:{handleMute:f,handleTrim:b}}};const pS=function Mute(){const{id:e,resource:t}=hw(["id","resource"]),{state:{canMute:n,isMuting:r,isDisabled:a},actions:{handleMute:o}}=uS({elementId:e,resource:t});if(!n)return null;const l=r?(0,d.__)("Removing audio","web-stories"):(0,d.__)("Remove audio","web-stories");return c.createElement(dw,{Icon:jv,title:l,disabled:a||r,onClick:e=>{(0,L.trackEvent)("floating_menu",{name:"set_mute"}),o(e)}})};const mS=function ShapeColor(){const{backgroundColor:e,updateSelectedElements:t}=Sa((e=>{let{state:t,actions:n}=e;return{backgroundColor:t.selectedElements[0].backgroundColor,updateSelectedElements:n.updateSelectedElements}})),n=(0,u.useCallback)((e=>{(0,L.trackEvent)("floating_menu",{name:"set_shape_color",element:"shape"}),t({properties:()=>({backgroundColor:e})})}),[t]);return c.createElement(ew,{label:(0,d.__)("Shape color","web-stories"),value:e,allowsSavedColors:!0,onChange:n,hasInputs:!0,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!0})};var fS;function gS(){return gS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gS.apply(this,arguments)}const SvgAlignTextLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",gS({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,fS||(fS=c.createElement("path",{d:"M9.5 11.5h15M9.5 16h8m-8 4.5h10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},hS=(0,c.memo)(SvgAlignTextLeft);var ES;function bS(){return bS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bS.apply(this,arguments)}const SvgAlignTextCenter=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",bS({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ES||(ES=c.createElement("path",{d:"M9.5 11.5h15M13 16h8m-9 4.5h10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},yS=(0,c.memo)(SvgAlignTextCenter);var _S;function vS(){return vS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vS.apply(this,arguments)}const SvgAlignTextRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",vS({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_S||(_S=c.createElement("path",{d:"M24.5 20.5h-10m10-4.5h-8m8-4.5h-15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},wS=(0,c.memo)(SvgAlignTextRight);var TS;function SS(){return SS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SS.apply(this,arguments)}const SvgAlignTextJustified=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",SS({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,TS||(TS=c.createElement("path",{d:"M8.5 11.5h15M8.5 16h15m-15 4.5h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},CS=(0,c.memo)(SvgAlignTextJustified),IS=p.default.div.withConfig({displayName:"textAlign__SubMenuContainer",componentId:"sc-1i0z5qr-0"})(["position:absolute;top:calc(var(--height) + ","px);z-index:9999;"],3),AS=(0,p.default)(ow.default).withConfig({displayName:"textAlign__StyledMenuButton",componentId:"sc-1i0z5qr-1"})(["flex:0 0 60px;height:36px;border:1px solid ",";padding:2px 0;border-radius:4px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),xS=(0,p.default)(aw).withConfig({displayName:"textAlign__StyledMenuIcon",componentId:"sc-1i0z5qr-2"})(["width:auto;display:flex;overflow:hidden;svg{width:32px;}svg:last-child{margin-left:-8px;}"]),kS=[{value:"left",icon:hS,label:(0,d.__)("Align text left","web-stories")},{value:"center",icon:yS,label:(0,d.__)("Align text center","web-stories")},{value:"right",icon:wS,label:(0,d.__)("Align text right","web-stories")},{value:"justify",icon:CS,label:(0,d.__)("Align text justified","web-stories")}];const OS=function TextAlign(){const{textAlign:e="left"}=hw(["textAlign"]),t=Sa((e=>e.actions.updateSelectedElements)),[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(),o=(0,u.useRef)(),[l,i]=(0,u.useState)(0);(0,u.useEffect)((()=>i(o.current.parentNode.offsetLeft+-8)),[]);const s=e=>{e&&setTimeout((()=>e.focus()))},{icon:p,label:m}=kS.find((t=>{let{value:n}=t;return n===e}))||kS[0],f=e=>()=>{(0,L.trackEvent)("floating_menu",{name:`set_text_alignment_${e}`,element:"text"}),t({properties:{textAlign:e}})},g=()=>{r(!1),o.current.focus()},h=(0,d.__)("Change text alignment","web-stories"),E=n?"":h;return(0,tr.useKeyDownEffect)(o,"down",(()=>r(!0)),[]),c.createElement(c.Fragment,null,c.createElement(bd.Tooltip,{placement:Ed.PLACEMENT.BOTTOM,title:E},c.createElement(AS,{ref:o,onClick:()=>r((e=>!e)),"aria-haspopup":"menu","aria-expanded":n,"aria-label":h},c.createElement(xS,{title:E},c.createElement(p,{role:"img","aria-label":m}),c.createElement(Kb.default,null)))),c.createElement(IS,{ref:a,style:{left:`${l}px`}},c.createElement(Zv.default,{onDismiss:g,isOpen:n,onCloseSubMenu:g,"aria-label":(0,d.__)("Text alignment options","web-stories"),isSubMenu:!0,isSecondary:!0,parentMenuRef:o,isHorizontal:!0},kS.map((t=>{let{value:n,icon:r,label:a}=t;return c.createElement(dw,{isToggled:n===e,ref:n===e?s:null,key:n,Icon:r,title:a,onClick:f(n)})})))))};const NS=function TextColor(){const{content:e}=hw(["content"]),t=Sa((e=>e.actions.updateSelectedElements)),n=(0,u.useCallback)((e=>{(0,L.trackEvent)("floating_menu",{name:"set_text_color",element:"text"}),t({properties:t=>yw(t,e,!0)})}),[t]),{textInfo:{color:r},handlers:{handleSetColor:a}}=bw([{content:e,type:"text"}],n);return c.createElement(ew,{label:(0,d.__)("Text color","web-stories"),value:r,allowsSavedColors:!0,onChange:a,hasInputs:!1,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!1})};var PS;function RS(){return RS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RS.apply(this,arguments)}const SvgLetterBBold=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",RS({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,PS||(PS=c.createElement("path",{d:"M11 11a2 2 0 0 1 2-2h3.316c.751 0 1.443.163 2.075.489.646.326 1.16.775 1.542 1.349.382.574.573 1.206.573 1.897 0 .69-.178 1.29-.534 1.799a3.25 3.25 0 0 1-1.363 1.153v.118a3.58 3.58 0 0 1 1.72 1.231c.447.574.671 1.245.671 2.014 0 .77-.204 1.454-.613 2.053a4.042 4.042 0 0 1-1.62 1.408 5.004 5.004 0 0 1-2.214.489H13a2 2 0 0 1-2-2V11Zm5.217 3.866c.633 0 1.14-.196 1.522-.587.395-.39.593-.84.593-1.349 0-.508-.191-.951-.573-1.33-.369-.39-.857-.586-1.463-.586h-2.583a.5.5 0 0 0-.5.5v2.852a.5.5 0 0 0 .5.5h2.504Zm.336 6.1c.672 0 1.206-.208 1.601-.625.409-.417.613-.9.613-1.447 0-.56-.211-1.043-.633-1.447-.408-.417-.961-.626-1.66-.626h-2.76a.5.5 0 0 0-.5.5v3.145a.5.5 0 0 0 .5.5h2.84Z",fill:"currentColor"})))},MS=(0,c.memo)(SvgLetterBBold);const LS=function ToggleBold(){const{isToggled:e,toggle:t}=_w({currentValue:"isBold",handler:"handleClickBold",eventName:"set_bold"});return c.createElement(dw,{isToggled:e,Icon:MS,title:(0,d.__)("Toggle bold","web-stories"),onClick:t,tabIndex:"0"})};var DS;function BS(){return BS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BS.apply(this,arguments)}const SvgLetterIItalic=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",BS({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,DS||(DS=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 9h-2.489a.5.5 0 0 0-.023 0H15.5a.5.5 0 0 0 0 1h1.823l-3.692 12H11.5a.5.5 0 0 0 0 1h5a.5.5 0 1 0 0-1h-1.823l3.692-12H20.5a.5.5 0 1 0 0-1Z",fill:"currentColor"})))},FS=(0,c.memo)(SvgLetterIItalic);const HS=function ToggleItalics(){const{isToggled:e,toggle:t}=_w({currentValue:"isItalic",handler:"handleClickItalic",eventName:"set_italic"});return c.createElement(dw,{isToggled:e,Icon:FS,title:(0,d.__)("Toggle italic","web-stories"),onClick:t,tabIndex:"0"})};var US;function zS(){return zS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zS.apply(this,arguments)}const SvgLetterUUnderline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zS({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,US||(US=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 9.5a.5.5 0 0 0-1 0V15a4 4 0 0 0 8 0V9.5a.5.5 0 0 0-1 0V15a3 3 0 1 1-6 0V9.5ZM9.5 23a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z",fill:"currentColor"})))},GS=(0,c.memo)(SvgLetterUUnderline);const jS=function ToggleUnderline(){const{isToggled:e,toggle:t}=_w({currentValue:"isUnderline",handler:"handleClickUnderline",eventName:"set_underline"});return c.createElement(dw,{isToggled:e,Icon:GS,title:(0,d.__)("Toggle underline","web-stories"),onClick:t,tabIndex:"0"})};var YS,ZS,WS,VS,$S,qS;function XS(){return XS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XS.apply(this,arguments)}const SvgScissors=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",XS({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,YS||(YS=c.createElement("circle",{cx:11.536,cy:11.535,r:2.5,transform:"rotate(-45 11.536 11.535)",stroke:"currentColor"})),ZS||(ZS=c.createElement("circle",{r:2.5,transform:"scale(1 -1) rotate(-45 -19.02 -24.192)",stroke:"currentColor"})),WS||(WS=c.createElement("path",{d:"m18.646 18.424-.353-.354.707-.707.354.354-.708.707Zm4.708 3.293a.5.5 0 0 1-.708.707l.708-.707Zm-4-4 4 4-.708.707-4-4 .708-.707Z",fill:"currentColor"})),VS||(VS=c.createElement("path",{d:"m14 13.07 1 1",stroke:"currentColor",strokeLinecap:"square"})),$S||($S=c.createElement("path",{d:"m14.352 19.354-.355.352-.704-.71.355-.352.704.71Zm8.296-9.639a.5.5 0 1 1 .704.71l-.704-.71Zm-9 8.93 9-8.93.704.71-9 8.929-.704-.71Z",fill:"currentColor"})),qS||(qS=c.createElement("path",{d:"m14.352 19.354-.355.352-.704-.71.355-.352.704.71Zm8.296-9.639a.5.5 0 1 1 .704.71l-.704-.71Zm-9 8.93 9-8.93.704.71-9 8.929-.704-.71Z",fill:"currentColor"})))},KS=(0,c.memo)(SvgScissors);const QS=function Trim(){const{id:e,resource:t}=hw(["id","resource"]),{state:{canTrim:n,isTrimming:r,isDisabled:a},actions:{handleTrim:o}}=uS({elementId:e,resource:t});if(!n)return null;const l=r?(0,d.__)("Trimming video","web-stories"):(0,d.__)("Trim video","web-stories");return c.createElement(dw,{Icon:KS,title:l,disabled:a||r,onClick:e=>{(0,L.trackEvent)("floating_menu",{name:"set_trim"}),o(e)}})},JS=(0,u.memo)((function FloatingImageMenu(){return c.createElement(c.Fragment,null,c.createElement(nS,null),c.createElement(mw,null),c.createElement(kT,null),c.createElement(OT,null),c.createElement(mw,null),c.createElement(Sw,null),c.createElement(mw,null),c.createElement(sS,null),c.createElement(mw,null),c.createElement(Gw,null))})),eC=(0,u.memo)((function FloatingMultipleMenu(){return c.createElement(c.Fragment,null,c.createElement(AT,null),c.createElement(mw,null),c.createElement(Gw,{isMultiple:!0}))})),tC=(0,u.memo)((function FloatingShapeMenu(){return c.createElement(c.Fragment,null,c.createElement(mS,null),c.createElement(mw,null),c.createElement(zw,null),c.createElement(kT,null),c.createElement(OT,null),c.createElement(mw,null),c.createElement(Sw,null),c.createElement(mw,null),c.createElement(sS,null),c.createElement(mw,null),c.createElement(Gw,null))})),nC=(0,u.memo)((function FloatingStickerMenu(){return c.createElement(c.Fragment,null,c.createElement(nS,null),c.createElement(mw,null),c.createElement(kT,null),c.createElement(OT,null),c.createElement(mw,null),c.createElement(sS,null),c.createElement(mw,null),c.createElement(Gw,null))})),rC=(0,u.memo)((function FloatingTextMenu(){return c.createElement(c.Fragment,null,c.createElement(ZT,null),c.createElement(QT,null),c.createElement(OS,null),c.createElement(LS,null),c.createElement(HS,null),c.createElement(jS,null),c.createElement(mw,null),c.createElement(NS,null),c.createElement(mw,null),c.createElement(sS,null),c.createElement(mw,null),c.createElement(Gw,null))})),aC=(0,u.memo)((function FloatingVideoMenu(){return c.createElement(c.Fragment,null,c.createElement(nS,null),c.createElement(mw,null),c.createElement(kT,null),c.createElement(OT,null),c.createElement(mw,null),c.createElement(Sw,null),c.createElement(mw,null),c.createElement(iS,null),c.createElement(QS,null),c.createElement(pS,null),c.createElement(mw,null),c.createElement(sS,null),c.createElement(mw,null),c.createElement(Gw,null))})),oC=(0,u.memo)((function FloatingMenuSelector(e){let{selectedElementType:t}=e;switch(t){case Yv.MULTIPLE:return c.createElement(eC,null);case Yv.GIF:case Yv.IMAGE:return c.createElement(JS,null);case Yv.SHAPE:return c.createElement(tC,null);case Yv.STICKER:return c.createElement(nC,null);case Yv.TEXT:return c.createElement(rC,null);case Yv.VIDEO:return c.createElement(aC,null);default:return null}})),lC=p.default.section.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-pi2qzl-0"})(["display:flex;position:absolute;z-index:",";opacity:",";transition:140ms opacity;"],4,(e=>{let{visuallyHidden:t}=e;return t?0:1})),iC=(0,u.memo)((0,u.forwardRef)((function FloatingMenu(e,t){let{selectionIdentifier:n,selectedElementType:r,handleDismiss:a,visuallyHidden:o}=e;return(0,u.useLayoutEffect)((()=>{const e=t.current,n=()=>{e.style.width="";const t=e.getBoundingClientRect();e.style.setProperty("--width",`${t.width.toFixed(2)}px`),e.style.setProperty("--height",`${t.height.toFixed(2)}px`),e.style.width="var(--width)"};n();const r=new MutationObserver(n),a=e.querySelector("[role=menu]");return r.observe(a,{childList:!0}),()=>r.disconnect()}),[t,n]),c.createElement(lC,{ref:t,"aria-label":(0,d.__)("Design menu","web-stories"),visuallyHidden:o},c.createElement($v,{handleDismiss:a},c.createElement(Zv.default,{isInline:!0,isHorizontal:!0,isSecondary:!0,isAlwaysVisible:!0,disableControlledTabNavigation:!0,"aria-label":(0,d.__)("Design options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()},popoverZIndex:4},c.createElement(oC,{selectedElementType:r}))))}))),sC=iC;const cC=function FloatingMenuLayer(){const{setMoveableMount:e,isEyedropperActive:t}=xs((e=>{let{actions:t,state:n}=e;return{setMoveableMount:t.setMoveableMount,isEyedropperActive:n.isEyedropperActive}})),{workspaceWidth:n,workspaceHeight:r}=Zi((e=>{let{state:{workspaceWidth:t,workspaceHeight:n}}=e;return{workspaceWidth:t,workspaceHeight:n}})),{selectedElementType:a,selectionIdentifier:o}=Sa((e=>{let{state:{selectedElements:t}}=e;return{selectedElementType:1!==t.length||t[0].isBackground?t.length>1?Yv.MULTIPLE:Yv.NONE:t[0]?.type,selectionIdentifier:t.map((e=>{let{id:t}=e;return t})).join("")}})),l=(0,C.useTransform)((e=>{let{state:t}=e;return t.isAnythingTransforming})),[i,s]=(0,u.useState)(null),d=(0,u.useRef)(),p=(0,u.useRef)(),[m,f]=(0,u.useState)(!1),g=(0,u.useCallback)((()=>f(!0)),[]);(0,u.useEffect)((()=>f(!1)),[o]),(0,u.useEffect)((()=>(e((()=>s)),()=>e(null))),[e]),(0,u.useEffect)((()=>{f(!!t)}),[t]),(0,u.useEffect)((()=>{p.current={width:n,height:r}}),[n,r]);const h=a!==Yv.NONE&&!m&&i;return(0,u.useEffect)((()=>{const e=d.current;if(!e||!i)return;const t=()=>{const t=i.getRect(),{width:n,height:r}=p.current,a=t.left+t.width/2;e.style.left=`clamp(0px, ${a}px - (var(--width) / 2), ${n}px - var(--width))`;const o=t.top+t.height+10;e.style.top=`clamp(0px, ${o}px, ${r}px - var(--height))`};t();const n=new MutationObserver(t),r=document.querySelector(".moveable-control-box");return n.observe(r,{attributes:!0,subtree:!0,attributeFilter:["style"]}),()=>n.disconnect()}),[i,h]),!!h&&c.createElement(sC,{ref:d,handleDismiss:g,selectedElementType:a,selectionIdentifier:o,visuallyHidden:l})};var dC=n(7868);const uC=async function(e,t,n,r){const{width:a,height:o,scale:l,focalX:i,focalY:s,flip:c}=e,{src:d,length:u}=t,p=r,m=p/o*a,f=Math.ceil(n/m),g=n/f,h=g/m*a,{width:E,height:b,offsetX:y,offsetY:_}=(0,dC.default)(t,h,o,l,c?.horizontal?100-i:i,c?.vertical?100-s:s),v=u/(f-1),w=await ie(d);w.width=E,w.height=b,await ue(w,1e-6);const T=document.createElement("canvas");T.width=n,T.height=r;const S=T.getContext("2d");let C=0,I=0;const A=async()=>{await ue(w,C);const e=I*g;return(c.vertical||c.horizontal)&&(S.translate(e+g/2,p/2),S.scale(c.horizontal?-1:1,c.vertical?-1:1),S.translate(-(e+g/2),-p/2)),S.drawImage(w,y,_,h,o,e,0,g,p),S.setTransform(1,0,0,1,0,0),I+=1,I===f?Promise.resolve():(C+=v,A())};return A().then((()=>T.toDataURL()))};const pC=function(e,t,n){const[r,a]=(0,u.useState)(null);return(0,u.useEffect)((()=>{if(!e)return;const{element:r,resource:o}=t;uC(r,o,n,36).then(a)}),[e,t,n]),r};function mC(){return mC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mC.apply(this,arguments)}const fC=p.default.button.withConfig({displayName:"slider__Thumb",componentId:"sc-50zvue-0"})(["position:absolute;padding:0;"]);function gC(e){return e.pageX||e.clientX}const hC=function Slider(e){let{railWidth:t,min:n,max:r,step:a,minorStep:o=null,value:l=0,onChange:i=(()=>{}),getValueText:s=null,onPointerDown:d=(()=>{}),onNudge:p=(()=>{}),...m}=e;const f=(0,u.useRef)(),g=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),f.current.focus(),d?.();const a=function(a){const o=gC(a)-gC(e);i(l+o/t*(r-n)),a.preventDefault(),a.stopPropagation()},o=function(){document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",o)};return document.addEventListener("pointermove",a),document.addEventListener("pointerup",o),o}),[l,r,n,i,t,d]),h=(0,u.useCallback)((e=>{i(l+e),p?.()}),[i,p,l]);(0,tr.useKeyDownEffect)(f,"left",(()=>h(-a)),[h,a]),(0,tr.useKeyDownEffect)(f,"shift+left",(()=>h(-o)),[h,o]),(0,tr.useKeyDownEffect)(f,"right",(()=>h(a)),[h,a]),(0,tr.useKeyDownEffect)(f,"shift+right",(()=>h(o)),[h,o]);const E={left:`${((l-n)/(r-n)*t).toFixed(2)}px`};return c.createElement(fC,mC({ref:f,onPointerDown:g,style:E,role:"slider","aria-valuemin":n,"aria-valuemax":r,"aria-valuenow":l,"aria-valuetext":s?.(l)},m))};function EC(){return EC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EC.apply(this,arguments)}const bC=(0,p.default)(hC).withConfig({displayName:"currentTime__StyledSlider",componentId:"sc-tf91kz-0"})(["top:-3px;bottom:-3px;width:6px;margin-left:-3px;border-radius:6px;border-width:0;background-color:",";box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal}));const yC=function CurrentTime(e){const t=dS((e=>{let{state:{currentTime:t}}=e;return t}));return c.createElement(bC,EC({"aria-label":(0,d.__)("Current time","web-stories"),value:t,disabled:!0},e))},_C=p.default.aside.withConfig({displayName:"trimmerComponents__Menu",componentId:"sc-1vmlktu-0"})(["display:flex;justify-content:center;align-items:flex-start;height:","px;gap:14px;"],40),vC=p.default.div.withConfig({displayName:"trimmerComponents__RailWrapper",componentId:"sc-1vmlktu-1"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end;"]),wC=p.default.div.withConfig({displayName:"trimmerComponents__Rail",componentId:"sc-1vmlktu-2"})(["position:relative;width:","px;height:","px;border-radius:4px;border:1px solid ",";background-color:",";"],(e=>{let{width:t}=e;return t}),36,(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white}));function Duration(e){let{children:t}=e;return c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},t)}const TC=(0,p.default)(hC).withConfig({displayName:"trimmerComponents__Handle",componentId:"sc-1vmlktu-3"})(["top:6px;bottom:6px;width:6px;margin-left:-3px;border-radius:6px;background-color:",";border:1px solid ",";box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);cursor:col-resize;&:focus{border-color:",";}&.focus-visible{outline:none !important;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.border.focus})),SC=p.default.svg.withConfig({displayName:"trimmerComponents__SVG",componentId:"sc-1vmlktu-4"})(["position:absolute;top:-1px;"]),CC=p.default.div.withConfig({displayName:"trimmerComponents__ButtonWrapper",componentId:"sc-1vmlktu-5"})(["flex-grow:1;flex-basis:100px;display:flex;justify-content:",";"],(e=>{let{isStart:t}=e;return t?"flex-end":"flex-start"}));function Scrim(e){let{width:t,isLeftAligned:n=!1}=e;const r=n?{left:"-1px"}:{right:"-1px"},a=n?`M 4 0 h ${t} a 4 4 0 0 0 -4 4 v 28 a 4 4 0 0 0 4 4 h -${t} a 4 4 0 0 1 -4 -4 v -28 a 4 4 0 0 1 4 -4 Z`:`M 0 0 h ${t} a 4 4 0 0 1 4 4 v 28 a 4 4 0 0 1 -4 4 h -${t} a 4 4 0 0 0 4 -4 v -28 a 4 4 0 0 0 -4 -4 Z`;return c.createElement(SC,{style:{width:`${t+4}px`,...r},viewBox:`0 0 ${t+4} 36`},c.createElement("path",{stroke:"transparent",fill:"black",fillOpacity:"0.5",d:a}))}function IC(){return IC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IC.apply(this,arguments)}const AC=function VideoTrimmer(){const{startOffset:e,endOffset:t,maxOffset:n,setStartOffset:r,setEndOffset:a,hasChanged:o,performTrim:l,setIsDraggingHandles:i,toggleTrimMode:s,videoData:p}=dS((e=>{let{state:{startOffset:t,endOffset:n,maxOffset:r,hasChanged:a,videoData:o},actions:{setStartOffset:l,setEndOffset:i,performTrim:s,toggleTrimMode:c,setIsDraggingHandles:d}}=e;return{startOffset:t,endOffset:n,maxOffset:r,setStartOffset:l,setEndOffset:i,hasChanged:a,performTrim:s,setIsDraggingHandles:d,toggleTrimMode:c,videoData:o}})),{workspaceWidth:g,pageWidth:h}=Zi((e=>{let{state:{workspaceWidth:t,pageWidth:n}}=e;return{workspaceWidth:t,pageWidth:n}})),E=(0,u.useDebouncedCallback)((()=>i(!1)),1e3),b=(0,u.useRef)(null);$p({ref:b});const y=(0,u.useCallback)((e=>{e&&e.focus()}),[]),_=Math.min(h,g-260),v=h&&n&&p,w=pC(v,p,_),T={ref:b,"aria-label":(0,d.__)("Video trimmer","web-stories")};if(!v)return c.createElement(_C,T);const S={min:0,max:n,step:100,minorStep:10,onPointerDown:()=>i(!0),onPointerUp:()=>i(!1),onNudge:()=>{i(!0),E()}};return c.createElement(_C,T,c.createElement(CC,{isStart:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:s,ref:y},(0,d.__)("Cancel","web-stories"))),c.createElement(vC,null,c.createElement(wC,{width:_,style:{backgroundImage:w?`url(${w})`:void 0}},c.createElement(Scrim,{isLeftAligned:!0,width:e/n*_}),c.createElement(Scrim,{width:(n-t)/n*_}),c.createElement(yC,IC({railWidth:_},S)),c.createElement(TC,IC({railWidth:_,value:e,"aria-label":(0,d.__)("Start offset","web-stories"),onChange:e=>r(e)},S)),c.createElement(TC,IC({railWidth:_,value:t,"aria-label":(0,d.__)("End offset","web-stories"),onChange:e=>a(e)},S))),c.createElement(Duration,null,ce(Math.ceil((t-e)/1e3)))),c.createElement(CC,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:l,disabled:!o},(0,d.__)("Trim","web-stories"))))};function xC(){return xC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xC.apply(this,arguments)}const kC={FLOAT_PANEL:11},OC=p.default.div.withConfig({displayName:"editElement__Wrapper",componentId:"sc-1w8k2uc-0"})([""," "," "," pointer-events:initial;"],x.elementWithPosition,x.elementWithSize,x.elementWithRotation),NC=(0,u.memo)((0,u.forwardRef)((function EditElement(e,t){let{element:n,editWrapper:r,onResize:a}=e;const{id:o,type:l}=n,{getBox:i}=(0,mc.default)((e=>({getBox:e.actions.getBox}))),{getProxiedUrl:s}=Ao(),{isRTL:d,styleConstants:{topOffset:p}={}}=Y(),{actions:{maybeEnqueueFontStyle:m}}=fo(),{updateElementById:f}=Sa((e=>({updateElementById:e.actions.updateElementById}))),{isTrimMode:g,resource:h,setVideoNode:E}=dS((e=>{let{state:{isTrimMode:t,videoData:n},actions:{setVideoNode:r}}=e;return{isTrimMode:t,setVideoNode:r,resource:n?.resource}})),[b,y]=(0,u.useState)(null),{Edit:_}=(0,A.getDefinitionForType)(l),v=b?{...n,...b}:n,w=i(v);return c.createElement(OC,xC({"aria-labelledby":`layer-${o}`},w,{ref:t}),c.createElement(_,{element:v,box:w,editWrapper:r,onResize:a,setLocalProperties:y,getProxiedUrl:s,isRTL:d,topOffset:p,isTrimMode:g,resource:h,setVideoNode:E,updateElementById:f,maybeEnqueueFontStyle:m,zIndexCanvas:kC}))}))),PC=NC,RC=Qe.THEME_CONSTANTS.ICON_SIZE,MC=RC+8,LC=Qe.THEME_CONSTANTS.ICON_SIZE+6+2,DC=2*(Qe.THEME_CONSTANTS.LARGE_BUTTON_SIZE+2)+LC+16+16;const BC=function(){const{carouselState:e}=Zi((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}}));return e===xe.CLOSED?52:116},FC=(0,p.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""}));const HC=function(e){let{containerRef:t}=e;const{zoomLevel:n,setZoomLevel:r}=Zi((e=>{let{state:{zoomLevel:t},actions:{setZoomLevel:n}}=e;return{zoomLevel:t,setZoomLevel:n}})),a=(0,u.useDebouncedCallback)((e=>r(e)),25);(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=e=>Math.min(3,Math.max(.25,e-e%.25)),r=r=>{const{ctrlKey:o,deltaY:l}=r,i=t.current.childNodes[0];if(o&&i.contains(r.target)&&l){a(e(l>0?n-.25:n+.25)),r.preventDefault()}},o=e=>{t.current.childNodes[0].contains(e.target)&&e.preventDefault()},l=r=>{const o=t.current.childNodes[0],{scale:l}=r;if(o.contains(r.target)&&l){a(e(l<1?n-.25:n+.25)),r.preventDefault()}};return document.addEventListener("wheel",r,{passive:!1}),document.addEventListener("gesturestart",o),document.addEventListener("gestureend",o),document.addEventListener("gesturechange",l),()=>{document.removeEventListener("wheel",r,{passive:!1}),document.removeEventListener("gesturestart",o),document.removeEventListener("gestureend",o),document.removeEventListener("gesturechange",l)}}),[t,a,n])};function UC(){return UC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UC.apply(this,arguments)}const zC=Qe.THEME_CONSTANTS.LARGE_BUTTON_SIZE+8,GC=p.default.section.withConfig({displayName:"layout__LayerGrid",componentId:"sc-1n0mp4m-0"})([""," position:absolute;top:0;left:0;right:0;bottom:0;"," display:grid;grid:'h h h h h h h' ","px '. . . . . . .' minmax(16px,1fr) '. b . p . f .' var(--viewport-height-px) '. . . . . . .' 1fr 'w w w w w w w' ","px '. . . . . . .' ","px / 1fr var(--page-nav-width) var(--page-nav-gap) var(--viewport-width-px) var(--page-nav-gap) var(--page-nav-width) 1fr;height:100%;"],FC,(e=>{let{zIndex:t}=e;return"number"==typeof t?`z-index: ${t};`:""}),64,(e=>{let{footerHeight:t}=e;return t}),16),jC=p.default.div.withConfig({displayName:"layout__Area",componentId:"sc-1n0mp4m-1"})([""," grid-area:",";overflow:",";position:relative;width:100%;height:100%;",";"],FC,(e=>{let{area:t}=e;return t}),(e=>{let{showOverflow:t}=e;return t?"visible":"hidden"}),(e=>{let{zIndex:t}=e;return void 0!==t?`z-index: ${t}`:null})),YC=(0,p.default)(jC).attrs({area:"p"}).withConfig({displayName:"layout__PageAreaContainer",componentId:"sc-1n0mp4m-2"})(["position:relative;display:flex;justify-content:",";align-items:",";overflow:",";",""],(e=>{let{hasHorizontalOverflow:t}=e;return t?"flex-start":"center"}),(e=>{let{hasVerticalOverflow:t}=e;return t?"flex-start":"center"}),(e=>{let{showOverflow:t}=e;return t?"visible":"var(--overflow-x) var(--overflow-y)"}),(e=>{let{isControlled:t,hasVerticalOverflow:n,hasHorizontalOverflow:r,showOverflow:a}=e;return t&&`\n      overflow: ${a?"visible":"hidden"};\n      width: calc(\n        100% - ${n?P.SCROLLBAR_WIDTH:0}px\n      );\n      height: calc(\n        100% - ${r?P.SCROLLBAR_WIDTH:0}px\n      );\n    `})),ZC=(0,u.forwardRef)((function Layer(e,t){let{children:n,...r}=e;const a=BC();return c.createElement(GC,UC({ref:t,footerHeight:a},r),n)})),WC=p.default.div.withConfig({displayName:"layout__PaddedPage",componentId:"sc-1n0mp4m-3"})(["padding:calc(0.5 * var(--page-padding-px));"]),VC=p.default.div.withConfig({displayName:"layout__PageClip",componentId:"sc-1n0mp4m-4"})(["",""],(e=>{let{hasHorizontalOverflow:t,hasVerticalOverflow:n}=e;return(t||n)&&`\n      overflow: hidden;\n      width: ${t?"calc(var(--page-width-px) + var(--page-padding-px))":`calc(var(--viewport-width-px) - ${P.SCROLLBAR_WIDTH}px)`};\n      flex-basis: ${t?"calc(var(--page-width-px) + var(--page-padding-px))":`calc(var(--viewport-width-px) - ${P.SCROLLBAR_WIDTH}px)`};\n      height: ${n?"calc(var(--fullbleed-height-px) + var(--page-padding-px))":`calc(var(--viewport-height-px) - ${P.SCROLLBAR_WIDTH}px)`};\n      flex-shrink: 0;\n      flex-grow: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    `})),$C=p.default.div.withConfig({displayName:"layout__FullbleedContainer",componentId:"sc-1n0mp4m-5"})([""," overflow:visible;position:relative;width:var(--page-width-px);height:var(--fullbleed-height-px);display:flex;justify-content:center;align-items:center;border-radius:5px;",";",""],(e=>{let{background:t}=e;return(0,kr.default)(t)}),(e=>{let{isControlled:t}=e;return t&&"\n      left: var(--scroll-left-px);\n      top: var(--scroll-top-px);\n    "}),(e=>{let{isBackgroundSelected:t,theme:n}=e;return t&&`\n      &:before {\n        content: '';\n        position: absolute;\n        top: -4px;\n        left: -4px;\n        right: -4px;\n        bottom: -4px;\n        border: ${n.colors.border.selection} 1px solid;\n        border-radius: ${n.borders.radius.medium};\n      }\n    `})),qC=p.default.div.withConfig({displayName:"layout__PageAreaWithoutOverflow",componentId:"sc-1n0mp4m-6"})(["overflow:",";position:relative;width:var(--page-width-px);height:var(--fullbleed-height-px);display:flex;justify-content:center;align-items:center;"],(e=>{let{showOverflow:t}=e;return t?"initial":"hidden"})),XC=p.default.div.withConfig({displayName:"layout__PageAreaSafeZone",componentId:"sc-1n0mp4m-7"})(["width:var(--page-width-px);height:var(--page-height-px);overflow:visible;position:relative;"]),KC=(0,p.default)(jC).attrs({area:"h"}).withConfig({displayName:"layout__HeadArea",componentId:"sc-1n0mp4m-8"})([""]),QC=((0,p.default)(jC).attrs({area:"m"}).withConfig({displayName:"layout__MenuArea",componentId:"sc-1n0mp4m-9"})([""]),(0,p.default)(jC).withConfig({displayName:"layout__NavArea",componentId:"sc-1n0mp4m-10"})(["display:flex;align-items:center;justify-content:center;"])),JC=(0,p.default)(QC).attrs({area:"b"}).withConfig({displayName:"layout__NavPrevArea",componentId:"sc-1n0mp4m-11"})([""]),eI=(0,p.default)(QC).attrs({area:"f"}).withConfig({displayName:"layout__NavNextArea",componentId:"sc-1n0mp4m-12"})([""]),tI=p.default.div.withConfig({displayName:"layout__PageMenuArea",componentId:"sc-1n0mp4m-13"})(["grid-area:p;position:absolute;right:calc(-24px + var(--page-padding-px));top:calc(0.5 * var(--page-padding-px));min-height:calc(100% - var(--page-padding-px));"]),nI=(0,p.default)(jC).attrs({area:"w",showOverflow:!0}).withConfig({displayName:"layout__FooterArea",componentId:"sc-1n0mp4m-14"})([""]);const rI=(0,u.forwardRef)((function PageArea(e,t){let{children:n,fullbleedRef:r=null,fullBleedContainerLabel:a=(0,d.__)("Fullbleed area","web-stories"),overlay:o=[],background:l,isControlled:i=!1,className:s="",showOverflow:p=!1,isBackgroundSelected:m=!1,pageAreaRef:f=(0,u.createRef)(),withSafezone:g=!0,...h}=e;const E=(0,u.useRef)(),b=r||E,{hasVerticalOverflow:y,hasHorizontalOverflow:_,zoomSetting:v,scrollLeft:w,scrollTop:T}=Zi((e=>{let{state:{hasVerticalOverflow:t,hasHorizontalOverflow:n,zoomSetting:r,scrollLeft:a,scrollTop:o}}=e;return{hasVerticalOverflow:t,hasHorizontalOverflow:n,zoomSetting:r,scrollLeft:a,scrollTop:o}})),S=(0,u.useRef)();S.current={top:T,left:w},(0,u.useEffect)((()=>{i||(b.current.scrollTop=S.current.top,b.current.scrollLeft=S.current.left)}),[i,v,b]);const C=(0,u.useRef)(null);return HC({containerRef:C}),c.createElement(YC,UC({showOverflow:p,isControlled:i,hasHorizontalOverflow:_,hasVerticalOverflow:y,className:s,"data-scroll-container":!0},h),c.createElement(VC,{hasHorizontalOverflow:_,hasVerticalOverflow:y},c.createElement(WC,{ref:C},c.createElement($C,{"aria-label":a,role:"region",ref:b,"data-testid":"fullbleed",background:l,isControlled:i,isBackgroundSelected:m},c.createElement(qC,{ref:f,showOverflow:p},g?c.createElement(XC,{ref:t,"data-testid":"safezone"},n):n,o)))))}));var aI=n(94184),oI=n.n(aI);const lI=function(e){let{canSnap:t,otherNodes:n,snappingOffsetX:r=null,isDragging:a}=e;const o=Os(Cs),l=Os(Is),i=xs((e=>{let{state:t}=e;return t.designSpaceGuideline})),{pageWidth:s,pageHeight:c}=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),{activeDropTargetId:d,isDropTargetingDisabled:p}=Hi((e=>{let{state:t}=e;return{activeDropTargetId:t.activeDropTargetId,isDropTargetingDisabled:t.isDropTargetingDisabled}})),m=function(e){const t=e(rc),{openToUnreadTip:n=Ft}=nc((e=>{let{actions:t}=e;return{openToUnreadTip:t.openToUnreadTip}})),r=(0,u.useDebouncedCallback)(n,300);return(0,u.useCallback)((()=>{t===rc.SAFE_ZONE&&r(Ls)}),[t,r])}((e=>{let{SAFE_ZONE:t}=e;return t}));t=t&&!p&&!d;const f=(0,u.useCallback)((e=>{let{elements:t}=e;const n=t.flat().some((e=>{let{center:t,element:n}=e;return n===i&&!t}));a&&n&&m()}),[a,i,m]);if(!o||!l)return{};const g=r||o.x,h=Math.ceil(l.x-g),E=Math.floor(l.y-o.y),b=t?[h,h+s/2,h+s]:[],y=(s/ae.FULLBLEED_RATIO-c)/2;return{snappable:t,snapHorizontal:t,snapVertical:t,snapCenter:t,snapGap:t,isDisplaySnapDigit:!1,onSnap:f,horizontalGuidelines:t?[E-y,E,E+c/2,E+c,E+c+y]:[],verticalGuidelines:b,elementGuidelines:t?[...n,i]:[]}};const iI=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,u.useEffect)((()=>{let t=!0;const n=()=>{t&&e.current?.updateRect?.()};n();const r=setTimeout(n);return()=>{t=!1,clearTimeout(r)}}),t)};const sI=function(e){(0,u.useEffect)((()=>{const t=()=>e.current?.updateRect();return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])};const cI=function(e,t){const{left:n,right:r,top:a,bottom:o}=e.getBoundingClientRect(),l=t.getBoundingClientRect();return n>l.right||r<l.left||o<l.top||a>l.bottom};const dI=function(){const{deleteSelectedElements:e}=Sa((e=>({deleteSelectedElements:e.actions.deleteSelectedElements}))),{fullbleedContainer:t}=xs((e=>{let{state:{fullbleedContainer:t}}=e;return{fullbleedContainer:t}}));return{handleElementOutOfCanvas:n=>!!cI(n,t)&&(e(),!0)}};const uI=function(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=Ts(0,n.x-2,n.y-2,n.width+4,n.height+4),o=Ts(0,r.x,r.y,r.width,r.height),l=new(zi().Response);return zi().testPolygonPolygon(a,o,l),l.bInA};const pI=function(e){let{selectedElement:t}=e;const[n,r]=(0,u.useState)(_o.getItemByKey(yo.BACKGROUND_IS_SET_DIALOG_DISMISSED)),{setBackgroundElement:a,isDefaultBackground:o}=Sa((e=>({setBackgroundElement:e.actions.setBackgroundElement,isDefaultBackground:e.state.currentPage?.elements[0]?.isDefaultBackground}))),{fullbleedContainer:l}=xs((e=>{let{state:{fullbleedContainer:t}}=e;return{fullbleedContainer:t}})),{showSnackbar:i}=(0,hr.useSnackbar)();return{handleFullbleedMediaAsBackground:e=>{o&&A.MEDIA_ELEMENT_TYPES.includes(t.type)&&uI(e,l)&&(a({elementId:t.id}),n||(i({message:(0,d.__)("Full bleed images and videos are automatically set as background. Double click to scale and position at any time.","web-stories"),dismissible:!0}),_o.setItemByKey(yo.BACKGROUND_IS_SET_DIALOG_DISMISSED,!0),r(!0)))}}};const mI=function(e){let{setIsDragging:t,resetMoveable:n,selectedElement:r,setTransformStyle:a,frame:o}=e;const{isDropSource:l,handleDrag:i,handleDrop:s,setDraggingResource:c}=Hi((e=>{let{actions:{handleDrag:t,handleDrop:n,isDropSource:r,setDraggingResource:a}}=e;return{handleDrag:t,handleDrop:n,setDraggingResource:a,isDropSource:r}})),{handleElementOutOfCanvas:d}=dI(),{handleFullbleedMediaAsBackground:p}=pI({selectedElement:r}),{updateSelectedElements:m}=Sa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{editorToDataX:f,editorToDataY:g}=(0,mc.default)((e=>{let{actions:{editorToDataX:t,editorToDataY:n}}=e;return{editorToDataX:t,editorToDataY:n}})),h=(0,u.useBatchingCallback)((e=>{t(!1),c(null),n(e)}),[t,c,n]);return{onDrag:e=>{let{target:n,beforeTranslate:s,clientX:d,clientY:u}=e;t(!0),l(r.type)&&c(r.resource),o.translate=s,a(n,o),l(r.type)&&i(r.resource,d,u,r.id)},throttleDrag:0,onDragStart:e=>{let{set:t}=e;t(o.translate)},onDragEnd:e=>{let{target:n,isDrag:a}=e;if(!a)return!1;if(d(n))return t(!1),void c(null);const i=e=>Math.abs(e)<=1?0:e,[u,E]=o.translate;if(0!==u||0!==E){const e={x:i(r.x+f(u)),y:i(r.y+g(E))};m({properties:e}),l(r.type)&&s(r.resource,r.id)}h(n),p(n)}}},fI=[],gI=["n","s"],hI=["e","w"],EI=["nw","ne","sw","se"];function bI(e){let{vertical:t,horizontal:n,diagonal:r}=e;return[...t?gI:fI,...n?hI:fI,...r?EI:fI]}const yI=function(e){let{resetMoveable:t,selectedElement:n,setTransformStyle:r,frame:a,isEditMode:o,pushTransform:l,classNames:i,forceLockRatio:s}=e;const{updateSelectedElements:c}=Sa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{handleElementOutOfCanvas:d}=dI(),{handleFullbleedMediaAsBackground:p}=pI({selectedElement:n}),{editorToDataX:m,editorToDataY:f,dataToEditorY:g,dataToEditorX:h}=(0,mc.default)((e=>{let{actions:{editorToDataX:t,editorToDataY:n,dataToEditorY:r,dataToEditorX:a}}=e;return{editorToDataX:t,editorToDataY:n,dataToEditorY:r,dataToEditorX:a}})),{lockAspectRatio:E,type:b}=n,y="text"===b,[_,v]=(0,u.useState)(!0),w=!y&&(s||E)||y&&_,{resizeRules:T,updateForResizeEvent:S}=(0,A.getDefinitionForType)(b),C=h(T.minWidth),I=g(T.minHeight),x=n.width/n.height,k=n.width<=T.minWidth||n.height<=T.minHeight;return{onResize:e=>{let{target:t,direction:o,width:l,height:i,drag:s}=e,c=l,d=i,u=null;w?(c<C&&(c=C,d=c/x),d<I&&(d=I,c=I*x)):(d=Math.max(d,I),c=Math.max(c,C)),S&&(u=S(n,o,m(c,!1),f(d,!1))),u&&u.height&&(d=g(u.height)),u&&u.marginOffset&&(t.querySelector(".syncMargin").style.margin=-g(u.marginOffset)/2+"px 0"),t.style.width=`${c}px`,t.style.height=`${d}px`,a.direction=o,a.resize=[c,d],a.translate=s.beforeTranslate,a.updates=u,r(t,a)},onResizeStart:e=>{let{setOrigin:t,dragStart:r,direction:i}=e;t(["%","%"]),r&&r.set(a.translate);const s=0!==i[0]&&0!==i[1];_!==s&&y&&v(s),o&&l(n.id,a)},onResizeEnd:e=>{let{target:r}=e;if(d(r))return;const[o,l]=a.resize;if(0!==o&&0!==l){const{direction:e}=a,[t,r]=a.translate,i=m(o),s=f(l),d={width:i,height:s,x:n.x+m(t),y:n.y+f(r)};S&&Object.assign(d,S(n,e,i,s)),c({properties:d})}v(!0),t(r),p(r)},keepRatio:w,renderDirections:bI(T),className:oI()(i,{"visually-hide-handles":k})}};const utils_normalizeRotationDegrees=function(e){return(e%360+360)%360};const _I=function(e){let{selectedElement:t,isEditMode:n,pushTransform:r,frame:a,setTransformStyle:o,resetMoveable:l,throttleRotation:i}=e;const{updateSelectedElements:s}=Sa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{handleElementOutOfCanvas:c}=dI();return{throttleRotate:i?30:0,onRotate:e=>{let{target:t,beforeRotate:n}=e;a.rotate=utils_normalizeRotationDegrees(n),o(t,a)},onRotateEnd:e=>{let{target:t}=e;if(c(t))return;const n={rotationAngle:Math.round(a.rotate)};s({properties:n}),l(t)},onRotateStart:e=>{let{set:o}=e;n&&r(t.id,a),o(a.rotate)}}};function vI(){return vI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vI.apply(this,arguments)}const wI=(0,u.forwardRef)((function SingleSelectionMoveable(e,t){let{selectedElement:n,targetEl:r,pushEvent:a,isEditMode:o,...l}=e;const i=(0,u.useRef)(null),[s,d]=(0,u.useState)(!1),p=xs((e=>{let{state:t}=e;return t.nodesById})),m=(0,mc.default)((e=>{let{actions:t}=e;return t.getBox})),f=(0,C.useTransform)((e=>{let{actions:t}=e;return t.pushTransform})),{zoomSetting:g,scrollLeft:h,scrollTop:E}=Zi((e=>{let{state:t}=e;return{zoomSetting:t.zoomSetting,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}})),b=!n.isBackground,y=(0,u.useRef)(),_=Sa((e=>{let{state:t}=e;return t.currentPage?.elements[0]?.id})),v=(0,tr.useGlobalIsKeyPressed)("shift");sI(i),(0,u.useEffect)((()=>{y.current=a}),[a]),(0,u.useEffect)((()=>{i.current&&i.current.updateRect()}),[h,E]),iI(i,[g]),(0,u.useEffect)((()=>{i.current&&(y.current&&r.contains(y.current.target)&&b&&i.current.moveable.dragStart(y.current),i.current.updateRect())}),[r,i,b]),(0,u.useEffect)((()=>{i.current&&i.current.updateRect()}));const w=m(n),T=(0,u.useMemo)((()=>({translate:[0,0],rotate:w.rotationAngle,resize:[0,0],updates:null})),[w.rotationAngle]),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;T.translate=t.translate,T.direction=t.direction,T.resize=t.resize,T.updates=t.updates,T.rotate=t.rotate,e.style.transform=`translate(${T.translate[0]}px, ${T.translate[1]}px) rotate(${T.rotate}deg)`,T.resize[0]&&(e.style.width=`${T.resize[0]}px`),T.resize[1]&&(e.style.height=`${T.resize[1]}px`),f(n.id,T)},A=(0,u.useBatchingCallback)((e=>{i.current&&(T.direction=[0,0],T.translate=[0,0],T.resize=[0,0],T.updates=null,f(n.id,null),e.style.transform="",e.style.width="",e.style.height="",i.current.updateRect())}),[T,f,n.id]),x=!o,k=s,O=oI()("default-moveable",{"hide-handles":k,"type-text":"text"===n.type}),N=mI({setIsDragging:d,resetMoveable:A,selectedElement:n,setTransformStyle:S,frame:T}),P=o?{onDrag:()=>!1,onDragEnd:()=>!1,onDragStart:()=>!1}:N,R=yI({resetMoveable:A,selectedElement:n,setTransformStyle:S,frame:T,isEditMode:o,pushTransform:f,classNames:O,forceLockRatio:v}),M=_I({selectedElement:n,isEditMode:o,pushTransform:f,frame:T,setTransformStyle:S,resetMoveable:A,throttleRotation:v}),L=Object.values(gn(p,[n.id,_])),D=lI({otherNodes:L,canSnap:x&&b,isDragging:s});return c.createElement(I.Moveable,vI({},l,{className:O,zIndex:0,ref:(0,u.useCombinedRefs)(i,t),target:r,edge:!0,draggable:b,resizable:b&&!k,rotatable:b&&!k},P,R,M,D,{origin:!1,pinchable:!0}))})),TI=(0,I.withOverlay)((0,p.default)(ZC).withConfig({displayName:"editLayer__LayerWithGrayout",componentId:"sc-1j9iuj3-0"})(["background-color:",";"],(e=>{let{grayout:t,theme:n}=e;return t?n.colors.opacity.overlayDark:"transparent"}))),SI=(0,I.withOverlay)(rI);function EditLayerForElement(e){let{element:t,showOverflow:n}=e;const r=(0,u.useRef)(null),a=(0,u.useRef)(null),{editModeGrayout:o}=(0,A.getDefinitionForType)(t.type),{isTrimMode:l}=dS((e=>{let{state:{isTrimMode:t}}=e;return{isTrimMode:t}})),{clearEditing:i,onMoveableMount:s}=xs((e=>({clearEditing:e.actions.clearEditing,onMoveableMount:e.state.onMoveableMount}))),p=rs(),[m,f]=(0,u.useState)(null);(0,tr.useKeyDownEffect)(r,{key:"esc",editable:!0},(()=>i()),[i]),(0,u.useEffect)((()=>()=>p(!1)),[p]);const g=(0,u.useRef)(null),h=(0,u.useCallback)((e=>{g.current=e,s?.(e)}),[s]),E=(0,u.useCallback)((()=>{g.current&&g.current.updateRect()}),[]),{hasEditModeMoveable:b}=(0,A.getDefinitionForType)(t.type);return c.createElement(TI,{ref:r,"aria-label":(0,d._x)("Edit layer","compound noun","web-stories"),"data-testid":"editLayer",grayout:o,zIndex:3,onPointerDown:e=>{e.target!==r.current&&e.target!==a.current||i()}},c.createElement(SI,{ref:a,fullBleedContainerLabel:(0,d.__)("Fullbleed area (Edit layer)","web-stories"),isControlled:!0,showOverflow:n,overflow:n?"visible":"hidden"},c.createElement(PC,{editWrapper:b&&m,onResize:E,element:t,ref:f})),b&&m&&c.createElement(wI,{selectedElement:t,targetEl:m,isEditMode:!0,ref:h}),l&&c.createElement(nI,{showOverflow:!0},c.createElement(AC,null)))}const CI=(0,u.memo)((function EditLayer(){const{currentPage:e}=Sa((e=>({currentPage:e.state.currentPage}))),{editingElement:t,showOverflow:n=!0}=xs((e=>{let{state:{editingElement:t,editingElementState:{showOverflow:n}={}}}=e;return{editingElement:t,showOverflow:n}})),r=t&&e&&e.elements.find((e=>e.id===t));return r?c.createElement(EditLayerForElement,{element:r,showOverflow:n}):null}));const II=function(){const{currentPage:e,selectedElements:t}=Sa((e=>({currentPage:e.state.currentPage,selectedElements:e.state.selectedElements}))),{pageAttachmentContainer:n}=xs((e=>({pageAttachmentContainer:e.state.pageAttachmentContainer}))),{elements:r}=e,a=(0,u.useMemo)((()=>r.filter((e=>{let{link:t}=e;return t?.url?.length}))),[r]),o=(0,u.useCallback)((()=>{if(!n)return!1;if(!e?.pageAttachment?.url?.length)return!1;return t.filter((e=>{let{link:t}=e;return t?.url?.length})).filter((e=>(0,A.isElementBelowLimit)(e))).length>0}),[e,t,n]),l=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n?e.filter((e=>(0,A.isElementBelowLimit)(e,t))):[]}),[n]),i=(0,u.useCallback)((()=>l(a,!0)),[a,l]),s=(0,u.useCallback)((t=>!!n&&(!!e?.pageAttachment?.url.length&&(0,A.isElementBelowLimit)(t,!1))),[n,e]);return{getLinksInAttachmentArea:i,hasInvalidLinkSelected:o(),isElementInAttachmentArea:s,getElementsInAttachmentArea:l}};var AI,xI;function kI(){return kI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kI.apply(this,arguments)}const SvgDefaultIcon=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kI({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,AI||(AI=c.createElement("path",{fillOpacity:.1,d:"M12 0c6.6 0 12 5.4 12 12s-5.4 12-12 12S0 18.6 0 12 5.4 0 12 0z"})),xI||(xI=c.createElement("path",{d:"M13.8 14.6c.1.1.2.3.2.5s-.1.3-.2.5L12.3 17c-.7.7-1.7 1.1-2.7 1.1-1 0-1.9-.4-2.7-1.1-.7-.7-1.1-1.7-1.1-2.7 0-1 .4-1.9 1.1-2.7l1.5-1.5c.2 0 .3-.1.5-.1s.3.1.5.2c.1.1.2.3.2.5s-.1.4-.2.5l-1.5 1.5c-.5.5-.7 1.1-.7 1.7 0 .6.3 1.3.7 1.7.5.5 1.1.7 1.7.7s1.3-.3 1.7-.7l1.5-1.5c.3-.3.7-.3 1 0zM17 7c-.7-.7-1.7-1.1-2.7-1.1-1 0-1.9.4-2.7 1.1l-1.5 1.5c0 .1-.1.3-.1.4 0 .2.1.3.2.5.1.1.3.2.5.2s.3-.1.5-.2l1.5-1.5c.5-.5 1.1-.7 1.7-.7.6 0 1.3.3 1.7.7.5.5.7 1.1.7 1.7 0 .6-.3 1.3-.7 1.7l-1.5 1.5c-.1.1-.2.3-.2.5s.1.3.2.5c.1.1.3.2.5.2s.3-.1.5-.2l1.5-1.5c.7-.7 1.1-1.7 1.1-2.7-.1-1-.5-1.9-1.2-2.6zm-7.9 7.2c0 .2.1.3.2.5.1.1.3.2.5.2s.4-.1.5-.2l4.5-4.5c.1-.1.2-.3.2-.5s-.1-.4-.2-.5c-.3-.2-.8-.2-1 .1l-4.5 4.5c-.1.1-.2.3-.2.4z"})))},OI=(0,c.memo)(SvgDefaultIcon);var NI;function PI(){return PI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PI.apply(this,arguments)}const SvgArrowBar=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",PI({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 8","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,NI||(NI=c.createElement("path",{d:"M18 7.7c-.2 0-.5-.1-.7-.2l-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4c.5-.2 1-.2 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"})))},RI=(0,c.memo)(SvgArrowBar),MI=p.default.div.withConfig({displayName:"pageAttachment__Wrapper",componentId:"sc-1bseqmx-0"})(["position:absolute;display:flex;align-items:center;justify-content:flex-end;flex-direction:column;bottom:0;height:20%;width:100%;color:",";z-index:3;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),LI=p.default.div.withConfig({displayName:"pageAttachment__Guideline",componentId:"sc-1bseqmx-1"})(["mix-blend-mode:difference;position:absolute;height:1px;bottom:20%;width:100%;background-image:",";background-position:top;background-size:16px 0.5px;background-repeat:repeat-x;z-index:3;"],(e=>{let{theme:t}=e;return`linear-gradient(to right, ${t.colors.standard.black} 50%, ${t.colors.standard.white} 0%)`})),DI=(0,p.default)(RI).withConfig({displayName:"pageAttachment__ArrowBar",componentId:"sc-1bseqmx-2"})(["display:block;cursor:pointer;margin-bottom:10px;filter:drop-shadow(0px 2px 6px rgba(0,0,0,0.3));width:20px;height:8px;"]),BI=p.default.div.withConfig({displayName:"pageAttachment__OutlinkChip",componentId:"sc-1bseqmx-3"})(["height:36px;display:flex;position:relative;padding:10px 6px;margin:0 0 20px;max-width:calc(100% - 64px);border-radius:30px;place-items:center;box-shadow:0px 4px 10px rgba(0,0,0,0.15);background:",";"],(e=>{let{bgColor:t}=e;return t})),FI=p.default.span.withConfig({displayName:"pageAttachment__TextWrapper",componentId:"sc-1bseqmx-4"})(["font-family:Roboto,sans-serif;font-size:16px;line-height:18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:relative;padding-inline-start:6px;padding-inline-end:8px;height:16px;letter-spacing:0.3px;font-weight:700;max-width:210px;color:",";"],(e=>{let{fgColor:t}=e;return t})),HI=p.default.div.withConfig({displayName:"pageAttachment__Tooltip",componentId:"sc-1bseqmx-5"})(["background-color:",";color:",";width:200px;padding:8px;font-size:14px;border-radius:4px;text-align:center;"],(e=>{let{theme:t}=e;return t.colors.standard.black}),(e=>{let{theme:t}=e;return t.colors.standard.white})),UI=p.default.div.withConfig({displayName:"pageAttachment__LinkImage",componentId:"sc-1bseqmx-6"})(["height:24px;width:24px;vertical-align:middle;background-size:cover;background-repeat:no-repeat;background-position:50%;border-radius:50%;background-image:url('","') !important;"],(e=>{let{icon:t}=e;return t})),zI={x:8},GI="#FFFFFF",jI="#000000";const YI=function PageAttachment(e){let{pageAttachment:t={}}=e;const{displayLinkGuidelines:n,pageAttachmentContainer:r,setPageAttachmentContainer:a}=xs((e=>({displayLinkGuidelines:e.state.displayLinkGuidelines,pageAttachmentContainer:e.state.pageAttachmentContainer,setPageAttachmentContainer:e.actions.setPageAttachmentContainer}))),{hasInvalidLinkSelected:o}=II(),{ctaText:l=(0,d.__)("Learn more","web-stories"),url:i,icon:s,theme:u}=t,{isRTL:p,styleConstants:{topOffset:m}={}}=Y(),f=u===He?jI:GI,g=u===He?GI:jI;return c.createElement(c.Fragment,null,(n||o)&&c.createElement(LI,null),c.createElement(MI,{role:"presentation",ref:a},i?.length>0&&c.createElement(c.Fragment,null,c.createElement(DI,{fill:f}),c.createElement(BI,{bgColor:f},s?c.createElement(UI,{icon:s}):c.createElement(OI,{fill:g,width:24,height:24}),c.createElement(FI,{fgColor:g},l)),r&&o&&c.createElement(Zp.Popup,{isRTL:p,anchor:{current:r},isOpen:!0,placement:Ed.PLACEMENT.LEFT,spacing:zI,topOffset:m},c.createElement(HI,null,(0,d.__)("Links can not reside below the dashed line when a page attachment is present. Your viewers will not be able to click on the link.","web-stories"))))))};const ZI=function(e){const t=/^(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})$/.exec(e);return t?3600*(t[1]?parseInt(t[1]):0)+60*parseInt(t[2])+parseInt(t[3])+parseInt(t[4])/1e3:null},WI=p.default.span.withConfig({displayName:"cue__CueWrapper",componentId:"sc-h5j1x4-0"})(["text-align:center;height:",";"],(e=>{let{$height:t}=e;return`${t}px`})),VI=p.default.span.withConfig({displayName:"cue__CueEl",componentId:"sc-h5j1x4-1"})(["color:",";"],(e=>{let{$isFutureCue:t,theme:n}=e;return t?n.colors.fg.black:n.colors.fg.white})),$I=p.default.span.withConfig({displayName:"cue__Section",componentId:"sc-h5j1x4-2"})(["margin:0 10px 10px;padding:6px 12px;vertical-align:middle;border-radius:15px;background:rgba(11,11,11,0.6);color:rgba(255,255,255,1);display:inline-block;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen-Sans,Ubuntu,Cantarell,'Helvetica Neue',sans-serif;line-height:1.4;word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;"]);const qI=function Cue(e){let{cue:t,videoTime:n,height:r}=e;const a=t.getCueAsHTML();return c.createElement(WI,{$height:r},c.createElement($I,null,[...a.childNodes].map((e=>{if("timestamp"===e.target)return null;{let t=null;"timestamp"===e.previousSibling?.target&&(t=ZI(e.previousSibling.data));const r=t>n;return e.nodeType===Node.TEXT_NODE?null!==t?c.createElement("span",null,c.createElement(VI,{$isFutureCue:r},e.textContent)):c.createElement(VI,null,e.textContent):null!==t?c.createElement("span",null,c.createElement(VI,{$isFutureCue:r,dangerouslySetInnerHTML:{__html:e.innerHTML}})):c.createElement(VI,{dangerouslySetInnerHTML:{__html:e.innerHTML}})}}))))},XI=p.default.div.withConfig({displayName:"trackRenderer__Track",componentId:"sc-7rx40r-0"})(["width:100%;height:100%;display:grid;align-content:end;font-size:",";"],(e=>{let{$fontSize:t}=e;return`${t}px`}));const KI=function TrackRenderer(e){let{elementId:t,trackIndex:n}=e;const{pageWidth:r,pageHeight:a}=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),o=.04*r,l=.2*a,[i,s]=(0,u.useState)(null),[d,p]=(0,u.useState)(0),[m,f]=(0,u.useState)([]),g=(0,u.useCallback)((()=>{const e=i?.activeCues?[...i.activeCues]:[];f(e)}),[i]);return(0,u.useEffect)((()=>{g(),p(0);const e=document.getElementById(t);if(!e)return;const r=e.textTracks?.[n];return r?(r.mode="hidden",g(),s(r),e.addEventListener("timeupdate",(()=>{p(e.currentTime)})),r.addEventListener("cuechange",g),()=>{r.removeEventListener("cuechange",g)}):void 0}),[n,g,t,r,a]),m&&i?c.createElement(XI,{$fontSize:o},m.map(((e,t)=>c.createElement(qI,{key:t,cue:e,videoTime:d,height:l})))):null},QI=(0,p.default)(ZC).withConfig({displayName:"mediaCaptionsLayer__CaptionsLayer",componentId:"sc-11mx67a-0"})([""]),JI=(0,p.default)(rI).withConfig({displayName:"mediaCaptionsLayer__CaptionsPageArea",componentId:"sc-11mx67a-1"})(["position:absolute;pointer-events:none;"]),eA=p.default.div.withConfig({displayName:"mediaCaptionsLayer__CaptionsCanvas",componentId:"sc-11mx67a-2"})(["background:transparent;border-radius:5px;position:absolute;z-index:2;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"]);const tA=function MediaCaptionsLayer(){const{isEditing:e}=xs((e=>{let{state:{isEditing:t}}=e;return{isEditing:t}})),{currentPageId:t,backgroundAudio:n,videoElement:r}=Sa((e=>{let{state:t}=e;const{selectedElements:n,currentPage:r}=t,{backgroundAudio:a}=r;let o=null,l=null;if(1===n.length){const e=n[0],{isBackground:t,type:r,tracks:i}=e;t&&a&&a?.tracks?.length>0&&(o=a),"video"===r&&i?.length>0&&(l=e)}return{currentPageId:r?.id,backgroundAudio:o,videoElement:l}})),[a,o]=(0,u.useState)(0),[l,i]=(0,u.useState)("");return(0,u.useEffect)((()=>{if(o(0),i(""),n)return i(`page-${t}-background-audio`),void o(n.tracks.length);!e&&r&&(i(`video-${r.id}`),o(r.tracks.length))}),[r,n,t,e]),a?c.createElement(QI,null,c.createElement(JI,{withSafezone:!1,showOverflow:!0},c.createElement(eA,null,Array.from({length:a}).map(((e,t)=>c.createElement(KI,{key:t,elementId:l,trackIndex:t})))))):null},nA=(0,p.default)(rI).withConfig({displayName:"displayLayer__DisplayPageArea",componentId:"sc-13e1aq-0"})(["position:absolute;"]);function DisplayPage(e){let{pageElements:t,editingElement:n}=e;return t?t.map((e=>n===e.id?null:c.createElement(yc,{key:e.id,element:e,isAnimatable:!0}))):null}function DisplayPageAnimationController(e){let{resetAnimationState:t}=e;const{animationState:n,pageId:r}=Sa((e=>{let{state:t}=e;return{animationState:t.animationState,pageId:t.currentPage?.id}})),a=(0,kn.useStoryAnimationContext)((e=>{let{actions:t}=e;return t.WAAPIAnimationMethods}));return(0,u.useEffect)((()=>{switch(n){case kn.STORY_ANIMATION_STATE.PLAYING_SELECTED:case kn.STORY_ANIMATION_STATE.PLAYING:return void a.play();case kn.STORY_ANIMATION_STATE.RESET:return void a.reset();case kn.STORY_ANIMATION_STATE.SCRUBBING:case kn.STORY_ANIMATION_STATE.PAUSED:return void a.pause();default:return}}),[n,a]),(0,u.useEffect)((()=>t),[t,r]),null}function StoryAnimations(e){let{children:t}=e;const{isAnimationPlaying:n,currentPageAnimations:r,currentPageElements:a,selectedElements:o,updateAnimationState:l}=Sa((e=>{let{state:t,actions:n}=e;return{isAnimationPlaying:t.animationState===kn.STORY_ANIMATION_STATE.PLAYING_SELECTED,currentPageAnimations:t.currentPage?.animations||je,currentPageElements:t.currentPage?.elements||je,selectedElements:t.selectedElements,updateAnimationState:n.updateAnimationState}})),i=(0,u.useCallback)((()=>{l({animationState:kn.STORY_ANIMATION_STATE.RESET})}),[l]),s=(0,u.useMemo)((()=>o.map((e=>e.id))),[o]);return c.createElement(kn.StoryAnimation.Provider,{animations:r,elements:a,onWAAPIFinish:i,selectedElementIds:n?s:je},c.createElement(DisplayPageAnimationController,{resetAnimationState:i}),t)}DisplayPageAnimationController.propTypes={resetAnimationState:ma().func};const rA=(0,u.memo)((function DisplayLayer(){const{backgroundColor:e,isBackgroundSelected:t,pageAttachment:n,hasCurrentPage:r}=Sa((e=>{let{state:t}=e;return{hasCurrentPage:Boolean(t.currentPage),backgroundColor:t.currentPage?.backgroundColor,isBackgroundSelected:t.selectedElements?.[0]?.isBackground,pageAttachment:t.currentPage?.pageAttachment}})),a=Sa((e=>{let{state:t}=e;return t.currentPage?.elements||je})),o=ks(Is),{editingElement:l,setPageContainer:i,setFullbleedContainer:s}=xs((e=>{let{state:{editingElement:t},actions:{setPageContainer:n,setFullbleedContainer:r}}=e;return{editingElement:t,setPageContainer:n,setFullbleedContainer:r}})),p=(0,u.useMemo)((()=>r&&c.createElement(YI,{pageAttachment:n})),[n,r]);return c.createElement(StoryAnimations,null,c.createElement(ZC,{"data-testid":"DisplayLayer",pointerEvents:"none","aria-label":(0,d._x)("Display layer","compound noun","web-stories")},c.createElement(nA,{ref:(0,u.useCombinedRefs)(i,o),fullbleedRef:s,background:e,isBackgroundSelected:t,fullBleedContainerLabel:(0,d.__)("Fullbleed area (Display layer)","web-stories"),overlay:p,isControlled:!0},c.createElement(DisplayPage,{pageElements:a,editingElement:l})),c.createElement(tA,null)))}));var aA=n(49640);const oA=function(e){const{selectedElementIds:t,selectedElements:n,arrangeSelection:r,clearSelection:a,deleteSelectedElements:o,duplicateElementsById:l,updateSelectedElements:i,setSelectedElementsById:s,currentPage:c,animationState:d,updateAnimationState:p}=Sa((e=>{let{state:{selectedElementIds:t,selectedElements:n,currentPage:r,animationState:a},actions:{arrangeSelection:o,clearSelection:l,deleteSelectedElements:i,duplicateElementsById:s,updateSelectedElements:c,setSelectedElementsById:d,updateAnimationState:u}}=e;return{currentPage:r,selectedElementIds:t,selectedElements:n,arrangeSelection:o,clearSelection:l,deleteSelectedElements:i,duplicateElementsById:s,updateSelectedElements:c,setSelectedElementsById:d,animationState:a,updateAnimationState:u}})),{actions:{clearTransforms:m}}=(0,C.useTransform)(),{isEditing:f,getNodeForElement:g,setEditingElement:h}=xs((e=>{let{state:{isEditing:t},actions:{getNodeForElement:n,setEditingElement:r}}=e;return{isEditing:t,getNodeForElement:n,setEditingElement:r}})),E=(0,u.useRef)(null);E.current=t,(0,u.useEffect)((()=>{const t=e.current;if(!t)return;const n=t.ownerDocument,r=()=>{setTimeout((()=>{if(n.activeElement===n.body){const e=E.current,n=1===e?.length?g(e[0]):null;if(""!==window.getSelection().toString())return;n?n.focus({preventScroll:!0}):t.focus({preventScroll:!0})}}),300)};return n.addEventListener("focusout",r,!0),()=>{n.removeEventListener("focusout",r,!0)}}),[e,g]),(0,tr.useGlobalKeyDownEffect)("delete",(()=>o()),[o]),(0,tr.useGlobalKeyDownEffect)("esc",(()=>{a(),m()}),[a,m]),(0,tr.useGlobalKeyDownEffect)({key:["mod+a"]},(()=>{const e=c.elements.map((e=>{let{id:t}=e;return t}));s({elementIds:e})}),[c,s]),(0,tr.useGlobalKeyDownEffect)({key:["up","down","left","right"],shift:!0},(e=>{let{key:t,shiftKey:r}=e;if(f)return;if(n?.[0]?.isBackground)return;const{dx:a,dy:o}=(0,aA.default)(t,r);i({properties:e=>{let{x:t,y:n}=e;return{x:t+a,y:n+o}}})}),[i,f,n]),(0,tr.useGlobalKeyDownEffect)({key:["mod+up","mod+down","mod+left","mod+right"],shift:!0},(e=>{const{key:t,shiftKey:n}=e;e.preventDefault();const a=function(e,t){if("ArrowUp"===e)return t?Pe:Me;if("ArrowDown"===e)return t?Re:Le;return null}(t,n);a&&r({position:a})}),[r]),(0,tr.useGlobalKeyDownEffect)({key:"enter",clickable:!1},(()=>{if(1!==n.length)return;const{type:e,id:t}=n[0],{hasEditMode:r}=(0,A.getDefinitionForType)(e);r&&h(t)}),[n,h]);const b=(0,u.useCallback)((()=>{0!==n.length&&l({elementIds:n.map((e=>e.id))})}),[l,n]);(0,tr.useGlobalKeyDownEffect)("clone",(()=>b()),[b]);const y=[kn.STORY_ANIMATION_STATE.PLAYING,kn.STORY_ANIMATION_STATE.PLAYING_SELECTED].includes(d);(0,tr.useGlobalKeyDownEffect)({key:["mod+k"]},(e=>{e.preventDefault(),p({animationState:y?kn.STORY_ANIMATION_STATE.RESET:kn.STORY_ANIMATION_STATE.PLAYING}),(0,L.trackEvent)("canvas_play_animations",{status:y?"stop":"play"})}),[y,p])};function lA(){let{url:e="",needsProxy:t=!1,rel:n=[],...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{needsProxy:t,url:e,rel:n,...r}}const iA=(0,p.default)(Tooltip).withConfig({displayName:"frame__StyledTooltip",componentId:"sc-1fjzoyw-0"})(["box-shadow:0px 6px 10px ",";align-items:center;p{display:flex;max-width:100%;}"],(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.black,.1)})),sA=p.default.div.withConfig({displayName:"frame__IconWrapper",componentId:"sc-1fjzoyw-1"})(["background-color:",";width:24px;height:24px;border-radius:50%;margin-right:8px;display:inline-block;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),cA=p.default.img.withConfig({displayName:"frame__BrandIcon",componentId:"sc-1fjzoyw-2"})(["width:100%;height:100%;border:none;"]),dA=p.default.span.withConfig({displayName:"frame__LinkDesc",componentId:"sc-1fjzoyw-3"})(["padding-top:2px;flex:1;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]);const uA=function(e){let{element:t,active:n,children:r,anchorRef:a}=e;const o=function(e){return e.link||null}(t),l=o?.url&&n?c.createElement(c.Fragment,null,c.createElement(sA,null,o?.icon&&c.createElement(cA,{src:o.icon,alt:(0,d.__)("Site Icon","web-stories")})),c.createElement(dA,null,o.desc||o.url)):null;return c.createElement(iA,{forceAnchorRef:a,placement:Ed.PLACEMENT.TOP_START,title:l},r)},pA=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const[r,a]=(0,u.useState)(null),[o,l]=(0,u.useState)(null),i=(0,u.useCallback)((n=>o=>{if(o.stopPropagation(),r!==n)return r&&e(o,r),a(n),void l(o);t(o,r),a(null)}),[e,t,r]);return(0,u.useEffect)((()=>{if(!r)return;const t=setTimeout((()=>{a(null),e(o,r)}),n||mA);return()=>{clearTimeout(t)}}),[r,o,e,n]),i},mA=200;function fA(){return fA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fA.apply(this,arguments)}const gA=p.default.div.withConfig({displayName:"frameElement__Wrapper",componentId:"sc-80q0sm-0"})([""," "," "," pointer-events:",";outline:1px solid transparent;transition:outline-color 0.5s;&:focus,&:active,&:hover{outline-color:",";}"],x.elementWithPosition,x.elementWithSize,x.elementWithRotation,(e=>{let{maskDisabled:t}=e;return t?"initial":"none"}),(e=>{let{theme:t,hasMask:n}=e;return n?"transparent":t.colors.border.selection})),hA=p.default.div.withConfig({displayName:"frameElement__EmptyFrame",componentId:"sc-80q0sm-1"})(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),NOOP=()=>{};const EA=(0,u.memo)((function FrameElement(e){let{id:t}=e;const[n,r]=(0,u.useState)(!1),{setNodeForElement:a,handleSelectElement:o,isEditing:l,setEditingElement:i,setEditingElementWithState:s}=xs((e=>{let{state:t,actions:n}=e;return{setNodeForElement:n.setNodeForElement,handleSelectElement:n.handleSelectElement,isEditing:t.isEditing,setEditingElement:n.setEditingElement,setEditingElementWithState:n.setEditingElementWithState}})),{isSelected:d,isOnlySelectedElement:p,isActive:m,isBackground:f,element:g}=Sa((e=>{let{state:r}=e;const a=r.selectedElementIds.includes(t),o=a&&1===r.selectedElementIds.length,i=o&&!n&&!l;return{isSelected:a,isBackground:r.currentPage?.elements[0].id===t,element:r.currentPage?.elements.find((e=>e.id===t)),isOnlySelectedElement:o,isActive:i}})),{type:h,flip:E}=g,{Frame:b,isMaskable:y,Controls:_}=(0,A.getDefinitionForType)(h),v=(0,u.useRef)(),[w,T]=(0,u.useState)(!1),{isRTL:S,styleConstants:{topOffset:I}={}}=Y(),{draggingResource:x,activeDropTargetId:k,isDropSource:O,registerDropTarget:N,unregisterDropTarget:P}=Hi((e=>{let{state:{draggingResource:t,activeDropTargetId:n},actions:{isDropSource:r,registerDropTarget:a,unregisterDropTarget:o}}=e;return{draggingResource:t,activeDropTargetId:n,isDropSource:r,registerDropTarget:a,unregisterDropTarget:o}})),R=(0,C.useTransform)((e=>{let{state:t}=e;return!d&&w&&!t.isAnythingTransforming})),M=(0,mc.default)((e=>{let{actions:t}=e;return t.getBox}));(0,u.useLayoutEffect)((()=>{a(t,v.current)}),[t,a]);const L=M(g);(0,C.useTransformHandler)(t,(e=>{const t=v.current;void 0!==e?.dropTargets?.hover&&(t.style.opacity=e.dropTargets.hover?0:1),r(null!==e)}));const{isMedia:D}=(0,A.getDefinitionForType)(h),B=(0,u.useCallback)((e=>{d||o(t,e),i(t)}),[t,i,o,d]),F=pA(NOOP,B),H=(0,Ln.getElementMask)(g),U=!H?.type||f&&H.type!==Ln.MaskTypes.RECTANGLE,z={onMouseDown:e=>{d||o(t,e),v.current.focus({preventScroll:!0}),f||e.stopPropagation()},onFocus:e=>{d||o(t,e)},onPointerEnter:()=>T(!0),onPointerLeave:()=>T(!1),onClick:D?F(t):null};return(0,s_.default)({node:U?v.current:null,eventData:{...i_.TRACKING_EVENTS.SELECT_ELEMENT,label:g.type},eventType:"pointerdown"}),c.createElement(uA,{element:g,active:R,anchorRef:v},_&&c.createElement(_,{isTransforming:n,box:L,elementRef:v,element:g,isRTL:S,topOffset:I,isActive:m}),c.createElement(gA,fA({ref:v,"data-element-id":t},L,{tabIndex:0,"aria-labelledby":`layer-${t}`,hasMask:y,"data-testid":"frameElement",maskDisabled:U},U?z:null),c.createElement(Ln.FrameWithMask,{element:g,fill:!0,flip:E,eventHandlers:U?null:z,draggingResource:x,activeDropTargetId:k,isDropSource:O,registerDropTarget:N,unregisterDropTarget:P},b?c.createElement(b,{wrapperRef:v,element:g,box:L,isOnlySelectedElement:p,setEditingElementWithState:s}):c.createElement(hA,null))))}));const bA=function(e){let{targetList:t,frames:n,setTransformStyle:r,onGroupEventStart:a,onGroupEventEnd:o,isDragging:l,setIsDragging:i}=e;const{draggingResource:s}=Hi((e=>{let{state:{draggingResource:t}}=e;return{draggingResource:t}})),{nodesById:c,handleSelectElement:d}=xs((e=>{let{state:{nodesById:t},actions:{handleSelectElement:n}}=e;return{nodesById:t,handleSelectElement:n}})),p=(0,u.useRef)({}),m=l||Boolean(s);return{onDragGroup:e=>{let{events:a}=e;a.forEach(((e,a)=>{let{target:o,beforeTranslate:l}=e;const i=n[a],{element:s}=t[a];i.translate=l,r(s.id,o,i)}))},onDragGroupEnd:e=>{let{targets:t,inputEvent:n}=e;i(!1),(e=>{if((0,I.areEventsDragging)(p.current,e))return!1;const t=Object.keys(c).find((t=>c[t].contains(e.target)));return t&&d(t,e),!0})(n)||o({targets:t})},onDragGroupStart:e=>{let{events:t,inputEvent:n}=e;(e=>{const{timeStamp:t,clientX:n,clientY:r}=e;p.current={timeStamp:t,clientX:n,clientY:r}})(n),l||i(!0),a({events:t,isDrag:!0})},className:"default-moveable "+(m?"hide-handles":""),resizable:!m,rotatable:!m}};const yA=function(e){let{onGroupEventEnd:t,targetList:n,setTransformStyle:r,frames:a}=e;const{editorToDataX:o,editorToDataY:l,dataToEditorY:i}=(0,mc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY,dataToEditorY:e.actions.dataToEditorY})));return{onResizeGroup:e=>{let{events:t}=e;t.forEach(((e,t)=>{let{target:s,direction:c,width:d,height:u,drag:p}=e;const m=a[t],{element:f,updateForResizeEvent:g}=n[t];let h=u;const E=d;let b=null;g&&(b=g(f,c,o(E),l(h))),b&&b.height&&(h=i(b.height)),s.style.width=`${E}px`,s.style.height=`${h}px`,m.direction=c,m.resize=[E,h],m.translate=p.beforeTranslate,m.updates=b,r(f.id,s,m)}))},onResizeGroupStart:e=>{let{events:t}=e;t.forEach(((e,t)=>{const n=a[t];e.setOrigin(["%","%"]),e.dragStart&&e.dragStart.set(n.translate)}))},onResizeGroupEnd:e=>{let{targets:n}=e;t({targets:n,isResize:!0})}}};const _A=function(e){let{onGroupEventStart:t,setTransformStyle:n,onGroupEventEnd:r,targetList:a,frames:o}=e;return{onRotateGroup:e=>{let{events:t}=e;t.forEach(((e,t)=>{let{target:r,beforeRotate:l,drag:i}=e;const s=o[t],{element:c}=a[t];s.rotate=utils_normalizeRotationDegrees(l),s.translate=i.beforeTranslate,n(c.id,r,s)}))},onRotateGroupEnd:e=>{let{targets:t}=e;r({targets:t,isRotate:!0})},onRotateGroupStart:e=>{let{events:n}=e;t({events:n,isRotate:!0})},throttleRotate:(0,tr.useGlobalIsKeyPressed)("shift")?30:0}};function vA(){return vA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vA.apply(this,arguments)}const wA=["nw","ne","sw","se"],TA=(0,u.forwardRef)((function MultiSelectionMoveable(e,t){let{selectedElements:n,...r}=e;const a=(0,u.useRef)(),{updateElementsById:o,deleteElementsById:l,backgroundElement:i}=Sa((e=>({updateElementsById:e.actions.updateElementsById,deleteElementsById:e.actions.deleteElementsById,backgroundElement:e.state.currentPage.elements[0]??{}}))),{nodesById:s,fullbleedContainer:d}=xs((e=>{let{state:{nodesById:t,fullbleedContainer:n}}=e;return{fullbleedContainer:n,nodesById:t}})),{editorToDataX:p,editorToDataY:m}=(0,mc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),{zoomSetting:f,scrollLeft:g,scrollTop:h}=Zi((e=>{let{state:{zoomSetting:t,scrollLeft:n,scrollTop:r}}=e;return{zoomSetting:t,scrollLeft:n,scrollTop:r}})),{actions:{pushTransform:E}}=(0,C.useTransform)();sI(a),(0,u.useEffect)((()=>{a.current&&a.current.updateRect()}),[n,a,s,g,h]),iI(a,[f]);const b=n.map((e=>({element:e,node:s[e.id],updateForResizeEvent:(0,A.getDefinitionForType)(e.type).updateForResizeEvent}))),[y,_]=(0,u.useState)(!1),v=(e,t,n)=>{t.style.transform=`translate(${n.translate[0]}px, ${n.translate[1]}px) rotate(${n.rotate}deg)`,E(e,n)},w=b?b.map((e=>{let{element:t}=e;return{translate:[0,0],rotate:t.rotationAngle,direction:[0,0],resize:[0,0],updates:null}})):[],T=e=>{let{events:t,isDrag:n,isRotate:r}=e;t.forEach(((e,t)=>{const a=w[t];n?e.set(a.translate):r&&e.set(a.rotate)}))},S=e=>{let{targets:t,isRotate:n,isResize:r}=e;const i={},s=[];t.forEach(((e,t)=>{const{element:a,updateForResizeEvent:o}=b[t];if(cI(e,d))return void s.push(a.id);const l=w[t],{direction:c}=l,u=e=>Math.abs(e)<=1?0:e,f={x:u(a.x+p(l.translate[0])),y:u(a.y+m(l.translate[1]))};n&&(f.rotationAngle=l.rotate);const[g,h]=l.resize;if(r&&(0!==g&&0!==h)){const e=p(g),t=m(h);f.width=e,f.height=t,o&&Object.assign(f,o(a,c,e,t))}i[a.id]=f})),o({elementIds:Object.keys(i),properties:e=>i[e.id]}),s.length>0&&l({elementIds:s}),b.forEach(((e,t)=>{let{element:n,node:r}=e;w[t].direction=[0,0],w[t].translate=[0,0],w[t].resize=[0,0],w[t].updates=null,r.style.transform="",r.style.width="",r.style.height="",E(n.id,null)})),a.current&&a.current.updateRect()},x=Object.values(gn(s,[...n.map((e=>e.id)),i.id])),k=lI({canSnap:!0,otherNodes:x}),O=bA({targetList:b,frames:w,setTransformStyle:v,onGroupEventStart:T,onGroupEventEnd:S,isDragging:y,setIsDragging:_}),N=yA({onGroupEventEnd:S,targetList:b,setTransformStyle:v,frames:w}),P=_A({onGroupEventStart:T,setTransformStyle:v,onGroupEventEnd:S,targetList:b,frames:w}),R=(0,u.useCombinedRefs)(a,t);return b.some((e=>{let{node:t}=e;return void 0===t}))?null:c.createElement(I.Moveable,vA({},r,{className:"default-moveable",ref:R,zIndex:0,target:b.map((e=>{let{node:t}=e;return t})),draggable:!0,resizable:!0,rotatable:!0,renderDirections:wA},O,P,N,k))})),SA=TA;function CA(){return CA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CA.apply(this,arguments)}const IA=function Selection(e){const t=Sa((e=>{let{state:t}=e;return t.selectedElements[0]?.id===t.currentPage.elements?.[0]?.id})),{selectedElements:n,isAnimating:r}=Sa((e=>({selectedElements:e.state.selectedElements,isAnimating:[kn.STORY_ANIMATION_STATE.PLAYING,kn.STORY_ANIMATION_STATE.PLAYING_SELECTED,kn.STORY_ANIMATION_STATE.SCRUBBING].includes(e.state.animationState)}))),{editingElement:a,lastSelectionEvent:o,nodesById:l,onMoveableMount:i}=xs((e=>{let{state:{editingElement:t,lastSelectionEvent:n,nodesById:r,onMoveableMount:a}}=e;return{editingElement:t,lastSelectionEvent:n,nodesById:r,onMoveableMount:a}}));if(0===n.length)return null;if(t)return null;const s=n[0]?.resource?.isPlaceholder;if(s)return null;if(a||r)return null;if(1===n.length){const t=n[0],r=l[t.id];return r?c.createElement(wI,CA({selectedElement:t,targetEl:r,pushEvent:o},e,i&&{ref:i})):null}return c.createElement(SA,CA({selectedElements:n},e,i&&{ref:i}))};var AA=n(2039);const xA=p.default.div.withConfig({displayName:"pagenav__Wrapper",componentId:"sc-j8q0gt-0"})(["display:flex;align-items:center;color:",";& > *{pointer-events:initial;}"],(e=>{let{theme:t}=e;return t.colors.fg.white})),kA=(0,p.default)(AA.default).withConfig({displayName:"pagenav__FlippableArrow",componentId:"sc-j8q0gt-1"})(["transform:rotate(","turn);"],(e=>{let{$isLeft:t}=e;return t?0:.5}));const OA=function PageNav(e){let{isNext:t=!0}=e;const{pages:n,currentPageIndex:r,setCurrentPage:a}=Sa((e=>{let{state:{pages:t,currentPageIndex:n},actions:{setCurrentPage:r}}=e;return{pages:t,currentPageIndex:n,setCurrentPage:r}})),{isRTL:o}=Y(),l=(0,u.useRef)(null),i=(0,u.useCallback)((e=>e.stopPropagation()),[]),s=(0,u.useCallback)((()=>{const e=t?n[r+1]:n[r-1];e&&a({pageId:e.id})}),[a,r,t,n]),{hasPageNavigation:p}=Zi((e=>{let{state:{hasPageNavigation:t}}=e;return{hasPageNavigation:t}}));if((0,s_.default)({node:l.current,eventData:i_.TRACKING_EVENTS.PAGE_NAVIGATION}),!p)return!1;const g=t&&r<n.length-1||!t&&r>0,h=o===t;return c.createElement(xA,null,c.createElement(m.Button,{ref:l,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.MEDIUM,"aria-disabled":!g,"aria-label":t?(0,d.__)("Next Page","web-stories"):(0,d.__)("Previous Page","web-stories"),onClick:s,onMouseDown:i},c.createElement(kA,{$isLeft:h})))},NA=(0,p.default)(rI).withConfig({displayName:"framesLayer__FramesPageArea",componentId:"sc-5ltl4w-0"})(["pointer-events:initial;"]),PA=48/ae.PAGE_WIDTH*100,RA=p.default.div.withConfig({displayName:"framesLayer__DesignSpaceGuidelineBorder",componentId:"sc-5ltl4w-1"})(["border:1px solid ",";left:","%;right:","%;top:0;bottom:0;position:absolute;pointer-events:none;z-index:1;visibility:",";"],(e=>{let{theme:t}=e;return t.colors.border.negativePress}),PA,PA,(e=>{let{isVisible:t}=e;return t?"visible":"hidden"}));function DesignSpaceGuideline(){const e=xs((e=>{let{actions:t}=e;return t.setDesignSpaceGuideline})),{isAnythingTransforming:t}=(0,C.useTransform)((e=>{let{state:t}=e;return{isAnythingTransforming:t.isAnythingTransforming}}));return c.createElement(RA,{ref:e,isVisible:t})}function FramesNavAndSelection(e){let{children:t}=e;const n=(0,u.useRef)(null);oA(n);const r=oc((e=>e.onOpenMenu));return(0,tr.useKeyDownEffect)(n,"mod+alt+shift+m",r),c.createElement(ZC,{ref:n,"data-testid":"FramesLayer",pointerEvents:"initial",tabIndex:"-1","aria-label":(0,d.__)("Frames layer","web-stories")},t,c.createElement(JC,null,c.createElement(OA,{isNext:!1})),c.createElement(eI,null,c.createElement(OA,null)),c.createElement(IA,{onContextMenu:r}))}function FrameElements(){const e=Sa((e=>{let{state:t}=e;return t.currentPage?.elements?.map((e=>e.id))||je})),t=Sa((e=>{let{state:t}=e;return[kn.STORY_ANIMATION_STATE.PLAYING,kn.STORY_ANIMATION_STATE.SCRUBBING].includes(t.animationState)})),n=oc((e=>e.onOpenMenu)),{setScrollOffset:r}=Zi((e=>{let{actions:{setScrollOffset:t}}=e;return{setScrollOffset:t}})),a=(0,u.useCallback)((e=>r({left:e.target.scrollLeft,top:e.target.scrollTop})),[r]);return!t&&c.createElement(NA,{fullBleedContainerLabel:(0,d.__)("Fullbleed area (Frames layer)","web-stories"),onContextMenu:n,onScroll:a},e.map((e=>c.createElement(EA,{key:e,id:e}))),c.createElement(DesignSpaceGuideline,null))}const MA=(0,u.memo)((function FramesLayer(){return c.createElement(FramesNavAndSelection,null,c.createElement(FrameElements,null))})),LA=(0,u.createContext)({state:{},actions:{}}),DA=e=>{let{children:t}=e;const[n,r]=(0,u.useState)(!1),a=(0,u.useCallback)((e=>{e.preventDefault(),(0,L.trackEvent)("shortcuts_menu_toggled",{status:n?"closed":"open"}),r((e=>!e))}),[n]),o=(0,u.useCallback)((()=>{n&&((0,L.trackEvent)("shortcuts_menu_toggled",{status:"closed"}),r(!1))}),[n]),l=(0,u.useMemo)((()=>({state:{isOpen:n},actions:{toggle:a,close:o}})),[o,n,a]);return c.createElement(LA.Provider,{value:l},t)};function BA(e){return(0,u.useContextSelector)(LA,e??u.identity)}const FA=(0,u.createContext)({state:{},actions:{}});const HA=function(e){return(0,u.useContextSelector)(FA,e??u.identity)},UA=(0,p.default)(Qp).withConfig({displayName:"carouselScroll__FlippableArrow",componentId:"sc-1npfzcu-0"})(["transform:rotate(","turn);"],(e=>{let{$isLeft:t}=e;return t?0:.5}));function CarouselScrollButton(e){let{isNext:t=!1}=e;const{hasOverflow:n,canScrollBack:r,canScrollForward:a,scrollBack:o,scrollForward:l}=HA((e=>{let{state:{hasOverflow:t,canScrollBack:n,canScrollForward:r},actions:{scrollBack:a,scrollForward:o}}=e;return{hasOverflow:t,canScrollBack:n,canScrollForward:r,scrollBack:a,scrollForward:o}})),{isRTL:i}=Y();if(!n)return null;const s=t?a:r,u=t?l:o,p=t?(0,d.__)("Scroll Forward","web-stories"):(0,d.__)("Scroll Back","web-stories"),g=i===t;return c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!s,onClick:u,"aria-label":p},c.createElement(UA,{$isLeft:g}))}function CarouselScrollForward(){return c.createElement(CarouselScrollButton,{isNext:!0})}function CarouselScrollBack(){return c.createElement(CarouselScrollButton,null)}const zA=(0,u.createContext)({state:{},actions:{}});const GA=function(e,t){const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(null),[l,i]=(0,u.useState)(null),[s,c]=(0,u.useState)(null),p=(0,Eb.default)("assertive"),m=(0,u.useCallback)((e=>{let{position:t,onStartReordering:n=(()=>{})}=e;return e=>{e.shiftKey||e.metaKey||(n(),i(t),c(e.target))}}),[]),f=(0,u.useRef)(null);return(0,u.useEffect)((()=>{f.current=a}),[a]),(0,u.useEffect)((()=>{if(!s)return;const t=t=>{if(t.preventDefault(),null!==f.current){const t=f.current;e(l,t>l?t-1:t)}c(null)},n=()=>r(!0),a=e=>{"Escape"===e.key&&(c(null),e.stopPropagation())};return s.ownerDocument.addEventListener("pointerup",t),s.ownerDocument.addEventListener("keydown",a,!0),s.addEventListener("pointermove",n),()=>{o(null),r(!1),s.removeEventListener("pointermove",n),s.ownerDocument.removeEventListener("pointerup",t),s.ownerDocument.removeEventListener("keydown",a,!0)}}),[s,l,o,r,e]),(0,u.useEffect)((()=>{if(n&&a){const e=t-a,n=(0,qe.default)(
/* translators: %d: new position. */
(0,d.__)("Reordering. Press Escape to abort. Release mouse to drop in position %d.","web-stories"),e);p(n)}}),[n,a,t,p]),{isReordering:n,currentSeparator:a,setCurrentSeparator:o,handleStartReordering:m}},jA=p.default.div.withConfig({displayName:"reorderableScroller__Scroller",componentId:"sc-lvxibs-0"})(["z-index:3;opacity:0;position:sticky;"]),YA=(0,p.default)(jA).withConfig({displayName:"reorderableScroller__HorizontalScroller",componentId:"sc-lvxibs-1"})(["padding-left:","px;height:100%;",""],(e=>{let{size:t}=e;return t}),(e=>{let{direction:t,size:n}=e;return-1===t?`\n        left: 0px;\n        margin-right: -${n}px;\n        `:`\n        right: 0px;\n        margin-left: -${n}px;\n        `})),ZA=(0,p.default)(jA).withConfig({displayName:"reorderableScroller__VerticalScroller",componentId:"sc-lvxibs-2"})(["padding-top:","px;width:100%;",""],(e=>{let{size:t}=e;return t}),(e=>{let{direction:t,size:n}=e;return-1===t?`\n        top: 0px;\n        margin-bottom: -${n}px;\n        `:`\n        bottom: 0px;\n        margin-top: -${n}px;\n        `}));const WA=(0,u.memo)((function ReorderableScroller(e){let{direction:t,size:n}=e;const{state:{canScrollEnd:r,canScrollStart:a,mode:o},actions:{startScroll:l}}=(0,u.useContext)(zA),[i,s]=(0,u.useState)(!1),d=(0,u.useCallback)((()=>s(!0)),[]),p=(0,u.useCallback)((()=>s(!1)),[]);(0,u.useEffect)((()=>{if(i)return l(t)}),[t,l,i]);const m=-1===t&&a||1===t&&r;if((0,u.useEffect)((()=>{m||s(!1)}),[m]),!m)return null;const f="horizontal"===o?YA:ZA;return c.createElement(f,{size:n,direction:t,onPointerEnter:d,onPointerLeave:p,mode:o})}));const VA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const[a,o]=(0,u.useState)(!1),[l,i]=(0,u.useState)(!1),[s,c]=(0,u.useState)(0),d=(0,u.useBatchingCallback)((()=>{const t=n.current;if(t)if("horizontal"===e){const e=t.scrollWidth-t.clientWidth;e<=0?(o(!1),i(!1)):(o(t.scrollLeft>0),i(t.scrollLeft<e))}else{const e=t.scrollHeight-t.clientHeight;e<=0?(o(!1),i(!1)):(o(t.scrollTop>0),i(t.scrollTop<e))}}),[e,n]),p=(0,u.useCallback)((e=>(c(e),()=>c(0))),[c]),m=t&&a,f=t&&l;return(0,u.useEffect)((()=>{if(0===s||!(m&&s<0||f&&s>0))return;let t=!0;const a=()=>{const o=Math.max(Math.min(.2*r,10),0);"horizontal"===e?n.current.scrollLeft+=s*o:n.current.scrollTop+=s*o,d(),t&&window.requestAnimationFrame(a)};return a(),()=>{t=!1}}),[s,d,m,f,r,e,n]),(0,u.useEffect)((()=>d()),[t,d]),{startScroll:p,canScrollEnd:f,canScrollStart:m}};function $A(){return $A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$A.apply(this,arguments)}const qA=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"reorderable__ReorderableContainer",componentId:"sc-plmujd-0"})(["display:flex;"]),XA=(0,u.forwardRef)((function Reorderable(e,t){let{children:n,onPositionChange:r,getItemSize:a,scrollSize:o=null,mode:l="horizontal",...i}=e;const s=(0,u.useRef)(null),d=t||s,{isReordering:p,currentSeparator:m,setCurrentSeparator:f,handleStartReordering:g}=GA(r,n.length),{startScroll:h,canScrollEnd:E,canScrollStart:b}=VA(l,p,d,a()),y={state:{isReordering:p,currentSeparator:m,containerRef:d,mode:l,canScrollEnd:E,canScrollStart:b},actions:{setCurrentSeparator:f,handleStartReordering:g,startScroll:h}},_=o||a();return c.createElement(zA.Provider,{value:y},c.createElement(qA,$A({ref:d},i),c.createElement(WA,{direction:-1,size:_}),n,c.createElement(WA,{direction:1,size:_})))}));const KA=function(e){return(0,u.useContextSelector)(zA,e??u.identity)};function QA(){return QA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QA.apply(this,arguments)}const JA=p.default.div.withConfig({displayName:"reorderableItem__Container",componentId:"sc-5aswet-0"})(["z-index:1;"]);const ex=function ReorderableItem(e){let{children:t,position:n,onStartReordering:r,disabled:a,...o}=e;const l=KA((e=>{let{actions:t}=e;return t.handleStartReordering}));return c.createElement(JA,QA({},a?null:{onPointerDown:l({position:n,onStartReordering:r})},o),t)};function tx(){return tx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tx.apply(this,arguments)}const nx=p.default.div.withConfig({displayName:"reorderableSeparator__Wrapper",componentId:"sc-1tnz6qo-0"})(["opacity:0;position:relative;z-index:",";&:hover{opacity:",";}"],(e=>{let{isReordering:t}=e;return t?2:-1}),(e=>{let{isReordering:t}=e;return t?1:0})),rx=p.default.div.withConfig({displayName:"reorderableSeparator__Line",componentId:"sc-1tnz6qo-1"})(["height:4px;margin:0 0 -4px;background:",";width:100%;"],(e=>{let{theme:t}=e;return t.colors.accent.secondary}));const ax=function ReorderableSeparator(e){let{position:t,children:n=c.createElement(rx,null),...r}=e;const a=(0,u.useRef)(null),{isReordering:o,setCurrentSeparator:l}=KA((e=>{let{state:t,actions:n}=e;return{isReordering:t.isReordering,setCurrentSeparator:n.setCurrentSeparator}})),i=(0,u.useCallback)((()=>{o&&l(t)}),[l,o,t]);return c.createElement(nx,tx({onPointerOver:i,ref:a,isReordering:o},r),n)};function ox(){return ox=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(this,arguments)}const lx=p.default.button.withConfig({displayName:"pagepreview__Page",componentId:"sc-f0c590-0"})(["display:block;position:relative;cursor:",";padding:0;border:0;background-color:transparent;height:","px;width:","px;flex:none;outline:0;&::after{content:'';display:block;position:absolute;left:-4px;right:-4px;top:-4px;bottom:-4px;pointer-events:none;border-style:solid;border-width:1px;border-radius:8px;border-color:",";}",""],(e=>{let{isInteractive:t}=e;return t?"pointer":"default"}),(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t}),(e=>{let{isActive:t,theme:n}=e;return t?n.colors.border.defaultActive:"transparent"}),(e=>{let{isInteractive:t,isActive:n,theme:r}=e;return t&&(0,p.css)(["&:focus::after{border-color:",";}"],(0,Xe.rgba)(r.colors.border.selection,n?1:.7))})),ix=p.default.div.withConfig({displayName:"pagepreview__PreviewWrapper",componentId:"sc-f0c590-1"})(["height:100%;position:relative;overflow:hidden;background-color:white;border-radius:4px;",""],(e=>{let{background:t}=e;return(0,kr.default)(t)})),sx=p.default.img.withConfig({displayName:"pagepreview__Image",componentId:"sc-f0c590-2"})(["width:100%;"]);const cx=function PagePreview(e){let{page:t,label:r,isCacheable:a=!1,cachedImage:o=null,setCachedImage:l=null,...i}=e;const{backgroundColor:s}=t,{width:d,height:p,isActive:m}=i,[f,g]=(0,u.useState)(),h=(0,u.useCallback)((e=>e&&g(e)),[]),E=(0,u.useRef)();return(0,u.useEffect)((()=>{a&&m&&E.current!==t&&(l({pageId:t.id,cachedImage:null}),E.current=null)}),[t,l,m,a]),(0,u.useEffect)((()=>{if(a&&!m&&f&&!o){const e=dc((()=>{n.e(3182).then(n.bind(n,87559)).then((e=>{e.toJpeg(f,{quality:1}).then((e=>l({pageId:t.id,cachedImage:e}))),E.current=t}))}),{timeout:5e3});return()=>uc(e)}}),[a,m,f,o,l,t]),(0,s_.default)({node:f,eventData:i_.TRACKING_EVENTS.PAGE_PREVIEW_CLICK}),c.createElement(ji,{pageSize:{width:d,height:p}},c.createElement(C.TransformProvider,null,c.createElement(lx,ox({ref:h,"aria-label":r},i),c.createElement(ix,{background:s},o?c.createElement(sx,{src:o,width:d,height:p,alt:r,decoding:"async"}):t.elements.map((e=>c.createElement(yc,{key:e.id,previewMode:!0,element:e})))))))},dx=p.default.div.withConfig({displayName:"carouselPage__Line",componentId:"sc-mvqls9-0"})(["background:",";height:","px;width:","px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t}),4),ux=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"carouselPage__ItemContainer",componentId:"sc-mvqls9-1"})(["display:flex;position:relative;margin:0;padding:0;"]),px=(0,p.default)(ax).withConfig({displayName:"carouselPage__PageSeparator",componentId:"sc-mvqls9-2"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;",":first-of-type &:first-of-type,",":last-of-type &:last-of-type{width:","px;}",":first-of-type &:first-of-type{left:","px;justify-content:flex-start;}",":first-of-type &:last-of-type{left:","px;}",":last-of-type &:last-of-type{justify-content:flex-end;}"],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:n}=e;return t+n}),(e=>{let{height:t}=e;return t}),ux,ux,(e=>{let{width:t,margin:n}=e;return(t+n+4)/2}),ux,(e=>{let{margin:t}=e;return(t-4)/2}),ux,(e=>{let{width:t,margin:n}=e;return n+t/2}),ux),mx=(0,p.default)(ex).withConfig({displayName:"carouselPage__ReorderablePage",componentId:"sc-mvqls9-3"})(["display:flex;z-index:1;margin-right:","px;margin-left:","px;"],(e=>{let{margin:t}=e;return t}),(e=>{let{margin:t,position:n}=e;return 0===n?t:0}));const fx=function CarouselPage(e){let{pageId:t,index:n}=e;const{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:o,clickPage:l,setPageRef:i,page:s,isCurrentPage:u,hasMultiplePages:p,setCachedImage:m,cachedImage:f}=HA((e=>{let{state:{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,numPages:o,pages:l,currentPageId:i,cachedImages:s},actions:{clickPage:c,setPageRef:d,setCachedImage:u}}=e;return{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,clickPage:c,setPageRef:d,page:l.find((e=>{let{id:n}=e;return n===t})),isCurrentPage:t===i,hasMultiplePages:o>1,cachedImage:s[t]||null,setCachedImage:u}}));return s&&s.id?c.createElement(ux,{ref:e=>i(s,e),"data-testid":`carousel-page-preview-${t}`},0===n&&c.createElement(px,{position:0,width:r,height:a,margin:o},c.createElement(dx,{height:a})),c.createElement(mx,{position:n,margin:o},c.createElement(cx,{tabIndex:u&&p?0:-1,onClick:()=>l(s),role:"option","data-page-id":s.id,label:u?(0,qe.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s (current page)","web-stories"),n+1):(0,qe.default)(
/* translators: %s: page number. */
(0,d.__)("Go to page %s","web-stories"),n+1),isActive:u&&p,page:s,width:r,height:a,isInteractive:p,isCacheable:!0,cachedImage:f,setCachedImage:m})),c.createElement(px,{position:n+1,width:r,height:a,margin:o},c.createElement(dx,{height:a}))):null};var gx=n(78559);const hx=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"skeletonPage__EmptyPage",componentId:"sc-szsuww-0"})(["display:block;position:relative;flex:0 0;margin:0;padding:0;border-radius:4px;"]);const Ex=function SkeletonPage(e){let{pageId:t,index:n}=e;const{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:o,page:l}=HA((e=>{let{state:{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,pages:o}}=e;return{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,page:o.find((e=>{let{id:n}=e;return n===t}))}}));if(!l||!l.id)return null;const i=l.elements[0],{isMedia:s}=(0,A.getDefinitionForType)(i.type),d=s&&_r(i.resource?.baseColor)?(0,gx.default)(i.resource.baseColor.replace("#","")):l.backgroundColor;return c.createElement(hx,{style:{flexBasis:`${r}px`,height:`${a}px`,marginLeft:`${0===n?o:0}px`,marginRight:`${o}px`,...(0,kr.default)(d)},"data-testid":`carousel-page-preview-skeleton-${t}`})},bx=(0,p.default)(XA).attrs({role:"listbox","aria-orientation":"horizontal",mode:"horizontal"}).withConfig({displayName:"carouselList__PageList",componentId:"sc-1oa14z5-0"})(["grid-area:carousel;flex-direction:row;align-items:center;justify-content:center;overflow-x:hidden;overflow-y:hidden;width:","px;list-style:none;padding:4px 0;margin:-4px 0;",";::-webkit-scrollbar-thumb{border:6px solid transparent !important;}"],(e=>{let{width:t}=e;return t}),(e=>{let{hasOverflow:t}=e;return t&&(0,p.css)(["overflow-x:visible;overflow-x:overlay;justify-content:flex-start;"])}));const yx=function CarouselList(){const{pageThumbWidth:e,carouselWidth:t,hasOverflow:n,pageIds:r,rearrangePages:a,setListRef:o,showSkeleton:l}=HA((e=>{let{state:{pageThumbWidth:t,carouselWidth:n,hasOverflow:r,pageIds:a,showSkeleton:o},actions:{rearrangePages:l,setListRef:i}}=e;return{pageThumbWidth:t,carouselWidth:n,hasOverflow:r,pageIds:a,rearrangePages:l,setListRef:i,showSkeleton:o}})),i=l?Ex:fx;return c.createElement(bx,{mode:"horizontal",width:t,ref:o,hasOverflow:n,"aria-label":(0,d.__)("Pages List","web-stories"),onPositionChange:a,getItemSize:()=>e},r.map(((e,t)=>c.createElement(i,{key:e,pageId:e,index:t}))))};var _x;function vx(){return vx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vx.apply(this,arguments)}const SvgChevronUpSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",vx({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_x||(_x=c.createElement("path",{d:"m12 17 4-3 4 3",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},wx=(0,c.memo)(SvgChevronUpSmall),Tx=(0,p.css)(["width:32px;margin:-8px;"]),Sx=(0,p.default)(Kb.default).withConfig({displayName:"carouselDrawerIcon__IconDown",componentId:"sc-b03fdn-0"})(["",""],Tx),Cx=(0,p.default)(wx).withConfig({displayName:"carouselDrawerIcon__IconUp",componentId:"sc-b03fdn-1"})(["",""],Tx);const Ix=function CarouselDrawerIcon(e){let{state:t}=e;return[xe.OPEN,xe.CLOSING].includes(t)?c.createElement(Sx,null):c.createElement(Cx,null)},Ax=p.default.div.withConfig({displayName:"carouselDrawer__Wrapper",componentId:"sc-1dxh28m-0"})(["display:flex;justify-content:center;"]),xx=(0,p.default)(m.Button).withConfig({displayName:"carouselDrawer__StyledButton",componentId:"sc-1dxh28m-1"})(["white-space:nowrap;gap:8px;"]);const kx=function CarouselDrawer(){const{carouselState:e,openCarousel:t,closeCarousel:n}=Zi((e=>{let{state:{carouselState:t},actions:{openCarousel:n,closeCarousel:r}}=e;return{carouselState:t,openCarousel:n,closeCarousel:r}})),{currentPageNumber:r,pageCount:a}=Sa((e=>{let{state:{currentPageNumber:t,pages:n}}=e;return{currentPageNumber:t,pageCount:n.length}})),o=(0,u.useCallback)((()=>{e===xe.OPEN?n():e===xe.CLOSED&&t()}),[e,t,n]);return c.createElement(Ax,null,c.createElement(xx,{"aria-label":(0,d.__)("Toggle page carousel","web-stories"),onClick:o,variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY},(0,qe.default)(
/* translators: 1: current page number. 2: total page count. */
(0,d._n)("%1$d of %2$d page","%1$d of %2$d pages",a,"web-stories"),r,a),c.createElement(Ix,{state:e})))},Ox=p.default.section.withConfig({displayName:"carouselLayout__Wrapper",componentId:"sc-iaovfa-0"})(["position:relative;display:grid;grid:'. d d d d d .' 32px '. . . . . . .' ","px '. p . c . n .' auto / 1fr ","px ","px auto ","px ","px 1fr;width:100%;height:auto;z-index:",";&.carousel-enter{top:","px;&.carousel-enter-active{top:0;transition:","ms ease-out;transition-property:top;}}&.carousel-exit{top:0;&.carousel-exit-active{top:","px;transition:","ms ease-out;transition-property:top;}}"],(e=>{let{isCollapsed:t}=e;return t?2:8}),RC,8,8,RC,3,(e=>{let{thumbHeight:t}=e;return t+6}),ke,(e=>{let{thumbHeight:t}=e;return t+6}),ke),Nx=p.default.div.withConfig({displayName:"carouselLayout__Area",componentId:"sc-iaovfa-1"})(["grid-area:",";display:flex;align-items:center;justify-content:center;flex-direction:column;"],(e=>{let{area:t}=e;return t}));const Px=function CarouselLayout(){const{carouselState:e}=Zi((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}})),{numPages:t,pageThumbHeight:n}=HA((e=>{let{state:{numPages:t,pageThumbHeight:n}}=e;return{numPages:t,pageThumbHeight:n}})),r=(0,u.useRef)();if(t<=0)return null;const a=e===xe.CLOSED,o=[xe.OPEN,xe.OPENING].includes(e);return c.createElement(Vp.default,{in:o,classNames:"carousel",containerRef:!0,nodeRef:r,timeout:ke},c.createElement(Ox,{ref:r,"aria-label":(0,d.__)("Page Carousel","web-stories"),isCollapsed:a,thumbHeight:n},c.createElement(Nx,{area:"d"},c.createElement(kx,null)),!a&&c.createElement(c.Fragment,null,c.createElement(Nx,{area:"p"},c.createElement(CarouselScrollBack,null)),c.createElement(Nx,{area:"c"},c.createElement(yx,null)),c.createElement(Nx,{area:"n"},c.createElement(CarouselScrollForward,null)))))};const Rx=function(e){let{availableSpace:t,numPages:n}=e;return(0,u.useMemo)((()=>{const e=t>=400,r=t-2*MC,a=e?40:36,o=e?60:54,l=a+16,i=Math.floor((r-16)/l),s=i<n;return{pageThumbWidth:a,pageThumbHeight:o,pageThumbMargin:16,carouselWidth:Math.min(i,n)*(a+16)+16,showablePages:i,hasOverflow:s}}),[t,n])};const Mx=function(e){let{listElement:t,carouselWidth:n,hasOverflow:r,showablePages:a,pageThumbWidth:o,pageThumbMargin:l}=e;const[i,s]=(0,u.useState)(0),{isRTL:c}=Y(),{carouselState:d}=Zi((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}})),{currentPageIndex:p}=Sa((e=>{let{state:{currentPageId:t,pages:n}}=e;return{currentPageIndex:n.findIndex((e=>{let{id:n}=e;return n===t}))}})),m=(0,u.useCallback)((e=>{c&&(e*=-1),t.scrollBy?t.scrollBy({left:e,behavior:"smooth"}):t.scrollLeft+=e}),[t,c]),f=n,g=r&&!(c?1===i:0===i),h=r&&!(c?0===i:1===i),E=(0,u.useCallback)((()=>m(f)),[m,f]),b=(0,u.useCallback)((()=>m(-f)),[m,f]);(0,u.useLayoutEffect)((()=>{if(!r||!t)return;const e=()=>{const{offsetWidth:e,scrollLeft:n,scrollWidth:r}=t;s(n/(r-e))};return t.addEventListener("scroll",e,{passive:!0}),()=>t.removeEventListener("scroll",e)}),[t,r]);const y=(0,u.useCallback)((e=>(o+l)*e),[o,l]),_=(0,u.useRef)(!0);return(0,u.useEffect)((()=>{d===xe.CLOSED&&(_.current=!0)}),[d]),(0,u.useLayoutEffect)((()=>{if(!r||!t)return;const{scrollLeft:e}=t,n=Math.max(0,p-a+1),o=p,l=y(n),i=y(o);if(e>=l&&e<=i)return;const s=e<l?l:i,c=setInterval((()=>{if(t.scrollWidth-t.offsetWidth<s)return;const e=_.current?"instant":"smooth";_.current=!1,t.scrollTo({left:s,top:0,behavior:e}),clearInterval(c)}),100);return()=>clearInterval(c)}),[t,r,p,a,y]),{canScrollBack:g,canScrollForward:h,scrollForward:E,scrollBack:b}};function Lx(e,t,n,r){const a=r?-1:1;return e===t?a:e===n?-a:0}const Dx=function(e){let{listElement:t,pageRefs:n}=e;const{isRTL:r}=Y(),{addPageAt:a,arrangePage:o,currentPage:l,currentPageId:i,deletePage:s,pages:c,setCurrentPage:d}=Sa((e=>{let{state:{pages:t,currentPage:n,currentPageId:r},actions:{addPageAt:a,arrangePage:o,deletePage:l,setCurrentPage:i}}=e;return{addPageAt:a,arrangePage:o,currentPage:n,currentPageId:r,deletePage:l,pages:t,setCurrentPage:i}})),p=(0,u.useMemo)((()=>c.map((e=>{let{id:t}=e;return t}))),[c]);(0,tr.useEscapeToBlurEffect)(t,[t]),(0,tr.useKeyDownEffect)(t,{key:["up","down","left","right"]},(e=>{let{key:t}=e;const a=Lx(t,"ArrowRight","ArrowLeft",r);if(0===a)return;const o=p.indexOf(i)+a;if(o>=0&&o<p.length){const e=p[o];d({pageId:e});const t=(n.current&&n.current[e])?.querySelector("button");t&&t.focus()}}),[i,r,p,d,n,t]),(0,tr.useKeyDownEffect)(t,{key:["mod+up","mod+down","mod+left","mod+right"],shift:!0},(e=>{const{key:t,shiftKey:n}=e;e.preventDefault();const a=Lx(t,"ArrowRight","ArrowLeft",r);if(0===a)return;const l=p.indexOf(i);let s=l+a;n&&(s=a<0?0:p.length-1),s!==l&&s>=0&&s<p.length&&o({pageId:i,position:s})}),[o,i,r,p,d]),(0,tr.useKeyDownEffect)(t,"delete",(()=>{s({pageId:i});const e=document.activeElement,n=()=>{if(document.activeElement!==e){const e=t.querySelector('[role="option"][tabindex="0"]');if(e)return void e.focus()}setTimeout(n,100)};n()}),[i,s,t]),(0,tr.useKeyDownEffect)(t,"clone",(()=>{const e=p.indexOf(l.id);a({page:(0,A.duplicatePage)(l),position:e+1})}),[a,l,p])},Bx={setCachedImage:(e,t)=>{let{payload:{pageId:n,cachedImage:r}}=t;return{...e,[n]:r}}};const Fx=function(){const[e,{setCachedImage:t}]=(0,u.useReduction)({},Bx);return{cachedImages:e,setCachedImage:t}};const Hx=function CarouselProvider(e){let{availableSpace:t,children:n}=e;const{pages:r,currentPageId:a,setCurrentPage:o,arrangePage:l}=Sa((e=>{let{state:{pages:t,currentPageId:n},actions:{setCurrentPage:r,arrangePage:a}}=e;return{pages:t,currentPageId:n,setCurrentPage:r,arrangePage:a}})),[i,s]=(0,u.useState)(null),d=(0,u.useRef)([]),p=r.length,m=(0,u.useMemo)((()=>r.map((e=>{let{id:t}=e;return t}))),[r]),[f,g]=(0,u.useState)(!0);(0,u.useEffect)((()=>{const e=dc((()=>g(!1)),{timeout:5e3});return()=>uc(e)}),[]);const{pageThumbWidth:h,pageThumbHeight:E,pageThumbMargin:b,carouselWidth:y,hasOverflow:_,showablePages:v}=Rx({availableSpace:t,numPages:p}),{canScrollBack:w,canScrollForward:T,scrollBack:S,scrollForward:C}=Mx({listElement:i,carouselWidth:y,hasOverflow:_,showablePages:v,pageThumbWidth:h,pageThumbMargin:b});Dx({listElement:i,pageRefs:d});const{cachedImages:I,setCachedImage:A}=Fx(),x=(0,u.useCallback)(((e,t)=>{d.current[e.id]=t}),[]),k=(0,u.useCallback)((e=>o({pageId:e.id})),[o]),O=(0,u.useCallback)(((e,t)=>{const n=m[e];l({pageId:n,position:t}),o({pageId:n})}),[m,l,o]),N={state:{pageThumbWidth:h,pageThumbHeight:E,pageThumbMargin:b,carouselWidth:y,hasOverflow:_,pages:r,pageIds:m,numPages:p,currentPageId:a,canScrollBack:w,canScrollForward:T,showSkeleton:f,cachedImages:I},actions:{scrollBack:S,scrollForward:C,clickPage:k,rearrangePages:O,setListRef:s,setPageRef:x,setCachedImage:A}};return c.createElement(FA.Provider,{value:N},n)},Ux=p.default.div.withConfig({displayName:"carouselContainer__Wrapper",componentId:"sc-1dsu28u-0"})(["height:auto;width:100%;align-self:flex-end;"]);const zx=(0,u.memo)((function CarouselContainer(){const e=(0,u.useRef)(),[t,n]=(0,u.useState)(0);return(0,u.useResizeEffect)(e,(e=>{let{width:t}=e;return n(t)}),[]),c.createElement(Hx,{availableSpace:t},c.createElement(Ux,{ref:e},c.createElement(Px,null)))})),Gx=(0,p.css)(["height:36px;padding:8px;background-color:",";span{padding:0;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),jx=[{label:(0,d._x)("100%","zoom level","web-stories"),value:1},{label:(0,d._x)("200%","zoom level","web-stories"),value:2},{label:(0,d._x)("Fill","zoom level","web-stories"),value:Ae.FILL},{label:(0,d._x)("Fit","zoom level","web-stories"),value:Ae.FIT}];const Yx=function ZoomSelector(){const{zoomSetting:e,zoomLevel:t,setZoomSetting:n,setZoomLevel:r}=Zi((e=>{let{state:{zoomSetting:t,zoomLevel:n},actions:{setZoomSetting:r,setZoomLevel:a}}=e;return{zoomSetting:t,zoomLevel:n,setZoomSetting:r,setZoomLevel:a}})),a=(0,u.useMemo)((()=>{const n=jx.find((n=>{let{value:r}=n;return e===Ae.FIXED?r===t:r===e}));return n?n.label:(0,qe.default)(
/* translators: %d: zoom level percentage value. */
(0,d._x)("%d%%","zoom level","web-stories"),Math.round(100*t))}),[e,t]),o=(0,u.useCallback)(((e,t)=>{Object.prototype.hasOwnProperty.call(Ae,t)?n(t):r(t)}),[n,r]);return c.createElement(cb.DropDown,{ariaLabel:(0,d.__)("Zoom Level","web-stories"),placeholder:a,options:jx,placement:Ed.PLACEMENT.TOP_START,onMenuItemClick:o,selectedValue:e,popupFillWidth:!1,selectButtonStylesOverride:Gx})};var Zx=n(98477),Wx=n(93401),Vx=n(21193);const $x=p.default.section.withConfig({displayName:"gridView__Container",componentId:"sc-ytsaos-0"})(["display:flex;flex-direction:column;height:100%;width:100%;padding:32px;"]),qx=p.default.header.withConfig({displayName:"gridView__TopRow",componentId:"sc-ytsaos-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:36px;@media ","{margin-bottom:72px;}@media ","{margin-bottom:112px;}"],(e=>{let{theme:t}=e;return t.breakpoint.desktop}),(e=>{let{theme:t}=e;return t.breakpoint.wide})),Xx=(0,p.default)(XA).withConfig({displayName:"gridView__Wrapper",componentId:"sc-ytsaos-2"})(["position:relative;overflow-y:auto;overflow-y:overlay;overflow-x:hidden;flex-grow:1;display:flex;flex-direction:column;pointer-events:all;padding:4px;"]),Kx=p.default.div.withConfig({displayName:"gridView__Grid",componentId:"sc-ytsaos-3"})(["position:relative;display:grid;grid-template-columns:",";grid-template-rows:repeat(auto-fill,","px);grid-gap:","px;justify-content:center;align-items:flex-start;flex-grow:1;"],(e=>{let{pageWidth:t}=e;return`repeat(auto-fit, minmax(${t}px, max-content))`}),(e=>{let{pageHeight:t}=e;return t}),(e=>{let{gapWidth:t}=e;return t})),Qx=p.default.div.withConfig({displayName:"gridView__NoButton",componentId:"sc-ytsaos-4"})(["flex:0 0 56px;"]),Jx=(0,p.default)(m.Button).withConfig({displayName:"gridView__ClickableButton",componentId:"sc-ytsaos-5"})(["pointer-events:all;"]),ek=(0,p.default)(Wx.Slider).withConfig({displayName:"gridView__ClickableSlider",componentId:"sc-ytsaos-6"})(["pointer-events:all;width:366px;"]),tk=(0,p.default)(ax).withConfig({displayName:"gridView__PageSeparator",componentId:"sc-ytsaos-7"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;align-items:center;",""],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:n}=e;return t+n}),(e=>{let{height:t}=e;return t}),(e=>{let{before:t,width:n,margin:r}=e;return t&&`\n      left: -${(n+2*r)/2}px;\n    `})),nk=p.default.div.withConfig({displayName:"gridView__Line",componentId:"sc-ytsaos-8"})(["background:",";height:","px;width:2px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t})),rk=p.default.div.withConfig({displayName:"gridView__ItemContainer",componentId:"sc-ytsaos-9"})(["display:flex;flex-direction:row;position:relative;"]);const ak=function GridView(e){let{onClose:t}=e;const{pages:n,currentPageId:r,currentPageIndex:a,setCurrentPage:o,arrangePage:l}=Sa((e=>{let{state:{pages:t,currentPageIndex:n,currentPageId:r},actions:{setCurrentPage:a,arrangePage:o}}=e;return{pages:t,currentPageIndex:n,currentPageId:r,setCurrentPage:a,arrangePage:o}})),{isRTL:i}=Y(),[s,p]=(0,u.useState)(4),[m,g]=(0,u.useState)(null),h=(0,u.useRef)();(0,u.useResizeEffect)(h,(e=>{let{width:t}=e;return g(t)}),[]);const E=(m-20*(s-1))/s,b=12*Math.floor(E/12),y=b*s,_=Math.floor((m-y)/(s-1)),v=b/ae.PAGE_RATIO,w=e=>()=>o({pageId:e.id}),T=(0,u.useRef)(),S=(0,u.useRef)({}),C=(0,u.useCallback)(((e,t)=>{l({pageId:e,position:t})}),[l]);(0,Vx.default)({containerRef:h,gridRef:T,itemRefs:S,isRTL:i,currentItemId:r,items:n,arrangeItem:C});const I=Math.min(v-24,64);return c.createElement($x,{"aria-label":(0,d.__)("Grid View","web-stories")},c.createElement(qx,null,c.createElement(Jx,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.MEDIUM,onClick:t,"aria-label":(0,d.__)("Close","web-stories")},c.createElement(Nu.default,null)),c.createElement(ek,{min:4,max:12,majorStep:1,minorStep:1,value:s,handleChange:e=>p(e),"aria-label":(0,d.__)("Pages per row","web-stories")}),c.createElement(Qx,null)),c.createElement(Xx,{"aria-label":(0,d.__)("Grid View Pages List","web-stories"),ref:h,onPositionChange:(e,t)=>{const r=n[e].id;l({pageId:r,position:t}),o({pageId:r})},mode:"grid",getItemSize:()=>v,scrollSize:64},c.createElement(Kx,{pageWidth:b,pageHeight:v,gapWidth:_,ref:T},n.map(((e,t)=>{const r=t===a,o=n.length>1;return c.createElement(rk,{key:e.id,ref:t=>{S.current[e.id]=t}},c.createElement(tk,{position:t,width:b,height:v,margin:_,before:!0},c.createElement(nk,{height:I})),c.createElement(ex,{position:t},c.createElement(cx,{key:e.id,label:r?(0,qe.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s (current page)","web-stories"),t+1):(0,qe.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s","web-stories"),t+1),tabIndex:r&&o?0:-1,isActive:r&&o,page:e,width:b,height:v,onClick:w(e),isInteractive:o,gridRef:T,role:"option"})),c.createElement(tk,{position:t+1,width:b,height:v,margin:_},c.createElement(nk,{height:I})))})))))},ok=p.default.div.withConfig({displayName:"gridViewButton__Box",componentId:"sc-1gc0r0y-0"})(["width:32px;height:32px;display:flex;justify-content:center;align-items:center;"]);const lk=function GridViewButton(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>{t((e=>{const t=!e;return(0,L.trackEvent)("grid_view_toggled",{status:t?"open":"closed"}),t}))}),[t]);return c.createElement(c.Fragment,null,c.createElement(ok,null,c.createElement(Tooltip,{title:(0,d.__)("Grid View","web-stories"),placement:Ed.PLACEMENT.TOP,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:n,"aria-label":(0,d.__)("Grid View","web-stories")},c.createElement(Zx.default,null)))),c.createElement(T.Modal,{isOpen:e,onClose:n,contentLabel:(0,d.__)("Grid View","web-stories"),overlayStyles:{alignItems:"stretch",backgroundColor:"#131516"},contentStyles:{pointerEvents:"none",flex:1}},c.createElement(ak,{onClose:n})))},ik=(0,u.createContext)({state:{},actions:{}});function sk(){return sk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sk.apply(this,arguments)}const ck=999999999,dk=p.default.section.withConfig({displayName:"panel__Wrapper",componentId:"sc-1vyy7rt-0"})(["display:flex;flex-direction:column;position:relative;border-bottom:1px solid ",";",""],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{noBorder:t}=e;return t&&"border-bottom: none;"}));const uk=function Panel(e){let{name:t,children:n,resizable:r=!1,showDragHandle:a,showFocusStyles:o,canCollapse:l=!0,collapsedByDefault:i=!0,initialHeight:s=null,maxHeight:d=ck,ariaLabel:p=null,ariaHidden:m=!1,isPersistable:f=!0,...g}=e;const h=0===d?ck:d,{selectedElementIds:E}=Sa((e=>{let{state:{selectedElementIds:t}}=e;return{selectedElementIds:t}})),b=(0,u.useMemo)((()=>f?_o.getItemByKey(`${yo.PANEL}:${t}`):null),[t,f]),[y,_]=(0,u.useState)((()=>!!f&&(b?.isCollapsed??i))),[v,w]=(0,u.useState)(Math.min(b?.expandToHeight,h)||s),[T,S]=(0,u.useState)(Math.min(b?.height,h)||s),[C,I]=(0,u.useState)(!1),[A,x]=(0,u.useState)(!1),k=(0,u.useCallback)((e=>{S(Math.min(e,h))}),[h]),O=(0,u.useCallback)((e=>{w(Math.min(e,h))}),[h]),N=(0,u.useCallback)((()=>I(!0)),[]),P=(0,u.useCallback)((()=>{l&&(_(!0),x(!0),r&&k(0),(0,L.trackEvent)("panel_toggled",{name:t,status:"collapsed"}))}),[r,l,t,k]),R=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_(!1),x(!0),e&&r&&k(v),(0,L.trackEvent)("panel_toggled",{name:t,status:"expanded"})}),[r,v,t,k]);(0,u.useEffect)((()=>{f||R(!0)}),[R,f,E]),(0,u.useEffect)((()=>{r&&T<=10&&!y&&P()}),[P,T,r,y]),(0,u.useEffect)((()=>{A||b||!r||(k(s),O(s))}),[A,s,r,b,t,O,k]),(0,u.useEffect)((()=>{h<T&&k(h),h<v&&O(h)}),[v,T,h,k,O]),(0,u.useEffect)((()=>{f&&A&&_o.setItemByKey(`${yo.PANEL}:${t}`,{height:T,isCollapsed:y,expandToHeight:v})}),[t,y,T,v,A,f]);const M=(0,u.useCallback)((e=>{r&&(x(!0),k(Math.min(e(T),h)),y&&e(T)>10&&R(!1))}),[R,T,y,h,r,k,x]),D=(0,u.useCallback)((()=>{x(!1),y&&R(!0)}),[R,y]),B=`panel-${t}-${(0,he.default)()}`,F=`panel-title-${t}-${(0,he.default)()}`,H={state:{height:T,resizable:r,showDragHandle:a,showFocusStyles:o,isCollapsed:y,panelContentId:B,panelTitleId:F,panelTitleReadable:`panel-title-${t}`,ariaHidden:m},actions:{setHeight:M,setExpandToHeight:O,collapse:P,expand:R,resetHeight:D,confirmTitle:N}},U=ik.Provider,z=(0,u.useMemo)((()=>C?{"aria-labelledby":F}:{"aria-label":p}),[C,F,p]);return c.createElement(dk,sk({},z,{"aria-hidden":m},g),c.createElement(U,{value:H},n))};var pk=n(98240),mk=n(41044);function fk(){return fk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fk.apply(this,arguments)}const gk={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary",QUATERNARY:"quaternary",POSITIVE:"positive",NEGATIVE:"negative",ACCENT:"accent"};function hk(e){return 9*(e-1)}const Ek=p.default.div.withConfig({displayName:"notificationBubble__Bubble",componentId:"sc-1w06lrc-0"})([""," position:relative;height:","px;width:","px;",";"],(e=>{let{theme:t,variant:n}=e;return(0,p.css)(["color:",";background-color:",";border-radius:",";"],t.colors.fg.primary,t.colors.bg[n],t.borders.radius.round)}),24,(e=>{let{digitLen:t}=e;return 24+hk(t)}),(e=>{let{digitLen:t,$isSmall:n}=e;return n&&(0,p.css)(["height:","px;width:","px;"],20,20+hk(t))})),bk=p.default.span.withConfig({displayName:"notificationBubble__Inner",componentId:"sc-1w06lrc-1"})([""," "," ",";font-weight:",";color:",";user-select:none;"],pk.fullSizeAbsolute,mk.centerContent,(e=>{let{$isSmall:t,theme:n}=e;return Pu.expandTextPreset(((e,n)=>{let{paragraph:r}=e;return r[t?n.X_SMALL:n.SMALL]}))({theme:n})}),(e=>{let{theme:t}=e;return t.typography.weight.bold}),(e=>{let{$invertColor:t,theme:n}=e;return t?n.colors.inverted.fg.primary:n.colors.fg.primary}));const yk=function(e,t,n){const r=(0,u.useRef)(),[a,o]=(0,u.useState)(!1),l=(0,u.useCallback)((e=>{const n=r.current-e.pageY;t(n),r.current=e.pageY}),[t]),i=(0,u.useCallback)((e=>{e.target.releasePointerCapture(e.pointerId),o(!1),n()}),[n]),s=(0,u.useCallback)((e=>{e.target.setPointerCapture(e.pointerId),r.current=e.pageY,o(!0)}),[]);(0,u.useLayoutEffect)((()=>{const t=e.current;return t.addEventListener("pointerdown",s),a&&(t.addEventListener("pointermove",l),t.addEventListener("pointerup",i)),()=>{t.removeEventListener("pointerdown",s),a&&(t.removeEventListener("pointermove",l),t.removeEventListener("pointerup",i))}}),[a,i,l,s,e])};const _k=function(e,t){(0,tr.useKeyEffect)(e,"up",(()=>t(20)),[t]),(0,tr.useKeyEffect)(e,"down",(()=>t(-20)),[t])};function vk(){return vk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vk.apply(this,arguments)}const wk=p.default.div.withConfig({displayName:"handle__Handle",componentId:"sc-ffqbiq-0"})(["border:0;padding:0;height:","px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:row-resize;user-select:none;position:absolute;",";",";left:0;right:0;width:100%;",";"],8,(e=>{let{$position:t}=e;return"top"===t&&"top: 0"}),(e=>{let{$position:t}=e;return"bottom"===t&&"bottom: 0"}),(e=>{let{$showFocusStyles:t}=e;return t&&(0,p.css)(["border-bottom:1px solid transparent;&:focus{border-color:",";}"],(e=>{let{theme:t}=e;return t.colors.border.focus}))})),Tk=p.default.div.withConfig({displayName:"handle__DragBar",componentId:"sc-ffqbiq-1"})(["position:absolute;width:35px;height:3px;top:","px;background:",";border-radius:",";cursor:inherit;"],4,(e=>{let{theme:t}=e;return t.colors.bg.quaternary}),(e=>{let{theme:t}=e;return t.borders.radius.small}));function DragHandle(e){let{height:t,minHeight:n,maxHeight:r,handleHeightChange:a,handleExpandToHeightChange:o,handleDoubleClick:l,position:i,showDragHandle:s,showFocusStyles:p=!0,...m}=e;const f=(0,u.useRef)();return yk(f,a,o),_k(f,a),c.createElement(wk,vk({ref:f,onClick:e=>e.stopPropagation(),onDoubleClick:l,tabIndex:0,$position:i,role:"slider","aria-orientation":"vertical","aria-valuenow":t,"aria-valuemin":n,"aria-valuemax":r,"aria-label":(0,d.__)("Set panel height","web-stories"),$showFocusStyles:p},m),s&&c.createElement(Tk,null))}DragHandle.defaultProps={position:"top"};const Sk=DragHandle;function Ck(){return Ck=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ck.apply(this,arguments)}const Ik=(0,p.default)(Ou.Headline).attrs({as:"h2"}).withConfig({displayName:"title__Header",componentId:"sc-1tphhj5-0"})(["color:",";background-color:",";"," margin:0;position:relative;display:flex;flex-direction:row;user-select:none;align-items:center;justify-content:space-between;padding:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{isSecondary:t,theme:n}=e;return t&&n.colors.interactiveBg.secondaryNormal}),(e=>{let{hasResizeHandle:t}=e;return t&&"padding-top: 0;"}),(e=>{let{isCollapsed:t}=e;return t?"14px 16px":"14px 16px 6px 16px"})),Ak=p.default.span.withConfig({displayName:"title__Heading",componentId:"sc-1tphhj5-1"})(["color:",";display:flex;align-items:space-between;",";"],(e=>{let{theme:t,isCollapsed:n}=e;return n?t.colors.fg.secondary:t.colors.fg.primary}),(e=>{let{theme:t}=e;return Pu.expandPresetStyles({preset:t.typography.presets.headline[Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL],theme:t})})),xk=(0,p.default)((e=>{let{notificationCount:t,isSmall:n,variant:r=gk.ACCENT,invertTextColor:a,...o}=e;return c.createElement(Ek,fk({variant:r,$isSmall:n,digitLen:t?.toString().length||1},o),c.createElement(bk,{$invertColor:a,$isSmall:n},t))})).withConfig({displayName:"title__StyledNotificationBubble",componentId:"sc-1tphhj5-2"})(["margin-left:12px;"]),kk=p.default.div.withConfig({displayName:"title__HeaderActions",componentId:"sc-1tphhj5-3"})(["display:flex;align-items:center;"]),Ok=p.default.div.withConfig({displayName:"title__IconWrapper",componentId:"sc-1tphhj5-4"})(["position:relative;width:32px;height:32px;svg{position:relative;z-index:1;}"]),Nk=p.default.button.withConfig({displayName:"title__Collapse",componentId:"sc-1tphhj5-5"})(["border:none;border-radius:",";background:transparent;color:",";height:32px;display:flex;padding:0 4px 0 0;align-items:center;justify-content:flex-start;cursor:pointer;margin-left:-12px;transition:",";&:hover,&.",",&[","]{color:",";}",";svg{width:32px;height:32px;",";}:hover ",":after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:16px;width:16px;border-radius:",";background:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t,isCollapsed:n}=e;return n?t.colors.fg.secondary:t.colors.fg.primary}),f.BUTTON_TRANSITION_TIMING,KE.FOCUS_VISIBLE_SELECTOR,KE.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.colors.fg.primary}),Mu,(e=>{let{$isCollapsed:t,theme:n}=e;return t&&(0,p.css)(["color:",";transform:rotate(-90deg);"],n.colors.fg.secondary)}),Ok,(e=>{let{theme:t}=e;return t.borders.radius.round}),(e=>{let{theme:t}=e;return t.colors.bg.quaternary}));function Pk(e){let{children:t,isCollapsed:n,toggle:r,...a}=e;return c.createElement(Nk,Ck({onClick:e=>{e.stopPropagation(),r()},$isCollapsed:n},a),t)}function Rk(e){let{ariaLabel:t,children:n,isPrimary:r,isSecondary:a,secondaryAction:o,isResizable:l,canCollapse:i,maxHeight:s,count:d,...p}=e;const{state:{isCollapsed:m,height:f,resizable:g,showDragHandle:h,showFocusStyles:E,panelContentId:b,panelTitleId:y,ariaHidden:_},actions:{collapse:v,expand:w,setHeight:T,setExpandToHeight:S,resetHeight:C,confirmTitle:I}}=(0,u.useContext)(ik),{state:{sidebarContentHeight:A}}=Fg();(0,u.useEffect)(I,[I]);const x=s||Math.round(.7*A),k=(0,u.useCallback)((e=>g?T((t=>Math.max(0,Math.min(x,t+e)))):null),[g,T,x]),O=(0,u.useCallback)((()=>{g&&f>=10&&S(f)}),[S,f,g]),N=m?w:v,P=0===d||Boolean(d);return c.createElement(Ik,Ck({isPrimary:r,isSecondary:a,hasResizeHandle:l&&!m,isCollapsed:m},p),l&&c.createElement(Sk,{height:f,minHeight:0,maxHeight:x,handleHeightChange:k,handleExpandToHeightChange:O,handleDoubleClick:C,tabIndex:_?-1:0,showDragHandle:h,showFocusStyles:E}),c.createElement(Pk,{toggle:N,disabled:!i,tabIndex:_?-1:0,"aria-label":t,"aria-expanded":!m,"aria-controls":b,isCollapsed:m},i&&c.createElement(Ok,null,c.createElement(Kb.default,null)),c.createElement(Ak,{isCollapsed:m,id:y,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL},n),P&&c.createElement(xk,{"data-testid":"panel-badge",notificationCount:d,variant:gk.PRIMARY,"aria-hidden":!0})),o&&c.createElement(kk,null,o))}Rk.defaultProps={isPrimary:!1,isSecondary:!1,isResizable:!1,canCollapse:!0};const Mk=Rk;function Lk(){return Lk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lk.apply(this,arguments)}const Dk=p.default.div.withConfig({displayName:"content__Container",componentId:"sc-1juzn5p-0"})(["padding:",";overflow:auto;background-color:",";"],(e=>{let{padding:t}=e;return t||"8px 12px 8px"}),(e=>{let{isSecondary:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryNormal:"transparent"}));function Bk(e){let{children:t,...n}=e;const{state:{isCollapsed:r,height:a,resizable:o,panelContentId:l}}=(0,u.useContext)(ik),i={height:o?`${a}px`:"auto"};return r?null:c.createElement(Dk,Lk({style:i},n,{id:l}),t)}Bk.defaultProps={isPrimary:!1};const Fk=Bk;function Hk(){return Hk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hk.apply(this,arguments)}const Uk=function SimplePanel(e){let{children:t,name:n,ariaLabel:r,title:a,className:o,...l}=e;return c.createElement(uk,Hk({name:n},l),c.createElement(Mk,Hk({ariaLabel:r??("string"==typeof a?a:"")},l),a),c.createElement(Fk,{className:o},t))};var zk;function Gk(){return Gk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gk.apply(this,arguments)}const SvgArrowUp=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Gk({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,zk||(zk=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.145 15.422a.5.5 0 1 0 .712-.702l-5.5-5.571a.5.5 0 0 0-.712 0l-5.5 5.57a.5.5 0 0 0 .711.703l4.645-4.704V22.5a.5.5 0 1 0 1 0V10.718l4.644 4.704Z",fill:"currentColor"})))},jk=(0,c.memo)(SvgArrowUp);function Yk(){return Yk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yk.apply(this,arguments)}const Zk=(0,p.default)(m.Button).withConfig({displayName:"directionRadioInput__StyledButton",componentId:"sc-1g0wivz-0"})(["z-index:0;width:28px;height:28px;"," svg{transform-origin:50% 50%;transform:",";}"],(e=>{let{selected:t,disabled:n,theme:r}=e;return t&&!n&&(0,p.css)(["background-color:",";"],r.colors.interactiveBg.secondaryPress)}),(e=>{let{direction:t}=e;switch(t){case kn.DIRECTION.RIGHT_TO_LEFT:return"rotate(270deg)";case kn.DIRECTION.TOP_TO_BOTTOM:return"rotate(180deg)";case kn.DIRECTION.LEFT_TO_RIGHT:return"rotate(90deg)";case kn.ROTATION.COUNTER_CLOCKWISE:return"rotateX(180deg) rotateZ(90deg)";case kn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return"rotate(-135deg)";case kn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return"rotate(135deg)";case kn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return"rotate(-315deg)";case kn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return"rotate(315deg)";default:return"rotate(0deg)"}})),Wk=(0,p.default)((e=>{let{className:t,direction:n,...r}=e;return c.createElement(Zk,Yk({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,className:t,direction:n},r),[...Object.values(kn.DIRECTION),...Object.values(kn.SCALE_DIRECTION)].includes(n)&&c.createElement(jk,null))})).withConfig({displayName:"directionRadioInput__DirectionIndicator",componentId:"sc-1g0wivz-1"})([""]),Vk=p.default.fieldset.withConfig({displayName:"directionRadioInput__Fieldset",componentId:"sc-1g0wivz-2"})(["position:relative;height:91px;width:88px;margin-top:1px;border-right:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),$k=p.default.div.withConfig({displayName:"directionRadioInput__Figure",componentId:"sc-1g0wivz-3"})(["position:absolute;top:50%;left:50%;width:8px;height:8px;background-color:",";border-radius:2px;transform:translate(-50%,-50%);"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),qk=p.default.label.withConfig({displayName:"directionRadioInput__Label",componentId:"sc-1g0wivz-4"})(["position:absolute;cursor:",";",""],(e=>{let{disabled:t}=e;return t?"default":"pointer"}),(e=>{let{direction:t}=e;switch(t){case kn.DIRECTION.RIGHT_TO_LEFT:return(0,p.css)(["top:50%;right:","px;transform:translateY(-50%);"],3);case kn.DIRECTION.TOP_TO_BOTTOM:return(0,p.css)(["top:","px;left:50%;transform:translateX(-50%);"],3);case kn.DIRECTION.LEFT_TO_RIGHT:return(0,p.css)(["top:50%;left:","px;transform:translateY(-50%);"],3);case kn.ROTATION.COUNTER_CLOCKWISE:return(0,p.css)(["bottom:","px;right:","px;transform:translate(-10%,-10%);"],3,3);case kn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return(0,p.css)(["bottom:","px;left:","px;"],3,3);case kn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return(0,p.css)(["top:","px;left:","px;"],3,3);case kn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return(0,p.css)(["top:","px;right:","px;"],3,3);case kn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return(0,p.css)(["bottom:","px;right:","px;"],3,3);default:return(0,p.css)(["bottom:","px;left:50%;transform:translateX(-50%);"],3)}})),Xk=p.default.legend.withConfig({displayName:"directionRadioInput__HiddenLegend",componentId:"sc-1g0wivz-5"})(["position:absolute;opacity:0;clip-path:polygon(0 0);cursor:pointer;"]),Kk=p.default.div.withConfig({displayName:"directionRadioInput__RadioGroup",componentId:"sc-1g0wivz-6"})(["position:absolute;top:0;right:0;bottom:0;left:0;"]),Qk={[kn.DIRECTION.RIGHT_TO_LEFT]:(0,d._x)("right to left","animation direction","web-stories"),[kn.DIRECTION.LEFT_TO_RIGHT]:(0,d._x)("left to right","animation direction","web-stories"),[kn.DIRECTION.TOP_TO_BOTTOM]:(0,d._x)("top to bottom","animation direction","web-stories"),[kn.DIRECTION.BOTTOM_TO_TOP]:(0,d._x)("bottom to top","animation direction","web-stories"),[kn.ROTATION.CLOCKWISE]:(0,d._x)("clockwise","rotation direction","web-stories"),[kn.ROTATION.COUNTER_CLOCKWISE]:(0,d._x)("counterclockwise","rotation direction","web-stories"),[kn.SCALE_DIRECTION.SCALE_IN]:(0,d._x)("scale in","scale direction","web-stories"),[kn.SCALE_DIRECTION.SCALE_OUT]:(0,d._x)("scale out","scale direction","web-stories")},Jk=e=>{switch(e){case kn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:case kn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return kn.SCALE_DIRECTION.SCALE_IN;case kn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:case kn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return kn.SCALE_DIRECTION.SCALE_OUT;default:return e}},eO=e=>[...kn.SCALE_DIRECTION_MAP.SCALE_IN,...kn.SCALE_DIRECTION_MAP.SCALE_OUT].includes(e),tO=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?.replace(/([a-z])([A-Z])/g,"$1 $2")?.toLocaleLowerCase()?.split(" ")||[]},nO=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return tO(e)?.[0]},rO=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=tO(e);return t[t.length-1]},aO=[kn.DIRECTION.TOP_TO_BOTTOM,kn.DIRECTION.RIGHT_TO_LEFT,kn.DIRECTION.BOTTOM_TO_TOP,kn.DIRECTION.LEFT_TO_RIGHT],oO=[kn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT,kn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT,kn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT,kn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT],lO=(e,t,n)=>{const r=n?t.reverse():t;return e.sort(((e,t)=>r.indexOf(e)-r.indexOf(t)))},DirectionRadioInput=e=>{let{value:t,directions:n=[],onChange:r,disabled:a=[],tooltip:o}=e;const l=(0,u.useRef)(),{isRTL:i}=Y(),s=(0,u.useMemo)((()=>{const e=[];if(n.includes(kn.SCALE_DIRECTION.SCALE_OUT)||n.includes(kn.SCALE_DIRECTION.SCALE_IN)){const t=[];n.includes(kn.SCALE_DIRECTION.SCALE_OUT)&&t.push(...kn.SCALE_DIRECTION_MAP.SCALE_OUT),n.includes(kn.SCALE_DIRECTION.SCALE_IN)&&t.push(...kn.SCALE_DIRECTION_MAP.SCALE_IN),e.push(...lO(t,oO,i))}else e.push(...lO(n,aO,i));return e}),[n,i]);return sb(l),c.createElement(Vk,null,c.createElement($k,null),c.createElement(Xk,null,(0,d.__)("Which Direction?","web-stories")),c.createElement(Kk,{ref:l},s.map((e=>{const n=a?.includes(Jk(e));return c.createElement(qk,{key:e,"aria-label":Qk[e],htmlFor:e,direction:e,disabled:n},c.createElement(bd.Tooltip,{title:n?o:"",placement:eO(e)?rO(e):nO(e)},c.createElement(Wk,{direction:e,selected:t===e||e?.includes(t),disabled:n,onClick:()=>r(Jk(e))})))}))))},iO=(0,p.css)(["border-radius:0;border-color:"," transparent transparent transparent;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),sO=(0,p.default)(NumericInput).withConfig({displayName:"effectInput__StyledInput",componentId:"sc-1gnssiy-0"})(["height:","px;div{height:calc(100% + 1px);"," &:focus-within{border-radius:",";}}"],45,iO,(e=>{let{theme:t}=e;return t.borders.radius.small})),cO=(0,p.default)(cb.DropDown).withConfig({displayName:"effectInput__StyledDropDown",componentId:"sc-1gnssiy-1"})(["button{height:46px;"," &:hover{","}&.",",&[","]{border-radius:",";}}"],iO,iO,KE.FOCUS_VISIBLE_SELECTOR,KE.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.borders.radius.small}));const dO=function EffectInput(e){let{effectProps:t,effectConfig:n,field:r,onChange:a,disabledOptions:o,tooltip:l}=e;const i=(0,u.useCallback)((e=>a(e,!0)),[a]),s=n[r]??t[r].defaultValue,p=t[r].type===kn.FIELD_TYPES.FLOAT;switch(t[r].type){case kn.FIELD_TYPES.DROPDOWN:return c.createElement(cO,{options:(t[r].values||[]).map((e=>{let{name:t,...n}=e;return{...n,label:t,disabled:o.includes(n.value)}})),placeholder:(0,d.__)("Select a value","web-stories"),ariaLabel:(0,d.__)("Select effect value","web-stories"),isKeepMenuOpenOnSelection:!1,selectedValue:s,onMenuItemClick:e=>a(e.target.value,!0)});case kn.FIELD_TYPES.DIRECTION_PICKER:return c.createElement(DirectionRadioInput,{value:s,directions:t[r].values,onChange:i,disabled:o,tooltip:l});default:return c.createElement(sO,{"aria-label":t[r].label,suffix:t[r].label,unit:t[r].unit,value:s,min:0,onChange:e=>a(p?parseFloat(e.target.value):parseInt(e.target.value),!0),isFloat:p,containerStyleOverride:Lu})}};function uO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!e.zoomDirection||!e.panDir)&&(e.zoomDirection?e.zoomDirection:e.scaleDirection?e.scaleDirection:e.flyInDir?e.flyInDir:e.rotateInDir?e.rotateInDir:e.whooshInDir?e.whooshInDir:!!e.panDir&&e.panDir)}const pO=p.default.div.withConfig({displayName:"effectPanel__AnimationGrid",componentId:"sc-s89nzp-0"})(["display:grid;grid-template-columns:auto auto;"]),mO=p.default.div.withConfig({displayName:"effectPanel__AnimationGridField",componentId:"sc-s89nzp-1"})((e=>{let{isRotationComponent:t,isHalfWidthField:n}=e;return[{gridColumn:"1/3"},t&&{gridRow:"1/3",gridColumn:"auto"},n&&{gridColumn:"auto"}]}));const fO=function EffectPanel(e){let{animation:{id:t,type:n,...r},onChange:a,disabledTypeOptionsMap:o}=e;const{props:l}=(0,kn.getAnimationEffectProps)(n),i=(0,u.useCallback)(((e,o)=>{a({id:t,type:n,...r,...e},o)}),[t,n,r,a]),s=(0,u.useMemo)((()=>Object.keys(l).reduce(((e,t)=>l[t].type===kn.FIELD_TYPES.DIRECTION_PICKER||l[t].type===kn.FIELD_TYPES.ROTATION_PICKER||e),!1)),[l]),d=Object.keys(l).map(((e,t)=>c.createElement(mO,{key:e,isRotationComponent:s&&0===t,isHalfWidthField:s&&(1===t||2===t)},c.createElement(dO,{effectProps:l,effectConfig:r,field:e,onChange:(t,n)=>i({[e]:t},n),disabledOptions:o[n]?.options||[],tooltip:o[n]?.tooltip}))));return c.createElement(pO,null,d)},gO=p.default.div.withConfig({displayName:"effectChooserElements__BaseAnimationCell",componentId:"sc-13qk6mh-0"})(["display:none;transform-origin:50% 50%;"]),hO=(0,p.keyframes)(["0%{transform:translateY(-100%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}15%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}26%{transform:translateY(-62%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}37%{transform:translateY(-0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}41.5%{transform:translateY(-30%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}50%,100%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}"]),EO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__DropAnimation",componentId:"sc-13qk6mh-1"})(["animation:"," 3.2s linear infinite;"],hO),bO=(0,p.keyframes)(["0%{opacity:0;}50%,100%{opacity:1;}"]),yO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__FadeInAnimation",componentId:"sc-13qk6mh-2"})(["animation:"," 2.5s linear infinite;"],bO),_O=(0,p.keyframes)(["0%{transform:translateX(-100%);}50%,100%{transform:translateX(0%);}"]),vO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__FlyInLeftAnimation",componentId:"sc-13qk6mh-3"})(["animation:"," 2s linear infinite;"],_O),wO=(0,p.keyframes)(["0%{transform:translateX(100%);}50%,100%{transform:translateX(0%);}"]),TO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__FlyInRightAnimation",componentId:"sc-13qk6mh-4"})(["animation:"," 2s linear infinite;"],wO),SO=(0,p.keyframes)(["0%{transform:translateY(-100%);}50%,100%{transform:translateY(0%);}"]),CO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__FlyInTopAnimation",componentId:"sc-13qk6mh-5"})(["animation:"," 2s linear infinite;"],SO),IO=(0,p.keyframes)(["0%{transform:translateY(100%);}50%,100%{transform:translateY(0%);}"]),AO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__FlyInBottomAnimation",componentId:"sc-13qk6mh-6"})(["animation:"," 2s linear infinite;"],IO),xO=(0,p.keyframes)(["0%{transform:scale(1);}12.5%{transform:scale(0.75);}37.5%{transform:scale(1.25);}50%,100%{transform:scale(1);}"]),kO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__PulseAnimation",componentId:"sc-13qk6mh-7"})(["animation:"," 2s cubic-bezier(0.4,0,0.2,1) infinite;"],xO),OO=(0,p.keyframes)(["0%{transform:translateX(-100%) rotate(-360deg);}50%,100%{transform:translateX(0%);}"]),NO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__RotateInLeftAnimation",componentId:"sc-13qk6mh-8"})(["animation:"," 2s linear infinite;"],OO),PO=(0,p.keyframes)(["0%{transform:translateX(100%) rotate(360deg);}50%,100%{transform:translateX(0%);}"]),RO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__RotateInRightAnimation",componentId:"sc-13qk6mh-9"})(["animation:"," 2s linear infinite;"],PO),MO=(0,p.keyframes)(["0%{transform:rotate(-540deg) scale(0.1);opacity:0;}50%,100%{transform:none;opacity:1;}"]),LO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__TwirlInAnimation",componentId:"sc-13qk6mh-10"})(["animation:"," 2s cubic-bezier(0.2,0.75,0.4,1) infinite;"],MO),DO=(0,p.keyframes)(["0%{transform:translateX(-100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),BO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__WhooshInLeftAnimation",componentId:"sc-13qk6mh-11"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],DO),FO=(0,p.keyframes)(["0%{transform:translateX(100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),HO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__WhooshInRightAnimation",componentId:"sc-13qk6mh-12"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],FO),UO=(0,p.keyframes)(["0%{transform:translateX(-100%) scale(1.5);}50%,100%{transform:translateX(200%) scale(1.5);}"]),zO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__PanLeftAnimation",componentId:"sc-13qk6mh-13"})(["animation:"," 3s linear infinite;"],UO),GO=(0,p.keyframes)(["0%{transform:translateX(100%) scale(1.5);}50%,100%{transform:translateX(-200%) scale(1.5);}"]),jO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__PanRightAnimation",componentId:"sc-13qk6mh-14"})(["animation:"," 3s linear infinite;"],GO),YO=(0,p.keyframes)(["0%{transform:translateY(-100%) scale(1.5);}50%,100%{transform:translateY(200%) scale(1.5);}"]),ZO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__PanTopAnimation",componentId:"sc-13qk6mh-15"})(["animation:"," 3s linear infinite;"],YO),WO=(0,p.keyframes)(["0%{transform:translateY(100%) scale(1.5);}50%,100%{transform:translateY(-200%) scale(1.5);}"]),VO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__PanBottomAnimation",componentId:"sc-13qk6mh-16"})(["animation:"," 3s linear infinite;"],WO),$O=(0,p.keyframes)(["0%{opacity:0;transform:scale(0);}50%,100%{opacity:1;transform:scale(1);}"]),qO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__ZoomInAnimation",componentId:"sc-13qk6mh-17"})(["animation:"," 2s linear infinite;"],$O),XO=(0,p.keyframes)(["0%{opacity:0;transform:scale(2);}50%,100%{opacity:1;transform:scale(1);}"]),KO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__ZoomOutAnimation",componentId:"sc-13qk6mh-18"})(["animation:"," 2s linear infinite;"],XO),QO=(0,p.keyframes)(["0%{opacity:0;transform:translate3d(-50%,0,0) scale(2);}50%,100%{opacity:1;transform:none;}"]),JO=(0,p.default)(gO).withConfig({displayName:"effectChooserElements__PanAndZoomAnimation",componentId:"sc-13qk6mh-19"})(["animation:"," 2s linear infinite;"],QO),eN=(e,t)=>oN.includes(e)?e:t?`${e} ${t}`.trim():e,tN="none",nN="dynamicPropertyValue",rN={HALF:"half",QUARTER:"quarter"},aN=[],oN=[kn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value],lN={NO_ANIMATION:{value:tN,label:(0,d._x)("None","animation effect","web-stories")},[eN(kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,kn.DIRECTION.LEFT_TO_RIGHT)]:{value:eN(kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,kn.DIRECTION.LEFT_TO_RIGHT),label:(0,d._x)("Pan Left","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Left","animation effect","web-stories")),value:kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:kn.DIRECTION.LEFT_TO_RIGHT,gridSpace:rN.QUARTER,Effect:zO,size:16}},[eN(kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,kn.DIRECTION.RIGHT_TO_LEFT)]:{value:eN(kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,kn.DIRECTION.RIGHT_TO_LEFT),label:(0,d._x)("Pan Right","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Right","animation effect","web-stories")),value:kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:kn.DIRECTION.RIGHT_TO_LEFT,gridSpace:rN.QUARTER,Effect:jO,size:16}},[eN(kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,kn.DIRECTION.BOTTOM_TO_TOP)]:{value:eN(kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,kn.DIRECTION.BOTTOM_TO_TOP),label:(0,d._x)("Pan Up","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Up","animation effect","web-stories")),value:kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:kn.DIRECTION.BOTTOM_TO_TOP,gridSpace:rN.QUARTER,Effect:VO,size:16}},[eN(kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,kn.DIRECTION.TOP_TO_BOTTOM)]:{value:eN(kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,kn.DIRECTION.TOP_TO_BOTTOM),label:(0,d._x)("Pan Down","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Down","animation effect","web-stories")),value:kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:kn.DIRECTION.TOP_TO_BOTTOM,gridSpace:rN.QUARTER,Effect:ZO,size:16}},[eN(kn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,kn.SCALE_DIRECTION.SCALE_IN)]:{value:eN(kn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,kn.SCALE_DIRECTION.SCALE_IN),label:(0,d._x)("Zoom In","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Zoom In","animation effect","web-stories")),value:kn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,zoomDirection:kn.SCALE_DIRECTION.SCALE_IN,gridSpace:rN.HALF,Effect:qO,size:14}},[eN(kn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,kn.SCALE_DIRECTION.SCALE_OUT)]:{value:eN(kn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,kn.SCALE_DIRECTION.SCALE_OUT),label:(0,d._x)("Zoom Out","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Zoom Out","animation effect","web-stories")),value:kn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,zoomDirection:kn.SCALE_DIRECTION.SCALE_OUT,gridSpace:rN.HALF,Effect:KO,size:20}},[kn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:{value:kn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value,label:kn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),kn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.name),value:kn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value,zoomDirection:nN,Effect:JO,size:26}}},iN={NO_ANIMATION:{value:tN,label:(0,d._x)("None","animation effect","web-stories")},[kn.ANIMATION_EFFECTS.DROP.value]:{value:kn.ANIMATION_EFFECTS.DROP.value,label:kn.ANIMATION_EFFECTS.DROP.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),kn.ANIMATION_EFFECTS.DROP.name),value:kn.ANIMATION_EFFECTS.DROP.value,Effect:EO}},[kn.ANIMATION_EFFECTS.FADE_IN.value]:{value:kn.ANIMATION_EFFECTS.FADE_IN.value,label:kn.ANIMATION_EFFECTS.FADE_IN.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),kn.ANIMATION_EFFECTS.FADE_IN.name),value:kn.ANIMATION_EFFECTS.FADE_IN.value,Effect:yO}},[eN(kn.ANIMATION_EFFECTS.FLY_IN.value,kn.DIRECTION.LEFT_TO_RIGHT)]:{value:eN(kn.ANIMATION_EFFECTS.FLY_IN.value,kn.DIRECTION.LEFT_TO_RIGHT),label:kn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Left","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:kn.DIRECTION.LEFT_TO_RIGHT,gridSpace:rN.QUARTER,Effect:vO,size:16}},[eN(kn.ANIMATION_EFFECTS.FLY_IN.value,kn.DIRECTION.TOP_TO_BOTTOM)]:{value:eN(kn.ANIMATION_EFFECTS.FLY_IN.value,kn.DIRECTION.TOP_TO_BOTTOM),label:kn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Top","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:kn.DIRECTION.TOP_TO_BOTTOM,gridSpace:rN.QUARTER,Effect:CO,size:16}},[eN(kn.ANIMATION_EFFECTS.FLY_IN.value,kn.DIRECTION.BOTTOM_TO_TOP)]:{value:eN(kn.ANIMATION_EFFECTS.FLY_IN.value,kn.DIRECTION.BOTTOM_TO_TOP),label:kn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Bottom","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:kn.DIRECTION.BOTTOM_TO_TOP,gridSpace:rN.QUARTER,Effect:AO,size:16}},[eN(kn.ANIMATION_EFFECTS.FLY_IN.value,kn.DIRECTION.RIGHT_TO_LEFT)]:{value:eN(kn.ANIMATION_EFFECTS.FLY_IN.value,kn.DIRECTION.RIGHT_TO_LEFT),label:kn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Right","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:kn.DIRECTION.RIGHT_TO_LEFT,gridSpace:rN.QUARTER,Effect:TO,size:16}},[kn.ANIMATION_EFFECTS.PULSE.value]:{value:kn.ANIMATION_EFFECTS.PULSE.value,label:kn.ANIMATION_EFFECTS.PULSE.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),kn.ANIMATION_EFFECTS.PULSE.name),value:kn.ANIMATION_EFFECTS.PULSE.value,Effect:kO}},[eN(kn.ANIMATION_EFFECTS.ROTATE_IN.value,kn.DIRECTION.LEFT_TO_RIGHT)]:{value:eN(kn.ANIMATION_EFFECTS.ROTATE_IN.value,kn.DIRECTION.LEFT_TO_RIGHT),label:(0,d._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Rotate In from Left","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.ROTATE_IN.value,rotateInDirection:kn.DIRECTION.LEFT_TO_RIGHT,gridSpace:rN.HALF,Effect:NO,size:18}},[eN(kn.ANIMATION_EFFECTS.ROTATE_IN.value,kn.DIRECTION.RIGHT_TO_LEFT)]:{value:eN(kn.ANIMATION_EFFECTS.ROTATE_IN.value,kn.DIRECTION.RIGHT_TO_LEFT),label:(0,d._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Rotate In from Right","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.ROTATE_IN.value,rotateInDirection:kn.DIRECTION.RIGHT_TO_LEFT,gridSpace:rN.HALF,Effect:RO,size:18}},[kn.ANIMATION_EFFECTS.TWIRL_IN.value]:{value:kn.ANIMATION_EFFECTS.TWIRL_IN.value,label:kn.ANIMATION_EFFECTS.TWIRL_IN.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),kn.ANIMATION_EFFECTS.TWIRL_IN.name),value:kn.ANIMATION_EFFECTS.TWIRL_IN.value,Effect:LO,size:26}},[eN(kn.ANIMATION_EFFECTS.WHOOSH_IN.value,kn.DIRECTION.LEFT_TO_RIGHT)]:{value:eN(kn.ANIMATION_EFFECTS.WHOOSH_IN.value,kn.DIRECTION.LEFT_TO_RIGHT),label:kn.ANIMATION_EFFECTS.WHOOSH_IN.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Whoosh In from Left","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.WHOOSH_IN.value,whooshInDirection:kn.DIRECTION.LEFT_TO_RIGHT,gridSpace:rN.HALF,Effect:BO,size:20}},[eN(kn.ANIMATION_EFFECTS.WHOOSH_IN.value,kn.DIRECTION.RIGHT_TO_LEFT)]:{value:eN(kn.ANIMATION_EFFECTS.WHOOSH_IN.value,kn.DIRECTION.RIGHT_TO_LEFT),label:kn.ANIMATION_EFFECTS.WHOOSH_IN.name,animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Whoosh In from Right","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.WHOOSH_IN.value,whooshInDirection:kn.DIRECTION.RIGHT_TO_LEFT,gridSpace:rN.HALF,Effect:HO,size:20}},[eN(kn.ANIMATION_EFFECTS.ZOOM.value,kn.SCALE_DIRECTION.SCALE_IN)]:{value:eN(kn.ANIMATION_EFFECTS.ZOOM.value,kn.SCALE_DIRECTION.SCALE_IN),label:(0,d._x)("Scale In","animation effect","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Scale In","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.ZOOM.value,scaleDirection:kn.SCALE_DIRECTION.SCALE_IN,gridSpace:rN.HALF,Effect:qO,size:14}},[eN(kn.ANIMATION_EFFECTS.ZOOM.value,kn.SCALE_DIRECTION.SCALE_OUT)]:{value:eN(kn.ANIMATION_EFFECTS.ZOOM.value,kn.SCALE_DIRECTION.SCALE_OUT),label:(0,d.__)("Scale Out","web-stories"),animation:{ariaLabel:(0,qe.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Scale Out","animation effect","web-stories")),value:kn.ANIMATION_EFFECTS.ZOOM.value,scaleDirection:kn.SCALE_DIRECTION.SCALE_OUT,gridSpace:rN.HALF,Effect:KO,size:20}}},sN={ariaLabel:ma().string,value:ma().string.isRequired,Effect:ma().any,gridSpace:ma().oneOf(Object.values(rN)),size:ma().number,scaleDirection:ma().oneOf(Object.values(kn.SCALE_DIRECTION)),panDirection:ma().oneOf(Object.values(kn.DIRECTION)),zoomDirection:ma().oneOf(Object.values(kn.SCALE_DIRECTION)),flyInDirection:ma().oneOf(Object.values(kn.DIRECTION)),rotateInDirection:ma().oneOf(Object.values(kn.DIRECTION)),whooshInDirection:ma().oneOf(Object.values(kn.DIRECTION))},cN={value:ma().string.isRequired,label:ma().string.isRequired,animation:ma().shape(sN)},dN=(ma().oneOf([...Object.values(kn.DIRECTION),...Object.values(kn.SCALE_DIRECTION),!1]),(e,t)=>{const n=Object.entries(t).filter((e=>{let[t]=e;return-1===oN.indexOf(t)})).map((e=>{let[t,n]=e;return[t,n.options]})).reduce(((e,t)=>{let[n,r]=t;return[...e,...(r||[]).map((e=>eN(n,e)))]}),[]);return Object.keys(e).filter((e=>n.includes(e)))}),uN=e=>Object.values(e).includes(nN),pN=e=>{let{animation:t,disabledOptions:n=[]}=e;const r=t.panDirection&&!n.includes(t.panDirection)?t.panDirection:Object.values(kn.DIRECTION).filter((e=>!n.includes(e)))?.[0]||void 0;return t.value===kn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value?{...t,zoomDirection:n.includes(kn.SCALE_DIRECTION.SCALE_IN)?kn.SCALE_DIRECTION.SCALE_OUT:kn.SCALE_DIRECTION.SCALE_IN,panDirection:r}:t},mN=e=>{let{animation:t,disabledTypeOptionsMap:n}=e;return uN(t)?pN({animation:t,disabledOptions:n[t.value]?.options}):t},fN=p.default.div.withConfig({displayName:"styles__ContentWrapper",componentId:"sc-1d71y2l-0"})(["display:inline-block;"]),gN=p.default.li.withConfig({displayName:"styles__AnimationListItem",componentId:"sc-1d71y2l-1"})(["border:none;background:",";border-radius:",";height:","px;position:relative;grid-column-start:",";overflow:hidden;font-family:'Teko',sans-serif;font-size:","px;line-height:1;color:",";text-transform:uppercase;transition:background 0.1s linear;margin:0;& > div{height:100%;display:flex;align-items:center;justify-content:center;text-align:center;}&[aria-disabled='true']{background:",";}&:hover:not([aria-disabled='true']){cursor:pointer;}&:hover:not([aria-disabled='true']),&:focus:not([aria-disabled='true']){background:",";","{display:inline-block;}","{display:none;}}"," ",";"],(e=>{let{active:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryPress:n.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),56,(e=>{let{gridSpace:t}=e;return(e=>{switch(e){case rN.HALF:return"span 2";case rN.QUARTER:return"span 1";default:return"span 4"}})(t)}),(e=>{let{size:t=28}=e;return t}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable}),(e=>{let{active:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryPress:n.colors.interactiveBg.secondaryHover}),gO,fN,(e=>{let{noEffect:t}=e;return t&&(0,p.css)(["height:36px;font-size:14px;text-transform:none;","{display:inline-block !important;}"],fN)}),Mu),hN=(0,p.css)(["display:inline-block;margin-top:0;padding:16px 4px 16px 16px;ul{display:grid;justify-content:center;gap:12px 4px;grid-template-columns:repeat(4,1fr);position:relative;}"]),EN=e=>{let{theme:t}=e;return(0,p.css)(["margin:-1px -1px 0 -1px;width:calc(100% + 2px);border-color:transparent transparent "," transparent;height:","px;&:hover{border-color:transparent transparent "," transparent;}",""],t.colors.border.defaultNormal,45,t.colors.border.defaultNormal,Mu)};function bN(){return bN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bN.apply(this,arguments)}const yN=(0,u.forwardRef)(((e,t)=>{let{option:n,...r}=e;return c.createElement(gN,bN({ref:t,"aria-label":n.animation?.ariaLabel||n.label,disabled:n.disabled,"aria-disabled":n.disabled,size:n.animation?.size,gridSpace:n.animation?.gridSpace,noEffect:!n.animation?.Effect},r),c.createElement(bd.Tooltip,{title:n?.tooltip||""},c.createElement(fN,null,n.label),n.animation?.Effect&&c.createElement(n.animation.Effect,null,n.label)))})),_N=yN;yN.displayName="DropDownItem",yN.propTypes={option:ma().shape(cN)};const vN=(0,u.forwardRef)((function EffectChooserDropdown(e,t){let{onAnimationSelected:n,onNoEffectSelected:r,isBackgroundEffects:a=!1,selectedEffectType:o,disabledTypeOptionsMap:l,direction:i,selectButtonStylesOverride:s}=e;const{enableExperimentalAnimationEffects:m}=(0,S.useFeatures)(),f=(0,u.useMemo)((()=>eN(o,i)),[o,i]),g=(0,u.useMemo)((()=>a&&dN(lN,l)),[l,a]),h=a?Ed.PLACEMENT.BOTTOM:Ed.PLACEMENT.TOP,E=a?lN:iN,b=(0,u.useMemo)((()=>m?Object.values(E):Object.values(E).filter((e=>{let{value:t}=e;return-1===aN.indexOf(t)}))),[E,m]),y=(0,u.useMemo)((()=>b?.map((e=>{const t=a&&g.includes(e.value);return{...e,disabled:t,tooltip:t&&l[e.animation?.value]?.tooltip}}))),[b,a,g,l]),_=(0,u.useCallback)(((e,t)=>{if(e.preventDefault(),t===tN)return void(Boolean(f)&&r());const a=E[t]?.animation,o=mN({animation:a,disabledTypeOptionsMap:l});n({animation:o.value,panDir:o?.panDirection,zoomDirection:o?.zoomDirection,flyInDir:o?.flyInDirection,rotateInDir:o?.rotateInDirection,whooshInDir:o?.whooshInDirection,scaleDirection:o?.scaleDirection})}),[E,l,n,f,r]),v=f&&f!==tN?EN:Mu,w=(0,p.css)([""," ",""],v,void 0!==s&&s);return c.createElement(cb.DropDown,{ref:t,options:y,placeholder:(0,d._x)("None","animation effect","web-stories"),selectedValue:f,ariaLabel:(0,d.__)("Animation: Effect Chooser","web-stories"),menuStylesOverride:hN,renderItem:_N,onMenuItemClick:_,placement:h,isKeepMenuOpenOnSelection:!0,selectButtonStylesOverride:w})})),wN=vN,TN="animation",SN=(0,p.default)(Wh).withConfig({displayName:"animation__StyledRow",componentId:"sc-1j3eshx-0"})(["margin-bottom:-1px;"]),CN=(0,p.default)(Ke.Text).withConfig({displayName:"animation__Note",componentId:"sc-1j3eshx-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),IN=p.default.div.withConfig({displayName:"animation__GroupWrapper",componentId:"sc-1j3eshx-2"})([""," margin-bottom:16px;"],(e=>{let{hasAnimation:t,theme:n}=e;return t&&`\n    border: 1px solid ${n.colors.border.defaultNormal};\n    border-radius: ${n.borders.radius.small};\n  `})),AN=(0,d.__)("The background image is too small to animate. Double click on the bg & scale the image before applying the animation.","web-stories");const xN=function AnimationPanel(e){let{selectedElements:t,selectedElementAnimations:n,pushUpdateForObject:r,updateAnimationState:a}=e;const o=(0,u.useRef)(!1),{highlight:l,resetHighlight:i}=Fy((e=>({highlight:e[Ej.ANIMATION],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),s=1===t.length&&t[0].isBackground,p=(0,u.useMemo)((()=>{const e=t.map((e=>e.animation)).filter(Boolean);return n.map((t=>({...e.find((e=>e.id===t.id))||t}))).filter((e=>!e.delete))}),[t,n]),m=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,u.shallowEqual)(e,p[0])||(r(TN,e,null,t),o.current=!0)}),[r,p]),f=(0,u.useCallback)((e=>{let{animation:t,...a}=e;if(!t)return;const l=n[0]?.id||(0,he.default)(),i=(0,kn.getAnimationEffectDefaults)(t),s=n[0]?.type===t?{duration:n[0]?.duration,delay:n[0]?.delay}:{};r(TN,{id:l,type:t,...i,...s,...a},null,!0),o.current=!0}),[n,r]),g=document.activeElement,h=(0,u.useDebouncedCallback)((()=>{o.current&&(a({animationState:kn.STORY_ANIMATION_STATE.PLAYING_SELECTED}),o.current=!1)}),300);(0,u.useEffect)(h,[n,a,g,h]);const E=(0,u.useCallback)((()=>{r(TN,{...p[0],delete:!0},null,!0)}),[r,p]),b=(0,u.useMemo)((()=>{if(t[0]?.isBackground){const e=["media","image","video","gif"].includes(t[0].type)&&(0,kn.hasOffsets)({element:t[0]}),n=(0,Ns.progress)(t[0]?.scale||0,{MIN:kn.BG_MIN_SCALE,MAX:kn.BG_MAX_SCALE});return{[kn.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:{tooltip:AN,options:[!e.bottom&&kn.DIRECTION.TOP_TO_BOTTOM,!e.left&&kn.DIRECTION.RIGHT_TO_LEFT,!e.top&&kn.DIRECTION.BOTTOM_TO_TOP,!e.right&&kn.DIRECTION.LEFT_TO_RIGHT].filter(Boolean)},[kn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:{tooltip:AN,options:[n<=.01&&kn.SCALE_DIRECTION.SCALE_IN,n>=.99&&kn.SCALE_DIRECTION.SCALE_OUT].filter(Boolean)},[kn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:{tooltip:AN,options:[!e.bottom&&kn.DIRECTION.TOP_TO_BOTTOM,!e.left&&kn.DIRECTION.RIGHT_TO_LEFT,!e.top&&kn.DIRECTION.BOTTOM_TO_TOP,!e.right&&kn.DIRECTION.LEFT_TO_RIGHT,n<=.01&&kn.SCALE_DIRECTION.SCALE_IN,n>=.99&&kn.SCALE_DIRECTION.SCALE_OUT].filter(Boolean)}}}return{}}),[t]),y=(_=p[0]?.type,[...Object.values(kn.ANIMATION_EFFECTS),...Object.values(kn.ANIMATION_PARTS),...Object.values(kn.BACKGROUND_ANIMATION_EFFECTS)].find((e=>e.value===_))?.name||"");var _;return t.length>1?c.createElement(Uk,{name:"animation",title:(0,d.__)("Animation","web-stories")},c.createElement(Wh,null,c.createElement(CN,{forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Group animation support coming soon.","web-stories")))):c.createElement(ON,{name:"animation",title:(0,d.__)("Animation","web-stories"),onAnimationEnd:()=>i(),isPersistable:!l,$_css:l?.showEffect&&HZ.FLASH},c.createElement(IN,{hasAnimation:y},c.createElement(SN,null,c.createElement(wN,{ref:e=>{e&&l?.focus&&l?.showEffect&&e.focus()},onAnimationSelected:f,onNoEffectSelected:E,isBackgroundEffects:s,disabledTypeOptionsMap:b,direction:uO(p[0]),selectedEffectType:p[0]?.type,selectButtonStylesOverride:l?.focus&&HZ.OUTLINE})),p[0]&&c.createElement(fO,{animation:p[0],onChange:m,disabledTypeOptionsMap:b})))};var kN,ON=(0,p.default)(Uk).withConfig({displayName:"animation___StyledSimplePanel",componentId:"sc-1j3eshx-3"})(["",""],(e=>e.$_css));function NN(){return NN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NN.apply(this,arguments)}const SvgBorder=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",NN({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,kN||(kN=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 19.929a1.074 1.074 0 0 1-.299.742l-.04-.01.01.04a1.074 1.074 0 0 1-.742.299h-.94v-.536h.94a.538.538 0 0 0 .128-.015l.315-.077.077-.315a.538.538 0 0 0 .015-.128v-.94H21v.94Zm0-3.558h-.536v1.877H21v-1.877Zm0-2.62h-.536v1.878H21v-1.877ZM16.37 11v.536h1.878V11h-1.877Zm-1.62.536h.88V11H12.07a1.074 1.074 0 0 0-1.04.815c-.02.082-.031.168-.031.256v7.858a1.074 1.074 0 0 0 .815 1.04c.082.02.168.031.256.031h3.559v-.536h-.88v-8.928ZM18.248 21v-.536h-1.877V21h1.877Zm.742-10h.939a1.074 1.074 0 0 1 .742.299l-.01.04.04-.01a1.074 1.074 0 0 1 .299.742v.94h-.536v-.94a.538.538 0 0 0-.015-.128l-.077-.315-.315-.077a.538.538 0 0 0-.128-.015h-.94V11Z",fill:"currentColor"})))},PN=(0,c.memo)(SvgBorder);function RN(){return RN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RN.apply(this,arguments)}const MN=p.default.div.withConfig({displayName:"borderWidth__BorderInputsFlexContainer",componentId:"sc-tay5fw-0"})(["display:flex;gap:7px;margin-bottom:16px;"]),LN=(0,p.default)(LockToggle).withConfig({displayName:"borderWidth__StyledLockToggle",componentId:"sc-tay5fw-1"})(["",";"],Mu),DN=p.default.div.withConfig({displayName:"borderWidth__ToggleWrapper",componentId:"sc-tay5fw-2"})(["padding-top:2px;"," align-self:stretch;"],(e=>{let{locked:t}=e;return t&&"\n    padding-left: 8px;\n  "})),BN=(0,p.default)(PN).withConfig({displayName:"borderWidth__BorderTop",componentId:"sc-tay5fw-3"})(["transform:rotate(90deg);"]),FN=(0,p.default)(PN).withConfig({displayName:"borderWidth__BorderBottom",componentId:"sc-tay5fw-4"})(["transform:rotate(-90deg);"]),HN=(0,p.default)(PN).withConfig({displayName:"borderWidth__BorderRight",componentId:"sc-tay5fw-5"})(["transform:scaleX(-1);"]);const UN=function WidthControls(e){let{selectedElements:t,pushUpdateForObject:n}=e;const r=zb(t,"border",Qv),a=t.every(Ln.canSupportMultiBorder),o=!0===r.lockedWidth||!a,l=(0,u.useCallback)((e=>(t,r)=>{n("border",o?{left:r,top:r,right:r,bottom:r}:{[e]:r},Qv,!0)}),[n,o]),i=(0,u.useCallback)((e=>{n("border",e,Qv,!0)}),[n]),s=o?(0,d.__)("Border","web-stories"):(0,d.__)("Left border","web-stories"),p=(0,u.useCallback)((e=>({isIndeterminate:Ce===e,placeholder:Ce===e?Ie:null})),[]);return c.createElement(MN,null,c.createElement(Pw,{locked:o},c.createElement(Ow,RN({value:r.left,onChange:l("left"),"aria-label":s,suffix:!o&&c.createElement(PN,null)},p(r.left))),!o&&c.createElement(c.Fragment,null,c.createElement(Ow,RN({value:r.top,onChange:l("top"),"aria-label":(0,d.__)("Top border","web-stories"),labelText:(0,d.__)("Top","web-stories"),suffix:c.createElement(BN,null)},p(r.top))),c.createElement(Ow,RN({value:r.right,onChange:l("right"),"aria-label":(0,d.__)("Right border","web-stories"),labelText:(0,d.__)("Right","web-stories"),suffix:c.createElement(HN,null)},p(r.right))),c.createElement(Ow,RN({value:r.bottom,onChange:l("bottom"),"aria-label":(0,d.__)("Bottom border","web-stories"),labelText:(0,d.__)("Bottom","web-stories"),suffix:c.createElement(FN,null)},p(r.bottom))))),a&&c.createElement(DN,{locked:o},c.createElement(Tooltip,{title:(0,d.__)("Toggle consistent border","web-stories")},c.createElement(LN,{isLocked:o,onClick:()=>{let e={lockedWidth:!o};o||(e={...e,top:r.left,right:r.left,bottom:r.left}),i(e)},"aria-label":(0,d.__)("Toggle consistent border","web-stories")}))))};const zN=function BorderStylePanel(e){const{selectedElements:t,pushUpdate:n}=e,r=zb(t,"border",Qv),{color:a,left:o,top:l,right:i,bottom:s}=r,p=t.every((e=>(0,Ln.canMaskHaveBorder)(e))),m=(0,u.useCallback)(((e,t)=>n({border:{...r,[t]:e}},!0)),[r,n]);if(!p)return null;const f=t.every(Ln.canSupportMultiBorder),g=[o,l,i,s].some((e=>e>0));return c.createElement(Uk,{name:"borderStyle",title:(0,d.__)("Border","web-stories")},c.createElement(UN,e),g&&c.createElement(Wh,null,c.createElement(dh,{value:a,onChange:e=>{m(e,"color")},label:(0,d.__)("Border color","web-stories"),changedStyle:"border-color",hasEyedropper:!0,allowsOpacity:f})))};var GN=n(96921);const jN=p.default.div.withConfig({displayName:"captionsPanelContent__InputRow",componentId:"sc-17hyw65-0"})(["display:flex;flex-grow:1;margin-right:8px;"]),YN=(0,p.default)(_p).withConfig({displayName:"captionsPanelContent__StyledFileInput",componentId:"sc-17hyw65-1"})((e=>{let{$isIndeterminate:t,theme:n}=e;return(0,p.css)(["",";",";"],Mu,!t&&(0,p.css)(["* > input:disabled{color:",";}"],n.colors.fg.primary))})),ZN=(0,p.default)(m.Button).withConfig({displayName:"captionsPanelContent__StyledButton",componentId:"sc-17hyw65-2"})(["",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}));const WN=function CaptionsPanelContent(e){let{isIndeterminate:t=!1,tracks:n=[],captionText:r=(0,d.__)("Upload a file","web-stories"),handleChangeTrack:a,handleRemoveTrack:o,renderUploadButton:l,clearFileText:i=(0,d.__)("Remove file","web-stories")}=e;const{allowedMimeTypes:{caption:s=[]},capabilities:{hasUploadMediaAction:u},MediaUpload:p}=Y();return(u||n?.length)&&s?.length?c.createElement(c.Fragment,null,t&&c.createElement(Wh,null,c.createElement(YN,{value:Ie,disabled:!0,"aria-label":(0,d.__)("Filename","web-stories"),onChange:()=>o(),$isIndeterminate:t})),n.map((e=>{let{id:t,trackName:n}=e;return c.createElement(Wh,{key:`row-filename-${t}`},c.createElement(jN,null,c.createElement(YN,{value:n,"aria-label":(0,d.__)("Filename","web-stories"),onChange:()=>o(t),disabled:!0})),c.createElement(Tooltip,{hasTail:!0,title:i},c.createElement(ZN,{"aria-label":i,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:()=>o(t)},c.createElement(GN.default,null))))})),!n.length&&!t&&c.createElement(Wh,{expand:!0},c.createElement(p,{onSelect:a,onSelectErrorMessage:(0,d.__)("Please choose a VTT file to use as caption.","web-stories"),type:s,title:r,buttonInsertText:(0,d.__)("Select caption","web-stories"),render:l}))):null},VN=(0,p.default)(m.Button).withConfig({displayName:"captions__StyledButton",componentId:"sc-17zds0n-0"})(["",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),$N=(0,p.default)(VN).withConfig({displayName:"captions__UploadButton",componentId:"sc-17zds0n-1"})(["padding:12px 8px;"]);var qN=(0,p.default)($N).withConfig({displayName:"captions___StyledUploadButton",componentId:"sc-17zds0n-2"})(["",""],(e=>e.$_css));const XN={MAX:1e3};const KN=function CaptionsPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=Fb(t,"tracks",[]),a=r===Ce,{capabilities:{hasUploadMediaAction:o}}=Y();CE((e=>{let{resource:t}=e;return{resource:{...t,alt:t.alt?.slice(0,XN.MAX)}}}),[]);const l=(0,u.useCallback)((e=>{let t=[];if(e){const n=r.findIndex((t=>{let{id:n}=t;return n===e}));t=[...r.slice(0,n),...r.slice(n+1)]}n({tracks:t},!0)}),[r,n]),i=(0,u.useCallback)((e=>{let{src:t="",id:a}=e;const o={track:t,trackId:a,trackName:t.split("/").pop(),id:(0,he.default)(),kind:"captions",srclang:"",label:""};n({tracks:[...r,o]},!0)}),[r,n]),{highlight:s,resetHighlight:p}=Fy((e=>({highlight:e[Ej.CAPTIONS],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),m=(0,u.useCallback)((e=>c.createElement(qN,{onAnimationEnd:()=>p(),ref:e=>{e&&s?.focus&&s?.showEffect&&e.focus()},onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE,$_css:s?.showEffect&&HZ.OUTLINE},(0,d.__)("Upload a file","web-stories"))),[p,s?.focus,s?.showEffect]);return o||r.length?c.createElement(QN,{onAnimationEnd:()=>p(),name:"caption",title:(0,d.__)("Caption and Subtitles","web-stories"),isPersistable:!s,$_css2:s?.showEffect&&HZ.FLASH},c.createElement(WN,{isIndeterminate:a,tracks:a?[]:r,handleChangeTrack:i,handleRemoveTrack:l,renderUploadButton:m})):null};var QN=(0,p.default)(Uk).withConfig({displayName:"captions___StyledSimplePanel",componentId:"sc-17zds0n-3"})(["",""],(e=>e.$_css2));const JN=p.default.div.withConfig({displayName:"alignment__ElementRow",componentId:"sc-812g1l-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;padding:16px;overflow:auto;overflow:overlay;"]),eP=["distributeHorizontally","distributeVertically","alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom"],tP=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"alignment__AlignmentButton",componentId:"sc-812g1l-1"})(["position:relative;:focus{z-index:1;}",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")})),nP=(0,p.default)(uk).withConfig({displayName:"alignment__StyledPanel",componentId:"sc-812g1l-2"})(["background-color:",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black24}),(e=>{let{theme:t}=e;return t.colors.divider.secondary}));const rP=function ElementAlignmentPanel(e){let{selectedElements:t,pushUpdate:n}=e;const{isRTL:r}=Y(),{isDistributionEnabled:a,handleAlignLeft:o,handleAlignCenter:l,handleAlignRight:i,handleAlignTop:s,handleAlignMiddle:p,handleAlignBottom:m,handleHorizontalDistribution:f,handleVerticalDistribution:g}=IT({selectedElements:t,updateElements:e=>n(e,!0)}),h=(0,u.useRef)(),[E,b]=(0,u.useState)(null),y=(0,u.useCallback)((e=>()=>{const t=eP.findIndex((e=>e===E)),n=eP[t+e];n&&(b(n),h.current.querySelector(`#${n}`).focus())}),[E,b]),_=r?-1:1;return(0,tr.useKeyDownEffect)(h,"left",(()=>y(_)),[y,_]),(0,tr.useKeyDownEffect)(h,"right",(()=>y(-_)),[y,_]),c.createElement(nP,{name:"alignment",canCollapse:!1,ariaLabel:(0,d.__)("Alignment","web-stories")},c.createElement(JN,{ref:h},c.createElement(Tooltip,{placement:Ed.PLACEMENT.BOTTOM_START,title:(0,d.__)("Distribute horizontally","web-stories")},c.createElement(tP,{disabled:!a,onClick:f,"aria-label":(0,d.__)("Distribute horizontally","web-stories"),id:eP[0],onFocus:()=>b(eP[0])},c.createElement(Ww,null))),c.createElement(Tooltip,{title:(0,d.__)("Distribute vertically","web-stories")},c.createElement(tP,{disabled:!a,onClick:g,"aria-label":(0,d.__)("Distribute vertically","web-stories"),id:eP[1],onFocus:()=>b(eP[1])},c.createElement(Xw,null))),c.createElement(Tooltip,{title:(0,d.__)("Align left","web-stories")},c.createElement(tP,{onClick:o,"aria-label":(0,d.__)("Align left","web-stories"),id:eP[2],onFocus:()=>b(eP[2])},c.createElement(eT,null))),c.createElement(Tooltip,{title:(0,d.__)("Align center","web-stories")},c.createElement(tP,{onClick:l,"aria-label":(0,d.__)("Align center","web-stories"),id:eP[3],onFocus:()=>b(eP[3])},c.createElement(aT,null))),c.createElement(Tooltip,{title:(0,d.__)("Align right","web-stories")},c.createElement(tP,{onClick:i,"aria-label":(0,d.__)("Align right","web-stories"),id:eP[4],onFocus:()=>b(eP[4])},c.createElement(sT,null))),c.createElement(Tooltip,{title:(0,d.__)("Align top","web-stories")},c.createElement(tP,{onClick:s,"aria-label":(0,d.__)("Align top","web-stories"),id:eP[5],onFocus:()=>b(eP[5])},c.createElement(pT,null))),c.createElement(Tooltip,{title:(0,d.__)("Align vertical center","web-stories")},c.createElement(tP,{onClick:p,"aria-label":(0,d.__)("Align vertical center","web-stories"),id:eP[6],onFocus:()=>b(eP[6])},c.createElement(hT,null))),c.createElement(Tooltip,{title:(0,d.__)("Align bottom","web-stories")},c.createElement(tP,{onClick:m,"aria-label":(0,d.__)("Align bottom","web-stories"),id:eP[7],onFocus:()=>b(eP[7])},c.createElement(_T,null)))))};const aP=function(e,t,n){switch(n){case Dn.OverlayType.NONE:return null;case Dn.OverlayType.SOLID:return function(e,t){switch(t){case Dn.OverlayType.NONE:return{color:{r:0,g:0,b:0,a:.5}};case Dn.OverlayType.LINEAR:case Dn.OverlayType.RADIAL:{const{stops:t}=e,n=t.sort(((e,t)=>(t.color.a??1)-(e.color.a??1))),{color:{r,g:a,b:o}}=n[0];return{color:{r,g:a,b:o,a:.5}}}default:return e}}(e,t);case Dn.OverlayType.LINEAR:return function(e,t){switch(t){case Dn.OverlayType.NONE:return{type:"linear",rotation:0,stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case Dn.OverlayType.SOLID:{const{color:{r:t,g:n,b:r,a}}=e;return{type:"linear",rotation:0,stops:[{color:{r:t,g:n,b:r,a:0},position:.4},{color:{r:t,g:n,b:r,a:1},position:1}],alpha:a}}case Dn.OverlayType.RADIAL:{const{stops:t,alpha:n}=e;return{type:"linear",rotation:0,stops:t,alpha:n}}default:return e}}(e,t);case Dn.OverlayType.RADIAL:return function(e,t){switch(t){case Dn.OverlayType.NONE:return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case Dn.OverlayType.SOLID:{const{color:{r:t,g:n,b:r,a}}=e;return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:t,g:n,b:r,a:0},position:0},{color:{r:t,g:n,b:r,a:1},position:1}],alpha:a}}case Dn.OverlayType.LINEAR:{const{stops:t,alpha:n}=e;return{type:"radial",size:{w:.67,h:.67},stops:t,alpha:n}}default:return e}}(e,t);default:return e}},oP={[Dn.OverlayType.NONE]:{label:(0,d._x)("None","overlay","web-stories")},[Dn.OverlayType.SOLID]:{label:(0,d.__)("Tint","web-stories")},[Dn.OverlayType.LINEAR]:{label:(0,d.__)("Linear","web-stories")},[Dn.OverlayType.RADIAL]:{label:(0,d.__)("Vignette","web-stories")}};const lP=function FilterPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=Ub(t,"overlay"),a=r===Ce,o=r?r.type||Dn.OverlayType.SOLID:Dn.OverlayType.NONE,{getProxiedUrl:l}=Ao(),{isDefaultBackground:i}=t[0],s=Sa((e=>!i||e.state.currentPage?.backgroundColor)),p=(0,u.useCallback)((e=>n({overlay:e},!0)),[n]),m=o!==Dn.OverlayType.RADIAL&&o!==Dn.OverlayType.LINEAR,{LayerIcon:f}=(0,A.getDefinitionForType)(t[0].type);return c.createElement(Uk,{name:"filter",title:(0,d.__)("Filters","web-stories")},!a&&c.createElement(Wh,null,Object.keys(oP).map((e=>{const{label:n}=oP[e];return c.createElement(bh,{key:e,element:t[0],label:n,isToggled:o===e,onClick:()=>p(aP(r,o,e)),filter:aP(r,Dn.OverlayType.NONE,e),"aria-label":(0,qe.default)(
/* translators: %s: Filter type */
(0,d.__)("Filter: %s","web-stories"),n)},c.createElement(f,{element:t[0],getProxiedUrl:l,currentPageBackgroundColor:s}))}))),o!==Dn.OverlayType.NONE&&c.createElement(Wh,null,c.createElement(dh,{label:(0,d.__)("Color","web-stories"),value:r,onChange:p,allowsGradient:!0,hasEyedropper:m})))},iP=(0,p.default)(Ke.Text).withConfig({displayName:"imageAccessibility__StyledText",componentId:"sc-147toy8-0"})(["color:",";margin-bottom:10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),sP={alt:null},cP={MAX:1e3};const dP=function ImageAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=zb(t,"resource",sP),a=Fb(t,"alt",r.alt),{highlight:o,resetHighlight:l,cancelHighlight:i}=Fy((e=>({highlight:e[Ej.ASSISTIVE_TEXT],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(uP,{onAnimationEnd:()=>l(),name:"imageAccessibility",title:(0,d.__)("Accessibility","web-stories"),isPersistable:!o,$_css:o&&HZ.FLASH},c.createElement(iP,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add a brief description of the image.","web-stories")),c.createElement(Wh,null,c.createElement(wE,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},placeholder:a===Ce?Ie:"",value:a||"",onChange:e=>n({alt:e?.target?.value?.trim()||null},!0),"aria-label":(0,d.__)("Assistive text","web-stories"),maxLength:cP.MAX,rows:2,isIndeterminate:a===Ce})))};var uP=(0,p.default)(Uk).withConfig({displayName:"imageAccessibility___StyledSimplePanel",componentId:"sc-147toy8-1"})(["",""],(e=>e.$_css));var pP;function mP(){return mP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mP.apply(this,arguments)}const SvgPagePlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",mP({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,pP||(pP=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7.5a.5.5 0 0 0 0 1h7a1.5 1.5 0 0 1 1.5 1.5v9a.5.5 0 0 0 1 0v-9A2.5 2.5 0 0 0 21 7.5h-7Zm-4 3A1.5 1.5 0 0 0 8.5 12v11a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5V12a1.5 1.5 0 0 0-1.5-1.5h-9ZM9.5 12a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V12Zm2.5 5a.5.5 0 0 0 0 1h2v2a.5.5 0 0 0 1 0v-2h2a.5.5 0 0 0 0-1h-2v-2a.5.5 0 0 0-1 0v2h-2Z",fill:"currentColor"})))},fP=(0,c.memo)(SvgPagePlus);const gP=function(e){const{id:t}=e,{isSelected:n,toggleLayer:r}=Sa((e=>{let{state:n,actions:r}=e;return{isSelected:n.selectedElementIds.includes(t),toggleLayer:r.toggleLayer}})),a=rs();return{isSelected:n,handleClick:(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r({elementId:t,metaKey:e.metaKey,shiftKey:e.shiftKey}),a()}),[r,t,a])}},hP=p.default.div.withConfig({displayName:"layer__ActionsContainer",componentId:"sc-aphr0z-0"})(["position:absolute;display:none;align-items:center;height:100%;top:0;right:0;padding-right:6px;column-gap:6px;--background-color:",";--background-color-opaque:",";background-color:var(--background-color);::before{position:absolute;content:'';width:32px;height:100%;top:0;left:0;transform:translateX(-100%);background:linear-gradient( to right,var(--background-color-opaque),var(--background-color) );pointer-events:none;}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.bg.secondary,0)})),EP=p.default.div.attrs({"data-testid":"layer-option"}).withConfig({displayName:"layer__LayerContainer",componentId:"sc-aphr0z-1"})(["position:relative;height:","px;width:100%;overflow:hidden;:is(:hover,:focus-within) ","{display:inline-flex;}"],35,hP),bP=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,tabIndex:-1,role:"option"}).withConfig({displayName:"layer__LayerButton",componentId:"sc-aphr0z-2"})(["position:relative;display:grid;grid-template-columns:36px 1fr;border:0;padding:0;background:transparent;height:100%;width:100%;overflow:hidden;align-items:center;user-select:none;border-radius:0;padding-left:12px;transition:revert;",":hover{background:",";}:hover + *{--background-color:",";--background-color-opaque:",";}:active{background:",";}:active + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["background:",";+ *{--background-color:",";--background-color-opaque:",";--selected-hover-color:",";}"],n.colors.interactiveBg.tertiaryPress,n.colors.interactiveBg.tertiaryPress,(0,Xe.rgba)(n.colors.interactiveBg.tertiaryPress,0),n.colors.interactiveBg.tertiaryHover)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.interactiveBg.tertiaryHover,0)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.interactiveBg.tertiaryPress,0)})),yP=p.default.div.withConfig({displayName:"layer__LayerIconWrapper",componentId:"sc-aphr0z-3"})(["display:flex;align-items:center;justify-content:flex-start;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),_P=p.default.div.withConfig({displayName:"layer__LayerDescription",componentId:"sc-aphr0z-4"})(["position:relative;width:100%;overflow:hidden;display:flex;align-items:center;margin-left:0;text-align:left;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),vP=p.default.div.withConfig({displayName:"layer__IconWrapper",componentId:"sc-aphr0z-5"})(["display:flex;align-items:center;justify-content:flex-start;position:absolute;right:0;width:32px;aspect-ratio:1;svg{position:relative;display:block;width:100%;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),wP=p.default.div.withConfig({displayName:"layer__LayerContentContainer",componentId:"sc-aphr0z-6"})(["margin-right:8px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]),TP=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,tabIndex:-1}).withConfig({displayName:"layer__LayerAction",componentId:"sc-aphr0z-7"})(["position:relative;aspect-ratio:1;width:20px;padding:0;svg{position:absolute;width:32px;height:auto;top:50%;left:50%;transform:translate(-50%,-50%);}&&{transition:revert;background:var(--background-color);}:disabled{color:",";}:hover{color:var( --selected-hover-color,"," );}& + &{margin-left:4px;}*{pointer-events:none;}:focus{","}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,"var(--background-color)")}));function SP(e){e.stopPropagation(),e.preventDefault()}const CP=(0,u.memo)((function(e){let{element:t}=e;const{LayerIcon:n,LayerContent:r}=(0,A.getDefinitionForType)(t.type),{isSelected:a,handleClick:o}=gP(t),{isDefaultBackground:l}=t,{duplicateElementsById:i,deleteElementById:s,currentPageBackgroundColor:p}=Sa((e=>{let{actions:t,state:n}=e;return{duplicateElementsById:t.duplicateElementsById,deleteElementById:t.deleteElementById,currentPageBackgroundColor:!l||n.currentPage?.backgroundColor}})),{getProxiedUrl:m}=Ao(),f=(0,u.useRef)(null);(0,s_.default)({node:f.current,eventData:{...i_.TRACKING_EVENTS.SELECT_ELEMENT,label:t.type}});const g=(0,u.useRef)(null);(0,s_.default)({node:g.current,eventData:{...i_.TRACKING_EVENTS.DELETE_ELEMENT,label:t.type}});const h=`layer-${t.id}`;return c.createElement(EP,null,c.createElement(bP,{ref:f,id:h,onClick:o,isSelected:a},c.createElement(yP,null,c.createElement(n,{element:t,getProxiedUrl:m,currentPageBackgroundColor:p})),c.createElement(_P,null,c.createElement(wP,null,t.isBackground?c.createElement(x.LayerText,null,(0,d.__)("Background","web-stories")):c.createElement(r,{element:t})),t.isBackground&&c.createElement(vP,null,c.createElement(Bu.default,null)))),c.createElement(hP,null,t.isBackground?c.createElement(TP,{"aria-label":(0,d.__)("Locked","web-stories"),"aria-describedby":h,disabled:!0},c.createElement(Bu.default,null)):c.createElement(c.Fragment,null,c.createElement(bd.Tooltip,{title:(0,d.__)("Delete Layer","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(TP,{ref:g,"aria-label":(0,d.__)("Delete","web-stories"),"aria-describedby":h,onPointerDown:SP,onClick:()=>s({elementId:t.id})},c.createElement(GN.default,null))),c.createElement(bd.Tooltip,{title:(0,d.__)("Duplicate Layer","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(TP,{"aria-label":(0,d.__)("Duplicate","web-stories"),"aria-describedby":h,onPointerDown:SP,onClick:()=>i({elementIds:[t.id]})},c.createElement(fP,null))))))})),IP=(0,p.default)(XA).attrs({"aria-orientation":"vertical","aria-label":(0,d.__)("Layers List","web-stories")}).withConfig({displayName:"layerList__LayerList",componentId:"sc-9dcbvm-0"})(["flex-direction:column;width:100%;height:100%;align-items:stretch;user-select:",";overflow-y:auto;padding-bottom:4px;"],(e=>{let{hasUserSelect:t}=e;return t?"none":"initial"})),AP=(0,p.default)(ax).withConfig({displayName:"layerList__LayerSeparator",componentId:"sc-9dcbvm-1"})(["height:","px;margin:-","px 0;padding:","px 0;"],35,17.5,17.5),xP=(0,u.memo)((function ReorderableLayer(e){let{id:t,position:n,handleStartReordering:r}=e;const a=Sa((e=>{let{state:n}=e;return n.currentPage?.elements.find((e=>e.id===t))}));return a?c.createElement(u.Fragment,{key:t},c.createElement(AP,{position:n+1}),c.createElement(ex,{position:n,onStartReordering:r(t),disabled:a.isBackground},c.createElement(CP,{element:a}))):null}));const kP=function LayerPanel(e){let{layers:t}=e;const{arrangeElement:n,setSelectedElementsById:r}=Sa((e=>{let{actions:t}=e;return{arrangeElement:t.arrangeElement,setSelectedElementsById:t.setSelectedElementsById}})),a=oc((e=>e.onOpenMenu)),o=t.length,l=rs(),i=(0,u.useCallback)((e=>()=>{r({elementIds:[e]}),l()}),[r,l]);return o?c.createElement(IP,{onContextMenu:a,onPositionChange:(e,r)=>n({elementId:t.find((t=>t.position===e)).id,position:r}),mode:"vertical",getItemSize:()=>35},t.map((e=>c.createElement(xP,{key:e.id,id:e.id,position:e.position,handleStartReordering:i})))):null};const OP=function(){const e=Sa((e=>{let{state:t}=e;return t.currentPage?.elements?.map((e=>e.id))||je})).map(((e,t)=>({id:e,position:t})));return e.reverse(),e},NP=p.default.div.withConfig({displayName:"layerPanel__Container",componentId:"sc-15wxdbu-0"})(["filter:drop-shadow(0px -4px 8px rgba(0,0,0,0.2));max-height:","px;background-color:",";"],(e=>{let{maxHeight:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.bg.secondary}));const PP=(0,u.memo)((function(){const e=OP(),t=Fg((e=>{let{state:t}=e;return t.sidebarContentHeight}));return c.createElement(NP,{maxHeight:t},c.createElement(Fk,{padding:"0"},c.createElement(kP,{layers:e})))})),RP=p.default.div.withConfig({displayName:"link__IconInfo",componentId:"sc-niusn4-0"})(["display:flex;flex-direction:column;margin-left:20px;"]),MP=(0,p.default)(Ke.Text).withConfig({displayName:"link__IconText",componentId:"sc-niusn4-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),LP=p.default.span.withConfig({displayName:"link__Error",componentId:"sc-niusn4-2"})(["font-size:12px;line-height:16px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.negative}));const DP=function LinkPanel(e){let{selectedElements:t,pushUpdateForObject:n}=e;const{clearEditing:r,setDisplayLinkGuidelines:a,displayLinkGuidelines:o}=xs((e=>({clearEditing:e.actions.clearEditing,setDisplayLinkGuidelines:e.actions.setDisplayLinkGuidelines,displayLinkGuidelines:e.state.displayLinkGuidelines}))),{currentPage:l}=Sa((e=>({currentPage:e.state.currentPage}))),{highlight:i,resetHighlight:s,cancelHighlight:p}=Fy((e=>({highlight:e[Ej.LINK],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{getElementsInAttachmentArea:m}=II(),f=m(t).length>0&&l?.pageAttachment?.url?.length>0,g=(0,u.useMemo)((()=>lA({icon:null,desc:null})),[]),h=lA(zb(t,"link",g)),{url:E="",desc:b="",icon:y,rel:_=[]}=h,[v,w]=(0,u.useState)(!1),[T,S]=(0,u.useState)(!1),{actions:{getLinkMetadata:C}}=X(),{getProxiedUrl:I,checkResourceAccess:A}=Ao(),x=(0,u.useBatchingCallback)((e=>{let{newUrl:t,newTitle:r,newIcon:a,needsProxy:o}=e;return n("link",(()=>t?lA({url:t,needsProxy:o,desc:r||"",icon:a?Rr(t,a):""}):null),g,!0)}),[n,g]),[k,O]=(0,u.useState)(!Mr(Lr(E))),N=(0,u.useDebouncedCallback)((0,u.useCallback)((async e=>{if(e.startsWith("http://")||e.startsWith("https://")){w(!0);try{const{title:t,image:n}=C?await C(e):{},r=!!n&&await A(n);x({newUrl:e,newTitle:t,newIcon:n,needsProxy:r})}catch(e){O(!0)}finally{w(!1)}}}),[A,C,x]),1200),P=(0,u.useCallback)(((e,t)=>{if(r(),N.cancel(),e.url){if(Ce===e.url)return;const t=Lr(e.url),n=Mr(t);O(!n),n&&N(t)}n("link",""!==e.url?{...e}:null,g,t)}),[r,n,g,N]),R=(0,u.useCallback)((e=>{P({icon:e?.src},!0)}),[P]),M=Boolean(E?.length),L=M&&!k;(0,u.useEffect)((()=>{if(T){const e=M&&E!==Ce;a(f&&!e)}}),[t,T,f,M,a,E]);const D=y?I(h,y):null,B=Ce===E,F=Ce===b,H=Ce===_,U=(0,u.useCallback)((e=>P({rel:e},!0)),[P]);return c.createElement(BP,{name:"link",title:(0,d.__)("Link","web-stories"),onAnimationEnd:()=>s(),isPersistable:!i,$_css:i?.showEffect&&HZ.FLASH},c.createElement(Xh,{ref:e=>{e&&i?.focus&&i?.showEffect&&(e.addEventListener("keydown",p,{once:!0}),e.focus())},onChange:e=>!o&&P({url:e},!e),onBlur:()=>{a(!1),S(!1)},onFocus:()=>{S(!0)},value:E||"",placeholder:B?Ie:(0,d.__)("Enter an address to apply a link","web-stories"),isIndeterminate:B,"aria-label":(0,d.__)("Element link","web-stories"),hasError:o}),o&&c.createElement(Wh,null,c.createElement(LP,null,(0,d.__)("Link can not reside below the dashed line when a page attachment is present","web-stories"))),L&&c.createElement(c.Fragment,null,c.createElement(Wh,null,c.createElement(_p,{placeholder:F?Ie:(0,d.__)("Optional description","web-stories"),onChange:e=>{let{target:t}=e;return P({desc:t.value},!t.value)},value:b,"aria-label":(0,d.__)("Link description","web-stories"),isIndeterminate:F,disabled:v,containerStyleOverride:Lu})),c.createElement(Wh,{spaceBetween:!1},c.createElement(Zh,{handleChange:R,icon:D,isLoading:v,disabled:v}),c.createElement(RP,null,c.createElement(MP,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Optional brand icon","web-stories")))),!H&&c.createElement(Db,{onChangeRel:U,rel:_})))};var BP=(0,p.default)(Uk).withConfig({displayName:"link___StyledSimplePanel",componentId:"sc-niusn4-3"})(["",""],(e=>e.$_css));const FP=p.default.label.withConfig({displayName:"pageAttachment__Label",componentId:"sc-qn4x32-0"})(["margin-left:12px;"]),HP=(0,p.default)(tp.Checkbox).withConfig({displayName:"pageAttachment__StyledCheckbox",componentId:"sc-qn4x32-1"})(["",""],(e=>{let{theme:t}=e;return`\n    input[type='checkbox']&.${KE.FOCUS_VISIBLE_SELECTOR} ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;\n    }\n  `})),UP=(0,p.default)(Wh).withConfig({displayName:"pageAttachment__StyledRow",componentId:"sc-qn4x32-2"})(["justify-content:flex-start;"]),zP=p.default.div.withConfig({displayName:"pageAttachment__Space",componentId:"sc-qn4x32-3"})(["width:20px;"]);const GP=function PageAttachmentPanel(){const{currentPage:e,updateCurrentPageProperties:t}=Sa((e=>({updateCurrentPageProperties:e.actions.updateCurrentPageProperties,currentPage:e.state.currentPage}))),{setDisplayLinkGuidelines:n}=xs((e=>({setDisplayLinkGuidelines:e.actions.setDisplayLinkGuidelines}))),{actions:{getLinkMetadata:r}}=X(),{pageAttachment:a={}}=e,o=(0,d.__)("Learn more","web-stories"),{url:l,ctaText:i=o,icon:s,theme:p,rel:m=[]}=a,[f,g]=(0,u.useState)(i),[h,E]=(0,u.useState)(l),[b,y]=(0,u.useState)(!1),[_,v]=(0,u.useState)(!1),{getLinksInAttachmentArea:w}=II(),T=w().length>0;(0,u.useEffect)((()=>()=>{n(!1)}),[T,n,l]),(0,u.useEffect)((()=>{b&&l?.length&&y(!1)}),[l,b]);const S=(0,u.useCallback)((e=>{const n={...a,...e};t({properties:{pageAttachment:n}})}),[t,a]),C=(0,u.useDebouncedCallback)(S,300),{getProxiedUrl:I,checkResourceAccess:A}=Ao(),x=(0,u.useDebouncedCallback)((0,u.useCallback)((async e=>{if(e.startsWith("http://")||e.startsWith("https://")){v(!0);try{const{image:t}=r?await r(e):{},n=t?Rr(e,t):"",a=!!n&&await A(n);S({url:e,icon:n,needsProxy:a})}catch(t){S({url:e,icon:"",needsProxy:!1}),O(!0)}finally{v(!1)}}}),[A,r,S]),1200),[k,O]=(0,u.useState)(l&&!Mr(Lr(l).trim())),N=f===o,P=Boolean(l)&&!k,R=(0,u.useCallback)((e=>{x.cancel(),E(e),O(!1);const t=Lr(e.trim());Mr(t)&&x(t)}),[x]),M=(0,u.useCallback)((e=>{let{target:t}=e;const{value:n}=t;g(n),C({ctaText:n})}),[C]),L=(0,u.useCallback)((e=>{S({icon:e?.src},!0)}),[S]),D=(0,u.useCallback)((e=>S({rel:e},!0)),[S]),B=(0,u.useCallback)((e=>{let{target:t}=e;t.value?(C.cancel(),S({ctaText:f||o})):(S({ctaText:o}),g(o))}),[f,C,o,S]),F=`cb-${(0,he.default)()}`,H=s?I(a,s):null;let U;const z=b||k;return z&&(U=b?(0,d.__)("Links cannot reside below the dashed line when a page attachment is present. If you add a page attachment, your viewers will not be able to click on the link.","web-stories"):(0,d.__)("Invalid link","web-stories")),c.createElement(Uk,{name:"pageAttachment",title:(0,d.__)("Page Attachment","web-stories"),collapsedByDefault:!1},c.createElement(Xh,{onChange:e=>R(e?.trim()),onBlur:()=>{C.cancel(),S({url:h?.trim().length?Lr(h.trim()):""})},onFocus:()=>{T&&!l?.length&&(y(!0),n(!0))},value:h,clear:!0,"aria-label":(0,d.__)("Type an address to add a page attachment link","web-stories"),hasError:z,hint:U}),P&&c.createElement(c.Fragment,null,c.createElement(Wh,null,c.createElement(_p,{onChange:M,onBlur:B,value:f,"aria-label":(0,d.__)("Page Attachment CTA text","web-stories"),suffix:N?(0,d.__)("Default","web-stories"):null})),c.createElement(UP,null,c.createElement(HP,{id:F,checked:p===He,onChange:e=>S({theme:e.target.checked?He:Ue})}),c.createElement(FP,{htmlFor:F},c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Use dark theme","web-stories")))),c.createElement(UP,null,c.createElement(Zh,{handleChange:L,icon:H,isLoading:_,disabled:_}),c.createElement(zP,null),c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Link icon","web-stories"))),c.createElement(Db,{onChangeRel:D,rel:m})))};var jP;function YP(){return YP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YP.apply(this,arguments)}const SvgExclamationTriangle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",YP({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jP||(jP=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.968 8.032c.508-.863 1.795-.863 2.304 0l8.506 14.436c.528.895-.183 1.917-1.152 1.917H7.614c-.97 0-1.68-1.022-1.153-1.917l8.507-14.436Zm1.152.353a.328.328 0 0 0-.29.155L7.322 22.975a.24.24 0 0 0 .003.26c.051.083.15.15.288.15h17.012a.328.328 0 0 0 .288-.15.24.24 0 0 0 .003-.26L16.41 8.54a.327.327 0 0 0-.29-.155Zm-.117 4.333a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 1 .5-.5Zm0 8.502a1.218 1.218 0 1 0 0-2.435 1.218 1.218 0 0 0 0 2.435Z",fill:"currentColor"})))},ZP=(0,c.memo)(SvgExclamationTriangle),WP=p.default.div.withConfig({displayName:"warning__WarningContainer",componentId:"sc-16blgsz-0"})(["display:flex;gap:8px;margin:14px auto;border:1px solid ",";border-radius:",";padding:8px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),(e=>{let{theme:t}=e;return t.borders.radius.small})),VP=(0,p.default)(ZP).withConfig({displayName:"warning__WarningIcon",componentId:"sc-16blgsz-1"})(["width:32px;height:100%;color:",";"],(e=>{let{theme:t}=e;return t.colors.status.warning})),$P=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"warning__Message",componentId:"sc-16blgsz-2"})(["max-width:calc(100% - 40px);"]);const qP=function Warning(e){let{message:t}=e;const n=(0,Eb.default)("assertive");return(0,u.useEffect)((()=>{n(t)}),[t,n]),c.createElement(WP,{"data-testid":"warningContainer"},c.createElement(VP,{title:Xd.lowContrast.warningIcon}),c.createElement($P,null,t))},XP={horizontal:!1,vertical:!1},KP=(0,p.default)(Wh).withConfig({displayName:"pageBackground__Row",componentId:"sc-1rac0x7-0"})(["justify-content:flex-start;"]),QP=p.default.div.withConfig({displayName:"pageBackground__SelectedMedia",componentId:"sc-1rac0x7-1"})(["width:128px;height:36px;border-radius:4px;border:1px solid ",";display:flex;justify-content:space-between;margin-right:12px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),JP=p.default.div.withConfig({displayName:"pageBackground__MediaWrapper",componentId:"sc-1rac0x7-2"})(["height:24px;width:24px;border-radius:4px;overflow:hidden;margin:5px;img{object-fit:cover;max-height:100%;max-width:100%;}"]),eR=(0,p.default)(m.Button).withConfig({displayName:"pageBackground__RemoveButton",componentId:"sc-1rac0x7-3"})(["margin:1px;align-self:center;"]),tR=(0,p.default)(m.Button).attrs({size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY}).withConfig({displayName:"pageBackground__ReplaceButton",componentId:"sc-1rac0x7-4"})(["margin-right:8px;"]),nR=(0,p.default)(Ke.Text).withConfig({displayName:"pageBackground__Text",componentId:"sc-1rac0x7-5"})(["align-self:center;width:55px;"]);const rR=function PageBackgroundPanel(e){let{selectedElements:t,pushUpdate:n}=e;const{isDefaultBackground:r}=t[0],{combineElements:a,currentPage:o,clearBackgroundElement:l,updateCurrentPageProperties:i,currentPageBackgroundColor:s}=Sa((e=>{let{state:t,actions:n}=e;return{currentPage:t.currentPage,clearBackgroundElement:n.clearBackgroundElement,combineElements:n.combineElements,updateCurrentPageProperties:n.updateCurrentPageProperties,currentPageBackgroundColor:!r||t.currentPage?.backgroundColor}})),{getProxiedUrl:p}=Ao(),{capabilities:{hasUploadMediaAction:m}}=Y(),g=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),[h,E]=(0,u.useState)(!1),b=(0,u.useCallback)((e=>{i({properties:{backgroundColor:e}})}),[i]),y=(0,u.useCallback)((()=>{n({isBackground:!1,opacity:100},!0),l()}),[n,l]),_=(0,u.useCallback)((e=>{const n=(0,A.createNewElement)(e.type,Pi(e.type,{resource:e}));a({firstElement:n,secondId:t[0].id}),(0,L.trackEvent)("replace_background_media")}),[a,t]),v=(0,u.useCallback)((e=>c.createElement(tR,{onClick:e,"aria-label":(0,d.__)("Replace","web-stories")},c.createElement(Ky,null))),[]),{highlight:w,resetHighlight:T,cancelHighlight:S}=Fy((e=>({highlight:e[Ej.PAGE_BACKGROUND],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));(0,u.useEffect)((()=>{QW([o],g).then((e=>{const t=e[0]?.result,n=t?.some((e=>{let{isBackground:t}=e;return t}));E(Boolean(n))})).catch((()=>{}))}),[o,g]);const C=t[0];if(!C||!C.isBackground)return null;const I=C.isBackground&&!r,{backgroundColor:x}=o,{LayerIcon:k}=(0,A.getDefinitionForType)(C.type),O=t[0]?.flip||XP;return c.createElement(aR,{onAnimationEnd:()=>T(),name:"pageBackground",title:(0,d.__)("Page Background","web-stories"),isPersistable:!w,collapsedByDefault:!1,$_css:w?.showEffect&&HZ.FLASH},r&&c.createElement(KP,null,c.createElement(dh,{ref:e=>{e&&w?.focus&&w?.showEffect&&(e.addEventListener("keydown",S,{once:!0}),e.focus())},allowsGradient:!0,value:x,onChange:b,label:(0,d.__)("Background color","web-stories"),allowsSavedColors:!0,allowsOpacity:!1})),I&&c.createElement(KP,{expand:!1},c.createElement(QP,null,c.createElement(JP,null,c.createElement(k,{element:C,getProxiedUrl:p,currentPageBackgroundColor:s})),c.createElement(nR,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Media","web-stories")),c.createElement(eR,{"aria-label":(0,d.__)("Detach background","web-stories"),onClick:y,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY},c.createElement(Nu.default,null))),m&&c.createElement(bd.Tooltip,{title:(0,d.__)("Replace","web-stories")},c.createElement(Kh,{buttonInsertText:(0,d.__)("Use as background","web-stories"),onInsert:_,renderButton:v})),c.createElement(ep,{onChange:e=>n({flip:e},!0),value:O})),h&&c.createElement(qP,{message:Xd.lowContrast.backgroundPanel}))};var aR=(0,p.default)(Uk).withConfig({displayName:"pageBackground___StyledSimplePanel",componentId:"sc-1rac0x7-6"})(["",""],(e=>e.$_css));const oR=function ShapeStylePanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=Fb(t,"backgroundColor"),a=(0,u.useCallback)((e=>{n({backgroundColor:e},!0)}),[n]),{highlight:o,resetHighlight:l,cancelHighlight:i}=Fy((e=>({highlight:e[Ej.STYLE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(iR,{onAnimationEnd:()=>l(),name:"shapeStyle",title:(0,d.__)("Color","web-stories"),isPersistable:!o,"aria-labelledby":null,"aria-label":(0,d.__)("Shape style","web-stories"),$_css:o?.showEffect&&HZ.FLASH},c.createElement(Wh,null,c.createElement(dh,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},allowsGradient:!0,value:r,isMultiple:""===r,onChange:a,label:(0,d.__)("Background color","web-stories"),allowsSavedColors:!0})))};var lR,iR=(0,p.default)(Uk).withConfig({displayName:"shapeStyle___StyledSimplePanel",componentId:"sc-1ekkvr9-0"})(["",""],(e=>e.$_css));function sR(){return sR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sR.apply(this,arguments)}const SvgAngle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",sR({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,lR||(lR=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 10a.5.5 0 0 0-1 0v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 0-1h-4.8a6.801 6.801 0 0 0-6.7-6.698V10Zm0 5.802V21.5h5.7a5.8 5.8 0 0 0-5.7-5.698Z",fill:"currentColor"})))},cR=(0,c.memo)(SvgAngle),dR={MIN:-360,MAX:360},uR={MIN:1,MAX:1e3},pR={MIN:1,MAX:1e3},mR={MIN:1,MAX:ae.PAGE_WIDTH-1},fR={MIN:1-Math.floor(ae.DANGER_ZONE_HEIGHT),MAX:ae.PAGE_HEIGHT+Math.floor(ae.DANGER_ZONE_HEIGHT)-1},gR={horizontal:!1,vertical:!1};function hR(e){return"number"==typeof e&&!isNaN(e)}const ER=function(e,t,n){CE(((t,n,r)=>{let{width:a,height:o}=n,{width:l,height:i}=r;const{type:s}=t,c=Boolean(a),d=Boolean(o);if(!c&&!d)return null;const{updateForResizeEvent:u}=(0,A.getDefinitionForType)(s);if(u){return u(t,[c?1:0,d?1:0],(0,Ns.clamp)(a,uR),(0,Ns.clamp)(o,pR))}if(e){const e=l/i;if(!c)return{width:(0,Ns.clamp)((0,Pr.dataPixels)(o*e),uR)};if(!d)return{height:(0,Ns.clamp)((0,Pr.dataPixels)(a/e),pR)}}return null}),[e]),CE((e=>{let{rotationAngle:t}=e;return{rotationAngle:t%360}}),[]),CE((e=>{let{rotationAngle:t,x:n,y:r,width:a,height:o}=e;const l=(0,ws.calcRotatedObjectPositionAndSize)(t,n,r,a,o),i=n-l.x,s=r-l.y;return{x:(0,Ns.clamp)(n,{MIN:mR.MIN+i-l.width,MAX:mR.MAX+i}),y:(0,Ns.clamp)(r,{MIN:fR.MIN+s-l.height,MAX:fR.MAX+s})}}),[]);const r=(0,u.useCallback)(((t,n,r)=>e&&t>=r.MAX?(0,Ns.clamp)(r.MAX*n,r):(0,Ns.clamp)(t,r)),[e]);CE(((e,t)=>{let{height:n}=e,{width:a,height:o}=t;const l=o/a;return n=(0,Ns.clamp)(n,pR),hR(l)?{height:r((0,Pr.dataPixels)(n),l,pR)}:{height:(0,Ns.clamp)(n,pR)}}),[t,e]),CE(((e,t)=>{let{width:n}=e,{width:a,height:o}=t;const l=a/o;return n=(0,Ns.clamp)(n,uR),hR(l)?{width:r((0,Pr.dataPixels)(n),l,uR)}:{width:(0,Ns.clamp)(n,uR)}}),[n,e])};function bR(){return bR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bR.apply(this,arguments)}const yR=(0,p.default)(LockToggle).withConfig({displayName:"sizePosition__StyledLockToggle",componentId:"sc-7rw4xb-0"})(["",";"],Mu);function _R(e){return Ai.default?.[e?.sticker?.type].aspectRatio||1}const vR=(0,p.css)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . o . .' 'c c c c c c c';"],(e=>{let{isSingleMedia:t}=e;return t?"'b b b b b . .'":null})),wR=(0,p.css)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . f . .' ",";"],(e=>{let{isSingleMedia:t}=e;return t?"'b b b b b . .'":null}),(e=>{let{unlockedRadius:t}=e;return t?"\n  'o . . . . . .'\n  'c c c c c c c'\n":"'o . . . c c c'"})),TR=p.default.div.withConfig({displayName:"sizePosition__Grid",componentId:"sc-7rw4xb-1"})(["display:grid;"," grid-template-columns:1fr 4px 8px 4px 1fr 8px 32px;grid-template-rows:repeat(4,36px);row-gap:16px;align-items:center;justify-items:start;margin-bottom:16px;"],(e=>{let{canFlip:t}=e;return t?wR:vR})),SR=p.default.div.withConfig({displayName:"sizePosition__Area",componentId:"sc-7rw4xb-2"})(["grid-area:",";width:100%;"],(e=>{let{area:t}=e;return t})),CR=p.default.div.withConfig({displayName:"sizePosition__Dash",componentId:"sc-7rw4xb-3"})(["height:1px;width:100%;background:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),IR=(0,p.default)(m.Button).withConfig({displayName:"sizePosition__StyledButton",componentId:"sc-7rw4xb-4"})(["padding:10px 16px;width:100%;",";"],Mu);const AR=function SizePositionPanel(e){const{selectedElements:t,submittedSelectedElements:n,pushUpdate:r,pushUpdateForObject:a}=e,o=Fb(t,"x"),l=Fb(t,"y"),i=Fb(t,"width"),s=Fb(t,"height"),p=Fb(t,"rotationAngle"),m=zb(t,"flip",gR),g=zb(t,"borderRadius",{locked:!0}),h=(0,u.useMemo)((()=>Fb(n,"width")/Fb(n,"height")),[n]),E=Fb(t,"lockAspectRatio"),b=(0,u.useRef)(null);(0,s_.default)({node:b.current,eventData:i_.TRACKING_EVENTS.SET_BACKGROUND_MEDIA});const y=E===Ce||E,{currentPage:_,combineElements:v}=Sa((e=>({currentPage:e.state.currentPage,combineElements:e.actions.combineElements}))),w=_?.elements[0].id,T=1===t.length,{isMedia:S}=(0,A.getDefinitionForType)(t[0].type),C=t.every((e=>{let{type:t}=e;return(0,A.getDefinitionForType)(t).canFlip})),I=t.some((e=>{let{type:t}=e;return(0,A.getDefinitionForType)(t).isAspectAlwaysLocked})),x=t.some((e=>{let{type:t}=e;return"text"===t})),k=(0,u.useMemo)((()=>T?(0,ws.calcRotatedObjectPositionAndSize)(p,o,l,i,s):{}),[p,o,l,i,s,T]),O=o-k.x,N=l-k.y,P=T?{minX:mR.MIN+O-k.width,minY:fR.MIN+N-k.height,maxX:mR.MAX+O,maxY:fR.MAX+N}:function(e){const t=e.map((e=>(0,ws.calcRotatedObjectPositionAndSize)(e.rotationAngle,e.x,e.y,e.width,e.height)));return e.reduce(((e,n,r)=>{const a=t[r],o=n.x-a.x,l=n.y-a.y,i=mR.MIN+o-a.width,s=fR.MIN+l-a.height,c=mR.MAX+o,d=fR.MAX+l;return{minX:e.minX?Math.max(e.minX,i):i,minY:e.minY?Math.max(e.minY,s):s,maxX:e.maxX?Math.min(e.maxX,c):c,maxY:e.maxY?Math.min(e.maxY,d):d}}),{})}(t),R=(e,t)=>E===Ce?{lockAspectRatio:y,height:t,width:e}:{height:t,width:e};ER(y,s,i);const M=(0,u.useCallback)((()=>{v({firstElement:t[0],secondId:w})}),[t,v,w]),L=!y&&x,D=Ce===s?Ie:null,B=L?(0,d.__)("Auto","web-stories"):D,F=(0,u.useCallback)((e=>({isIndeterminate:Ce===e,placeholder:Ce===e?Ie:null})),[]);return c.createElement(Uk,{name:"size",title:(0,d.__)("Selection","web-stories")},c.createElement(TR,{isSingleMedia:S&&T,canFlip:C,unlockedRadius:!g.locked},S&&T&&c.createElement(SR,{area:"b"},c.createElement(IR,{ref:b,onClick:M,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Set as background","web-stories"))),c.createElement(SR,{area:"x"},c.createElement(NumericInput,bR({suffix:(0,d._x)("X","Position on X axis","web-stories"),value:o,min:P.minX,max:P.maxX,onChange:(e,t)=>r({x:t},!0),"aria-label":(0,d.__)("X position","web-stories"),canBeNegative:!0},F(o),{containerStyleOverride:Lu}))),c.createElement(SR,{area:"y"},c.createElement(NumericInput,bR({suffix:(0,d._x)("Y","Position on Y axis","web-stories"),value:l,min:P.minY,max:P.maxY,onChange:(e,t)=>r({y:t},!0),"aria-label":(0,d.__)("Y position","web-stories"),canBeNegative:!0},F(l),{containerStyleOverride:Lu}))),c.createElement(SR,{area:"w"},c.createElement(NumericInput,bR({suffix:(0,d._x)("W","The Width dimension","web-stories"),value:i,min:uR.MIN,max:uR.MAX,onChange:(e,t)=>{const n=t;let a=s;y&&(""===n?a="":hR(n/h)&&(a=(0,Pr.dataPixels)(n/h))),r((e=>{if("sticker"===e?.type){const t=_R(e);return R(n,Math.floor(n/t))}return R(n,a)}),!0)},"aria-label":(0,d.__)("Width","web-stories")},F(i),{containerStyleOverride:Lu}))),c.createElement(SR,{area:"d"},c.createElement(CR,null)),c.createElement(SR,{area:"h"},c.createElement(NumericInput,{suffix:(0,d._x)("H","The Height dimension","web-stories"),value:L?"":s,disabled:L,min:pR.MIN,max:pR.MAX,onChange:(e,t)=>{const n=t;let a=i;y&&(""===n?a="":hR(n*h)&&(a=(0,Pr.dataPixels)(n*h))),r((e=>{if("sticker"===e?.type){const t=_R(e);return R(Math.floor(n*t),n)}return R(a,n)}),!0)},"aria-label":(0,d.__)("Height","web-stories"),isIndeterminate:Ce===s,placeholder:B,containerStyleOverride:Lu})),c.createElement(SR,{area:"l"},c.createElement(bd.Tooltip,{title:(0,d.__)("Lock aspect ratio","web-stories")},c.createElement(yR,{"aria-label":(0,d.__)("Lock aspect ratio","web-stories"),title:(0,d.__)("Lock aspect ratio","web-stories"),isLocked:y||I,disabled:I,onClick:()=>!I&&r({lockAspectRatio:!y},!0)}))),c.createElement(SR,{area:"r"},c.createElement(NumericInput,bR({suffix:c.createElement(cR,null),unit:(0,d._x)("°","Degrees, 0 - 360.","web-stories"),value:p,min:dR.MIN,max:dR.MAX,onChange:(e,t)=>r({rotationAngle:t},!0),"aria-label":(0,d.__)("Rotation","web-stories"),canBeNegative:!0},F(p),{containerStyleOverride:Lu}))),C&&c.createElement(SR,{area:"f"},c.createElement(ep,{onChange:e=>a("flip",e,gR,!0),value:m})),c.createElement(SR,{area:"o"},c.createElement(tS,e)),c.createElement(SR,{area:"c"},c.createElement(Uw,e))))};var xR;function kR(){return kR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kR.apply(this,arguments)}const SvgLetterAHeight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kR({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,xR||(xR=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5 9.5a.5.5 0 1 0 0-1h-15a.5.5 0 0 0 0 1h15Zm-8.205 2.993a.747.747 0 0 1 .7-.493c.312 0 .591.196.7.492l2.525 6.867a.475.475 0 0 1-.44.641.47.47 0 0 1-.441-.315l-.668-1.886H14.33l-.667 1.886a.47.47 0 0 1-.442.315.475.475 0 0 1-.44-.641l2.515-6.866Zm2.063 4.412-1.028-2.883-.306-.84a.03.03 0 0 0-.058 0l-.295.84-1.028 2.883h2.715ZM24 23a.5.5 0 0 1-.5.5h-15a.5.5 0 0 1 0-1h15a.5.5 0 0 1 .5.5Z",fill:"currentColor"})))},OR=(0,c.memo)(SvgLetterAHeight);var NR;function PR(){return PR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PR.apply(this,arguments)}const SvgLetterAWidth=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",PR({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,NR||(NR=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8.5a.5.5 0 0 0-1 0v15a.5.5 0 0 0 1 0v-15ZM23 8a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-1 0v-15A.5.5 0 0 1 23 8Zm-7.705 4.493a.747.747 0 0 1 .7-.493c.312 0 .591.196.7.492l2.525 6.867a.475.475 0 0 1-.44.641.47.47 0 0 1-.441-.315l-.668-1.886H14.33l-.667 1.886a.47.47 0 0 1-.442.315.475.475 0 0 1-.44-.641l2.515-6.866Zm2.063 4.412-1.028-2.883-.306-.84a.03.03 0 0 0-.029-.02.03.03 0 0 0-.029.02l-.295.84-1.028 2.883h2.715Z",fill:"currentColor"})))},RR=(0,c.memo)(SvgLetterAWidth);var MR;function LR(){return LR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LR.apply(this,arguments)}const SvgLetterTUppercase=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",LR({viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,MR||(MR=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.94 10a.5.5 0 0 1 .5-.5h5v13h-2.1a.5.5 0 0 0 0 1h5.2a.5.5 0 0 0 0-1h-2.1v-13h5a.5.5 0 0 1 .5.5v1.178a.5.5 0 1 0 1 0V10a1.5 1.5 0 0 0-1.5-1.5h-11a1.5 1.5 0 0 0-1.5 1.5v1.178a.5.5 0 0 0 1 0V10Zm15.12 0a.5.5 0 0 1 .5-.5h5v13h-2.1a.5.5 0 0 0 0 1h5.2a.5.5 0 0 0 0-1h-2.1v-13h5a.5.5 0 0 1 .5.5v1.178a.5.5 0 0 0 1 0V10a1.5 1.5 0 0 0-1.5-1.5h-11a1.5 1.5 0 0 0-1.5 1.5v1.178a.5.5 0 0 0 1 0V10Z",fill:"currentColor"})))},DR=(0,c.memo)(SvgLetterTUppercase);function BR(){return BR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BR.apply(this,arguments)}const FR={MIN:.5,MAX:10},HR={MIN:0,MAX:300},UR=(0,p.default)(NumericInput).withConfig({displayName:"style__StyledNumericInput",componentId:"sc-9ups92-0"})(["flex-grow:1;"]),zR=p.default.div.withConfig({displayName:"style__Space",componentId:"sc-9ups92-1"})(["flex:0 0 3px;"]),GR=(0,p.default)(ToggleButton).withConfig({displayName:"style__StyledToggle",componentId:"sc-9ups92-2"})(["",";"],Mu);function jR(e){return c.createElement(GR,BR({size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},e))}const YR=function StylePanel(e){let{selectedElements:t,pushUpdate:n}=e;const{actions:{maybeEnqueueFontStyle:r}}=fo(),a=Fb(t,"textAlign"),o=Fb(t,"lineHeight"),{textInfo:{isBold:l,isItalic:i,isUnderline:s,isUppercase:p,letterSpacing:m,fontWeight:f},handlers:{handleClickBold:g,handleClickItalic:h,handleClickUnderline:E,handleClickUppercase:b,handleSetLetterSpacing:y}}=bw(t,n),_=(0,u.useCallback)(((e,t)=>y((0,Ns.clamp)(t,HR))),[y]);CE((e=>{let{lineHeight:t}=e;return{lineHeight:(0,Ns.clamp)(t,FR)}}),[]);const v=(0,u.useCallback)((e=>()=>{n({textAlign:a===e?"":e},!0)}),[n,a]),w=!0===l,T=!0===i,S=!0===s,C=!0===p;return c.createElement(c.Fragment,null,c.createElement(Wh,null,c.createElement(UR,{"aria-label":(0,d.__)("Line-height","web-stories"),isFloat:!0,value:o,min:FR.MIN,max:FR.MAX,suffix:c.createElement(OR,null),onChange:(e,t)=>n({lineHeight:t},!0),allowEmpty:!0,isIndeterminate:Ce===o,placeholder:Ce===o?Ie:null,containerStyleOverride:Lu}),c.createElement(zR,null),c.createElement(UR,{"aria-label":(0,d.__)("Letter-spacing","web-stories"),value:m,min:HR.MIN,max:HR.MAX,suffix:c.createElement(RR,null),unit:"%",onChange:_,allowEmpty:!0,isIndeterminate:Ce===m,placeholder:Ce===m?Ie:null,containerStyleOverride:Lu})),c.createElement(Wh,null,c.createElement(jR,{isToggled:"left"===a,onClick:v("left"),"aria-label":(0,d.__)("Align text left","web-stories")},c.createElement(hS,null)),c.createElement(jR,{isToggled:"center"===a,onClick:v("center"),"aria-label":(0,d.__)("Align text center","web-stories")},c.createElement(yS,null)),c.createElement(jR,{isToggled:"right"===a,onClick:v("right"),"aria-label":(0,d.__)("Align text right","web-stories")},c.createElement(wS,null)),c.createElement(jR,{isToggled:"justify"===a,onClick:v("justify"),"aria-label":(0,d.__)("Align text justified","web-stories")},c.createElement(CS,null)),c.createElement(jR,{isToggled:w,onClick:()=>g(!w),"aria-label":(0,d.__)("Bold","web-stories")},c.createElement(MS,null)),c.createElement(jR,{isToggled:T,onClick:async()=>{await r(t.map((e=>{let{font:t,content:n}=e;return{font:t,fontStyle:T?"normal":"italic",fontWeight:f,content:(0,so.stripHTML)(n)}}))),h(!T)},"aria-label":(0,d.__)("Italic","web-stories")},c.createElement(FS,null)),c.createElement(jR,{isToggled:S,onClick:()=>E(!S),"aria-label":(0,d.__)("Underline","web-stories")},c.createElement(GS,null)),c.createElement(jR,{isToggled:C,onClick:()=>b(!C),"aria-label":(0,d.__)("Uppercase","web-stories")},c.createElement(DR,null))))};const ZR=function ColorControls(e){let{selectedElements:t,pushUpdate:n,textColorRef:r}=e;const{textInfo:{color:a},handlers:{handleSetColor:o}}=bw(t,n);return c.createElement(Wh,null,c.createElement(dh,{"data-testid":"text.color",value:a,onChange:o,allowsSavedColors:!0,label:(0,d.__)("Text color","web-stories"),labelId:"text-color-label",changedStyle:"color",ref:r,hasEyedropper:!0}))};var WR=n(56226);function VR(){return VR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VR.apply(this,arguments)}const $R=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"pillGroup__Container",componentId:"sc-1wd98s2-0"})(["display:flex;flex:1;column-gap:4px;"]);const qR=function PillGroup(e){let{options:t,value:n,onSelect:r,...a}=e;return c.createElement($R,null,t.map((e=>{let{id:t,label:o}=e;return c.createElement(WR.default,VR({key:t,isActive:t===n,onClick:()=>r(t),role:"option"},a),o)})))};function XR(e){return e?.padding?.hasHiddenPadding?e.padding:{...e.padding??{},hasHiddenPadding:!0,...["vertical","horizontal"].reduce(((t,n)=>(t[n]=(e?.padding?.[n]||0)+Fe[n],t)),{})}}function KR(e){return e?.padding?.hasHiddenPadding?{...e.padding??{},hasHiddenPadding:!1,...["vertical","horizontal"].reduce(((t,n)=>(t[n]=(e?.padding?.[n]||0)-Fe[n],t)),{})}:e.padding}function QR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";return e?.padding?.hasHiddenPadding?Fe[t]:0}const JR=(0,p.default)(Wh).withConfig({displayName:"backgroundColor__FillRow",componentId:"sc-2oqmdd-0"})(["align-items:flex-start;justify-content:space-between;button{flex:1;z-index:1;}"]),eM=[{id:Dn.BACKGROUND_TEXT_MODE.NONE,label:(0,d.__)("None","web-stories")},{id:Dn.BACKGROUND_TEXT_MODE.FILL,label:(0,d.__)("Fill","web-stories")},{id:Dn.BACKGROUND_TEXT_MODE.HIGHLIGHT,label:(0,d.__)("Highlight","web-stories")}];const tM=function BackgroundControls(e){let{selectedElements:t,pushUpdate:n}=e;const r=Ub(t,"backgroundColor"),a=Fb(t,"backgroundTextMode"),o=(0,u.useRef)(),l=(0,u.useCallback)((e=>{n((t=>({backgroundTextMode:e,padding:[Dn.BACKGROUND_TEXT_MODE.FILL,Dn.BACKGROUND_TEXT_MODE.HIGHLIGHT].includes(e)?XR(t):KR(t)})),!0)}),[n]),i=(0,u.useCallback)((e=>{l(e)}),[l]);return c.createElement(c.Fragment,null,c.createElement(JR,{ref:o},c.createElement(qR,{value:a,onSelect:i,options:eM,pillStyleOverride:Mu})),a!==Dn.BACKGROUND_TEXT_MODE.NONE&&c.createElement(Wh,null,c.createElement(dh,{"data-testid":"text.backgroundColor",allowsGradient:!0,allowsSavedColors:!0,value:r,onChange:e=>n({backgroundColor:e},!0),label:(0,d.__)("Background color","web-stories"),labelId:"background-color-label",changedStyle:"background",hasEyedropper:!0})))};var nM;function rM(){return rM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rM.apply(this,arguments)}const SvgTurningLine=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",rM({viewBox:"0 0 23 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,nM||(nM=c.createElement("path",{d:"M.5 9h21a1 1 0 0 0 1-1V1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},aM=(0,c.memo)(SvgTurningLine);function oM(){return oM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oM.apply(this,arguments)}const lM={horizontal:0,vertical:0,locked:!0,hasHiddenPadding:!1},iM={MIN:0,MAX:300},sM=p.default.div.withConfig({displayName:"padding__Space",componentId:"sc-17x5rfj-0"})(["flex:0 0 8px;"]),cM=(0,p.default)(LockToggle).withConfig({displayName:"padding__LockToggle",componentId:"sc-17x5rfj-1"})([""," ",";"],(e=>{let{isLocked:t}=e;return!t&&"\n    position: absolute;\n    right: 0;\n    top: calc(100% - 8px);\n  "}),Mu),dM=(0,p.default)(Wh).withConfig({displayName:"padding__Row",componentId:"sc-17x5rfj-2"})(["position:relative;"]),uM=p.default.div.withConfig({displayName:"padding__IconWrapper",componentId:"sc-17x5rfj-3"})(["width:44px;margin-left:6px;color:",";"," svg{width:22px;}"],(e=>{let{theme:t}=e;return t.colors.divider.primary}),(e=>{let{reverse:t}=e;return t&&"transform: scaleY(-1);"}));const pM=function PaddingControls(e){let{selectedElements:t,pushUpdateForObject:n,pushUpdate:r}=e;const a=zb(t.map((e=>({...e,padding:KR(e)}))),"padding",lM),o=!0===a.locked,l=(0,u.useCallback)((e=>{r((t=>{const{x:n,y:r,width:a,height:o}=t,l=e(t);return function(e){let{currentPadding:t,newPadding:n,x:r,y:a,width:o,height:l}=e;const i={};return"horizontal"in n&&(i.x=r-(n.horizontal-(t.horizontal||0)),i.width=o+2*(n.horizontal-(t.horizontal||0))),"vertical"in n&&(i.y=a-(n.vertical-(t.vertical||0)),i.height=l+2*(n.vertical-(t.vertical||0))),i}({x:n,y:r,height:o,width:a,currentPadding:t.padding,newPadding:l})})),n("padding",(t=>e({padding:t})),lM,!0)}),[r,n]);CE((e=>{let{padding:{horizontal:t,vertical:n,...r}}=e;return{padding:{...r,horizontal:(0,Ns.clamp)(t,iM),vertical:(0,Ns.clamp)(n,iM)}}}),[]);const i=o?{suffix:(0,d.__)("Padding","web-stories"),"aria-label":(0,d.__)("Padding","web-stories"),onChange:(e,t)=>{l((e=>({horizontal:t+QR(e,"horizontal"),vertical:t+QR(e,"vertical")})))},stretch:!0}:{suffix:(0,d.__)("Horizontal padding","web-stories"),"aria-label":(0,d.__)("Horizontal padding","web-stories"),onChange:(e,t)=>{l((e=>({horizontal:t+QR(e,"horizontal")})))}};return c.createElement(c.Fragment,null,c.createElement(dM,null,c.createElement(NumericInput,oM({value:a.horizontal,isIndeterminate:a.horizontal===Ce,placeholder:a.horizontal===Ce?Ie:null},i,{containerStyleOverride:Lu})),o&&c.createElement(sM,null),c.createElement(cM,{isLocked:o,onClick:()=>l((e=>o?{locked:!1}:{locked:!0,horizontal:e.padding.horizontal,vertical:e.padding.horizontal+QR(e,"vertical")-QR(e,"horizontal")})),"aria-label":(0,d.__)("Toggle padding ratio lock","web-stories")}),!o&&c.createElement(uM,{reverse:!0},c.createElement(aM,null))),!o&&c.createElement(dM,null,c.createElement(NumericInput,{isIndeterminate:a.vertical===Ce,placeholder:a.vertical===Ce?Ie:null,suffix:(0,d.__)("Vertical padding","web-stories"),value:a.vertical,onChange:(e,t)=>{l((e=>({vertical:Number(t)+QR(e,"vertical")})))},"aria-label":(0,d.__)("Vertical padding","web-stories"),containerStyleOverride:Lu}),c.createElement(uM,null,c.createElement(aM,null))))};var mM,fM,gM;function hM(){return hM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hM.apply(this,arguments)}const SvgColorBucket=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",hM({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,mM||(mM=c.createElement("path",{d:"M23.922 19.627c.01.004.014.007.016.009.171.232.534.74.851 1.285.16.274.301.547.403.793.105.257.147.44.147.547 0 .708-.637 1.35-1.5 1.35-.864 0-1.5-.642-1.5-1.35 0-.107.042-.29.147-.547a6.68 6.68 0 0 1 .403-.793c.317-.545.68-1.053.85-1.285a.069.069 0 0 1 .017-.01.212.212 0 0 1 .083-.015c.035 0 .064.007.083.016Z",fill:"currentColor",stroke:"currentColor"})),fM||(fM=c.createElement("path",{d:"m15.353 7.868 7.778 7.778-7.424 7.425a1.5 1.5 0 0 1-2.121 0l-5.657-5.657a1.5 1.5 0 0 1 0-2.121l7.424-7.425Z",stroke:"currentColor"})),gM||(gM=c.createElement("path",{d:"M13.232 13.662a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795ZM15.616 11.08a.124.124 0 0 0-.232 0l-.332.899a.123.123 0 0 1-.073.073l-.898.332a.124.124 0 0 0 0 .232l.898.332c.034.013.06.04.073.073l.332.898c.04.108.192.108.232 0l.332-.898a.123.123 0 0 1 .073-.073l.898-.332a.124.124 0 0 0 0-.232l-.898-.332a.123.123 0 0 1-.073-.073l-.332-.898Z",fill:"currentColor"})))},EM=(0,c.memo)(SvgColorBucket);const bM=function(e,t){const n=(0,Sr.getHTMLFormatters)(),{setColor:r}=n,a=Gc();return async()=>{const n=await a(e),{color:o,backgroundColor:l}=n;if(l||o){const n=l?{backgroundColor:{color:l},backgroundTextMode:Dn.BACKGROUND_TEXT_MODE.HIGHLIGHT,padding:XR(e)}:null,a=o?r(e.content,{color:o}):e.content;t({...n,content:a})}}},yM=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"panelHeader__AutoStyleButton",componentId:"sc-1sprex4-0"})(["",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")}));const _M=function PanelHeader(e){let{selectedElements:t,pushUpdate:n}=e;const{state:{isCollapsed:r}}=(0,u.useContext)(ik),a=bM(t[0],(e=>{n(e,!0),(0,L.trackEvent)("auto_style_text")})),o=(0,d.__)("Text","web-stories");return c.createElement(Mk,{ariaLabel:o,secondaryAction:r?null:c.createElement(Tooltip,{title:(0,d.__)("Adaptive text colors","web-stories")},c.createElement(yM,{"aria-label":(0,d.__)("Adaptive text colors","web-stories"),onClick:a,disabled:t?.length>1},c.createElement(EM,null)))},o)};const vM=function(e){let{activeIndex:t,setActiveIndex:n,groupRef:r}=e;(0,tr.useKeyDownEffect)(r,{key:["up","down","left","right"]},(e=>{let{key:a}=e;if(r.current){const e=((e,t)=>{switch(e){case"ArrowUp":return-t;case"ArrowDown":return t;case"ArrowLeft":return-1;case"ArrowRight":return 1;default:return 0}})(a,2),o=r.current.querySelectorAll("button:not([disabled])"),l=o.length-1,i=(t??0)+e,s=Math.max(0,Math.min(l,i));n(s),o[s]&&o[s].focus()}}),[t,n,r])},wM=p.default.button.withConfig({displayName:"styleItem__PresetButton",componentId:"sc-157dmik-0"})(["background-color:",";border-color:transparent;position:relative;cursor:pointer;border-width:0;border-radius:4px;padding:3px;height:100%;width:100%;display:flex;justify-content:center;align-items:center;> svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));}",""],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),32,32,16,16,(e=>{let{theme:t}=e;return t.colors.fg.primary}),Mu),TM=p.default.span.withConfig({displayName:"styleItem__HighLight",componentId:"sc-157dmik-1"})(["padding:0 2px;"," box-decoration-break:clone;"],(e=>{let{background:t}=e;return(0,kr.default)(t)})),SM=p.default.div.withConfig({displayName:"styleItem__TextWrapper",componentId:"sc-157dmik-2"})(["position:relative;display:inline-block;line-height:","px;max-height:","px;overflow:hidden;border-radius:4px;padding:3px;max-width:100%;"," font-size:12px;",""],20,43,(e=>{let{styles:t}=e;return t}),(e=>{let{background:t}=e;return t?(0,kr.default)(t):null}));const CM=function StyleItem(e){let{style:t,i:n,activeIndex:r,handleOnClick:a,isEditMode:o,activeItemOverlay:l,applyLabel:i=(0,d.__)("Apply style","web-stories")}=e;const s=Sa((e=>{let{state:t}=e;return t.selectedElements})),[p,m]=(0,u.useState)(!1),f=()=>{l&&m(!0)},g=()=>{l&&m(!1)};if(!t)return null;const h=s[0]?.content?(0,so.stripHTML)(s[0].content):(0,d.__)("Lorem ipsum dolor sit amet","web-stories");return c.createElement(wM,{tabIndex:r===n?0:-1,style:t,onClick:()=>a(t),onPointerEnter:f,onFocus:f,onPointerLeave:g,onBlur:g,"aria-label":o?(0,d.__)("Delete style","web-stories"):i},(()=>{const e=t.backgroundTextMode===Dn.BACKGROUND_TEXT_MODE.HIGHLIGHT,n=t.backgroundTextMode===Dn.BACKGROUND_TEXT_MODE.FILL;return c.createElement(SM,{styles:ag(t,!0),background:n?t.backgroundColor:null},e?c.createElement(TM,{background:t.backgroundColor},h):h)})(),o&&c.createElement(Nu.default,null),!o&&p&&l)};function IM(){return IM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IM.apply(this,arguments)}const AM=p.default.div.withConfig({displayName:"styleGroup__Group",componentId:"sc-1cojpnq-0"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:20px;grid-row-gap:16px;"]),xM=p.default.div.withConfig({displayName:"styleGroup__ButtonWrapper",componentId:"sc-1cojpnq-1"})(["height:","px;width:","px;"],64,(e=>{let{width:t}=e;return t}));const kM=function StyleGroup(e){let{styles:t,isEditMode:n=!1,handleClick:r,buttonWidth:a=128,...o}=e;const[l,i]=(0,u.useState)(0),s=(0,u.useRef)(null);return vM({activeIndex:l,setActiveIndex:i,groupRef:s,type:ze}),c.createElement(AM,{ref:s},t.map(((e,t)=>c.createElement(xM,{key:JSON.stringify(e),width:a},c.createElement(CM,IM({style:e,i:t,activeIndex:l,handleOnClick:r,isEditMode:n},o))))))};function OM(){return OM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OM.apply(this,arguments)}const NM=p.default.div.withConfig({displayName:"header__Wrapper",componentId:"sc-10q8amw-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),PM=p.default.div.withConfig({displayName:"header__Actions",componentId:"sc-10q8amw-1"})(["display:flex;margin-left:auto;"]),RM=(0,p.default)(m.Button).withConfig({displayName:"header__StyledButton",componentId:"sc-10q8amw-2"})(["margin-left:8px;",";"],Mu);const MM=function(e){let{children:t,handleClose:n,isEditMode:r=!1,setIsEditMode:a=(()=>{})}=e;const o=(0,u.useRef)();(0,u.useEffect)((()=>{o.current?.focus()}),[]);const l={type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:e=>{e.stopPropagation(),a(!r)},isEditMode:r};return c.createElement(NM,null,t,c.createElement(PM,null,c.createElement(RM,OM({},l,{"aria-label":r?(0,d.__)("Exit edit mode","web-stories"):(0,d.__)("Edit styles","web-stories")}),r?(0,d.__)("Done","web-stories"):c.createElement(df.default,null)),c.createElement(RM,{"aria-label":(0,d.__)("Close","web-stories"),onClick:n,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,ref:o},c.createElement(Nu.default,null))))};const LM=function(e){let{onEmpty:t}=e;const{globalStoryStyles:n,updateStory:r}=Sa((e=>{let{state:{story:{globalStoryStyles:t}},actions:{updateStory:n}}=e;return{globalStoryStyles:t,updateStory:n}})),{textStyles:a}=n||{},o=(0,u.useCallback)((e=>{const o=a.filter((t=>t!==e));r({properties:{globalStoryStyles:{...n,textStyles:o}}}),0===o.length&&t()}),[a,r,n,t]);return o},DM="DELETE_STYLE_PRESET_DIALOG_DISMISSED",BM=p.default.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-ezab89-0"})(["margin-left:12px;"]),FM=p.default.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-ezab89-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const HM=function(e){let{onClose:t,onPrimary:n}=e;const[r,a]=(0,u.useState)(_o.getItemByKey(yo[DM])),o=(0,d.__)("This is a global style. Deleting this style will remove it from the Saved Styles across all stories and the style will no longer be available to any other users on the site.","web-stories"),l=`cb-${(0,he.default)()}`;return c.createElement(y,{isOpen:!0,onClose:t,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:n,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o),c.createElement(FM,null,c.createElement(tp.Checkbox,{id:l,checked:r,onChange:()=>{_o.setItemByKey(yo[DM],!r),a(!r)}}),c.createElement(BM,{htmlFor:l},c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Don't ask for confirmation again.","web-stories")))))};function UM(){return UM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UM.apply(this,arguments)}const zM=p.default.div.withConfig({displayName:"styleManager__Container",componentId:"sc-4hlmhs-0"})(["border-radius:8px;background:",";width:256px;user-select:none;display:flex;flex-direction:column;align-items:stretch;overflow:hidden;&.style-manager-appear{opacity:0.01;margin-top:-10px;&.style-manager-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),GM=p.default.div.withConfig({displayName:"styleManager__Body",componentId:"sc-4hlmhs-1"})(["display:flex;margin:8px 12px 16px;"]),jM=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styleManager__StyledText",componentId:"sc-4hlmhs-2"})(["margin:0 0 0 8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const YM=function StyleManager(e){let{styles:t,onClose:n,applyStyle:r,...a}=e;const[o,l]=(0,u.useState)(!1),[i,s]=(0,u.useState)(!1),[p,m]=(0,u.useState)(null),f=(0,u.useRef)(null),g=(0,u.useRef)(document.activeElement),h=(0,u.useCallback)((e=>{g.current&&g.current.focus(),n(e)}),[n]);(0,tr.useKeyDownEffect)(f,"esc",h);const E=LM({onEmpty:h});return(0,u.useFocusOut)(f,(()=>{i||n()}),[i]),$p({ref:f}),c.createElement(Vp.default,{nodeRef:f,in:!0,appear:!0,classNames:"style-manager",timeout:300},c.createElement(zM,{role:"dialog","aria-label":(0,d.__)("Style presets manager","web-stories"),ref:f},c.createElement(MM,{handleClose:h,isEditMode:o,setIsEditMode:l},c.createElement(jM,null,(0,d.__)("Saved Styles","web-stories"))),c.createElement(GM,null,c.createElement(kM,UM({styles:[...t].reverse(),handleClick:e=>{if(!o)return void r(e);_o.getItemByKey(yo[DM])?E(e):(s(!0),m(e))},isEditMode:o,buttonWidth:106},a))),i&&c.createElement(HM,{onClose:()=>s(!1),onPrimary:()=>{E(p),m(null),s(!1)}})))},ZM=p.default.div.withConfig({displayName:"components__NoStylesWrapper",componentId:"sc-1u9p583-0"})(["display:flex;justify-content:center;align-items:center;width:calc(100% + 32px);margin:0 0 -8px -16px;background-color:",";height:64px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black24})),WM=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE}).withConfig({displayName:"components__MoreButton",componentId:"sc-1u9p583-1"})(["",";margin:12px 0;padding:0 16px;justify-content:center;align-self:center;width:100%;svg{transform:rotate(-90deg);height:32px;width:32px;margin-left:-4px;}"],Mu);const VM=function(e){let{pushUpdate:t}=e;CE(PT,[]);const n=Sa((e=>{let{state:{selectedElements:t}}=e;return t?t?.filter((e=>{let{type:t}=e;return"text"===t})):je})),r=(0,u.useRef)(null),a=(0,u.useCallback)((e=>{t((t=>({...e(t),...r.current})),!0),r.current=null}),[t]),{handlers:{handleSetColor:o,handleSetLetterSpacing:l,handleClickUnderline:i,handleClickItalic:s,handleSelectFontWeight:c}}=bw(n,a),d=(0,u.useCallback)((e=>{const{color:t,fontWeight:n,isItalic:a,isUnderline:d,letterSpacing:u,...p}=e;r.current=p,o(t),l(u),c(n),i(d),s(a)}),[o,l,i,s,c]);return d},$M=p.default.div.withConfig({displayName:"stylePresets__PresetsHeader",componentId:"sc-8grd53-0"})(["display:flex;padding:8px 0;justify-content:space-between;"]),qM=p.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-8grd53-1"})([""]),XM=(0,p.default)(Ke.Text).withConfig({displayName:"stylePresets__SubHeading",componentId:"sc-8grd53-2"})(["color:",";margin:6px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold})),KM=(0,p.default)(m.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-8grd53-3"})(["margin-left:auto;"]),QM=(0,p.default)(Ke.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-8grd53-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),JM={x:12};const eL=function PresetPanel(e){let{pushUpdate:t}=e;const n=Sa((e=>{let{state:t}=e;return t.story.globalStoryStyles.textStyles})),{refs:{sidebar:r}}=Fg(),a=(0,u.useRef)(null),[o,l]=(0,u.useState)(!1),{isRTL:i,styleConstants:{topOffset:s}={}}=Y(),p=n.length>0,m=VM({pushUpdate:t}),{addGlobalPreset:g}=dg({presetType:ze}),h=e=>{m(e)};return c.createElement(c.Fragment,null,c.createElement($M,null,c.createElement(XM,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Recently Saved Styles","web-stories")),c.createElement(KM,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:g,"aria-label":(0,d.__)("Add style","web-stories")},c.createElement(Jf,null))),p&&c.createElement(c.Fragment,null,c.createElement(qM,null,c.createElement(kM,{styles:[...n].reverse().slice(0,2),handleClick:h})),c.createElement(WM,{ref:a,onClick:()=>l(!0),"aria-haspopup":"dialog","aria-expanded":o},(0,d.__)("More styles","web-stories"),c.createElement(Kb.default,null)),c.createElement(Zp.Popup,{topOffset:s,isRTL:i,anchor:a,dock:r,isOpen:o,placement:Ed.PLACEMENT.RIGHT_START,spacing:JM,renderContents:()=>c.createElement(YM,{styles:n,applyStyle:h,onClose:()=>l(!1)})})),!p&&c.createElement(ZM,null,c.createElement(QM,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("No Styles Saved","web-stories"))))};function tL(){return tL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tL.apply(this,arguments)}const nL=p.default.section.withConfig({displayName:"textStyle__SubSection",componentId:"sc-1al6pl8-0"})(["border-top:1px solid ",";display:flex;flex-direction:column;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),rL=(0,p.default)(Ke.Text).withConfig({displayName:"textStyle__SubHeading",componentId:"sc-1al6pl8-1"})(["color:",";margin:14px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold}));const aL=function(e){const{dropdownHighlight:t,colorHighlight:n,resetHighlight:r,cancelHighlight:a}=Fy((e=>({dropdownHighlight:e[Ej.FONT],colorHighlight:e[Ej.TEXT_COLOR],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),[o,l]=(0,u.useState)(!1),[i,s]=(0,u.useState)([]),{selectedElements:p}=e;CE(PT,[]);const{currentPage:m}=Sa((e=>{let{state:{currentPage:t}}=e;return{currentPage:t}})),f=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),g=p.map((e=>e.id)),h=i?.some((e=>{let{id:t}=e;return g.includes(t)}));return(0,u.useEffect)((()=>{QW([m],f).then((e=>{const t=e[0]?.result;s(t)})).catch((()=>{}))}),[m,f]),c.createElement(oL,{name:"textStyle",onAnimationEnd:()=>r(),isPersistable:!1,$_css:(t?.showEffect||n?.showEffect)&&HZ.FLASH},c.createElement(_M,e),c.createElement(Fk,null,c.createElement(KT,tL({},e,{fontDropdownRef:e=>{e&&t?.focus&&t?.showEffect&&(e.focus(),l(!0))},highlightStylesOverride:o?HZ.OUTLINE:[]})),c.createElement(YR,e),c.createElement(ZR,tL({},e,{textColorRef:e=>{e&&n?.focus&&n?.showEffect&&(e.addEventListener("keydown",a,{once:!0}),e.focus(),l(!1))}})),h&&c.createElement(qP,{message:Xd.lowContrast.textPanel}),c.createElement(nL,null,c.createElement(rL,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Text Box","web-stories")),c.createElement(tM,e),c.createElement(pM,e)),c.createElement(nL,null,c.createElement(eL,e))))};var oL=(0,p.default)(uk).withConfig({displayName:"textStyle___StyledPanel",componentId:"sc-1al6pl8-2"})(["",""],(e=>e.$_css));const lL={alt:null,poster:null,height:0,width:0},iL={MAX:1e3},sL=(0,p.default)(Gh).withConfig({displayName:"videoAccessibility__StyledMedia",componentId:"sc-1uodz5m-0"})(["height:114px;width:64px;"]),cL=p.default.div.withConfig({displayName:"videoAccessibility__InputsWrapper",componentId:"sc-1uodz5m-1"})(["align-self:flex-start;margin-left:16px;"]),dL=(0,p.default)(Ke.Text).withConfig({displayName:"videoAccessibility__StyledText",componentId:"sc-1uodz5m-2"})(["color:",";margin-bottom:10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const uL=function VideoAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=zb(t,"resource",lL),a=Fb(t,"alt",r.alt),{height:o,width:l}=r,i=Fb(t,"poster"),s=Fb(t,"poster",r.poster),{allowedMimeTypes:{image:p},capabilities:{hasUploadMediaAction:m}}=Y(),f=(0,u.useMemo)((()=>p.map((e=>Mt(e))).flat()),[p]),g=(0,u.useCallback)((e=>{e?.src!==i&&n({poster:e?.src},!0)}),[n,i]),h=(0,u.useMemo)((()=>{let e=(0,d.__)("No file types are currently supported.","web-stories");return f.length&&(e=(0,qe.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories"),(0,Ot.default)(f))),e}),[f]),{highlightInput:E,highlightMediaPicker:b,resetHighlight:y,cancelHighlight:_}=Fy((e=>({highlightInput:e[Ej.ASSISTIVE_TEXT],highlightMediaPicker:e[Ej.VIDEO_A11Y_POSTER],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));let v=null;return o&&o!==Ce&&l&&l!==Ce&&(v={height:o,width:l}),c.createElement(pL,{onAnimationEnd:()=>y(),name:"videoAccessibility",title:(0,d.__)("Accessibility","web-stories"),isPersistable:!E&&!b,$_css:(E||b)&&HZ.FLASH},c.createElement(Wh,null,c.createElement(sL,{ref:e=>{e&&b?.focus&&b?.showEffect&&e.focus()},value:s,cropParams:v,onChange:g,onChangeErrorText:h,title:(0,d.__)("Select as video poster","web-stories"),buttonInsertText:(0,d.__)("Set as video poster","web-stories"),alt:(0,d.__)("Preview poster image","web-stories"),type:p,ariaLabel:(0,d.__)("Video poster","web-stories"),menuOptions:["edit","reset"],imgProps:v,canUpload:m}),c.createElement(cL,null,c.createElement(dL,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add a brief description of the video.","web-stories")),c.createElement(wE,{ref:e=>{e&&E?.focus&&E?.showEffect&&(e.addEventListener("keydown",_,{once:!0}),e.focus())},placeholder:a===Ce?Ie:"",value:a||"",onChange:e=>n({alt:e?.target?.value?.trim()||null},!0),"aria-label":(0,d.__)("Assistive text","web-stories"),maxLength:iL.MAX,rows:2,isIndeterminate:a===Ce}))))};var pL=(0,p.default)(Uk).withConfig({displayName:"videoAccessibility___StyledSimplePanel",componentId:"sc-1uodz5m-3"})(["",""],(e=>e.$_css));const mL=(0,p.default)(Wh).withConfig({displayName:"videoOptions__Row",componentId:"sc-csxmtu-0"})(["margin-top:2px;"]),fL=(0,p.default)(m.Button).withConfig({displayName:"videoOptions__StyledButton",componentId:"sc-csxmtu-1"})(["padding:12px 8px;"]),gL=(0,p.default)(fL).withConfig({displayName:"videoOptions__TrimButton",componentId:"sc-csxmtu-2"})(["margin-left:20px;"]),hL=p.default.div.withConfig({displayName:"videoOptions__TrimWrapper",componentId:"sc-csxmtu-3"})(["position:relative;display:flex;"]),EL=p.default.div.withConfig({displayName:"videoOptions__Spinner",componentId:"sc-csxmtu-4"})(["margin-left:4px;margin-top:4px;"]),bL=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"videoOptions__HelperText",componentId:"sc-csxmtu-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const yL=function VideoOptionsPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=Fb(t,"resource"),a=Fb(t,"id"),o=Fb(t,"loop"),l=1===t.length,{state:{canTrim:i,canMute:s,isTrimming:p,isMuting:m,isDisabled:g},actions:{handleMute:h,handleTrim:E}}=uS({resource:r,elementId:a,isSingleElement:l}),b=m?(0,d.__)("Removing audio…","web-stories"):(0,d.__)("Remove audio","web-stories"),y=p?(0,d.__)("Trimming…","web-stories"):(0,d.__)("Trim","web-stories"),_=(0,Eb.default)();(0,u.useEffect)((()=>{m&&_(b)}),[m,b,_]),(0,u.useEffect)((()=>{p&&_(y)}),[p,y,_]);const Processing=()=>c.createElement(EL,null,c.createElement(Jp.default,{size:24}));return c.createElement(Uk,{name:"videoOptions",title:(0,d.__)("Video Settings","web-stories")},c.createElement(mL,{spaceBetween:!1},c.createElement(oS,{loop:o,onChange:e=>n({loop:e.target.checked},!0)}),i&&c.createElement(hL,null,c.createElement(gL,{disabled:g,variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:E},y),p&&c.createElement(Processing,null))),s&&c.createElement(c.Fragment,null,c.createElement(mL,{spaceBetween:!1},c.createElement(fL,{disabled:g,variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:h},b),m&&c.createElement(Processing,null)),c.createElement(mL,null,c.createElement(bL,null,(0,d.__)("Removing the audio from this video will upload a new muted version of it to the media library. This might take a couple of seconds.","web-stories")))))};var _L=n(69682),vL=n(39980);const wL=(0,p.default)(m.Button).withConfig({displayName:"audioPlayer__StyledButton",componentId:"sc-cot87i-0"})(["",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),TL=p.default.div.withConfig({displayName:"audioPlayer__Wrapper",componentId:"sc-cot87i-1"})((e=>{let{theme:t}=e;return(0,p.css)(["position:relative;min-width:40px;width:100%;height:36px;display:flex;align-items:center;justify-content:space-between;color:",";",";"],t.colors.fg.primary,Pu.expandPresetStyles({preset:{...t.typography.presets.paragraph[Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:t}))})),SL=p.default.audio.withConfig({displayName:"audioPlayer__Audio",componentId:"sc-cot87i-2"})(["display:none;"]);const CL=function AudioPlayer(e){let{title:t,src:n,mimeType:r,tracks:a=[],audioId:o,loop:l}=e;const[i,s]=(0,u.useState)(!1),p=(0,u.useRef)(),m=(0,u.useCallback)((()=>{const e=p.current;e&&(i?e.pause():e.play().catch((()=>{})))}),[i]);(0,u.useEffect)((()=>{const e=p.current;if(!e)return;const t=()=>s(!0),n=()=>s(!1),r=()=>{e.currentTime=0,s(!1)};return e.addEventListener("play",t),e.addEventListener("pause",n),e.addEventListener("ended",r),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",n),e.removeEventListener("ended",r)}}),[p]);const g=i?(0,d.__)("Pause","web-stories"):(0,d.__)("Play","web-stories");return c.createElement(TL,null,c.createElement(SL,{crossOrigin:"anonymous",loop:l,ref:p,id:o},c.createElement("source",{src:n,type:r}),a&&a.map(((e,t)=>{let{srclang:n,label:r,track:a,id:o}=e;return c.createElement("track",{srcLang:n,label:r,kind:"metadata",src:a,key:o,default:0===t})}))),c.createElement("div",null,t),c.createElement(Tooltip,{hasTail:!0,title:g,popupZIndexOverride:10},c.createElement(wL,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,"aria-label":g,onClick:m},i?c.createElement(_L.default,null):c.createElement(vL.default,null))))},IL=(0,p.default)(m.Button).withConfig({displayName:"backgroundAudioPanelContent__StyledButton",componentId:"sc-lth4t7-0"})(["",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),AL=(0,p.default)(IL).withConfig({displayName:"backgroundAudioPanelContent__UploadButton",componentId:"sc-lth4t7-1"})(["padding:12px 8px;"]);const xL=function BackgroundAudioPanelContent(e){let{backgroundAudio:t,updateBackgroundAudio:n,showCaptions:r=!1,showLoopControl:a=!1,audioId:o}=e;const{allowedMimeTypes:{audio:l},capabilities:{hasUploadMediaAction:i},MediaUpload:s}=Y(),p=(0,u.useMemo)((()=>l.map((e=>Mt(e))).flat()),[l]),{resource:m,tracks:g=[],loop:h=!0}=t||{},E=(0,qe.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,Ot.default)(p)),b=(0,u.useCallback)((e=>{const t={resource:{src:e.src,id:e.id,mimeType:e.mimeType,length:e.length,lengthFormatted:e.lengthFormatted}};r&&(t.tracks=[]),a&&(t.loop=!0),n(t)}),[r,a,n]),y=(0,u.useCallback)((e=>{n({...t,tracks:e})}),[t,n]),_=(0,u.useCallback)((e=>{n({...t,loop:e.target.checked})}),[t,n]),v=(0,u.useCallback)((e=>{let t=[];if(e){const n=g.findIndex((t=>{let{id:n}=t;return n===e}));t=[...g.slice(0,n),...g.slice(n+1)]}y(t)}),[g,y]),w=(0,u.useCallback)((e=>{let{src:t="",id:n}=e;const r={track:t,trackId:n,trackName:t.split("/").pop(),id:(0,he.default)(),kind:"captions",srclang:"",label:""};y([...g,r])}),[g,y]),T=(0,u.useCallback)((e=>c.createElement(AL,{onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Upload an audio file","web-stories"))),[]),S=(0,d.__)("Upload audio captions","web-stories"),C=(0,u.useCallback)((e=>c.createElement(AL,{onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},S)),[S]);return c.createElement(c.Fragment,null,!m?.src&&i&&c.createElement(Wh,{expand:!0},c.createElement(s,{onSelect:b,onSelectErrorMessage:E,type:l,title:(0,d.__)("Upload an audio file","web-stories"),buttonInsertText:(0,d.__)("Select audio file","web-stories"),render:T})),m?.src&&c.createElement(c.Fragment,null,c.createElement(Wh,null,c.createElement(CL,{title:m?.src.substring(m?.src.lastIndexOf("/")+1),src:m?.src,mimeType:m?.mimeType,tracks:g,audioId:o,loop:h}),c.createElement(Tooltip,{hasTail:!0,title:(0,d.__)("Remove file","web-stories"),popupZIndexOverride:10},c.createElement(IL,{"aria-label":(0,d.__)("Remove file","web-stories"),type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:()=>n(null)},c.createElement(GN.default,null)))),r&&c.createElement(WN,{captionText:S,tracks:g||[],handleChangeTrack:w,handleRemoveTrack:v,renderUploadButton:C}),a&&m?.length&&c.createElement(Wh,{spaceBetween:!1},c.createElement(oS,{loop:h,onChange:_}))))},kL=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-qyqy4a-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const OL=function PageBackgroundAudioPanel(){const{capabilities:{hasUploadMediaAction:e}}=Y(),t=(0,S.useFeature)("enhancedPageBackgroundAudio"),{backgroundAudio:n,currentPageId:r,updateCurrentPageProperties:a}=Sa((e=>({updateCurrentPageProperties:e.actions.updateCurrentPageProperties,backgroundAudio:e.state.currentPage?.backgroundAudio,currentPageId:e.state.currentPage?.id}))),o=(0,u.useCallback)((e=>{a({properties:{backgroundAudio:e}})}),[a]);return n||e?c.createElement(Uk,{name:"pageBackgroundAudio",title:(0,d.__)("Page Background Audio","web-stories"),collapsedByDefault:!1},c.createElement(Wh,null,c.createElement(kL,null,(0,d.__)("Select an audio file that plays while this page is in view.","web-stories"))),c.createElement(xL,{backgroundAudio:n,updateBackgroundAudio:o,showCaptions:t,showLoopControl:t,audioId:`page-${r}-background-audio`})):null},NL=p.default.div.withConfig({displayName:"layers__Container",componentId:"sc-12gh0kb-0"})(["background-color:",";overflow:auto;z-index:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),3),PL=(0,p.default)(ku).withConfig({displayName:"layers__StyledNavigationWrapper",componentId:"sc-12gh0kb-1"})(["width:260px;"]);const RL=function Layers(){const e=OP().length,[t,n]=(0,u.useState)(!1),r=(0,u.useRef)();return c.createElement(c.Fragment,null,c.createElement(Xb,{isOpen:t,placement:Ed.PLACEMENT.RIGHT,ariaLabel:(0,d.__)("Layers Panel","web-stories")},c.createElement(PL,{alignRight:!0,ref:r,isOpen:t},c.createElement(NL,null,c.createElement(PP,null)))),c.createElement(by,{isOpen:t,notificationCount:e,copy:(0,d.__)("Layers","web-stories"),onClick:()=>n((e=>!e))}))},ML=p.default.div.withConfig({displayName:"primaryMenu__Wrapper",componentId:"sc-1n6k8y9-0"})(["display:flex;align-items:flex-end;justify-content:flex-end;width:100%;height:100%;z-index:",";"],3),LL=p.default.div.withConfig({displayName:"primaryMenu__MenuItems",componentId:"sc-1n6k8y9-1"})(["position:relative;display:flex;flex-direction:row;align-items:center;margin-right:","px;gap:","px;"],16,8);const DL=function PrimaryMenu(){return c.createElement(ML,null,c.createElement(LL,{id:"primary-menu-items"},c.createElement(Yx,null),c.createElement(lk,null),c.createElement(RL,null)))};var BL,FL,HL,UL,zL,GL,jL,YL,ZL,WL,VL;function $L(){return $L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$L.apply(this,arguments)}const SvgKeyboard=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",$L({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,BL||(BL=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 11.5A1.5 1.5 0 0 1 8.5 10h15a1.5 1.5 0 0 1 1.5 1.5v8.91a1.5 1.5 0 0 1-1.5 1.5h-15a1.5 1.5 0 0 1-1.5-1.5V11.5Zm1.5-.5a.5.5 0 0 0-.5.5v8.91a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5V11.5a.5.5 0 0 0-.5-.5h-15Z",fill:"currentColor"})),FL||(FL=c.createElement("rect",{x:12,y:18.5,width:7.3,height:1,rx:.5,fill:"currentColor"})),HL||(HL=c.createElement("circle",{cx:10.25,cy:13.75,r:.75,fill:"currentColor"})),UL||(UL=c.createElement("circle",{cx:12.75,cy:13.75,r:.75,fill:"currentColor"})),zL||(zL=c.createElement("circle",{cx:15.75,cy:13.75,r:.75,fill:"currentColor"})),GL||(GL=c.createElement("circle",{cx:18.75,cy:13.75,r:.75,fill:"currentColor"})),jL||(jL=c.createElement("circle",{cx:21.75,cy:13.75,r:.75,fill:"currentColor"})),YL||(YL=c.createElement("circle",{cx:11.75,cy:15.85,r:.75,fill:"currentColor"})),ZL||(ZL=c.createElement("circle",{cx:14.25,cy:15.85,r:.75,fill:"currentColor"})),WL||(WL=c.createElement("circle",{cx:17.25,cy:15.85,r:.75,fill:"currentColor"})),VL||(VL=c.createElement("circle",{cx:20.25,cy:15.85,r:.75,fill:"currentColor"})))},qL=(0,c.memo)(SvgKeyboard);function XL(){return XL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XL.apply(this,arguments)}const KL=(0,tr.isPlatformMacOS)(),LargeKey=e=>c.createElement("kbd",XL({className:"large-key"},e)),ShiftKeyWrapper=e=>KL?c.createElement("kbd",e):c.createElement(LargeKey,e),QL={header:{label:(0,d.__)("Keyboard Shortcuts","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"/"))},landmarks:[{label:(0,d.__)("Element","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,tr.prettifyShortcut)("alt")),c.createElement("kbd",null,"1"))},{label:(0,d.__)("Workspace","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,tr.prettifyShortcut)("alt")),c.createElement("kbd",null,"2"))},{label:(0,d.__)("Design panels","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,tr.prettifyShortcut)("alt")),c.createElement("kbd",null,"3"))}],sections:[{title:(0,d.__)("Basics","web-stories"),commands:[{label:(0,d.__)("Undo","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"Z"))},{label:(0,d.__)("Redo","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement(ShiftKeyWrapper,null,(0,tr.prettifyShortcut)("shift")),c.createElement("kbd",null,"Z"))},{label:(0,d.__)("Save","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"S"))},{label:(0,d.__)("Play / Stop","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"K"))}]},{title:(0,d.__)("Text","web-stories"),commands:[{disabled:!0,label:(0,d.__)("Insert/edit link","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"K"))},{label:(0,d.__)("Bold","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"B"))},{label:(0,d.__)("Italic","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"I"))},{label:(0,d.__)("Underline","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"U"))}]},{title:(0,d.__)("Element","web-stories"),commands:[{label:(0,d.__)("Copy","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"C"))},{label:(0,d.__)("Cut","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"X"))},{label:(0,d.__)("Duplicate","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"D"))},{label:(0,d.__)("Paste","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"V"))},{label:(0,d.__)("Copy Styles","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,tr.prettifyShortcut)("alt")),c.createElement("kbd",null,"O"))},{label:(0,d.__)("Paste Styles","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,tr.prettifyShortcut)("alt")),c.createElement("kbd",null,"P"))},{label:(0,d.__)("Select all","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"A"))},{label:(0,d.__)("Select multiple","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Hd.default,{mapping:{lkbd:c.createElement(LargeKey,null),shortcut:c.createElement(tr.Shortcut,{shortcut:"shift"})}},(0,qe.default)(
/* translators: 1: Shift key. */
(0,d.__)("<lkbd>%s</lkbd> <span>+ click</span>","web-stories"),(0,tr.prettifyShortcut)("shift"))))},{label:(0,d.__)("Move forward or back","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Hd.default,{mapping:{kbd:c.createElement("kbd",null),lkbd:c.createElement(LargeKey,null)}},(0,qe.default)(
/* translators: 1: Cmd/Ctrl key. 2: Up key. 3: Down key. */
(0,d.__)("<lkbd>%1$s</lkbd> <kbd>%2$s</kbd> <span>or</span> <kbd>%3$s</kbd>","web-stories"),(0,tr.prettifyShortcut)("mod"),(0,tr.prettifyShortcut)("up"),(0,tr.prettifyShortcut)("down"))))},{label:(0,d.__)("Move to front or back","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Hd.default,{mapping:{kbd:c.createElement("kbd",null),lkbd:c.createElement(LargeKey,null)}},(0,qe.default)(
/* translators: 1: Cmd/Ctrl key. 2: Shift key. 3: Up key. 4: Down key. */
(0,d.__)("<lkbd>%1$s</lkbd> <lkbd>%2$s</lkbd> <kbd>%3$s</kbd> <span>or</span> <kbd>%4$s</kbd>","web-stories"),(0,tr.prettifyShortcut)("mod"),(0,tr.prettifyShortcut)("shift"),(0,tr.prettifyShortcut)("up"),(0,tr.prettifyShortcut)("down"))))},{label:(0,d.__)("Enter crop/edit mode","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Hd.default,{mapping:{kbd:c.createElement("kbd",null)}},(0,qe.default)(
/* translators: %s: Enter key. */
(0,d.__)("<kbd>%s</kbd> <span>or double-click</span>","web-stories"),(0,tr.prettifyShortcut)("enter"))))},{label:(0,d.__)("Delete","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("delete")))},{disabled:!0,label:(0,d.__)("Insert/edit link","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",null,"A"))},{label:(0,d.__)("Disable snapping and drop targeting","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Hd.default,{mapping:{lkbd:c.createElement(LargeKey,null)}},(0,qe.default)(
/* translators: %s: Cmd/Ctrl key. */
(0,d.__)("<span>Hold</span> <lkbd>%s</lkbd>","web-stories"),(0,tr.prettifyShortcut)("mod"))))},{label:(0,d.__)("Open context menu","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("mod")),c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("alt")),c.createElement("kbd",{className:"large-key"},(0,tr.prettifyShortcut)("shift")),c.createElement("kbd",null,"M"))},{label:(0,d.__)("Move element 1px","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(Hd.default,{mapping:{lkbd:c.createElement(LargeKey,null),shortcut:c.createElement(tr.Shortcut,{shortcut:"shift"})}},(0,qe.default)(
/* translators: 1: Shift key. */
(0,d.__)("<lkbd>%s</lkbd> <span>+ arrow keys</span>","web-stories"),(0,tr.prettifyShortcut)("shift"))))}]}]},JL=QL.header,eD=QL.landmarks.filter((e=>!e.disabled)),tD=QL.sections.map((e=>({...e,commands:e.commands.filter((e=>!e.disabled))})));function nD(){return nD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nD.apply(this,arguments)}const rD=p.default.dd.withConfig({displayName:"shortcutLabel__Wrapper",componentId:"sc-6tlmvo-0"})(["display:block;margin:0;kbd{"," display:flex;justify-content:",";align-items:center;margin:0;padding:0;color:",";background-color:transparent;& > kbd{display:flex;justify-content:center;align-items:center;padding:0 5px;height:24px;width:24px;border-radius:",";border:1px solid ",";color:",";}& > kbd.large-key{width:auto;}kbd + kbd{margin-left:2px;}kbd + span{margin-left:4px;}span + kbd{margin-left:4px;}}"],Pu.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{X_SMALL:r}=t;return n[r]})),(e=>{let{alignment:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));const aD=function ShortCutLabel(e){let{keys:t,alignment:n="center",...r}=e;return c.createElement(rD,nD({alignment:n},r),t)};function oD(){return oD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oD.apply(this,arguments)}const lD=p.default.dl.withConfig({displayName:"headerShortcut__List",componentId:"sc-1egg06k-0"})(["margin:24px;display:flex;flex-shrink:0;"]),iD=p.default.dt.withConfig({displayName:"headerShortcut__Item",componentId:"sc-1egg06k-1"})(["margin:0 12px 0 0;"]);const sD=function HeaderShortcut(e){const{label:t,shortcut:n}=JL;return c.createElement(lD,null,c.createElement(iD,null,c.createElement(Ou.Headline,oD({as:"h2",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},e),t)),c.createElement(aD,{keys:n}))},cD=p.default.dl.withConfig({displayName:"landmarkShortcuts__LandmarksWrapper",componentId:"sc-k7r8e2-0"})(["background-color:",";margin:0;padding:16px 24px;display:flex;justify-content:space-between;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),dD=p.default.div.withConfig({displayName:"landmarkShortcuts__Landmark",componentId:"sc-k7r8e2-1"})(["display:flex;flex-direction:column-reverse;"]),uD=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"landmarkShortcuts__Label",componentId:"sc-k7r8e2-2"})(["text-align:center;margin-top:8px;white-space:nowrap;display:inline-block;"]);const pD=function LandmarkShortcuts(){return c.createElement(cD,null,eD.map((e=>{let{label:t,shortcut:n}=e;return c.createElement(dD,{key:t},c.createElement("dt",null,c.createElement(uD,null,t)),c.createElement(aD,{keys:n}))})))},mD=(0,p.default)(Ou.Headline).attrs({as:"h3",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}).withConfig({displayName:"shortcutMenuSection__Header",componentId:"sc-xssjcb-0"})(["margin-top:24px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),fD=p.default.dl.withConfig({displayName:"shortcutMenuSection__List",componentId:"sc-xssjcb-1"})(["display:grid;grid-template-columns:1fr;row-gap:12px;align-items:center;margin:12px 0 0;"]),gD=p.default.div.withConfig({displayName:"shortcutMenuSection__ListRow",componentId:"sc-xssjcb-2"})(["display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;column-gap:5px;align-items:center;dd{grid-column:1;grid-row:1;}dt{grid-column:2;grid-row:1;}"]),hD=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,forwardedAs:"span"}).withConfig({displayName:"shortcutMenuSection__Label",componentId:"sc-xssjcb-3"})(["display:inline-block;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const ED=function ShortcutMenuSection(e){let{title:t,commands:n}=e;const r=`header-${(0,he.default)()}`;return c.createElement(c.Fragment,null,c.createElement(mD,{id:r},t),c.createElement(fD,{title:t},n.map((e=>{let{label:t,shortcut:n}=e;return c.createElement(gD,{key:t},c.createElement("dt",null,c.createElement(hD,null,t)),c.createElement(aD,{keys:n,alignment:"left"}))}))))},bD=p.default.div.withConfig({displayName:"regularShortcuts__ContentWrapper",componentId:"sc-fl8s7-0"})(["display:flex;flex-direction:column;margin:0 24px 24px;"]);const yD=function RegularShortcuts(){return c.createElement(bD,null,tD.map((e=>{let{title:t,commands:n}=e;return c.createElement(ED,{key:t,title:t,commands:n})})))},_D="mod+/",vD=p.default.div.withConfig({displayName:"shortcutMenu__Container",componentId:"sc-m0xcqa-0"})(["position:absolute;left:0;bottom:0;width:352px;border-radius:",";background-color:",";border:","px solid ",";"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),1,(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),wD=p.default.div.withConfig({displayName:"shortcutMenu__FlexContent",componentId:"sc-m0xcqa-1"})(["display:flex;flex-direction:column;max-height:calc( 100vh - ","px - ","px );"],110,(e=>{let{bottomOffset:t}=e;return t})),TD=p.default.div.withConfig({displayName:"shortcutMenu__CloseContainer",componentId:"sc-m0xcqa-2"})(["position:absolute;right:4px;top:4px;"]),SD=p.default.div.withConfig({displayName:"shortcutMenu__ScrollableContent",componentId:"sc-m0xcqa-3"})(["overflow:auto;flex-shrink:1;",";"],Ru.focusableOutlineCSS),CD=`kb-header-${(0,he.default)()}`;const ID=function ShortcutMenu(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{close:n,toggleMenu:r,isOpen:a}=BA((e=>{let{actions:t,state:n}=e;return{toggleMenu:t.toggleMenu,close:t.close,isOpen:n.isOpen}})),[o,l]=(0,u.useState)(0);return(0,u.useLayoutEffect)((()=>{const e=t.current;if(!e)return;const n=()=>{const t=e.getBoundingClientRect(),n=e.ownerDocument.documentElement.getBoundingClientRect();l(n.height-t.y-t.height)};return n(),setTimeout(n),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)}),[]),(0,u.useEffect)((()=>{a&&e.current&&e.current.focus()}),[a]),(0,tr.useKeyDownEffect)(t,_D,r,[r]),(0,tr.useKeyDownEffect)(t,"esc",n),c.createElement(vD,{ref:t},c.createElement(TD,null,c.createElement(m.Button,{ref:e,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE,onClick:n,"aria-label":(0,d.__)("Close Menu","web-stories")},c.createElement(Nu.default,null))),c.createElement(wD,{bottomOffset:o},c.createElement(sD,{id:CD}),c.createElement(SD,{role:"presentation",tabIndex:0},c.createElement(pD,null),c.createElement(yD,null))))},AD=(0,p.default)(by).withConfig({displayName:"keyboardShortcutsMenu__StyledToggleButton",componentId:"sc-1nngfyy-0"})(["padding-left:","px;padding-right:","px;width:auto;display:block;background-color:",";"],3,3,(e=>{let{theme:t}=e;return t.colors.bg.primary})),xD=p.default.div.withConfig({displayName:"keyboardShortcutsMenu__Wrapper",componentId:"sc-1nngfyy-1"})(["z-index:",";"],3),kD=(0,p.default)(qL).withConfig({displayName:"keyboardShortcutsMenu__MainIcon",componentId:"sc-1nngfyy-2"})(["height:32px;width:auto;display:block;"]);const OD=function KeyboardShortcutsMenu(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{close:n,toggle:r,isOpen:a}=BA((e=>{let{actions:{close:t,toggle:n},state:{isOpen:r}}=e;return{close:t,toggle:n,isOpen:r}}));return(0,u.useEffect)((()=>{document.body.classList.contains(ed)&&!a&&e?.current?.focus?.()}),[a]),(0,tr.useGlobalKeyDownEffect)(_D,r,[r]),(0,u.useFocusOut)(t,n,[n]),c.createElement(bu,null,c.createElement(xD,{ref:t},c.createElement(Xb,{popupId:"keyboard_shortcut_menu",isOpen:a,ariaLabel:(0,d.__)("Keyboard Shortcuts","web-stories")},c.createElement(ID,{toggleMenu:r})),c.createElement(AD,{ref:e,isOpen:a,"aria-owns":"keyboard_shortcut_menu",onClick:r,"aria-label":(0,d.__)("Keyboard Shortcuts","web-stories"),label:(0,d.__)("Keyboard Shortcuts","web-stories"),MainIcon:kD,shortcut:"mod+/"})))};var ND=n(11443);function PD(){document.querySelector(Ws)?.focus()}const RD=(0,p.css)(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),MD=(0,p.default)(Gb).withConfig({displayName:"bottomNavigation__BottomNavBar",componentId:"sc-yk08yc-0"})(["position:absolute;bottom:0;transition:transform ","ms ",";z-index:2;",""],Gs,Qe.BEZIER.default,(e=>{let{isHidden:t}=e;return t&&(0,p.css)(["transform:translateY(100%);"])})),LD=p.default.div.withConfig({displayName:"bottomNavigation__BottomNavButtons",componentId:"sc-yk08yc-1"})(["display:flex;padding:0 16px;white-space:nowrap;"]),DD=p.default.div.withConfig({displayName:"bottomNavigation__ArrowWrap",componentId:"sc-yk08yc-2"})([""," margin:-5px -16px;"," svg{display:block;}"],RD,(e=>{let{$isRTL:t}=e;return t&&(0,p.css)(["transform:rotate(180deg);"])}));function BottomNavigation(e){let{onAllTips:t,onPrev:n,onNext:r,hasBottomNavigation:a,isNextDisabled:o,isPrevDisabled:l}=e;const{isRTL:i}=Y(),s=(0,u.useRef)(null),p=(0,u.useRef)(null),[m,g]=(0,u.useState)({isPrevDisabled:l,isNextDisabled:o});return(0,u.useEffect)((()=>{[l&&document.activeElement===s.current,o&&document.activeElement===p.current].forEach((e=>(e=>t=>{e&&t()})(e)(PD))),g({isPrevDisabled:l,isNextDisabled:o})}),[l,o]),c.createElement(MD,{"aria-hidden":!a,isHidden:!a},c.createElement(LD,null,c.createElement(jb,{onClick:()=>{PD(),t()},type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a},c.createElement(DD,{$isRTL:i},c.createElement(Qp,null)),c.createElement(BD,null,(0,d.__)("All Tips","web-stories")))),c.createElement(LD,null,c.createElement(jb,{ref:s,onClick:n,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a||m.isPrevDisabled},(0,d.__)("Previous","web-stories")),c.createElement(jb,{ref:p,onClick:r,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a||m.isNextDisabled},(0,d.__)("Next","web-stories"))))}var BD=(0,p.default)("span").withConfig({displayName:"bottomNavigation___StyledSpan",componentId:"sc-yk08yc-3"})(["",""],RD);const FD=p.default.div.withConfig({displayName:"navigator__Layout",componentId:"sc-3xgugm-0"})([""," contain:content;"],pk.fullSizeRelative),HD=p.default.div.withConfig({displayName:"navigator__Content",componentId:"sc-3xgugm-1"})([""]),UD=p.default.div.withConfig({displayName:"navigator__ContentInner",componentId:"sc-3xgugm-2"})(["position:relative;"]);const zD=(0,u.memo)((function Navigator(e){let{children:t,isOpen:n,onClose:r,onNext:a,onPrev:o,onAllTips:l,hasBottomNavigation:i,isNextDisabled:s,isPrevDisabled:p}=e;const m=(0,u.useRef)(null),f=(0,u.useRef)(null);return(0,u.useEffect)((()=>function(e,t){if(!e||!t)return()=>{};const{height:n}=e.getBoundingClientRect();t.style.height=`${n}px`,e.style.position="absolute",e.style.bottom=0,e.style.content="contain";let r=requestAnimationFrame((()=>{r=requestAnimationFrame((()=>{t.style.transition=`height 500ms ${Qe.BEZIER.default}`}))}));return()=>cancelAnimationFrame(r)}(m.current,f.current)),[]),(0,u.useResizeEffect)(m,(e=>{let{height:t}=e;f.current&&(f.current.style.height=`${t}px`)}),[]),c.createElement(ku,{isOpen:n},c.createElement(TopNavigation,{onClose:r,label:(0,d.__)("Quick Tips","web-stories"),popupId:Zs}),c.createElement(FD,{ref:f},c.createElement(HD,{ref:m},c.createElement(UD,null,t))),c.createElement(BottomNavigation,{onNext:a,onPrev:o,onAllTips:l,hasBottomNavigation:i,isNextDisabled:s,isPrevDisabled:p}))}));var GD=n(94537);const jD=p.default.div.withConfig({displayName:"header__Panel",componentId:"sc-1aci6do-0"})(["padding:24px 0 16px 0;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),YD=p.default.h1.withConfig({displayName:"header__Heading",componentId:"sc-1aci6do-1"})([""," color:",";line-height:32px;margin:0 0 8px 0;"],Pu.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.fg.primary}));function ZD(){return c.createElement(jD,null,c.createElement(YD,{as:"h2"},(0,d.__)("Web Stories Help Center","web-stories")),c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Discover tips & resources to help you get the most out of your Web Stories.","web-stories")))}const WD=p.default.div.withConfig({displayName:"tips__Panel",componentId:"sc-1bvshes-0"})(["padding:24px 0;"]),VD=(0,p.default)(m.Button).withConfig({displayName:"tips__StyledButton",componentId:"sc-1bvshes-1"})([""," display:flex;justify-content:space-between;width:100%;padding:6px 0;"],Pu.expandTextPreset(((e,t)=>{let{label:n}=e,{SMALL:r}=t;return n[r]}))),$D=p.default.span.withConfig({displayName:"tips__ButtonText",componentId:"sc-1bvshes-2"})(["vertical-align:middle;text-align:left;",""],(e=>{let{unread:t,theme:n}=e;return t&&(0,p.css)(["&::before{content:' ';display:inline-block;height:10px;width:10px;margin-right:16px;border-radius:",";background-color:",";}"],n.borders.radius.round,n.colors.accent.primary)})),qD=p.default.div.withConfig({displayName:"tips__ArrowWrap",componentId:"sc-1bvshes-3"})(["width:32px;margin:-9px;transform-origin:50% 50%;transform:",";"],(e=>{let{$isRTL:t}=e;return t?"none":"rotate(180deg)"})),XD=(0,p.default)(Qp).withConfig({displayName:"tips__StyledArrow",componentId:"sc-1bvshes-4"})(["width:100%;"]);function Tip(e){let{children:t,onClick:n,unread:r=!0}=e;const{isRTL:a}=Y();return c.createElement(VD,{size:f.BUTTON_SIZES.SMALL,onClick:n},c.createElement($D,{unread:r},t),c.createElement(qD,{$isRTL:a},c.createElement(XD,null)))}function Tips(e){let{onTipSelect:t=(()=>{}),readTips:n}=e;const{state:{tips:r}}=nc(),a=Object.entries(r);return c.createElement(WD,null,a.map((e=>{let[r,a]=e;return c.createElement(Tip,{unread:!n[r],key:r,onClick:()=>{PD(),t(r)}},a.title)})))}function KD(){return KD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KD.apply(this,arguments)}const QD=(0,p.css)(["opacity:1;transform:none;"]),JD=(0,p.css)(["position:absolute;bottom:0;opacity:0.6;transform:scale(0.96);"]),eB={entering:QD,entered:QD,exiting:JD,exited:JD},tB=p.default.div.withConfig({displayName:"transitioner__Manager",componentId:"sc-aat78p-0"})(["position:relative;color:",";opacity:0.6;transform-origin:50% 50%;transform:scale(0.96);transition:transform ","ms ",",opacity ","ms ",";z-index:",";",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),600,Qe.BEZIER.default,600,Qe.BEZIER.default,js,(e=>{let{state:t}=e;return eB[t]}));function Transitioner(e){let{children:t,...n}=e;return c.createElement(ScheduledTransition,KD({},n,{timeout:600,mountOnEnter:!0,unmountOnExit:!0}),(e=>c.createElement(tB,{state:e},t)))}const nB=p.default.div.withConfig({displayName:"menu__Container",componentId:"sc-ztoh5v-0"})(["padding:0 ","px;max-height:60vh;overflow-y:scroll;*{user-select:text;}"],24);function rB(e){let{onTipSelect:t=Ft,readTips:n,components:r,...a}=e;const o=r?.Footer;return c.createElement(Transitioner,a,c.createElement(nB,{"data-testid":"help_center_container"},c.createElement(ZD,null),c.createElement(Tips,{readTips:n,onTipSelect:t}),o&&c.createElement(o,null)))}function aB(){return aB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aB.apply(this,arguments)}const oB=420,lB=p.default.div.withConfig({displayName:"transitioner__Opacity",componentId:"sc-cc5d3w-0"})([""]),iB=()=>(0,p.css)(["transition-delay:","ms;transform:none;","{opacity:1;}"],80,lB),sB=e=>{let{isLeftToRightTransition:t}=e;return(0,p.css)(["position:absolute;bottom:0;","{opacity:0;}",""],lB,t?(0,p.css)(["transform:translateX(-100%);"]):(0,p.css)(["transform:translateX(100%);"]))},cB={entering:iB,entered:iB,exiting:sB,exited:sB},dB=p.default.div.withConfig({displayName:"transitioner__Manager",componentId:"sc-cc5d3w-1"})(["position:relative;color:",";background-color:",";transition:transform ","ms ",";transform-origin:50% 50%;z-index:",";"," ","{opacity:0.6;transition:opacity ","ms ",";}",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),oB,Qe.BEZIER.default,Ys,(e=>{let{isLeftToRightTransition:t}=e;return t?(0,p.css)(["transform:translateX(100%);"]):(0,p.css)(["transform:translateX(-100%);"])}),lB,oB,Qe.BEZIER.default,(e=>{let{state:t,...n}=e;return cB[t]?.(n)}));function uB(e){let{children:t,isLeftToRightTransition:n,...r}=e;return c.createElement(ScheduledTransition,aB({},r,{timeout:{enter:500,exit:oB},mountOnEnter:!0,unmountOnExit:!0}),(e=>c.createElement(dB,{state:e,isLeftToRightTransition:n},c.createElement(lB,null,t))))}var pB,mB,fB;function gB(){return gB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gB.apply(this,arguments)}const SvgDoneCheckmark=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",gB({viewBox:"0 0 135 136",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,pB||(pB=c.createElement("circle",{cx:67.5,cy:68.5,r:67.5,fill:"currentColor"})),mB||(mB=c.createElement("path",{d:"M67.5 93.146c13.889 0 25.148-11.259 25.148-25.147 0-13.889-11.26-25.147-25.147-25.147-13.889 0-25.148 11.258-25.148 25.147 0 13.888 11.26 25.147 25.148 25.147Z",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})),fB||(fB=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M81.698 57.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037Z",fill:"currentColor"})))},hB=(0,c.memo)(SvgDoneCheckmark);function EB(){return EB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EB.apply(this,arguments)}const bB=p.default.div.withConfig({displayName:"quickTip__Panel",componentId:"sc-1kyj87z-0"})(["width:100%;padding-bottom:","px;*{user-select:text;}"],48),yB=p.default.div.withConfig({displayName:"quickTip__Overflow",componentId:"sc-1kyj87z-1"})(["position:relative;width:100%;max-height:70vh;padding:","px;strong{font-weight:700;}"],24),_B=p.default.video.withConfig({displayName:"quickTip__Video",componentId:"sc-1kyj87z-2"})(["height:180px;margin-bottom:","px;max-width:100%;"],24),vB=p.default.h1.withConfig({displayName:"quickTip__Title",componentId:"sc-1kyj87z-3"})([""," color:",";line-height:32px;margin:0 0 8px 0;"],Pu.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.fg.primary})),wB=(0,p.default)(Ke.Text).withConfig({displayName:"quickTip__Paragraph",componentId:"sc-1kyj87z-4"})(["& + &{margin-top:8px;}"]),TB=p.default.div.withConfig({displayName:"quickTip__DoneContainer",componentId:"sc-1kyj87z-5"})([""," height:180px;margin-bottom:","px;color:#f4f2ef;svg{display:block;path{color:#4285f4;}}"],mk.centerContent,24);function QuickTip(e){let{title:t,description:n,isLeftToRightTransition:r=!0,figureSrc:a,figureSrcImg:o,figureAlt:l,href:i,isDone:s=!1,...d}=e;const{cdnURL:u}=Y();return c.createElement(uB,EB({},d,{isLeftToRightTransition:r}),c.createElement(bB,null,c.createElement(yB,null,Boolean(a)&&c.createElement(_B,{controls:!1,autoPlay:!0,loop:!0,muted:!0,noControls:!0,preload:"true",crossOrigin:"anonymous"},c.createElement("source",{src:`${u}${a}.webm`,type:"video/webm"}),c.createElement("source",{src:`${u}${a}.mp4`,type:"video/mp4"})),o&&c.createElement(_B,{as:"img",alt:l,src:`${u}${o}.png`,crossOrigin:"anonymous"}),s&&c.createElement(TB,null,c.createElement(hB,{height:135,width:135})),c.createElement(vB,null,t),n.map(((e,n)=>c.createElement(wB,{key:`${t}-${n}`,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,rel:"noreferrer noopener",target:"_blank",href:i}),screenreader:c.createElement(tw.VisuallyHidden,null)}},e)))))))}function SB(){return SB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SB.apply(this,arguments)}const CB=(0,u.memo)((function Companion(e){let{tipKey:t,onTipSelect:n,isLeftToRightTransition:r,readTips:a,components:o}=e;const{state:{tips:l}}=nc(),i={...l,[zs[0]]:zs[1]},s=t&&i[t];return c.createElement(GD.default,null,s?c.createElement(QuickTip,SB({key:t,isDone:t===zs[0],transitionKey:t,isLeftToRightTransition:r},s)):c.createElement(rB,{key:"menu",readTips:a,onTipSelect:n,components:o}))}));var IB,AB;function xB(){return xB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xB.apply(this,arguments)}const SvgQuestionMarkOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",xB({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,IB||(IB=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z",fill:"currentColor"})),AB||(AB=c.createElement("path",{d:"M15.438 17.268c0-.406.079-.744.235-1.012.156-.268.436-.59.84-.963.329-.293.563-.541.703-.744.148-.212.222-.464.222-.756 0-.39-.127-.704-.382-.94-.256-.243-.61-.365-1.062-.365-.412 0-.74.118-.988.354-.239.227-.42.512-.543.853l-.963-.402c.173-.472.465-.886.877-1.244.42-.366.958-.549 1.617-.549.494 0 .93.102 1.308.305.38.195.671.467.877.817.214.35.321.74.321 1.17 0 .448-.115.83-.346 1.147-.222.309-.51.622-.864.939-.271.244-.469.476-.592.695-.124.22-.186.476-.186.768v.513h-1.074v-.586Zm.543 3.232a.801.801 0 0 1-.567-.22.78.78 0 0 1-.223-.56c0-.212.074-.39.223-.537a.779.779 0 0 1 .568-.232c.213 0 .395.078.543.232a.707.707 0 0 1 .234.537.76.76 0 0 1-.234.56.744.744 0 0 1-.543.22Z",fill:"currentColor"})))},kB=(0,c.memo)(SvgQuestionMarkOutline),OB=(0,p.default)(kB).withConfig({displayName:"toggle__MainIcon",componentId:"sc-12rmkcw-0"})(["height:32px;width:auto;display:block;"]),NB=(0,p.default)(by).withConfig({displayName:"toggle__StyledToggleButton",componentId:"sc-12rmkcw-1"})(["padding-left:3px;padding-right:3px;display:block;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));function PB(e){let{isOpen:t=!1,popupId:n="",onClick:r=(()=>{}),notificationCount:a=0}=e;return c.createElement(NB,{"aria-owns":n,"aria-label":a>0?(0,qe.default)(
/* translators: %s:  number of unread notifications. */
(0,d._n)("Help Center: %s unread notification","Help Center: %s unread notifications",a,"web-stories"),a):(0,d.__)("Help Center","web-stories"),onClick:r,isOpen:t,label:(0,d.__)("Help","web-stories"),MainIcon:OB,notificationCount:a})}const RB=p.default.div.withConfig({displayName:"helpCenter__Wrapper",componentId:"sc-12zoy5g-0"})(["z-index:",";"],3),HelpCenter=e=>{let{components:t}=e;const n=(0,u.useRef)(null),{state:r,actions:a}=nc();return(0,u.useEffect)((()=>{r.isOpen&&PD()}),[r.isOpen]),wa(ga.onReplaceBackgroundMedia,(0,u.useCallback)((()=>{a.openToUnreadTip(Ps)}),[a])),wa(ga.onReplaceForegroundMedia,(0,u.useCallback)((()=>{a.openToUnreadTip(Rs)}),[a])),c.createElement(bu,null,c.createElement(c.Fragment,null,c.createElement(ND.Styles,null),c.createElement(RB,{ref:n},c.createElement(Xb,{popupId:Zs,isOpen:r.isOpen,ariaLabel:(0,d.__)("Help Center","web-stories")},c.createElement(zD,{isOpen:r.isOpen,onNext:a.goToNext,onPrev:a.goToPrev,onAllTips:a.goToMenu,onClose:a.close,hasBottomNavigation:r.hasBottomNavigation,isNextDisabled:r.isNextDisabled,isPrevDisabled:r.isPrevDisabled},c.createElement(CB,{readTips:r.readTips,tipKey:r.navigationFlow[r.navigationIndex],onTipSelect:a.goToTip,isLeftToRightTransition:r.isLeftToRightTransition,components:t}))),c.createElement(PB,{isOpen:r.isOpen,onClick:a.toggle,notificationCount:r.unreadTipsCount,popupId:Zs}))))},MB=p.default.div.withConfig({displayName:"secondaryMenu__Wrapper",componentId:"sc-4921wn-0"})(["display:flex;align-items:flex-end;justify-content:flex-start;width:100%;height:100%;"]),LB=p.default.div.withConfig({displayName:"secondaryMenu__MenuItems",componentId:"sc-4921wn-1"})(["position:relative;display:flex;flex-direction:row;align-items:center;margin-left:","px;gap:","px;"],16,8),DB="help_center",BB="checklist",FB="keyboard_shortcuts";const HB=function SecondaryMenu(e){let{menu:t}=e;const n=(0,u.useRef)(""),{close:r,isHelpCenterOpen:a}=nc((e=>{let{actions:{close:t},state:{isOpen:n}}=e;return{close:t,isHelpCenterOpen:n}})),{close:o,open:l,isChecklistOpen:i}=Fd((e=>{let{actions:{close:t,open:n},state:{isOpen:r}}=e;return{close:t,open:n,isChecklistOpen:r}})),{close:s,isKeyboardShortcutsMenuOpen:d}=BA((e=>{let{actions:{close:t},state:{isOpen:n}}=e;return{close:t,isKeyboardShortcutsMenuOpen:n}})),{onResetReviewDialogRequest:p,reviewDialogRequested:m}=du((e=>{let{actions:{onResetReviewDialogRequest:t},state:{reviewDialogRequested:n}}=e;return{reviewDialogRequested:n,onResetReviewDialogRequest:t}})),f=xs((e=>{let{state:{editingElementState:{isTrimMode:t},isEditing:n}}=e;return t||n})),g=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.current=e}),[]);return(0,u.useEffect)((()=>{i&&n.current!==BB&&(r(),s(),g(BB))}),[r,s,i,g]),(0,u.useEffect)((()=>{a&&n.current!==DB&&(o(),s(),g(DB))}),[o,s,a,g]),(0,u.useEffect)((()=>{d&&n.current!==FB&&(o(),r(),g(FB))}),[o,r,d,g]),(0,u.useEffect)((()=>{m&&(g(),p(),l())}),[m,p,l,g]),(0,u.useEffect)((()=>{f&&n.current&&(g(),o(),r())}),[o,r,f,g]),c.createElement(MB,null,c.createElement(LB,null,c.createElement(HelpCenter,{components:t?.helpCenter}),t?.checklist&&c.createElement(Checklist,{items:t.checklist}),c.createElement(OD,null)))},UB=p.default.section.withConfig({displayName:"footerLayout__Wrapper",componentId:"sc-gme2s1-0"})(["position:relative;display:grid;grid:'secondary carousel primary' auto / ","px minmax(auto,calc(100% - ","px)) ","px;width:100%;max-width:100%;height:100%;"],DC,2*DC,DC),zB=p.default.div.withConfig({displayName:"footerLayout__Area",componentId:"sc-gme2s1-1"})(["grid-area:",";display:flex;align-items:flex-end;justify-content:center;z-index:",";"],(e=>{let{area:t}=e;return t}),(e=>{let{zIndex:t="auto"}=e;return t}));const GB=function FooterLayout(e){let{footer:t,zIndex:n}=e;return c.createElement(bu,null,c.createElement(UB,{"aria-label":(0,d.__)("Workspace Footer","web-stories")},c.createElement(zB,{area:"carousel"},c.createElement(zx,null)),c.createElement(zB,{area:"primary",zIndex:n},c.createElement(DL,null)),c.createElement(zB,{area:"secondary",zIndex:n},c.createElement(HB,{menu:t?.secondaryMenu}))))},jB=p.default.section.withConfig({displayName:"footer__Outer",componentId:"sc-124zhi3-0"})(["height:100%;"]),YB=(0,p.default)(jB).withConfig({displayName:"footer__Inner",componentId:"sc-124zhi3-1"})(["margin-right:","px;"],(e=>{let{marginRight:t}=e;return t}));const ZB=(0,u.memo)((function(e){let{footer:t,zIndex:n}=e;const r=(0,u.useRef)(),[a,o]=(0,u.useState)(0);(0,u.useResizeEffect)(r,(e=>{let{width:t}=e;return o(t)}),[]);const l=(0,u.useMemo)((()=>a>=1e3?8:0),[a]);return c.createElement(Bd,null,c.createElement(DA,null,c.createElement(jB,{ref:r},c.createElement(YB,{marginRight:l},c.createElement(GB,{footer:t,zIndex:n})))))}));function WB(){return WB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WB.apply(this,arguments)}const VB=(0,p.default)(m.Button).withConfig({displayName:"pageMenuButton__StyledButton",componentId:"sc-x8fz92-0"})(["margin-top:12px;"]);const $B=(0,u.forwardRef)((function PageMenuButtonWithRef(e,t){let{children:n,title:r,shortcut:a,...o}=e;return c.createElement(Tooltip,{title:r,shortcut:a,hasTail:!0},c.createElement(VB,WB({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,ref:t},o),n))}));$B.propTypes={children:ma().node,title:ma().string,shortcut:ma().string};const qB=$B;var XB;function KB(){return KB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KB.apply(this,arguments)}const SvgStopOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",KB({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,XB||(XB=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-8a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-2 5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",fill:"currentColor"})))},QB=(0,c.memo)(SvgStopOutline);var JB;function eF(){return eF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eF.apply(this,arguments)}const SvgPlayOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",eF({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,JB||(JB=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-8a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-1.215 11.38 4.276-2.575c.585-.353.585-1.257 0-1.61l-4.276-2.575c-.575-.346-1.285.098-1.285.804v5.152c0 .706.71 1.15 1.285.804Z",fill:"currentColor"})))},tF=(0,c.memo)(SvgPlayOutline);const nF=function AnimationToggle(){const{animationState:e,updateAnimationState:t}=Sa((e=>{let{state:{animationState:t},actions:{updateAnimationState:n}}=e;return{animationState:t,updateAnimationState:n}})),n=[kn.STORY_ANIMATION_STATE.PLAYING,kn.STORY_ANIMATION_STATE.PLAYING_SELECTED].includes(e),r=n?(0,d.__)("Stop","web-stories"):(0,d.__)("Play","web-stories"),a=n?(0,d.__)("Stop Page Animations","web-stories"):(0,d.__)("Play Page Animations","web-stories"),o=n?QB:tF,l=(0,u.useCallback)((()=>{t({animationState:n?kn.STORY_ANIMATION_STATE.RESET:kn.STORY_ANIMATION_STATE.PLAYING}),(0,L.trackEvent)("canvas_play_animations",{status:n?"stop":"play"})}),[n,t]);return c.createElement(qB,{title:r,shortcut:"mod+k",onClick:l,"aria-label":a},c.createElement(o,null))},rF=p.default.div.withConfig({displayName:"pageMenu__Wrapper",componentId:"sc-m9u2n8-0"})(["margin-top:auto;padding:0 4px;"]);const aF=(0,u.memo)((function PageMenu(){const{currentPage:e,numberOfPages:t,deleteCurrentPage:n,addPage:r,hasAnimations:a}=Sa((e=>{let{state:{currentPage:t,pages:n},actions:{deleteCurrentPage:r,addPage:a}}=e;return{currentPage:t,numberOfPages:n.length,deleteCurrentPage:r,addPage:a,hasAnimations:t?.animations?.length>0}})),o=(0,u.useRef)(null),l=(0,u.useRef)(null);(0,s_.default)({node:o.current,eventData:i_.TRACKING_EVENTS.PAGE_ADD}),(0,s_.default)({node:l.current,eventData:i_.TRACKING_EVENTS.PAGE_DELETE});const i=(0,u.useCallback)((()=>n()),[n]),s=(0,u.useCallback)((()=>r({page:(0,A.createPage)()})),[r]),p=(0,u.useCallback)((()=>r({page:(0,A.duplicatePage)(e)})),[r,e]),m=t<=1;return e?c.createElement(rF,{role:"group","aria-label":(0,d.__)("Page actions","web-stories")},a&&c.createElement(nF,null),c.createElement(qB,{ref:o,title:(0,d.__)("New Page","web-stories"),onClick:s,"aria-label":(0,d.__)("Add New Page","web-stories")},c.createElement(Gf,null)),c.createElement(qB,{title:(0,d.__)("Duplicate Page","web-stories"),onClick:p,"aria-label":(0,d.__)("Duplicate Page","web-stories")},c.createElement(fP,null)),c.createElement(qB,{ref:l,title:(0,d.__)("Delete Page","web-stories"),disabled:m,onClick:i,"aria-label":(0,d.__)("Delete Page","web-stories")},c.createElement(GN.default,null))):null}));function oF(){return oF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oF.apply(this,arguments)}const lF=p.default.section.withConfig({displayName:"pageSideMenu__MenusWrapper",componentId:"sc-sll2i1-0"})(["position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:space-between;z-index:",";pointer-events:auto;min-height:100%;",""],3,(e=>{let{isZoomed:t,theme:n}=e;return t&&`\n    min-height: initial;\n    background-color: ${(0,Xe.rgba)(n.colors.standard.black,.45)};\n    border-radius: ${n.borders.radius.small};\n    padding: 8px;\n    margin-left: -24px;\n  `})),iF=p.default.div.withConfig({displayName:"pageSideMenu__Divider",componentId:"sc-sll2i1-1"})(["width:20px;height:1px;margin:13px auto 1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const sF=function PageSideMenu(){const{zoomSetting:e}=Zi((e=>{let{state:{zoomSetting:t}}=e;return{zoomSetting:t}})),t=FZ(),n=e!==Ae.FIT;return c.createElement(lF,{"aria-label":(0,d.__)("Page side menu","web-stories"),isZoomed:n},t.length?c.createElement(Zv.default,{isInline:!0,isAlwaysVisible:!0,isIconMenu:!0,disableControlledTabNavigation:!0,"data-testid":"Element quick actions","aria-label":(0,d.__)("Group of available options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()}},t.map((e=>{let{Icon:t,label:n,onClick:r,separator:a,tooltipPlacement:o,wrapWithMediaPicker:l,...i}=e;const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sv.noop;return c.createElement(u.Fragment,{key:n},"top"===a&&c.createElement(pw.default,null),c.createElement(bd.Tooltip,{placement:o,title:n},c.createElement(ow.default,oF({"aria-label":n,onClick:t=>{r(t),e(t)}},i),c.createElement(aw,{title:n},c.createElement(t,null)))),"bottom"===a&&c.createElement(pw.default,null))};return l?c.createElement(MediaPicker,{key:n,render:e=>{let{onClick:t}=e;return s(t)}}):s()}))):null,n&&c.createElement(iF,null),c.createElement(aF,null))};const cF=(0,u.memo)((function NavLayer(e){let{header:t,footer:n}=e;return c.createElement(ChecklistCountProvider,{hasChecklist:Boolean(n?.secondaryMenu?.checklist)},c.createElement(ZC,{pointerEvents:"none",onMouseDown:e=>e.stopPropagation()},c.createElement(KC,{pointerEvents:"initial",zIndex:5},t),c.createElement(bu,null,c.createElement(tI,null,c.createElement(sF,null))),c.createElement(nI,{pointerEvents:"initial"},c.createElement(ZB,{footer:n,zIndex:5}))))})),dF=0,uF=1,pF=2,mF=(0,I.withOverlay)(p.default.div.withConfig({displayName:"selectionCanvas__Container",componentId:"sc-qsqc5z-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;user-select:none;"])),fF=p.default.div.withConfig({displayName:"selectionCanvas__Lasso",componentId:"sc-qsqc5z-1"})(["display:none;position:absolute;border:1px dotted ",";z-index:1;"],(e=>{let{theme:t}=e;return t.colors.border.selection}));const gF=function SelectionCanvas(e){let{children:t}=e;const n=Sa((e=>{let{state:t}=e;return t.currentPage?.elements||je})),{selectedElements:r,clearSelection:a}=Sa((e=>{let{state:{selectedElements:t},actions:{clearSelection:n}}=e;return{selectedElements:t,clearSelection:n}})),{fullbleedContainer:o,isEditing:l,nodesById:i,clearEditing:s,selectIntersection:d}=xs((e=>{let{state:{fullbleedContainer:t,isEditing:n,nodesById:r},actions:{clearEditing:a,selectIntersection:o}}=e;return{fullbleedContainer:t,isEditing:n,nodesById:r,clearEditing:a,selectIntersection:o}})),p=(0,u.useMemo)((()=>o?.closest("[data-scroll-container]")),[o]),{editorToDataX:m,editorToDataY:f}=(0,mc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),g=(0,u.useRef)(null),h=(0,u.useRef)(null),E=(0,u.useRef)([0,0]),b=(0,u.useRef)([0,0]),y=(0,u.useRef)([0,0]),_=(0,u.useRef)(dF),v=(0,u.useCallback)((()=>{const[e,t]=b.current,[n,r]=y.current;return[Math.min(e,n),Math.min(t,r),Math.abs(e-n),Math.abs(t-r)]}),[]),w=(0,u.useCallback)((()=>{const e=h.current;if(!e)return;const t=_.current,[n,r,a,o]=v();e.style.left=`${n}px`,e.style.top=`${r}px`,e.style.width=`${a}px`,e.style.height=`${o}px`,e.style.display=t===uF?"block":"none"}),[v]),T=(0,u.useCallback)((e=>{i[n[0].id].contains(e.target)||(r.length&&a(),l&&s());let t=0,o=0;for(let e=g.current;e;e=e.offsetParent)t+=e.offsetLeft,o+=e.offsetTop;const c=e.pageX-t,d=e.pageY-o;E.current=[t,o],b.current=[c,d],y.current=[c,d],_.current=pF,w()}),[s,a,n,l,i,r.length,w]),S=(0,u.useCallback)((e=>{if(_.current===dF)return;const[t,n]=b.current,[r,a]=E.current,o=e.pageX-r,l=e.pageY-a;y.current[0]=o,y.current[1]=l,w(),Math.abs(t-o)+Math.abs(n-l)>10&&(_.current=uF)}),[w]),C=(0,u.useCallback)((()=>{if(_.current===uF){const[e,t,n,r]=v(),{offsetLeft:l,offsetTop:i,offsetHeight:c,offsetWidth:u}=o,{offsetLeft:g,offsetTop:h}=p,E=l+g,b=i+h+(c-u/ae.PAGE_RATIO)/2,y=m(e-E),_=f(t-b),w=m(n),T=f(r);a(),s(),d({x:y,y:_,width:w,height:T})}_.current=dF,w()}),[s,a,m,f,o,v,p,d,w]);return(0,u.useEffect)((()=>(document.addEventListener("mouseup",C),()=>{document.removeEventListener("mouseup",C)})),[C]),(0,u.useEffect)(w),c.createElement(mF,{onMouseDown:T,onMouseMove:S,"data-fix-caret":!0},t,c.createElement(I.InOverlay,{ref:g},c.createElement(fF,{ref:h})))},hF="edit-story-canvas-upload-message";const EF=function CanvasUploadDropTarget(e){let{children:t}=e;const n=os(),r=(0,u.useCallback)((e=>{e&&e.length>0&&n(e)}),[n]);return c.createElement($y,{onDrop:r,labelledBy:hF},t,c.createElement(t_,null,c.createElement(ZC,null,c.createElement(rI,{overlay:c.createElement(l_,{id:hF,message:(0,d.__)("Upload to media library and add to the page.","web-stories")})}))))},bF=p.default.div.withConfig({displayName:"canvasElementDropzone__Container",componentId:"sc-8cm35g-0"})(["width:100%;height:100%;"]);const yF=function CanvasElementDropzone(e){let{children:t}=e;const n=as(),{activeDropTargetId:r}=Hi((e=>({activeDropTargetId:e.state.activeDropTargetId}))),{pageContainer:a}=xs((e=>({pageContainer:e.state.pageContainer}))),{editorToDataX:o,editorToDataY:l}=(0,mc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),i=(0,u.useCallback)((e=>{if(Gy(e,"resource/media")&&!r){const{resource:t,offset:{x:r,y:i,w:s,h:c}}=JSON.parse(e.dataTransfer.getData("resource/media")),{x:d,y:u}=a.getBoundingClientRect();n(t.type,{resource:t,x:o(e.clientX-d-r),y:l(e.clientY-u-i),width:o(s),height:l(c)}),e.stopPropagation(),e.preventDefault()}}),[r,a,n,o,l]),s=(0,u.useCallback)((e=>{Gy(e,"resource/media")&&!r&&(e.stopPropagation(),e.preventDefault())}),[r]);return c.createElement(bF,{onDrop:i,onDragOver:s},t)};const _F=function(e,t,n,r){const a=((e,t,n)=>{const r=4*(Math.floor(t)*n+Math.floor(e));return[r,r+1,r+2,r+3]})(t,n,r),[o,l,i,s]=a;return{r:e[o],g:e[l],b:e[i],a:e[s]/255}},vF=200,wF=vF/7,TF=(0,p.default)(ZC).withConfig({displayName:"eyedropperLayer__EyedropperBackground",componentId:"sc-nf74gq-0"})(["background:",";cursor:not-allowed;z-index:2;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),SF=(0,p.default)(rI).withConfig({displayName:"eyedropperLayer__DisplayPageArea",componentId:"sc-nf74gq-1"})(["position:absolute;"]),CF=p.default.div.withConfig({displayName:"eyedropperLayer__EyedropperCanvas",componentId:"sc-nf74gq-2"})(["background:transparent;border-radius:5px;position:absolute;z-index:2;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"]),IF=p.default.div.withConfig({displayName:"eyedropperLayer__ColorInfo",componentId:"sc-nf74gq-3"})(["text-transform:uppercase;margin-top:30px;padding:9px;min-width:102px;text-align:center;"]),AF=p.default.div.withConfig({displayName:"eyedropperLayer__Circle",componentId:"sc-nf74gq-4"})(["transform:translateY(20px);background:",";border:2px solid black;border-radius:50%;overflow:hidden;width:","px;height:","px;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),198,vF),xF=p.default.div.withConfig({displayName:"eyedropperLayer__Magnifier",componentId:"sc-nf74gq-5"})(["position:absolute;top:0;left:0;transform:translateY(-2000px);pointer-events:none;"]),kF=p.default.div.withConfig({displayName:"eyedropperLayer__Center",componentId:"sc-nf74gq-6"})(["position:absolute;top:0;left:0;right:0;bottom:0;z-index:3;background:",";cursor:not-allowed;display:flex;justify-content:center;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),OF=p.default.img.withConfig({displayName:"eyedropperLayer__CanvasImage",componentId:"sc-nf74gq-7"})(["width:100%;"]);const NF=function EyedropperLayer(){const{fullbleedContainer:e,isEyedropperActive:t,eyedropperCallback:n,eyedropperImg:r,eyedropperPixelData:a,setIsEyedropperActive:o,setEyedropperImg:l,setEyedropperPixelData:i}=xs((e=>{let{state:{fullbleedContainer:t,isEyedropperActive:n,eyedropperCallback:r,eyedropperImg:a,eyedropperPixelData:o},actions:{setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}}=e;return{fullbleedContainer:t,isEyedropperActive:n,eyedropperCallback:r,eyedropperImg:a,eyedropperPixelData:o,setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}})),{pageWidth:s}=Zi((e=>{let{state:{pageWidth:t}}=e;return{pageWidth:t}})),d=s/ae.FULLBLEED_RATIO,p=r,m=(0,u.useRef)(),f=(0,u.useRef)(),g=(0,u.useRef)(),h=(0,u.useRef)(),E=(0,u.useRef)(),b=()=>{o(!1),l(null),i(null)};return(0,u.useFocusOut)(E,b,[t,p]),(0,tr.useGlobalKeyDownEffect)("esc",b),t&&!p?c.createElement(c.Fragment,null,c.createElement(kF,{onClick:b},c.createElement(Jp.default,null))):t&&p?c.createElement(TF,{"data-testid":"eyedropperLayer",onMouseMove:t=>{const{left:n,top:r,width:o,height:l}=e.getBoundingClientRect(),i=(t.clientX-n)*(s/o),c=(t.clientY-r)*(d/l);if(i<0||c<0||i>o||c>l)return void(g.current.style.display="none");g.current.style.display="block",g.current.style.transform=`translate(${i-100}px, ${c}px)`,function(e,t){const n=f.current;if(n){const r=n.getContext("2d");r.imageSmoothingEnabled=!1,r.mozImageSmoothingEnabled=!1,r.webkitImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.clearRect(0,0,vF,vF),r.drawImage(m.current,Math.round(e-3.5),Math.round(t-3.5),7,7,0,0,vF,vF),r.beginPath(),r.rect(Math.round(100)-14.285714285714286,Math.round(100)-14.285714285714286,wF,wF),r.stroke()}}(i,c);const u=_F(a,i,c,o),{r:p,g:E,b,a:y}=u,_=(0,Xe.rgba)(p,E,b,y);h.current.style.background=`rgba(${p},${E},${b},${y})`,h.current.style.color=(0,Xe.readableColor)(_,"#333","#EDEDED",!1),h.current.innerText=_}},c.createElement(SF,{withSafezone:!1,showOverflow:!0},c.createElement(CF,{ref:E,onClick:t=>{const{left:r,top:o,width:l,height:i}=e.getBoundingClientRect(),c=(t.clientX-r)*(s/l),u=(t.clientY-o)*(d/i),p=_F(a,c,u,s);n(p)}},c.createElement(OF,{ref:m,src:p,alt:""}),c.createElement(xF,{ref:g},c.createElement(AF,null,c.createElement("canvas",{ref:f,width:vF,height:vF})),c.createElement(IF,{ref:h}))))):null};var PF,RF,MF=n(52589);function LF(){return LF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LF.apply(this,arguments)}const SvgMedia=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",LF({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,PF||(PF=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 13.451H13.004v10.441h.264l2.048-3.327a1.5 1.5 0 0 1 2.287-.323l.242.22a.5.5 0 0 0 .758-.1l1.598-2.5a1.5 1.5 0 0 1 2.623.176L25 22.712v-9.26zm0 11.441c.066 0 .13-.006.191-.018h.031a.5.5 0 0 0 .398-.197.998.998 0 0 0 .38-.785v-10.44a1 1 0 0 0-1-1H13.004a1 1 0 0 0-1 1v10.44a1 1 0 0 0 1 1H25zm-3.082-6.432a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414zm-7.081-2.121a1.055 1.055 0 1 1 2.11 0 1.055 1.055 0 0 1-2.11 0zm1.055-2.055a2.055 2.055 0 1 0 0 4.11 2.055 2.055 0 0 0 0-4.11z",fill:"currentColor"})),RF||(RF=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.004 6.11a1 1 0 0 0-1 1v9.038a1 1 0 0 0 1 1h3v-5.697a1 1 0 0 1 1-1h9V7.11a1 1 0 0 0-1-1h-12zm1.524 1.785H7.047v1.48h1.48v-1.48zm8.886 0h1.48v1.48h-1.48v-1.48zm-8.886 2.96H7.047v1.481h1.48v-1.48zm0 2.961H7.047v1.481h1.48v-1.48z",fill:"currentColor"})))},DF=(0,c.memo)(SvgMedia),BF=e=>{if(!(1===e.length))return!1;if(!(1===e[0].elements?.length))return!1;if(!e[0].elements[0].isDefaultBackground)return!1;const t=e[0].pageAttachment?.url;if(t)return!1;return!!(0,u.shallowEqual)(A.DEFAULT_PAGE_BACKGROUND_COLOR.color,e[0].backgroundColor.color)},FF=(0,p.default)(rI).withConfig({displayName:"emptyStateLayer__DisplayPageArea",componentId:"sc-1ypjr32-0"})(["position:absolute;z-index:1;"]),HF=p.default.div.withConfig({displayName:"emptyStateLayer__EmptyStateMessage",componentId:"sc-1ypjr32-1"})(["display:flex;flex-direction:column;align-items:center;padding:20px;text-align:center;svg{pointer-events:none;}p{margin-top:14px;}"]),UF=(0,p.default)(m.Button).withConfig({displayName:"emptyStateLayer__StyledButton",componentId:"sc-1ypjr32-2"})(["pointer-events:initial;"]);const zF=function EmptyStateLayer(){const{isRTL:e}=Y(),{isMenuOpen:t,onOpenMenu:n}=oc((e=>{let{isMenuOpen:t,onOpenMenu:n}=e;return{isMenuOpen:t,onOpenMenu:n}})),{pages:r}=Sa((e=>{let{state:{pages:t}}=e;return{pages:t}})),{isAnythingTransforming:a}=(0,C.useTransform)((e=>({isAnythingTransforming:e.state.isAnythingTransforming})));return!BF(r)||a?null:c.createElement(ZC,{onContextMenu:n,pointerEvents:"none","aria-label":(0,d.__)("Empty state layer","web-stories")},c.createElement(FF,{withSafezone:!1},c.createElement(HF,null,c.createElement(UF,{type:f.BUTTON_TYPES.SECONDARY,variant:f.BUTTON_VARIANTS.CIRCLE,onClick:t=>{const r=t.target.getBoundingClientRect();t.clientX=r.left-(e?-1:1)*MF.CONTEXT_MENU_MIN_WIDTH/2+r.width/2;t.clientY=r.top-132+r.height,n(t)},"aria-haspopup":"true","aria-label":(0,d.__)("Add content","web-stories"),"aria-describedby":"emptystate-message","aria-expanded":t},c.createElement(DF,null)),c.createElement(p.ThemeProvider,{theme:{...g.theme,colors:h.light}},c.createElement(Ke.Text,{id:"emptystate-message",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add an image, video or template to get started","web-stories"))))))},GF=p.default.section.attrs({"aria-label":(0,d.__)("Canvas","web-stories"),"data-fix-caret":!0}).withConfig({displayName:"canvasLayout__Background",componentId:"sc-1ciyn0c-0"})(["background-color:",";width:100%;height:100%;position:relative;user-select:none;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));const jF=(0,u.memo)((function CanvasLayout(e){let{header:t,footer:n}=e;const r=ks(Cs),{setCanvasContainer:a}=xs((e=>({setCanvasContainer:e.actions.setCanvasContainer}))),o=(0,u.useRef)(null),l=(0,u.useCombinedRefs)(o,a,r);!function(e){const{setWorkspaceSize:t}=Zi((e=>{let{actions:{setWorkspaceSize:t}}=e;return{setWorkspaceSize:t}})),n=BC();(0,u.useResizeEffect)(e,(e=>{let{width:r,height:a}=e;t({width:r,height:a,availableHeight:a-64-16-n-16})}),[t,n])}(o);const i=function(){const{pageWidth:e,pageHeight:t,pagePadding:n,viewportWidth:r,viewportHeight:a,hasPageNavigation:o,hasVerticalOverflow:l,hasHorizontalOverflow:i,scrollLeft:s,scrollTop:c}=Zi((e=>{let{state:{pageWidth:t,pageHeight:n,pagePadding:r,viewportWidth:a,viewportHeight:o,hasPageNavigation:l,hasVerticalOverflow:i,hasHorizontalOverflow:s,scrollLeft:c,scrollTop:d}}=e;return{pageWidth:t,pageHeight:n,pagePadding:r,viewportWidth:a,viewportHeight:o,hasPageNavigation:l,hasVerticalOverflow:i,hasHorizontalOverflow:s,scrollLeft:c,scrollTop:d}})),d=e/ae.FULLBLEED_RATIO;return{"--page-nav-width":`${o?zC:0}px`,"--page-nav-gap":(o?20:0)+"px","--page-width-px":`${e}px`,"--page-height-px":`${t}px`,"--page-padding-px":`${n}px`,"--fullbleed-height-px":`${d}px`,"--viewport-width-px":`${r}px`,"--viewport-height-px":`${a}px`,"--overflow-x":i?"scroll":"visible","--overflow-y":l?"scroll":"visible","--scroll-left-px":-s+"px","--scroll-top-px":-c+"px"}}(),{pageWidth:s,pageHeight:d}=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),m=(0,S.useFeature)("floatingMenu"),f=0!==s&&0!==d;return c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(GF,{ref:l,style:i},c.createElement(EF,null,c.createElement(yF,null,c.createElement(gF,null,f&&c.createElement(rA,null),f&&c.createElement(MA,null),c.createElement(cF,{header:t,footer:n})),c.createElement(CI,null),c.createElement(NF,null),c.createElement(zF,null),m&&c.createElement(cC,null)))))}));const YF=function Canvas(e){let{header:t,footer:n}=e;return c.createElement(jF,{header:t,footer:n})},ZF=24;const WF=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=as(),n=Gc(),{setSelectedElementsById:r}=Sa((e=>{let{actions:{setSelectedElementsById:t}}=e;return{setSelectedElementsById:t}})),a=(0,u.useBatchingCallback)((async function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const l=(0,Sr.getHTMLFormatters)(),{setColor:i}=l,s=[],c=a.some((e=>e.content?.includes("color:")));let d=[],u=null;const p={r:255,g:255,b:255},m={r:0,g:0,b:0},f={...p,a:.3},g={...m,a:.3};let h,E,b;if(o&&!c){d=await Promise.all(a.map((e=>"text"===e.type?n(e):null))),u=d.find((e=>e));const e=d.every((e=>null===e||e.color?.r===u.color?.r&&e.color?.g===u.color?.g&&e.color?.b===u.color?.b&&e.color?.a===u.color?.a));E=d.reduce(((e,t)=>t?.backgroundColor?e+1:e),0);const r=d.reduce(((e,t)=>0===t?.backgroundColor?.r&&0===t?.backgroundColor?.g&&0===t?.backgroundColor?.b?e+1:e),0);if(h=E-r>0?g:f,b=E>0||!1===e,b){const{textSetHeight:e,textSetWidth:n}=a[0],r=e=>Math.min.apply(null,a.map((t=>t[e]))),o=r("x"),l=r("y"),i={x:o-ZF,y:l-ZF,width:n+48,height:e+48,backgroundColor:{color:h},type:"shape"};s.push(t(A.ELEMENT_TYPES.SHAPE,i))}}a.forEach(((e,n)=>{const r=gn(e,["id","normalizedOffsetX","normalizedOffsetY","textSetWidth","textSetHeight"]);if(o&&!c){const t=0===h.r?p:m,a=b?{color:t}:d[n];"text"===e.type&&a.color&&(r.content=i(r.content,a)),"shape"===e.type&&u.color&&(e.border?r.border.color=u:r.backgroundColor=u)}s.push(t(e.type,r))})),r({elementIds:s.map((e=>{let{id:t}=e;return t}))})}),[n,e,t,r]),o=(0,u.useCallback)(((e,t)=>{let{offsetX:n,offsetY:r}=t;if(!e.length)return;const o=e.map((e=>{const t=e.normalizedOffsetX+n,a=e.normalizedOffsetY+r,{width:o,height:l}=e;return t>ae.PAGE_WIDTH||t+o<0||a>ae.FULLBLEED_HEIGHT||a+l<-ae.DANGER_ZONE_HEIGHT?null:{...e,x:t,y:a}})).filter((e=>e));a(o,!1)}),[a]);return{insertTextSet:a,insertTextSetByOffset:o}};function VF(){return VF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VF.apply(this,arguments)}const $F=p.default.div.withConfig({displayName:"libraryMoveable__TargetBox",componentId:"sc-jgbz52-0"})(["position:absolute;width:100%;height:100%;top:0;z-index:1;cursor:pointer;"]);const qF=function LibraryMoveable(e){let{type:t,elementProps:n={},handleDrag:r,handleDragEnd:a,onClick:o=Ft,cloneElement:l,cloneProps:i,elements:s=[],active:d=!1}=e;const p=l,[m,f]=(0,u.useState)(!1),[g,h]=(0,u.useState)(!1),[E,b]=(0,u.useState)(!1),y=(0,u.useRef)(null),_=(0,u.useRef)(null),v=(0,u.useRef)(null),w=(0,u.useRef)(null),T=(0,u.useRef)(null),S=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),{setZoomSetting:A}=Zi((e=>{let{actions:{setZoomSetting:t}}=e;return{setZoomSetting:t}})),x=as(),{backgroundElement:k}=Sa((e=>({backgroundElement:e.state.currentPage?.elements?.[0]??{}}))),{fullbleedContainer:O,nodesById:N,pageContainer:P}=xs((e=>({fullbleedContainer:e.state.fullbleedContainer,pageContainer:e.state.pageContainer,nodesById:e.state.nodesById}))),{activeDropTargetId:R,setDraggingResource:M}=Hi((e=>{let{state:{activeDropTargetId:t},actions:{setDraggingResource:n}}=e;return{activeDropTargetId:t,setDraggingResource:n}})),{clearTransforms:L,pushTransform:D}=(0,C.useTransform)((e=>({clearTransforms:e.actions.clearTransforms,pushTransform:e.actions.pushTransform}))),B={translate:[0,0]},{insertTextSetByOffset:F}=WF(),H=(0,u.useRef)({}),U=(0,u.useCallback)((()=>{_.current.style.transform=null,y.current.style.transform=null,y.current.style.opacity=0,f(!1),L(),M(null)}),[M,L]);(0,tr.useKeyDownEffect)(m?document.body:{current:null},"esc",(()=>{h(!0),U()}),[m,U]);const z=(0,u.useCallback)((()=>{let e=0,t=0;for(let n=w.current;n;n=n.offsetParent)e+=n.offsetLeft,t+=n.offsetTop;return{offsetX:e,offsetY:t}}),[w]);(0,s_.default)({node:_.current,eventData:{...i_.TRACKING_EVENTS.INSERT_ELEMENT,label:t},eventType:"pointerdown"});const{offsetX:G}=z(),j=lI({isDragging:!0,canSnap:!0,otherNodes:Object.values(gn(N,[k.id])),snappingOffsetX:G});return c.createElement(c.Fragment,null,c.createElement($F,{ref:_,onPointerOver:()=>b(!0),onPointerOut:()=>b(!1)}),(m||d||E)&&c.createElement(c.Fragment,null,c.createElement(I.InOverlay,{ref:w,zIndex:1,pointerEvents:"none",render:()=>c.createElement(p,VF({ref:y},i))}),c.createElement(I.Moveable,VF({ref:T,className:"default-moveable hide-handles",target:_.current,edge:!0,draggable:!0,origin:!1,pinchable:!0,onDragStart:e=>{let{set:t,inputEvent:n}=e;n.stopPropagation(),h(!1),t(B.translate),f(!0),(e=>{const{timeStamp:t,clientX:n,clientY:r}=e;H.current={timeStamp:t,clientX:n,clientY:r}})(n),A(Ae.FIT);const{offsetX:r,offsetY:a}=z(),o=_.current.getBoundingClientRect();v.current={width:o.width,height:o.height},_.current.style.width=`${i.width}px`,_.current.style.height=`${i.height}px`;const l=o.left-r,s=o.top-a;y.current.style.left=`${l}px`,y.current.style.top=`${s}px`,T.current&&T.current.updateRect()},onDrag:e=>{let{beforeTranslate:t,inputEvent:n}=e;if(D(null,{drag:t}),g)return!1;B.translate=t,y.current&&(0,I.areEventsDragging)(H.current,n)&&(1===y.current.style.opacity||R?R&&(y.current.style.opacity=0):y.current.style.opacity=1,y.current.style.transform=`translate(${t[0]}px, ${t[1]}px)`,_.current.style.transform=`translate(${t[0]}px, ${t[1]}px)`),r?.(n)},onDragEnd:e=>{let{inputEvent:r}=e;if(g)return!1;if(_.current.style.width=`${v.current.width}px`,_.current.style.height=`${v.current.height}px`,!(0,I.areEventsDragging)(H.current,r))return U(),o(),!1;if(R&&a)a();else if(!cI(y.current,O)){const{x:e,y:r,width:a,height:o}=y.current.getBoundingClientRect(),{x:l,y:i}=P.getBoundingClientRect();"textSet"===t?F(s,{offsetX:(0,Pr.editorToDataX)(e-l,S.width),offsetY:(0,Pr.editorToDataY)(r-i,S.height)}):x(t,{...n,x:(0,Pr.editorToDataX)(e-l,S.width),y:(0,Pr.editorToDataY)(r-i,S.height),width:(0,Pr.editorToDataX)(a,S.width),height:(0,Pr.editorToDataY)(o,S.height)})}U()}},j))))};var XF;function KF(){return KF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KF.apply(this,arguments)}const SvgPlusFilledSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",KF({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,XF||(XF=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4Z",fill:"currentColor"})))},QF=(0,c.memo)(SvgPlusFilledSmall),JF=p.default.div.withConfig({displayName:"insertionOverlay__IconContainer",componentId:"sc-x3oxxu-0"})(["height:","px;width:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";border-radius:",";pointer-events:none;svg{position:absolute;top:0;left:0;}"],16,16,8,8,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.round})),eH=p.default.div.withConfig({displayName:"insertionOverlay__Scrim",componentId:"sc-x3oxxu-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:",";pointer-events:none;"],(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.black,.5)}));const tH=function InsertionOverlay(e){let{showIcon:t=!0}=e;return c.createElement(eH,null,t&&c.createElement(JF,{role:"presentation"},c.createElement(QF,null)))};function nH(){return nH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nH.apply(this,arguments)}const rH=(0,p.css)(["width:100%;cursor:pointer;transition:0.2s transform,0.15s opacity;border-radius:4px;opacity:0;"]),aH=p.default.img.withConfig({displayName:"innerElement__Image",componentId:"sc-qkk7ov-0"})(["",""],rH),oH=p.default.video.withConfig({displayName:"innerElement__Video",componentId:"sc-qkk7ov-1"})([""," object-fit:cover;",""],rH,(e=>{let{showWithoutDelay:t}=e;return t?"opacity: 1;":""})),lH=p.default.div.withConfig({displayName:"innerElement__DurationWrapper",componentId:"sc-qkk7ov-2"})(["position:absolute;bottom:8px;left:8px;background:",";border-radius:100px;height:18px;padding:0 6px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),iH=p.default.div.withConfig({displayName:"innerElement__MuteWrapper",componentId:"sc-qkk7ov-3"})(["position:absolute;bottom:8px;right:8px;height:24px;width:24px;background:",";color:",";border-radius:100px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),sH=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"innerElement__Duration",componentId:"sc-qkk7ov-4"})(["color:",";display:block;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),cH=p.default.img.withConfig({displayName:"innerElement__CloneImg",componentId:"sc-qkk7ov-5"})(["opacity:0;width:",";height:",";position:absolute;"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));const dH=(0,u.memo)((function InnerElement(e){let{type:t,src:n,resource:r,alt:a,width:o,height:l,onClick:i,onLoad:s=sv.noop,showVideoDetail:d,mediaElement:p,active:m,isMuted:f}=e;const g=(0,u.useRef)(null),h=(0,u.useRef)(null),{handleDrag:E,handleDrop:b}=Hi((e=>{let{state:t,actions:n}=e;return{handleDrag:n.handleDrag,handleDrop:n.handleDrop,dropTargets:t.dropTargets,activeDropTargetId:t.activeDropTargetId}}),((e,t)=>{if(h.current)return!1;if(null===h.current)return h.current=!1,!1;if(e?.dropTargets&&t?.dropTargets){const n=Object.keys(e.dropTargets),r=Object.keys(t.dropTargets);if(n.join()!==r.join())return!1}return e?.activeDropTargetId===t?.activeDropTargetId})),{setDraggingResource:y}=Hi((e=>{let{actions:{setDraggingResource:t}}=e;return{setDraggingResource:t}}));let _;(0,u.useEffect)((()=>{r.poster&&(g.current=r.poster)}),[r.poster]);const{lengthFormatted:v,poster:w,mimeType:T}=r,S=w??g.current,C=S||(0,go.default)(o,r),I={width:o,height:l,alt:a,crossOrigin:"anonymous"},A={...I,onLoad:()=>{p.current&&(p.current.style.opacity=1),s()},loading:"lazy",decoding:"async",draggable:!1},x={...A,onLoad:void 0},k={...A,src:C},O={...I,title:a,alt:null,loop:t===bt.GIF,muted:!0,preload:"metadata",poster:S,showWithoutDelay:m};if(t===bt.IMAGE?(_=c.createElement(aH,nH({key:n},k,{ref:p})),x.src=C):[bt.VIDEO,bt.GIF].includes(t)&&(_=c.createElement(c.Fragment,null,w&&!m?c.createElement(aH,nH({key:n},k,{ref:p})):c.createElement(oH,nH({key:n},O,{ref:p}),t===bt.GIF?r.output.src&&c.createElement("source",{src:r.output.src,type:r.output.mimeType}):c.createElement("source",{src:(0,go.default)(o,r),type:T})),t===bt.VIDEO&&d&&v&&c.createElement(lH,null,c.createElement(sH,null,v)),t===bt.VIDEO&&d&&f&&c.createElement(iH,null,c.createElement(jv,null))),x.src=w),!_)throw new Error("Invalid media element type.");const N=t===bt.IMAGE?C:w;return c.createElement(c.Fragment,null,_,m&&c.createElement(tH,{showIcon:!1}),c.createElement(qF,{active:m,handleDrag:e=>{h.current||(zv.default.set(r.id,{url:C,type:"cached"}),y(r),h.current=!0),E(r,e.clientX,e.clientY)},handleDragEnd:()=>{b(r),h.current=!1},type:r.type,elementProps:{resource:r},onClick:i(N),cloneElement:cH,cloneProps:x}))})),uH=p.default.div.withConfig({displayName:"insertionMenu__DropDownContainer",componentId:"sc-xjd4tf-0"})(["margin-top:10px;min-width:160px;"]),pH=p.default.div.withConfig({displayName:"insertionMenu__MenuContainer",componentId:"sc-xjd4tf-1"})(["z-index:1;"]),mH=(0,p.css)(["min-width:160px;margin-top:0;li{display:block;}"]),fH="insert",gH="addBackground";const hH=function InsertionMenu(e){let{resource:t,display:n,onInsert:r,width:a,index:o,isLocal:l=!1,setParentActive:i=sv.noop,setParentInactive:s=sv.noop}=e;const p=(0,u.useRef)(),[m,f]=(0,u.useState)(!1),g=(0,u.useCallback)((e=>{e.stopPropagation(),f(!0)}),[]),h=(0,u.useCallback)((()=>{f(!1),p.current?.focus(),i()}),[i]),{currentBackgroundId:E,combineElements:b}=Sa((e=>({currentBackgroundId:e.state.currentPage?.elements?.[0]?.id,combineElements:e.actions.combineElements}))),{type:y,poster:_}=t,v=[{group:[{label:["image","gif"].includes(y)?(0,d.__)("Insert image","web-stories"):(0,d.__)("Insert video","web-stories"),value:fH},{label:(0,d.__)("Add as background","web-stories"),value:gH}]}];Xf({ref:p},[],3);const w=rs();(0,tr.useKeyDownEffect)(l?null:p,"tab",w,[w]);const T=(0,u.useMemo)((()=>`list-${(0,he.default)()}`),[]),S=(0,u.useMemo)((()=>`button-${(0,he.default)()}`),[]);return c.createElement(pH,null,c.createElement(j_,{ref:p,onClick:g,"aria-label":(0,d.__)("Open insertion menu","web-stories"),"aria-pressed":m,"aria-haspopup":!0,"aria-expanded":m,"aria-owns":m?T:null,id:S,$display:n,tabIndex:0===o?0:-1},c.createElement(QF,null)),m&&c.createElement(Zp.Popup,{anchor:p,placement:Ed.PLACEMENT.BOTTOM_START,isOpen:m},c.createElement(uH,null,c.createElement(wh.Menu,{parentId:S,listId:T,onMenuItemClick:(e,n)=>{const o=_||(0,go.default)(a,t),l=Pi(t.type,{resource:t});switch(f(!1),n){case fH:r(t,o);break;case gH:b({firstElement:l,secondId:E})}s()},options:v,onDismissMenu:h,hasMenuRole:!0,menuStylesOverride:mH}))))},EH=p.default.div.attrs((e=>({style:{width:e.width+"px",height:e.height+"px",margin:e.margin,backgroundColor:"transparent",color:"inherit",border:"none",padding:0}}))).withConfig({displayName:"mediaElement__Container",componentId:"sc-n7038j-0"})([""]),bH=p.default.div.withConfig({displayName:"mediaElement__InnerContainer",componentId:"sc-n7038j-1"})(["position:relative;display:flex;margin-bottom:10px;background-color:",";"],(e=>{let{theme:t,$baseColor:n}=e;return n||(0,Xe.rgba)(t.colors.standard.black,.3)})),yH=(0,p.default)(iv.Blurhash).withConfig({displayName:"mediaElement__BlurhashContainer",componentId:"sc-n7038j-2"})(["position:absolute !important;top:0;left:0;"]);function _H(e){let{index:t,resource:n,width:r,height:a,margin:o,onInsert:l,providerType:i,canEditMedia:s}=e;const{id:p,src:m,type:f,width:g,height:h,alt:E,isMuted:b,baseColor:y,blurHash:_}=n,{isCurrentResourceProcessing:v,isCurrentResourceUploading:w}=yi((e=>{let{state:t}=e;return{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}})),T=g&&h?g/h:1,S=r||a/T,C=a||S/T,I=(0,u.useRef)(),[A,x]=(0,u.useState)(!0),[k,O]=(0,u.useState)(!1),[N,P]=(0,u.useState)(!1),[R,M]=(0,u.useState)(!1),L=(0,u.useCallback)((()=>O(!0)),[]),D=(0,u.useCallback)((()=>O(!1)),[]),B=(0,u.useCallback)((()=>P(!0)),[]),F=(0,u.useCallback)((()=>P(!1)),[]),H=(0,u.useCallback)((()=>{P(!1),O(!1)}),[]),[U,z]=(0,u.useState)(null),G=(0,u.useRef)(k);G.current=k,(0,u.useEffect)((()=>{if(![bt.VIDEO,bt.GIF].includes(f))return;const e=()=>{null!==U&&(clearTimeout(U),z(null))};if(!N)if(k){if(x(!1),I.current&&null==U){const e=setTimeout((()=>{G.current&&m&&I.current.play().catch((()=>{}))}),600);z(e)}}else x(!0),e(),I.current&&I.current?.pause&&m&&(I.current.pause(),I.current.currentTime=0);return e}),[N,k,f,m,U,z,G]);const j=(0,u.useCallback)((e=>()=>{l(n,e)}),[l,n]),Y=k&&n.attribution?.author?.displayName&&n.attribution?.author?.url&&c.createElement(Lv,{author:n.attribution.author.displayName,url:n.attribution.author.url}),Z=(0,u.useRef)(),W=(0,u.useCallback)((()=>M(!0)),[]),V=!R&&!k;return c.createElement(EH,{ref:Z,"data-testid":`mediaElement-${f}`,"data-id":p,className:"mediaElement",width:S,height:C,margin:o,onPointerEnter:L,onFocus:L,onPointerLeave:D,onBlur:D,tabIndex:"-1"},c.createElement(bH,{$baseColor:V&&y},c.createElement(dH,{type:f,src:m,mediaElement:I,resource:n,alt:E,isMuted:b,width:S,height:C,onClick:j,onLoad:W,showVideoDetail:A,active:k}),Y,V&&_&&c.createElement(yH,{hash:_,width:S,height:C,punch:1}),(!m||v(p)||w(p))&&c.createElement(LoadingBar,{loadingMessage:(0,d.__)("Uploading media…","web-stories")}),c.createElement(hH,{resource:n,display:k,onInsert:l,width:S,index:t,isLocal:"local"===i,setParentActive:L,setParentInactive:D}),"local"===i&&s&&c.createElement(Pv,{resource:n,display:k,isMenuOpen:N,onMenuOpen:B,onMenuCancelled:F,onMenuSelected:H,setParentActive:L})))}function MediaElement(e){const{isCurrentResourceProcessing:t,isCurrentResourceUploading:n}=yi((e=>{let{state:t}=e;return{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}})),{id:r}=e.resource;return t(r)||n(r)?c.createElement(Tooltip,{title:(0,d.__)("Uploading media…","web-stories")},c.createElement(_H,e)):c.createElement(_H,e)}MediaElement.defaultProps={providerType:"local",canEditMedia:!1};const vH=(0,u.memo)(MediaElement),wH={maxPhotos:2},ContainerRenderer=e=>{let{children:t,containerRef:n}=e;return c.createElement(V_,{ref:n},t)},RowRenderer=e=>{let{children:t}=e;return t};function MediaGallery(e){let{resources:t,onInsert:n,providerType:r,canEditMedia:a}=e;const o=t.map(((e,t)=>({index:t,key:e.id,src:e.src,width:e.width,height:e.height}))),l=(0,u.useCallback)((e=>{let{photo:o,layout:l}=e;return c.createElement(vH,{key:o.key,index:o.index,margin:"0px 0px 8px 0px",resource:t[o.index],width:l.width,height:l.height,onInsert:n,providerType:r,canEditMedia:a})}),[r,n,t,a]);return c.createElement("div",null,c.createElement(ev.default,{layout:"rows",photos:o,renderPhoto:l,renderRowContainer:RowRenderer,renderContainer:ContainerRenderer,targetRowHeight:110,rowConstraints:wH,spacing:8}))}MediaGallery.defaultProps={canEditMedia:!1};const TH=MediaGallery,SH=(0,p.default)(Ke.Text).withConfig({displayName:"paginatedMediaGallery__StyledText",componentId:"sc-1xn8t7i-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function PaginatedMediaGallery(e){let{providerType:t,resources:n,searchTerm:r,selectedCategoryId:a,isMediaLoading:o,isMediaLoaded:l,hasMore:i,onInsert:s,setNextPage:p,canEditMedia:m}=e;const f=(0,u.useRef)(),g=(0,u.useCallback)((()=>f.current.clientHeight===f.current.scrollHeight?p():()=>{}),[p]),h=(0,u.useDebouncedCallback)(g,500),E=(0,u.useCallback)((()=>{const e=f.current;if(!n.length||!e||0===e.clientHeight||!i||!l||o)return;if(e.clientHeight===e.scrollHeight)return void h();e.scrollHeight-e.scrollTop<=e.clientHeight+300&&p()}),[n.length,i,l,o,h,p]);(0,u.useEffect)((()=>{f.current?.scrollTo?.(0,0)}),[r,a]);const b=(0,u.useDebouncedCallback)(E,500);(0,u.useLayoutEffect)((()=>{!async function(){var e;await(e=200,new Promise((t=>setTimeout(t,e)))),E()}()}),[E]),(0,u.useEffect)((()=>{const e=f.current;if(e)return e.addEventListener("scroll",b),window.addEventListener("resize",b),()=>{e.removeEventListener("scroll",b),window.removeEventListener("resize",b)}}),[b]);const y=l&&0===n.length?c.createElement(K_,null,(0,d.__)("No media found.","web-stories")):c.createElement("div",{style:{marginBottom:15}},c.createElement(TH,{providerType:t,canEditMedia:m,resources:n,onInsert:s})),[_,v]=(0,u.useState)(!1);(0,u.useEffect)((()=>{if(o&&i){const e=setTimeout((()=>{v(o)}),1e3);return()=>clearTimeout(e)}v(!1)}),[o,i]);const w="local"!==t&&vt[t].attributionComponent&&vt[t].attributionComponent();return c.createElement(c.Fragment,null,c.createElement($_,{"data-testid":"media-gallery-container",ref:f},c.createElement(q_,null,y)),_&&c.createElement(X_,{"data-testid":"loading-pill"},c.createElement(SH,{forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Loading…","web-stories"))),!_&&w)}PaginatedMediaGallery.defaultProps={canEditMedia:!1};const CH=PaginatedMediaGallery,IH={INCREMENTAL_SEARCH_DEBOUNCE_MEDIA:"incrementalSearchDebounceMedia"},AH=(0,u.createContext)({tabs:{}});const xH=function(e){return(0,u.useContextSelector)(AH,e??u.identity)};const kH=function(){const{insertElement:e}=xH((e=>({insertElement:e.actions.insertElement}))),t=(0,u.useCallback)(((t,n)=>{zv.default.set(t.id,{url:n,type:"cached"}),e(t.type,{resource:t})}),[e]),n=(0,u.useCallback)((e=>{t(e,e.sizes?.medium?.source_url||e.src)}),[t]);return{insertMediaElement:t,onSelect:n}},OH=U_("media"),NH=yo.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;const PH=function VideoOptimizationDialog(){const{isTranscoding:e}=yi((e=>{let{state:{isTranscoding:t}}=e;return{isTranscoding:t}})),[t,n]=(0,u.useState)(Boolean(_o.getItemByKey(NH))),{updateCurrentUser:r}=xa((e=>{let{actions:t}=e;return{updateCurrentUser:t.updateCurrentUser}})),a=(0,u.useCallback)((e=>{n(e),_o.setItemByKey(NH,e)}),[]),o=(0,u.useCallback)((()=>{r({mediaOptimization:!1}),a(!0)}),[r,a]),l=(0,u.useCallback)((()=>{a(!0)}),[a]),i=(0,d.__)("Video optimization in progress","web-stories"),s=(0,d.__)("This process can’t be stopped once it begins. Optimization is automatically enabled for all videos to ensure smooth playback. You can disable optimization any time in Settings.","web-stories");return c.createElement(y,{isOpen:e&&!t,onClose:l,title:i,onSecondary:o,secondaryText:(0,d.__)("Disable optimization","web-stories"),onPrimary:l,primaryText:(0,d.__)("Sounds good","web-stories")},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s))};var RH;function MH(){return MH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MH.apply(this,arguments)}const SvgLink=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",MH({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,RH||(RH=c.createElement("path",{d:"M12.364 15.343a.5.5 0 0 0-.707-.707l.707.707Zm3.535-.707a.5.5 0 0 0-.707.707l.707-.707Zm-.353 4.596-3.536 3.536.707.707 3.536-3.536-.707-.707Zm-7.071 0 1.768-1.767-.707-.708-1.768 1.768.707.707Zm1.768-1.767 2.121-2.122-.707-.707-2.121 2.121.707.707Zm6.01-2.475-.354-.354-.707.707.354.354.707-.707Zm-4.243 7.778a2.5 2.5 0 0 1-3.535 0l-.707.707a3.5 3.5 0 0 0 4.95 0l-.708-.707Zm4.243-2.829a3.5 3.5 0 0 0 0-4.95l-.707.708a2.5 2.5 0 0 1 0 3.535l.707.707Zm-7.778 2.829a2.5 2.5 0 0 1 0-3.536l-.707-.707a3.5 3.5 0 0 0 0 4.95l.707-.707ZM18.02 16.757a.5.5 0 1 0 .708.707l-.707-.707Zm-3.535.707a.5.5 0 1 0 .707-.707l-.707.707Zm.354-4.596 3.535-3.535-.707-.707-3.535 3.535.707.707Zm7.07 0-1.767 1.768.707.707 1.768-1.768-.707-.707Zm-1.767 1.768-2.121 2.121.707.707 2.121-2.12-.707-.708Zm-6.01 2.475.353.354.707-.708-.353-.353-.707.707Zm4.242-7.778a2.5 2.5 0 0 1 3.536 0l.707-.707a3.5 3.5 0 0 0-4.95 0l.707.707Zm-4.242 2.828a3.5 3.5 0 0 0 0 4.95l.707-.707a2.5 2.5 0 0 1 0-3.536l-.707-.707Zm7.778-2.828a2.5 2.5 0 0 1 0 3.535l.707.707a3.5 3.5 0 0 0 0-4.95l-.707.708Z",fill:"currentColor"})))},LH=(0,c.memo)(SvgLink);const DH=async function(e){const{src:t,mimeType:n,width:r,height:a,isMuted:o,length:l,lengthFormatted:i,...s}=e,c=ne(n);if(!["image","video"].includes(c))throw new Error("Invalid media type.");const d=r&&a,u={};if("video"===c&&(!d||null===o||null===l||null===i)){const e=await ie(t);await ue(e),u.width=e.videoWidth,u.height=e.videoHeight;const n=de(e);u.length=n.length,u.lengthFormatted=n.lengthFormatted,u.isMuted=!pe(e)}if("image"===c&&!d){const e=await te(t);u.width=e.width,u.height=e.height}return re({type:c,width:r,height:a,isMuted:o,length:l,lengthFormatted:i,src:t,isExternal:!0,mimeType:n,...s,...u})};function BH(e){try{return"/"!==new URL(e).pathname}catch{return!1}}function FH(e,t){switch(e){case"rest_invalid_param":case"rest_invalid_url":return(0,d.__)("Invalid link.","web-stories");case"rest_invalid_ext":return(0,qe.default)(
/* translators: %s is the description with allowed file extensions. */
(0,d.__)("Invalid link. %s","web-stories"),t);default:return(0,d.__)("Media failed to load. Please ensure the link is valid and the site allows linking from external sites.","web-stories")}}const HH=function(e){let{link:t,setLink:n,setErrorMsg:r,onClose:a}=e;const{insertElement:o}=xH((e=>({insertElement:e.actions.insertElement}))),{capabilities:{hasUploadMediaAction:l},allowedMimeTypes:{image:i,vector:s,video:c}}=Y(),p=(0,u.useMemo)((()=>[...i,...s,...c]),[i,s,c]),m=(0,u.useMemo)((()=>p.map((e=>Mt(e))).flat()),[p]),{actions:{getHotlinkInfo:f}}=X(),{updateBaseColor:g}=xo({}),[h,E]=(0,u.useState)(!1),{uploadVideoPoster:b}=Ca({}),{getProxiedUrl:y,checkResourceAccess:_}=Ao(),v=(0,u.useCallback)((async(e,i)=>{const{ext:s,type:c,mimeType:d,fileName:u}=e,p="video"===c;try{const e=i?y({needsProxy:i},t):t,m={id:(0,he.default)(),src:e,mimeType:d,needsProxy:i,alt:u};if(p){const t=await ie(e);await ue(t),m.width=t.videoWidth,m.height=t.videoHeight;const n=de(t);if(m.length=n.length,m.lengthFormatted=n.lengthFormatted,m.isMuted=!pe(t),l)try{const e=Ye(u.replace(`.${s}`,"")),n=await ge(t),r=await b(0,e,n);m.poster=r.poster,m.posterId=r.posterId}catch{}}const f=await DH(m);f.src=t,o(c,{resource:f}),g(f),r(null),n(""),a()}catch(e){r(FH())}finally{E(!1)}}),[l,o,t,a,r,n,b,y,g]),w=(0,u.useCallback)((async()=>{if(t)if(BH(t)){E(!0);try{const e=await f(t),n=await _(t);(0,L.trackEvent)("hotlink_media",{event_label:t,file_size:e.fileSize,file_type:e.mimeType,needs_proxy:n}),await v(e,n)}catch(e){E(!1),(0,L.trackError)("hotlink_media",e?.message);let t=(0,d.__)("No file types are currently supported.","web-stories");m.length&&(t=(0,qe.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can insert %s.","web-stories"),(0,Ot.default)(m))),r(FH(e.code,t))}}else r((0,d.__)("Invalid link.","web-stories"))}),[m,t,f,r,v,_]);return{onInsert:w,isInserting:h,setIsInserting:E}},UH=p.default.form.withConfig({displayName:"hotlinkModal__InputWrapper",componentId:"sc-1tbxkw-0"})(["margin:16px 4px;width:470px;height:100px;"]);const zH=function HotlinkModal(e){let{isOpen:t,onClose:n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o}}=Y(),[l,i]=(0,u.useState)(!1),s=(0,u.useRef)(null),p=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]),m=(0,u.useMemo)((()=>p.map((e=>Mt(e))).flat()),[p]);(0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{t&&s.current&&s.current.focus()}));return()=>clearTimeout(e)}),[t,s]);let f=(0,d.__)("No file types are currently supported.","web-stories");m.length&&(f=(0,qe.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can insert %s.","web-stories"),(0,Ot.default)(m)));const[g,h]=(0,u.useState)(""),{onInsert:E,isInserting:b,setIsInserting:_}=HH({link:g,setLink:h,errorMsg:l,setErrorMsg:i,onClose:n}),v=l||!g||b,w=(0,u.useCallback)((()=>{if(g?.length>0){const e=Lr(g);h(e),BH(e)||i((0,d.__)("Invalid link.","web-stories"))}}),[g]),T=(0,u.useCallback)((e=>{l&&i(null),h(e)}),[h,l]),S=(0,u.useCallback)((e=>{e.preventDefault(),v||E()}),[v,E]),C=b?(0,d.__)("Inserting…","web-stories"):(0,d.__)("Insert","web-stories");return c.createElement(y,{onClose:()=>{n(),h(""),i(!1),_(!1)},isOpen:t,title:(0,d.__)("Insert external image or video","web-stories"),onPrimary:()=>E(),primaryText:C,secondaryText:(0,d.__)("Cancel","web-stories"),primaryRest:{disabled:v}},c.createElement(UH,{onSubmit:S},c.createElement(_p,{ref:s,onChange:e=>{let{target:{value:t}}=e;return T(t)},value:g,hint:l?.length?l:f,hasError:Boolean(l?.length),onBlur:w,label:(0,d.__)("URL","web-stories"),type:"url",required:!0})))},GH=(0,p.default)(m.Button).withConfig({displayName:"hotlink__Button",componentId:"sc-1njsgyy-0"})(["",";margin:0 10px 0 0;"],Mu);const jH=function Hotlink(){const[e,t]=(0,u.useState)(!1),n=(0,d.__)("Insert by link","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:n},c.createElement(GH,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>t(!0),"aria-label":n},c.createElement(LH,null))),c.createElement(zH,{isOpen:e,onClose:()=>t(!1)}))};var YH,ZH;function WH(){return WH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WH.apply(this,arguments)}const SvgCamera=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",WH({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,YH||(YH=c.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),ZH||(ZH=c.createElement("path",{d:"M15 8v8H5V8h10m1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1z"})))},VH=(0,c.memo)(SvgCamera);var $H=n(61887);function qH(){return qH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qH.apply(this,arguments)}const XH=p.default.div.withConfig({displayName:"toggle__Wrapper",componentId:"sc-29rl44-0"})(["padding:","px;"],4),KH=p.default.div.withConfig({displayName:"toggle__Background",componentId:"sc-29rl44-1"})((e=>{let{theme:t}=e;return(0,p.css)(["position:absolute;top:-","px;left:-","px;height:","px;width:","px;background-color:transparent;border-radius:",";border:","px solid ",";pointer-events:none;transition:all 0.3s;"],1,1,20,44,t.borders.radius.x_large,1,t.colors.border.defaultNormal)})),QH=p.default.span.withConfig({displayName:"toggle__Circle",componentId:"sc-29rl44-2"})((e=>{let{theme:t}=e;return(0,p.css)(["pointer-events:none;:after{content:'';position:absolute;top:","px;left:","px;height:","px;width:","px;background-color:",";border-radius:",";cursor:pointer;transition:background-color 0.3s,border-color 0.3s,left 0.15s;}"],-5,-5,28,28,t.colors.fg.secondary,t.borders.radius.round)})),JH=p.default.div.withConfig({displayName:"toggle__IconContainer",componentId:"sc-29rl44-3"})((e=>{let{theme:t}=e;return(0,p.css)(["position:absolute;width:","px;top:","px;left:","px;z-index:1;opacity:0;transition:opacity 0.15s;pointer-events:none;svg{color:",";}"],32,-6,19,t.colors.standard.white)})),eU=p.default.div.withConfig({displayName:"toggle__ToggleContainer",componentId:"sc-29rl44-4"})((e=>{let{theme:t}=e;return(0,p.css)(["position:relative;height:","px;width:","px;background-color:transparent;border-radius:",";input[type='checkbox']{position:absolute;top:-","px;left:-","px;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:disabled{cursor:default;~ ","{border-color:",";}:checked ~ ","{background-color:",";border-color:",";}~ ",":after{background-color:",";}:checked ~ ",":after{background-color:",";}~ "," svg{color:",";}}&.","{~ ","{outline:none;box-shadow:0 0 0 5px ",",0 0 0 7px ",";}}:checked{~ ","{background-color:",";border-color:",";}~ ",":after{left:","px;background-color:",";}~ ","{opacity:1;}}:hover{:not(:disabled) ~ ","{border-color:",";}:checked:not(:disabled) ~ ","{background-color:",";border-color:",";}}:active{~ ","{box-shadow:0 0 0 8px ",";}}}"],20,44,t.borders.radius.x_large,.5,.5,20,44,KH,t.colors.fg.disable,KH,t.colors.fg.disable,t.colors.fg.disable,QH,t.colors.fg.disable,QH,t.colors.bg.secondary,JH,t.colors.fg.disable,KE.FOCUS_VISIBLE_SELECTOR,KH,t.colors.bg.primary,t.colors.border.focus,KH,t.colors.interactiveBg.positivePress,t.colors.interactiveBg.positivePress,QH,21,t.colors.interactiveBg.positiveNormal,JH,KH,t.colors.fg.secondary,KH,t.colors.interactiveBg.positiveHover,t.colors.interactiveBg.positiveHover,KH,t.colors.shadow.active)})),tU=e=>{let{className:t,...n}=e;return c.createElement(XH,{className:t},c.createElement(eU,null,c.createElement("input",qH({type:"checkbox"},n)),c.createElement(KH,null),c.createElement(JH,null,c.createElement($H.default,null)),c.createElement(QH,null)))};var nU=n(91703),rU=n.n(nU);const aU=p.default.video.withConfig({displayName:"modal__Video",componentId:"sc-mu21h6-0"})(["width:100%;height:100%;"]),oU=p.default.div.withConfig({displayName:"modal__VideoWrapper",componentId:"sc-mu21h6-1"})(["width:240px;aspect-ratio:9 / 16;background:#000;margin:0 auto;"]);const lU=function Modal(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useRef)(),[a,o]=(0,u.useState)(null),[l,i]=(0,u.useState)(!0),[s,p]=(0,u.useState)(!0),g=(0,u.useCallback)((e=>{const t=me(e,"test-recording.webm","video/webm");o(t)}),[]),h=os(),{error:E,status:b,mediaBlob:_,stopRecording:v,startRecording:w,liveStream:T,clearMediaStream:S,clearMediaBlob:C}=rU()({recordScreen:!1,blobOptions:{type:"video/webm"},mediaStreamConstraints:{audio:s,video:l},onStop:g}),I=(0,u.useCallback)((()=>{S(),C(),n(),r.current&&(r.current.srcObject=null)}),[C,S,n]),A=(0,u.useCallback)((()=>{h([a]),n()}),[a,h,n]);(0,u.useEffect)((()=>{r.current&&T&&(r.current.srcObject=T)}),[T]);const x="recording"===b,k=(0,u.useMemo)((()=>`toggle_${(0,he.default)()}`),[]),O=(0,u.useMemo)((()=>`toggle_${(0,he.default)()}`),[]),N=(0,d.__)("Insert","web-stories");return c.createElement(y,{onClose:I,isOpen:t,title:(0,d.__)("Record video / audio","web-stories"),onPrimary:A,primaryText:N,secondaryText:(0,d.__)("Cancel","web-stories"),primaryRest:{disabled:"stopped"!==b}},c.createElement(Ke.Text,null,(0,d.__)("Record content for your story using your camera / microphone.","web-stories")),c.createElement(Ke.Text,null,E?`${b} ${E.message}`:b),c.createElement(oU,null,_&&!T&&c.createElement(c.Fragment,null,c.createElement(aU,{src:URL.createObjectURL(_),autoPlay:!0,controls:!0})),!_&&T&&c.createElement(aU,{ref:r,autoPlay:!0})),c.createElement(Ke.Text,{as:"label",htmlFor:k,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Camera","web-stories")),c.createElement(tU,{id:k,"aria-label":(0,d.__)("Enable camera","web-stories"),name:k,checked:l,onChange:()=>i((e=>!e))}),c.createElement(Ke.Text,{as:"label",htmlFor:O,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Microphone","web-stories")),c.createElement(tU,{id:O,"aria-label":(0,d.__)("Enable microphone","web-stories"),name:O,checked:s,onChange:()=>p((e=>!e))}),c.createElement(m.Button,{type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:x?v:w,disabled:!1},x?(0,d.__)("Stop recording","web-stories"):(0,d.__)("Start recording","web-stories")))},iU=(0,p.default)(m.Button).withConfig({displayName:"mediaRecording__Button",componentId:"sc-zpc7g2-0"})(["",";margin:0 10px 0 0;"],Mu),sU=(0,p.default)(VH).withConfig({displayName:"mediaRecording__Camera",componentId:"sc-zpc7g2-1"})(["width:24px !important;height:24px !important;"]);const cU=function MediaRecording(){const[e,t]=(0,u.useState)(!1),n=(0,d.__)("Record audio/video","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:n},c.createElement(iU,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>t(!0),"aria-label":n},c.createElement(sU,null))),c.createElement(lU,{isOpen:e,onClose:()=>t(!1)}))};function dU(){return dU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dU.apply(this,arguments)}const uU=(0,p.default)(m.Button).withConfig({displayName:"mediaPane__Button",componentId:"sc-usipec-0"})(["",";"],Mu),pU=p.default.div.withConfig({displayName:"mediaPane__FilterArea",componentId:"sc-usipec-1"})(["display:flex;justify-content:space-between;margin-top:24px;padding:0 "," 0 ",";"],F_,F_),mU=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"mediaPane__SearchCount",componentId:"sc-usipec-2"})(["display:flex;align-items:center;justify-content:center;flex-shrink:0;"]),fU=p.default.div.withConfig({displayName:"mediaPane__ButtonsWrapper",componentId:"sc-usipec-3"})(["display:flex;flex:1;justify-content:flex-end;"]),gU=Wo,hU=[{value:gU,label:(0,d.__)("All Types","web-stories")},{value:"image",label:(0,d.__)("Images","web-stories")},{value:"video",label:(0,d.__)("Video","web-stories")}];const EU=function MediaPane(e){const{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,setNextPage:i,setMediaType:s,setSearchTerm:p,totalItems:m}=yi((e=>{let{state:{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,totalItems:i},actions:{setNextPage:s,setMediaType:c,setSearchTerm:d}}=e;return{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,totalItems:i,setNextPage:s,setMediaType:c,setSearchTerm:d}})),g=(0,S.useFeature)("mediaRecording"),{capabilities:{hasUploadMediaAction:h}}=Y(),E=l.length>0,b=(0,u.useCallback)(((e,t)=>{s({mediaType:t})}),[s]),{onSelect:y,insertMediaElement:_}=kH();(0,u.useEffect)((()=>{l.length>0&&(0,L.trackEvent)("search",{search_type:"media",search_term:l,search_filter:o})}),[l,o]);const v=(0,S.useFeature)(IH.INCREMENTAL_SEARCH_DEBOUNCE_MEDIA),w=(0,u.useCallback)((e=>c.createElement(uU,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:e,"aria-label":(0,d.__)("Upload","web-stories")},c.createElement(Ky,null))),[]);return c.createElement(Q_,dU({id:OH},e),c.createElement(Z_,null,c.createElement(W_,null,c.createElement(J_,null,c.createElement(I_,{initialValue:l,placeholder:(0,d.__)("Search","web-stories"),onSearch:e=>{const t=e.trim();t!==l&&p({searchTerm:t})},incremental:v})),c.createElement(pU,null,c.createElement(hb,{selectedValue:o?.toString()||gU,onMenuItemClick:b,options:hU,placement:Ed.PLACEMENT.BOTTOM_START}),E&&n.length>0&&c.createElement(mU,null,(0,qe.default)(
/* translators: %d: number of results. */
(0,d._n)("%s result found.","%s results found.",m,"web-stories"),m)),!E&&c.createElement(fU,null,g&&h&&c.createElement(cU,null),c.createElement(jH,null),h&&c.createElement(Tooltip,{title:(0,d.__)("Upload","web-stories")},c.createElement(Kh,{renderButton:w,onInsert:y}))))),a&&!n.length?c.createElement(K_,null,E?(0,d.__)("No results found.","web-stories"):(0,d.__)("No media found.","web-stories")):c.createElement(CH,{providerType:"local",canEditMedia:h,resources:n,isMediaLoading:r,isMediaLoaded:a,hasMore:t,onInsert:_,setNextPage:i,searchTerm:l}),c.createElement(PH,null)))};const bU=function MediaIcon(){return c.createElement(Ky,{title:(0,d.__)("Media Gallery","web-stories")})};const yU=function TermsDialog(){const e=_o.getItemByKey(`${yo.TERMS_MEDIA3P}`),[t,n]=(0,u.useState)(!e),r=(0,u.useCallback)((()=>{n(!1),_o.setItemByKey(`${yo.TERMS_MEDIA3P}`,!0),(0,L.trackEvent)("media3p_terms_acknowledged")}),[]);(0,u.useEffect)((()=>{n(!e)}),[e]);const a=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"click_terms_of_service")}),[]);return e?null:c.createElement(y,{isOpen:t,contentLabel:(0,d.__)("Third party stock content terms","web-stories"),onClose:r,ariaHideApp:!1,onPrimary:r,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:"https://wp.stories.google/docs#Terms",rel:"noreferrer",target:"_blank","aria-label":(0,d.__)("Learn more by visiting Web Stories for WordPress","web-stories"),onClick:a})}},(0,d.__)("Your use of stock content is subject to third party terms. <a>Learn more.</a>","web-stories"))))},_U=U_("media3p");function vU(){return vU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vU.apply(this,arguments)}const wU=(0,p.default)(Ke.Text).withConfig({displayName:"providerTab__StyledText",componentId:"sc-1muzdn0-0"})(["color:inherit;"]),TU=p.default.button.withConfig({displayName:"providerTab__Tab",componentId:"sc-1muzdn0-1"})(["padding:6px 16px;background:none;border:none;color:",";position:relative;cursor:pointer;:hover{color:",";}border-radius:",";",";",""],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.x_large}),Mu,(e=>{let{$isActive:t,theme:n}=e;return t&&(0,p.css)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-17px;left:16px;right:16px;}"],n.colors.border.selection)}));const SU=function ProviderTab(e){let{name:t,isActive:n,...r}=e;return c.createElement(TU,vU({$isActive:n},r),c.createElement(wU,{forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},t))},CU=p.default.div.attrs({role:"tablist"}).withConfig({displayName:"providerTabList__Section",componentId:"sc-19jgogw-0"})(["display:flex;flex-wrap:wrap;margin-top:16px;margin-bottom:16px;padding:0 1em;"]);const IU=function ProviderTabList(e){let{providers:t}=e;const{isRTL:n}=Y(),r=(0,u.useRef)(),{selectedProvider:a,setSelectedProvider:o}=bi((e=>{let{media3p:{state:{selectedProvider:t},actions:{setSelectedProvider:n}}}=e;return{selectedProvider:t,setSelectedProvider:n}})),[l,i]=(0,u.useState)(0),s=t.length;(0,u.useEffect)((()=>i(t.indexOf(a))),[t,a]);const d=(0,u.useCallback)((e=>{if(!r.current)return;r.current.children[e].focus()}),[]),p=(0,u.useCallback)((()=>o({provider:t[l]})),[l,o,t]),m=n?-1:1;return(0,tr.useKeyDownEffect)(r,"left",(()=>d((l-m+s)%s)),[d,l,m,s]),(0,tr.useKeyDownEffect)(r,"right",(()=>d((l+m+s)%s)),[d,l,m,s]),(0,tr.useKeyDownEffect)(r,"home",(()=>d(0)),[d]),(0,tr.useKeyDownEffect)(r,"end",(()=>d(s-1)),[d,s]),(0,tr.useKeyDownEffect)(r,["enter","space"],p,[p]),c.createElement(CU,{ref:r},t.map(((e,t)=>c.createElement(SU,{key:e,index:t,name:vt[e].displayName,isActive:a===e,onClick:()=>o({provider:e}),onFocus:()=>i(t),tabIndex:a===e?0:-1,role:"tab",id:`provider-tab-${e}`,"aria-controls":`provider-tabpanel-${e}`}))))};function AU(){return AU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AU.apply(this,arguments)}const xU=(0,p.default)(Ou.Headline).attrs((()=>({as:"h2",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}))).withConfig({displayName:"providerPanel__MediaSubheading",componentId:"sc-1c53rqi-0"})(["margin-top:24px;padding:0 24px;",""],(e=>e.shouldDisplay||"display: none;")),kU=p.default.div.withConfig({displayName:"providerPanel__ProviderWrapper",componentId:"sc-1c53rqi-1"})(["position:relative;display:flex;flex-direction:column;height:100%;min-height:100px;max-width:100%;top:0;left:0;",""],(e=>{let{hidden:t}=e;return t&&(0,p.css)(["position:absolute;visibility:hidden;"])}));const OU=function ProviderPanel(e){let{providerType:t,isActive:n,searchTerm:r,...a}=e;const{insertElement:o}=xH((e=>({insertElement:e.actions.insertElement}))),{actions:{registerUsage:l}}=lo(),{updateBaseColor:i}=xo({}),s=(0,u.useCallback)((e=>{e?.attribution?.registerUsageUrl&&l({registerUsageUrl:e.attribution.registerUsageUrl})}),[l]),p=(0,u.useCallback)(((e,t)=>{zv.default.set(e.id,{url:t,type:"cached"}),o(e.type,{resource:e}),s(e),e.baseColor||i(e)}),[o,s,i]),{media3p:m}=bi((e=>{let{media3p:t}=e;return{media3p:t}}));if(!n)return c.createElement(kU,AU({},a,{hidden:!0}));const f=m[t].state,g=m[t].actions,h=f.categories.selectedCategoryId?f.categories.categories.find((e=>e.id===f.categories.selectedCategoryId)).label:(0,d.__)("Trending","web-stories"),E=Boolean(f.media?.length||f.categories.selectedCategoryId),b=(0,d.__)("Search Results","web-stories");return c.createElement(kU,a,vt[t].supportsCategories&&c.createElement(B_,{items:f.categories.categories,selectedItemId:f.categories.selectedCategoryId,selectItem:g.selectCategory,deselectItem:g.deselectCategory}),c.createElement(xU,{"data-testid":"media-subheading",shouldDisplay:E},r.length&&!f.categories.selectedCategoryId?b:h),c.createElement(CH,{providerType:t,resources:f.media,isMediaLoading:f.isMediaLoading,isMediaLoaded:f.isMediaLoaded,hasMore:f.hasMore,setNextPage:g.setNextPage,onInsert:p,searchTerm:r,selectedCategoryId:f.categories.selectedCategoryId}))};function NU(){return NU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NU.apply(this,arguments)}const PU=p.default.div.withConfig({displayName:"media3pPane__PaneBottom",componentId:"sc-1hq1xk8-0"})(["position:relative;height:100%;flex:1 1 auto;min-height:0;"]);const RU=function Media3pPane(e){const{isActive:t}=e,{searchTerm:n,selectedProvider:r,setSelectedProvider:a,setSearchTerm:o,media3p:l}=bi((e=>{let{media3p:{state:{selectedProvider:t,searchTerm:n},actions:{setSelectedProvider:r,setSearchTerm:a}},media3p:o}=e;return{searchTerm:n,selectedProvider:t,setSelectedProvider:r,setSearchTerm:a,media3p:o}}));(0,u.useEffect)((()=>{t&&!r&&a({provider:Object.keys(vt)[0]})}),[t,r,a]);const i=l[r]?.state?.categories?.selectedCategoryId;(0,u.useEffect)((()=>{n.length&&(0,L.trackEvent)("search",{search_type:"media3p",search_term:n,search_filter:r,search_category:i})}),[r,n,i]);const s=(0,u.useCallback)((e=>{const t=e.trim();t!==n&&o({searchTerm:t})}),[n,o]),p=(0,S.useFeature)(IH.INCREMENTAL_SEARCH_DEBOUNCE_MEDIA),m=(0,u.useRef)(),f=(0,S.useFeatures)(),g=(0,u.useMemo)((()=>Object.keys(vt).filter((e=>!vt[e].featureName||f[vt[e].featureName]))),[f]);return c.createElement(c.Fragment,null,t&&c.createElement(yU,null),c.createElement(Q_,NU({id:_U},e),c.createElement(Z_,null,c.createElement(W_,null,c.createElement(J_,null,c.createElement(I_,{initialValue:n,placeholder:(0,d.__)("Search","web-stories"),onSearch:s,incremental:p,disabled:Boolean(r&&vt[r].supportsCategories&&l[r]?.state.categories.selectedCategoryId)})),c.createElement(IU,{providers:g})),c.createElement(PU,{ref:m},g.map((e=>c.createElement(OU,{key:e,providerType:e,isActive:e===r,searchTerm:n,role:"tabpanel","aria-labelledby":`provider-tab-${e}`,id:`provider-tabpanel-${e}`})))))))};var MU;function LU(){return LU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LU.apply(this,arguments)}const SvgPicture=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",LU({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,MU||(MU=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 9H8v14h.72l2.843-4.617a1.5 1.5 0 0 1 2.286-.323l.818.743a.5.5 0 0 0 .757-.1l2.519-3.939a1.5 1.5 0 0 1 2.623.175L24 22.315V9Zm-.784 14H9.895l2.52-4.093a.5.5 0 0 1 .762-.108l.817.744a1.5 1.5 0 0 0 2.273-.302l2.518-3.938a.5.5 0 0 1 .875.058L23.216 23ZM8 24h16a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1Zm2.5-11a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm1.5-2.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5Z",fill:"currentColor"})))},DU=(0,c.memo)(SvgPicture);const BU=function Media3pIcon(){return c.createElement(DU,{title:(0,d.__)("Explore Media","web-stories")})},FU=ae.PAGE_WIDTH/3,HU=p.default.button.withConfig({displayName:"shapePreview__Aspect",componentId:"sc-1pj9cm0-0"})(["background:transparent;outline:none;border:0;padding:0;position:relative;border-radius:",";background-color:",";&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),UU=p.default.div.withConfig({displayName:"shapePreview__AspectInner",componentId:"sc-1pj9cm0-1"})(["position:relative;padding-bottom:95.5%;"]),zU=p.default.div.withConfig({displayName:"shapePreview__ShapePreviewContainer",componentId:"sc-1pj9cm0-2"})(["position:absolute;top:0;left:0;height:100%;width:100%;border-radius:",";display:flex;justify-content:center;align-items:center;svg{display:inline-block;width:36px;height:36px;}"],(e=>{let{theme:t}=e;return t.borders.radius.small})),GU=p.default.div.withConfig({displayName:"shapePreview__ShapeClone",componentId:"sc-1pj9cm0-3"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";svg{display:inline-block;width:100%;height:100%;path{fill:#c4c4c4;}}"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),jU=p.default.div.withConfig({displayName:"shapePreview__ShapePreviewSizer",componentId:"sc-1pj9cm0-4"})(["padding-top:100%;"]),YU=p.default.path.withConfig({displayName:"shapePreview__Path",componentId:"sc-1pj9cm0-5"})(["fill:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const ZU=function ShapePreview(e){let{mask:t,isPreview:n,index:r}=e;const{insertElement:a}=xH((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:o,dataToEditorY:l}=(0,mc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),[i,s]=(0,u.useState)(!1),d=()=>s(!0),p=()=>s(!1),m=(0,u.useRef)(),f=(0,u.createRef)(),g=(0,u.useMemo)((()=>({backgroundColor:(0,Nm.default)("#c4c4c4"),width:FU*t.ratio,height:FU,mask:{type:t.type},lockAspectRatio:Ln.MaskTypes.RECTANGLE!==t.type})),[t.ratio,t.type]),h=(0,u.useCallback)((()=>{a("shape",g),(0,L.trackEvent)("insert_shape",{name:t.type})}),[a,g,t.type]),E=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return c.createElement("svg",{viewBox:"0 0 1 "+1/(n&&t.iconRatio?t.iconRatio:t.ratio),width:36*(n&&t.iconRatio?t.iconRatio:t.ratio),height:36},e&&c.createElement("title",null,t.name),c.createElement(YU,{d:n&&t.iconPath?t.iconPath:t.path,ref:f}))};return c.createElement(HU,{ref:m,onClick:h,tabIndex:0===r?0:-1,"aria-label":t.name,onPointerEnter:d,onFocus:d,onPointerLeave:p,onBlur:p},c.createElement(UU,null,c.createElement(zU,{key:t.type},c.createElement(jU,null),E()),i&&c.createElement(tH,null)),c.createElement(qF,{type:"shape",elementProps:g,cloneElement:GU,cloneProps:{width:o(FU*t.ratio),height:l(FU),children:E(!1)}}))},WU=(0,p.default)(m.Button).attrs({size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"stickerPreview__StickerButton",componentId:"sc-rjblwe-0"})(["position:relative;padding:0 0 95.5% 0;margin:0;height:60px;background-color:",";&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),KE.FOCUS_VISIBLE_SELECTOR,KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),VU=p.default.div.withConfig({displayName:"stickerPreview__StickerInner",componentId:"sc-rjblwe-1"})(["position:absolute;top:0;left:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),$U=p.default.div.withConfig({displayName:"stickerPreview__StickerClone",componentId:"sc-rjblwe-2"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));const qU=function StickerPreview(e){let{stickerType:t,index:n}=e;const{insertElement:r}=xH((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:a,dataToEditorY:o}=(0,mc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),l=Ai.default[t],i=l.aspectRatio,s=(0,u.useMemo)((()=>({width:FU*i,height:FU,sticker:{type:t}})),[i,t]),[d,p]=(0,u.useState)(!1),m=()=>p(!0),f=()=>p(!1),g=l.svg;return c.createElement(WU,{"data-testid":`library-sticker-${t}`,onClick:()=>r("sticker",{width:FU,sticker:{type:t}}),tabIndex:0===n?0:-1,onPointerEnter:m,onFocus:m,onPointerLeave:f,onBlur:f},c.createElement(VU,null,c.createElement(g,{style:{height:i<.955?"60%":"auto",width:i<.955?"auto":"60%"}}),d&&c.createElement(tH,null),c.createElement(qF,{type:"sticker",elementProps:s,cloneElement:$U,cloneProps:{width:a(FU*(i<1?i:1)),height:o(FU/(i<1?1:i)),children:c.createElement(g,{style:{height:"auto",width:"100%"}})}})))},XU=U_("shapes");function KU(){return KU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KU.apply(this,arguments)}const QU=p.default.div.withConfig({displayName:"shapesPane__SectionContent",componentId:"sc-ffcyax-0"})(["position:relative;display:grid;grid-column-gap:12px;grid-row-gap:24px;@media screen and (min-width:1220px){grid-template-columns:repeat(4,1fr);}@media screen and (min-width:1100px) and (max-width:1220px){grid-template-columns:repeat(3,1fr);}@media screen and (max-width:1100px){grid-template-columns:repeat(2,1fr);}"]),JU=Object.keys(Ai.default);const ez=function ShapesPane(e){const t=(0,u.useRef)();Xf({ref:t});const n=(0,u.useRef)(null);return Xf({ref:n}),c.createElement(H_,KU({id:XU},e,{isOverflowScrollable:!0}),c.createElement(Section,{"data-testid":"shapes-library-pane",title:(0,d.__)("Shapes","web-stories")},c.createElement(QU,{ref:t},Ln.MASKS.filter((e=>e.showInLibrary)).map(((e,t)=>c.createElement(ZU,{mask:e,key:e.type,index:t,isPreview:!0}))))),c.createElement(Section,{"data-testid":"stickers-library-pane",title:(0,d.__)("Stickers","web-stories")},c.createElement(QU,{ref:n},JU.map(((e,t)=>c.createElement(qU,{key:e,index:t,stickerType:e}))))))};var tz;function nz(){return nz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nz.apply(this,arguments)}const SvgShapes=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",nz({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,tz||(tz=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 11.5a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0ZM16 8a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm3.867 9.134a1.329 1.329 0 0 1 2.265 0l2.665 4.313c.548.886-.076 2.053-1.132 2.053h-5.33c-1.056 0-1.68-1.167-1.132-2.053l2.665-4.313Zm1.415.525a.329.329 0 0 0-.564 0l-2.665 4.313a.344.344 0 0 0 .282.528h5.33c.253 0 .428-.29.282-.528l-2.665-4.313Zm-10.846-.617 3.408 1.968c.149.086.2.276.114.426l-1.968 3.408a.312.312 0 0 1-.426.114L8.156 20.99a.312.312 0 0 1-.114-.426l1.968-3.408c.086-.149.277-.2.426-.114Zm-1.292-.386a1.312 1.312 0 0 1 1.792-.48l3.408 1.968c.627.362.842 1.164.48 1.792l-1.968 3.408a1.312 1.312 0 0 1-1.792.48l-3.408-1.968a1.312 1.312 0 0 1-.48-1.792l1.968-3.408Z",fill:"currentColor"})))},rz=(0,c.memo)(SvgShapes);const az=function ShapesIcon(){return c.createElement(rz,{title:(0,d.__)("Shapes library","web-stories")})};function oz(){return oz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oz.apply(this,arguments)}const lz=p.default.button.withConfig({displayName:"fontPreview__Preview",componentId:"sc-kfwh27-0"})(["position:relative;display:flex;align-items:center;background-color:",";padding:8px 0px;border-radius:",";width:100%;border:none;cursor:pointer;text-align:left;"," &."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{isTextSelected:t}=e;return t?Mu:"outline: none;"}),KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),iz=(0,p.default)(Ke.Text).attrs({forwardedAs:"span"}).withConfig({displayName:"fontPreview__PreviewText",componentId:"sc-kfwh27-1"})(["color:",";font-size:","px;font-weight:",";font-family:",";line-height:normal;margin:",";"],(e=>{let{theme:t,isClone:n}=e;return n?t.colors.standard.black:t.colors.fg.primary}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t}),(e=>{let{fontFamily:t}=e;return t}),(e=>{let{isClone:t}=e;return t?0:"0px 16px"})),sz=p.default.div.withConfig({displayName:"fontPreview__DragContainer",componentId:"sc-kfwh27-2"})(["position:absolute;opacity:0;background-color:",";width:","px;line-height:","px;"],(e=>{let{theme:t}=e;return t.colors.opacity.white24}),(e=>{let{width:t}=e;return t}),(e=>{let{lineHeight:t}=e;return t}));const cz=function FontPreview(e){let{title:t,element:n,insertPreset:r,getPosition:a,index:o}=e;const l=(0,Sr.getHTMLFormatters)(),{font:i,fontSize:s,content:p}=n,{fontWeight:m}=lg(p),{actions:{maybeEnqueueFontStyle:f}}=fo(),{dataToEditorX:g,dataToEditorY:h}=(0,mc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),{shouldUseSmartColor:E}=xH((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor}))),b=Gc(),{isTextSelected:y,updateSelectedElements:_}=Sa((e=>{let{state:t,actions:n}=e;return{isTextSelected:cg("text",t.selectedElements),updateSelectedElements:n.updateSelectedElements}})),v=(0,u.useRef)(null);(0,u.useEffect)((()=>{f([{font:i,fontWeight:m,content:(0,so.stripHTML)(p)}])}),[i,m,p,f]);const w=(0,u.useCallback)(((e,t)=>{let{fontWeight:n,isItalic:r,isUnderline:a,letterSpacing:o}=e;return t=l.setFontWeight(t,n),t=l.toggleItalic(t,r),t=l.toggleUnderline(t,a),t=l.setLetterSpacing(t,o)}),[l]),T=(0,u.useCallback)((async()=>{if(y)return void _({properties:e=>{const t=w(lg(n.content),e.content),r=gn(n,["x","y","content","width"]),a=PT({...e,...r});return{...e,...r,...a,content:t}}});let e=n;const o={isPositioned:!1};if(E){const t=a(n);o.isPositioned=!0,e={...n,...t},o.accessibleColors=await b(e)}r(e,o),(0,L.trackEvent)("insert_text_preset",{name:t})}),[y,a,n,E,r,t,_,w,b]),S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isClone:n}=e;return c.createElement(iz,oz({font:i,fontSize:s,fontWeight:m},e),n?(0,so.stripHTML)(p):t)};(0,tr.useKeyDownEffect)(v,{key:["enter","space"]},T,[T]),Xf({ref:v});const[C,I]=(0,u.useState)(!1),A=()=>I(!0),x=()=>I(!1);return c.createElement(lz,{ref:v,onPointerEnter:A,onFocus:A,onPointerLeave:x,onBlur:x,tabIndex:0===o?0:-1,isTextSelected:y,"aria-label":y?(0,qe.default)(
/* translators: %s: preset name */
(0,d.__)("Apply preset: %s","web-stories"),t):null},S(),C&&!y&&c.createElement(tH,null),c.createElement(qF,{cloneElement:sz,cloneProps:{children:S({fontSize:h(s),isClone:!0}),width:g(n.width),lineHeight:Math.ceil(h(s))},elementProps:n,type:"text",onClick:T}))},dz=U_("text"),uz=(0,Pr.dataFontEm)(1),pz="text";const mz=function(e){let{shouldUseSmartColor:t}=e;const{insertElement:n}=xH((e=>({insertElement:e.actions.insertElement}))),{state:{versionNumber:r}}=pr(),a=(0,Sr.getHTMLFormatters)(),{setColor:o}=a,[l,i]=(0,u.useState)(null),[s,c]=(0,u.useState)(null),d=(0,u.useRef)(null),p=Gc();(0,u.useEffect)((()=>{d.current?.element&&!d.current.versionNumber?d.current.versionNumber=r:d.current?.versionNumber&&(d.current=null)}),[r]);const m=(0,u.useCallback)((e=>{const{y:t}=e;if(!d.current)return t;const{element:{height:n,y:r}}=d.current;let a=r+n+uz;const{width:o,height:l}=Oi(pz,e.width,e.height,{...e,y:a});return a+l>=ae.PAGE_HEIGHT&&(a=t),{width:o,height:l,y:a}}),[]);(0,u.useEffect)((()=>{if(l&&s){const{content:e}=s,{color:t,backgroundColor:r}=l,a=r?{backgroundColor:{color:r},backgroundTextMode:Dn.BACKGROUND_TEXT_MODE.HIGHLIGHT,padding:XR(s)}:null,u={...s,content:t?o(e,{color:t}):e,...a},p=n(pz,{...u,height:(0,k.calculateTextHeight)(u,u.width)});d.current={versionNumber:null,element:p},i(null),c(null)}}),[l,s,n,o]);const f=(0,u.useCallback)((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isPositioned:a,accessibleColors:o}=r,l=a?{}:m(e);if(t){if(c({...e,...l}),o)return void i(o);i(await p({...e,...l}))}else{const t=n(pz,{...e,...l});d.current={versionNumber:null,element:t}}}),[m,p,t,n]);return{getPosition:m,insertPreset:f}};const fz=function(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return(0,qe.default)(
/* translators: %1$s: first item of list. %2$s: second item of list. */
(0,d.__)("%1$s and %2$s","web-stories"),e[0],e[1]);default:return(0,qe.default)(
/* translators: %1$s: is a comma separated list. %2$s: last entry in list  */
(0,d.__)("%1$s, and %2$s","web-stories"),e.slice(0,e.length-1).join(
/* translators: delimiter used in a list */
(0,d.__)(", ","web-stories")),e[e.length-1])}},gz=p.default.div.withConfig({displayName:"styles__FullWidthWrapper",componentId:"sc-10l2iqe-0"})(["margin-left:-",";margin-right:-",";"],F_,F_);function hz(e){return Array.from(new Set(e.map((e=>{let{elements:t=[]}=e;return t.map((e=>"text"===e.type&&Boolean(e.font?.family)?e.font?.family:null))})).flat().filter(Boolean)))||[]}const Ez=(0,p.css)(["margin-top:38px;padding-top:2px;width:100%;height:100%;"]),bz=p.default.div.withConfig({displayName:"components__VirtualizedWrapper",componentId:"sc-qhv222-0"})(["height:",";width:100%;position:relative;"],(e=>{let{height:t}=e;return`${t}px`}));bz.propTypes={height:ma().number.isRequired};const yz=p.default.div.withConfig({displayName:"components__VirtualizedContainer",componentId:"sc-qhv222-1"})(["position:absolute;top:0;left:",";display:grid;grid-template-columns:1fr 1fr;grid-template-columns:",";grid-template-rows:",";gap:","px;width:calc(100% - ",");height:100%;margin-top:4px;"],(e=>{let{paneLeft:t}=e;return t}),(e=>{let{columnWidth:t}=e;return`\n    repeat(auto-fill, ${t}px)`}),(e=>{let{rowHeight:t}=e;return`minmax(${t}px, auto)`}),(e=>{let{rowGap:t}=e;return t}),(e=>{let{paneLeft:t}=e;return t}));yz.propTypes={columnWidth:ma().number.isRequired,rowHeight:ma().number.isRequired,rowGap:ma().number,paneLeft:ma().oneOfType([ma().string,ma().number])},yz.defaultProps={rowGap:12,paneLeft:0};var _z,vz,wz;function Tz(){return Tz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tz.apply(this,arguments)}const SvgDesertBw=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Tz({viewBox:"0 0 274 118",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_z||(_z=c.createElement("path",{d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.794-10.544a10.003 10.003 0 0 0 2.525-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675c.436.215.886.397 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a9.985 9.985 0 0 1-2.818-.186Z",fill:"#767E80"})),vz||(vz=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4V26ZM120.857 53.178a2.143 2.143 0 0 1 4.286 0v14.25h1.714v-5.357a1.072 1.072 0 0 1 2.143 0V68.5a1.146 1.146 0 0 1-.048.319 1.073 1.073 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714v-12.25ZM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.987 3.987 0 0 1-2.828-1.171A3.988 3.988 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572V8Z",fill:"#ADB1B3"})),wz||(wz=c.createElement("circle",{cx:213,cy:72,r:13,fill:"#E4E5E6"})))},Sz=(0,c.memo)(SvgDesertBw),Cz=p.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-vwmhk4-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:8vh auto;text-align:center;*{text-align:center;margin:0 auto;}"]),Iz=(0,p.default)(Sz).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-vwmhk4-1"})(["margin-bottom:48px;"]);const Az=function EmptyContentMessage(e){let{children:t,...n}=e;return c.createElement(Cz,n,c.createElement(Iz,{"aria-hidden":!0,width:274,height:118}),t)};var xz=n(78720);function kz(e,t){return e?{content:t?`<span style="color: #fff">${e}<span>`:e}:{}}function TextSetContainer(e){let{pageSize:t,children:n}=e;return t?c.createElement(ji,{pageSize:t},n):n}const Oz=function TextSetElements(e){let{elements:t,isForDisplay:n,pageSize:r}=e;const{textSetHeight:a,textSetWidth:o}=t[0],l=n?(ae.PAGE_WIDTH-o)/2:0,i=n?(ae.PAGE_WIDTH-a)/2:0;return c.createElement(TextSetContainer,{pageSize:r},t.map((e=>{let{id:t,content:r,normalizedOffsetX:a,normalizedOffsetY:o,...s}=e;return c.createElement(yc,{previewMode:!0,key:t,element:{id:t,...kz(r,n),...s,x:a+l,y:o+i}})})))};function Nz(){return Nz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nz.apply(this,arguments)}const Pz=p.default.button.withConfig({displayName:"textSet__TextSetItem",componentId:"sc-1hor9ow-0"})(["border:0;background:none;position:absolute;top:0;height:","px;width:","px;display:flex;align-items:center;justify-content:center;flex-direction:column;transform:",";background-color:",";border-radius:",";cursor:pointer;transition:background-color ",";outline:none;&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],Ne,Ne,(e=>{let{translateX:t,translateY:n}=e;return`translateX(${t}px) translateY(${n}px)`}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),f.BUTTON_TRANSITION_TIMING,KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),Rz=p.default.img.withConfig({displayName:"textSet__TextSetImg",componentId:"sc-1hor9ow-1"})(["width:","px;height:","px;"],Ne,Ne),Mz=p.default.div.withConfig({displayName:"textSet__DragContainer",componentId:"sc-1hor9ow-2"})(["position:absolute;opacity:0;width:","px;height:","px;background-color:",";"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.opacity.white24}));function TextSet(e,t){let{id:n,elements:r,translateY:a,translateX:o,isActive:l,index:i,...s}=e;const{insertTextSet:d}=xH((e=>({insertTextSet:e.actions.insertTextSet}))),{cdnURL:p}=Y(),{pageWidth:m,pageHeight:f}=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),g=(0,u.useCallback)((()=>{d(r),(0,L.trackEvent)("insert_textset")}),[r,d]),h=(0,u.useCallback)((e=>{let{code:t}=e;"Enter"!==t&&"Space"!==t||g()}),[g]);Xf({ref:t.current});const[E,b]=(0,u.useState)(!1),{textSetHeight:y,textSetWidth:_}=r[0],v=(0,Pr.dataToEditorX)(_,m),w=(0,Pr.dataToEditorY)(y,f);return c.createElement(Pz,Nz({translateX:o,translateY:a,ref:t,onKeyUp:h,onPointerEnter:()=>b(!0),onPointerLeave:()=>b(!1),tabIndex:0===i?0:-1},s),c.createElement(Rz,{src:`${p}images/text-sets/${n}.png`,alt:"",crossOrigin:"anonymous",decoding:"async"}),(l||E)&&c.createElement(tH,null),c.createElement(qF,{type:"textSet",elements:r,elementProps:{},onClick:g,cloneElement:Mz,cloneProps:{width:v,height:w,children:c.createElement(Oz,{elements:r,pageSize:{width:m,height:f}})}}))}const Lz=(0,u.forwardRef)(TextSet);TextSet.displayName="TextSet";const Dz=Lz,Bz={contact:(0,d._x)("Contact","text set category","web-stories"),editorial:(0,d._x)("Editorial","text set category","web-stories"),list:(0,d._x)("List","text set category","web-stories"),cover:(0,d._x)("Cover","text set category","web-stories"),section_header:(0,d._x)("Header","text set category","web-stories"),step:(0,d._x)("Steps","text set category","web-stories"),table:(0,d._x)("Table","text set category","web-stories"),quote:(0,d._x)("Quote","text set category","web-stories")},Fz={TITLE:(0,d.__)("Text Sets","web-stories"),SWITCH_LABEL:(0,d.__)("Match fonts from story","web-stories")},Hz={width:Ne,height:Ne/ae.PAGE_RATIO};const Uz=function TextSets(e){let{paneRef:t,filteredTextSets:n}=e;const r=(0,u.useRef)(),a=(0,u.useRef)({}),o=(0,u.useMemo)((()=>n.map((e=>e.id))),[n]),l=(0,xz.useVirtual)({size:Math.ceil((n||[]).length/2),parentRef:t,estimateSize:(0,u.useCallback)((()=>162),[]),overscan:4}),i=(0,xz.useVirtual)({horizontal:!0,size:2,parentRef:t,estimateSize:(0,u.useCallback)((()=>162),[]),overscan:0}),{activeGridItemId:s,handleGridFocus:p,handleGridItemFocus:m,isGridFocused:f}=function(e){let{containerRef:t,gridItemRefs:n,gridItemIds:r,rowVirtualizer:a}=e;const[o,l]=(0,u.useState)(),[i,s]=(0,u.useState)(!1),c=(0,u.useMemo)((()=>a.virtualItems),[a]),d=(0,u.useRef)();(0,u.useEffect)((()=>{c!==d?.current&&(d.current=c),o&&i&&n.current?.[o]?.focus()}),[o,c,i,n]),Xf({ref:t});const p=(0,u.useCallback)((()=>{if(!i){const e=n.current?.[o]?o:r?.[0];l(e),s(!0),n.current?.[e]?.focus()}}),[o,i,r,n]),m=(0,u.useCallback)((e=>{o!==e&&l(e)}),[o]),f=rs(),g=(0,u.useCallback)((()=>{f(),s(!1)}),[f]);return(0,tr.useKeyDownEffect)(t,"tab",g,[g]),(0,u.useFocusOut)(t,(()=>{s(!1)}),[]),(0,u.useMemo)((()=>({handleGridFocus:p,handleGridItemFocus:m,activeGridItemId:o,isGridFocused:i})),[o,i,p,m])}({rowVirtualizer:l,containerRef:r,gridItemRefs:a,gridItemIds:o});return c.createElement(ji,{pageSize:Hz},c.createElement(bz,{height:l.totalSize},c.createElement(yz,{height:l.totalSize,ref:r,columnWidth:Ne,rowHeight:Ne,onFocus:p,role:"group","aria-label":(0,d.__)("Text Set Options","web-stories")},l.virtualItems.map((e=>i.virtualItems.map((t=>{const r=(e=>{let{columnIndex:t,rowIndex:n}=e;return 0===t?2*n:2*n+1})({columnIndex:t.index,rowIndex:e.index}),o=n[r];if(!o?.elements)return null;const l=s===o.id&&f;return c.createElement(Dz,{key:r,id:o.id,"data-testid":`text_set_${o.id}`,ref:e=>a.current[o.id]=e,translateY:e.start,translateX:t.start,"aria-label":o.title,isActive:l,onFocus:()=>m(o.id),elements:o.elements,index:r})})))))))},zz=p.default.div.withConfig({displayName:"textSetsPane__TitleBar",componentId:"sc-vycaev-0"})(["display:flex;justify-content:space-between;padding:20px 0;"]),Gz=p.default.div.withConfig({displayName:"textSetsPane__TextSetsToggle",componentId:"sc-vycaev-1"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),jz=p.default.div.withConfig({displayName:"textSetsPane__TextSetsWrapper",componentId:"sc-vycaev-2"})(["",";"],Ez);const Yz=function TextSetsPane(e){let{paneRef:t}=e;const{areTextSetsLoading:n,textSets:r}=xH((e=>{let{state:{areTextSetsLoading:t,textSets:n}}=e;return{areTextSetsLoading:t,textSets:n}})),[a,o]=(0,u.useState)(!1),l=(0,u.useRef)(!1),i=(0,u.useMemo)((()=>Object.values(r).flat()),[r]),s=Sa((e=>{let{state:{pages:t}}=e;return t})),[p,m]=(0,u.useState)(_o.getItemByKey(`${yo.TEXT_SET_SETTINGS}`)?.selectedCategory),f=(0,u.useCallback)((()=>function(e){let{fonts:t,textSets:n}=e;return n.map((e=>e.elements.reduce(((e,n)=>"text"===n.type&&Boolean(n.font?.family)?e|-1!==t.indexOf(n.font?.family):e),!1)&&e)).filter(Boolean)}({fonts:hz(s),textSets:p?r[p]:i})),[i,s,p,r]),g=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((e=>{let{textSetFonts:t=[],textSetCategory:n,elements:r,id:a}=e;return{id:a,title:(0,qe.default)(
/* translators: 1: text set category. 2: list of fonts. */
(0,d._n)("Text set %1$s with %2$s font","Text set %1$s with %2$s fonts",t.length,"web-stories"),Bz[n],fz(t)),elements:r}}))}),[]),h=(0,u.useMemo)((()=>g(a?f():p?r?.[p]:i)),[p,r,i,g,f,a]),E=(0,u.useMemo)((()=>[{id:null,label:(0,d._x)("All","text sets","web-stories")},...Object.keys(r).map((e=>({id:e,label:Bz[e]??e})))]),[r]),b=(0,Eb.default)(),y=(0,u.useCallback)((e=>{m(e),b(null===e?(0,d.__)("Show all text sets","web-stories"):(0,qe.default)(
/* translators: %s: filter category name */
(0,d.__)("Selected text set filter %s","web-stories"),Bz[e])),_o.setItemByKey(`${yo.TEXT_SET_SETTINGS}`,{selectedCategory:e}),l.current=!0}),[b]),_=(0,u.useCallback)((()=>{requestAnimationFrame((()=>o((e=>!e)))),l.current=!0}),[o]);(0,u.useEffect)((()=>{l.current&&(0,L.trackEvent)("search",{search_type:"textsets",search_term:"",search_category:p,search_filter:a?"show_in_use":void 0})}),[p,a]);const v=(0,u.useMemo)((()=>`section-${(0,he.default)()}`),[]),w=(0,u.useMemo)((()=>`toggle_text_sets_${(0,he.default)()}`),[]),T=(0,u.useMemo)((()=>a?(0,d.__)("No matching Text Sets available. Try adding text to your story.","web-stories"):(0,d.__)("No Text Sets available.","web-stories")),[a]);return c.createElement(A_,{id:v},c.createElement(zz,null,c.createElement(Ou.Headline,{as:"h2",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},Fz.TITLE),c.createElement(Gz,null,c.createElement(Ke.Text,{as:"label",htmlFor:w,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Fz.SWITCH_LABEL),c.createElement(tU,{id:w,"aria-label":Fz.SWITCH_LABEL,name:w,checked:a,onChange:_}))),c.createElement(gz,null,c.createElement(B_,{items:E,selectedItemId:p,selectItem:y,deselectItem:()=>y(null),ariaLabel:(0,d.__)("Select filter for text sets list","web-stories")})),c.createElement(jz,null,h?.length||n?c.createElement(Uz,{paneRef:t,filteredTextSets:h}):c.createElement(Az,null,T)))};function Zz(){return Zz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zz.apply(this,arguments)}const Wz=(0,p.default)(A_).withConfig({displayName:"stylePresets__SectionContainer",componentId:"sc-bczcw0-0"})(["padding:16px 0;margin-bottom:-24px;border-top:1px solid ",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),Vz=p.default.div.withConfig({displayName:"stylePresets__TitleBar",componentId:"sc-bczcw0-1"})(["display:flex;padding-bottom:16px;justify-content:space-between;align-items:center;"]),$z=p.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-bczcw0-2"})([""]),qz=(0,p.default)(m.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-bczcw0-3"})(["margin-left:auto;"]),Xz=(0,p.default)(Ke.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-bczcw0-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Kz={x:40},Qz="text";const Jz=(0,u.memo)((function(){const{textStyles:e,isText:t,updateSelectedElements:n}=Sa((e=>{let{state:t,actions:n}=e;return{isText:Boolean(t.selectedElements&&cg(Qz,t.selectedElements)),textStyles:t.story?.globalStoryStyles?.textStyles||[],updateSelectedElements:n.updateSelectedElements}})),{insertElement:r}=xH((e=>({insertElement:e.actions.insertElement}))),{setColor:a,setFontWeight:o,setLetterSpacing:l,toggleItalic:i,toggleUnderline:s}=(0,Sr.getHTMLFormatters)(),p=(0,u.useRef)(null),m=(0,u.useRef)(null),[g,h]=(0,u.useState)(!1),{isRTL:E,styleConstants:{topOffset:b}={}}=Y(),y=e.length>0,_=(0,u.useCallback)((e=>{n({properties:t=>{const n=yw(t,e,!0),r=PT({...t,...n});return{...n,...r}}})}),[n]),v=VM({pushUpdate:_}),{addGlobalPreset:w}=dg({presetType:ze}),T=e=>{t?v(e):((e=>{const{color:t,fontWeight:n,isItalic:c,isUnderline:d,letterSpacing:u}=e;let p=hs.content;p=a(p,t),p=o(p,n),p=i(p,c),p=s(p,d),p=l(p,u),r(Qz,{...hs,...e,content:p})})(e),h(!1))},S=t?{}:{activeItemOverlay:c.createElement(tH,null),applyLabel:(0,d.__)("Add new text","web-stories")};return c.createElement(Wz,null,c.createElement(Vz,null,c.createElement(Ou.Headline,{as:"h2",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Saved Styles","web-stories")),c.createElement(qz,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:w,"aria-label":(0,d.__)("Add style","web-stories"),disabled:!t},c.createElement(Jf,null))),y&&c.createElement(c.Fragment,null,c.createElement($z,{ref:m},c.createElement(kM,Zz({styles:[...e].reverse().slice(0,2),handleClick:T,buttonWidth:150},S))),c.createElement(WM,{ref:p,onClick:()=>h(!0),"aria-haspopup":"dialog","aria-expanded":g},(0,d.__)("More styles","web-stories"),c.createElement(Kb.default,null)),c.createElement(Zp.Popup,{topOffset:b,isRTL:E,anchor:p,isOpen:g,placement:Ed.PLACEMENT.RIGHT_START,spacing:Kz,renderContents:()=>c.createElement(YM,Zz({styles:e,applyStyle:T,onClose:()=>h(!1)},S))})),!y&&c.createElement(ZM,null,c.createElement(Xz,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("No Styles Saved","web-stories"))))}));function eG(){return eG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eG.apply(this,arguments)}const tG=(0,p.default)(H_).withConfig({displayName:"textPane__Pane",componentId:"sc-zvmbdp-0"})(["overflow-y:scroll;max-height:100%;position:relative;"]),nG=p.default.div.withConfig({displayName:"textPane__GridContainer",componentId:"sc-zvmbdp-1"})(["display:grid;grid-template-columns:1fr 1fr;gap:12px;"]),rG=p.default.div.withConfig({displayName:"textPane__SmartColorToggle",componentId:"sc-zvmbdp-2"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const aG=function TextPane(e){const t=(0,u.useRef)(),[,n]=(0,u.useState)(),{shouldUseSmartColor:r,setShouldUseSmartColor:a}=xH((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor,setShouldUseSmartColor:e.actions.setShouldUseSmartColor}))),{getPosition:o,insertPreset:l}=mz({shouldUseSmartColor:r}),i=jc((e=>{let{actions:t}=e;return t.generateDeferredCurrentPageCanvas}));(0,u.useResizeEffect)(t,(()=>{n(Date.now())}),[]);const s=(0,u.useCallback)((()=>a((e=>!e))),[a]),p=(0,u.useMemo)((()=>`toggle_auto_color_${(0,he.default)()}`),[]);return c.createElement(tG,eG({id:dz},e,{ref:t}),c.createElement(rG,null,c.createElement(Ke.Text,{as:"label",htmlFor:p,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Adaptive text colors","web-stories")),c.createElement(Tooltip,{title:(0,d.__)("May impact performance when inserting text","web-stories")},c.createElement(tU,{id:p,checked:r,onChange:s}))),c.createElement(A_,{onPointerOver:()=>r&&i()},c.createElement(nG,null,Es.map(((e,t)=>{let{title:n,element:r}=e;return c.createElement(cz,{key:n,title:n,element:r,insertPreset:l,getPosition:o,index:t})})))),c.createElement(Jz,null),t.current&&c.createElement(Yz,{paneRef:t}))};var oG=n(33291);const lG=function TextIcon(){return c.createElement(oG.default,{title:(0,d.__)("Text library","web-stories")})},iG=U_("elements");function sG(){return sG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sG.apply(this,arguments)}const cG=function ElementsPane(e){return c.createElement(H_,sG({id:iG},e),(0,d.__)("Still empty","web-stories"))};const dG=function ElementsIcon(){return c.createElement(Zx.default,{title:(0,d.__)("Elements library","web-stories")})},uG=U_("pageTemplates");var pG=n(13293);const mG={cover:{name:(0,d.__)("Cover","web-stories")},section:{name:(0,d.__)("Section","web-stories")},quote:{name:(0,d.__)("Quote","web-stories")},editorial:{name:(0,d.__)("Editorial","web-stories")},list:{name:(0,d.__)("List","web-stories")},table:{name:(0,d.__)("Table","web-stories")},steps:{name:(0,d.__)("Steps","web-stories")}};function fG(){return fG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fG.apply(this,arguments)}const gG=p.default.div.withConfig({displayName:"defaultPageTemplate__PageTemplateWrapper",componentId:"sc-kt5s68-0"})([""]),hG=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN}).withConfig({displayName:"defaultPageTemplate__PageTemplateButton",componentId:"sc-kt5s68-1"})(["position:relative;display:block;padding:0;border-radius:",";overflow:hidden;&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),KE.FOCUS_VISIBLE_SELECTOR,KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return Ru.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),EG=(0,p.default)(Y_).withConfig({displayName:"defaultPageTemplate__TemplateTitleContainer",componentId:"sc-kt5s68-2"})(["",":hover &,",":focus &{opacity:1;}"],hG,hG),bG=p.default.img.withConfig({displayName:"defaultPageTemplate__PosterImg",componentId:"sc-kt5s68-3"})(["display:block;width:100%;"]),yG=(0,u.forwardRef)(((e,t)=>{let{page:n,columnWidth:r,isActive:a,onFocus:o,...l}=e;const i=(0,qe.default)(
/* translators: 1: template name. 2: page template name. */
(0,d._x)("%1$s %2$s","page template title","web-stories"),n.title,mG[n.type].name),[s,p]=(0,u.useState)(!1);return c.createElement(gG,{ref:t,role:"listitem"},c.createElement(hG,fG({columnWidth:r,tabIndex:a?0:-1,"aria-label":i,onPointerEnter:()=>p(!0),onPointerLeave:()=>p(!1),onFocus:()=>{p(!0),o?.()},onBlur:()=>p(!1)},l),n.png&&c.createElement(bG,{src:n.png,alt:(0,qe.default)(
/* translators: 1: page title */
(0,d.__)("Snapshot of page template for %1$s","web-stories"),n.title),crossOrigin:"anonymous",decoding:"async",draggable:!1}),s&&c.createElement(tH,null),n.title&&c.createElement(EG,null,c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},i))))}));yG.displayName="DefaultPageTemplate";const _G=yG;var vG;function wG(){return wG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wG.apply(this,arguments)}const SvgTrashFilledSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wG({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vG||(vG=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.501 4a.5.5 0 0 0-.5.5v.3h2.001v-.3a.5.5 0 0 0-.5-.5h-1Zm-1 1.8H3.5a.5.5 0 0 1 0-1h2.501v-.3a1.5 1.5 0 0 1 1.5-1.5h1.001a1.5 1.5 0 0 1 1.5 1.5v.3h2.502a.5.5 0 0 1 0 1H6.5Zm-1.3 1.301a.5.5 0 1 0-1 0v4.202c0 .94.76 1.7 1.7 1.7h4.202a1.7 1.7 0 0 0 1.7-1.7V7.101a.5.5 0 1 0-1 0v4.202a.7.7 0 0 1-.7.7H5.9a.7.7 0 0 1-.7-.7V7.101Zm2.1.3a.5.5 0 1 0-1 0v3.002a.5.5 0 1 0 1 0V7.402Zm1.901-.5a.5.5 0 0 1 .5.5v3.002a.5.5 0 1 1-1 0V7.402a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},TG=(0,c.memo)(SvgTrashFilledSmall),SG=p.default.img.withConfig({displayName:"savedPageTemplate__TemplateImage",componentId:"sc-5hfe38-0"})(["width:100%;height:auto;"]),CG=p.default.div.withConfig({displayName:"savedPageTemplate__PageTemplateWrapper",componentId:"sc-5hfe38-1"})(["height:","px;width:","px;cursor:pointer;",";",";"],(e=>{let{pageSize:t}=e;return t.height}),(e=>{let{pageSize:t}=e;return t.width}),(e=>{let{isHighlighted:t}=e;return t&&Ru.focusCSS}),Mu);CG.propTypes={pageSize:fc.isRequired};const IG=p.default.div.withConfig({displayName:"savedPageTemplate__PreviewPageWrapper",componentId:"sc-5hfe38-2"})(["position:relative;height:","px;width:","px;background-color:",";border-radius:",";overflow:hidden;",""],(e=>{let{pageSize:t}=e;return t.height}),(e=>{let{pageSize:t}=e;return t.width}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{background:t}=e;return(0,kr.default)(t)}));IG.propTypes={pageSize:fc.isRequired};const AG=(0,p.default)(j_).withConfig({displayName:"savedPageTemplate__DeleteButton",componentId:"sc-5hfe38-3"})(["top:4px;right:4px;"]);function SavedPageTemplate(e,t){let{page:n,pageSize:r,handleDelete:a,index:o,...l}=e;const{capabilities:{hasUploadMediaAction:i}}=Y(),{actions:{updatePageTemplate:s}}=X(),{actions:{uploadFile:p}}=Bt(),{updateSavedTemplate:m}=xH((e=>({updateSavedTemplate:e.actions.updateSavedTemplate}))),f=cc((e=>{let{actions:t}=e;return t.queuePageImageGeneration})),g=cc((e=>{let{state:{dataUrls:t}}=e;return t[n.id]})),[h,E]=(0,u.useState)(!1);(0,u.useFocusOut)(t,(()=>E(!1)),[]);const{highlightedTemplate:b,onClick:y}=l,_=(0,u.useCallback)((()=>E(!0)),[]),v=(0,u.useCallback)((()=>{E(!1)}),[]),w=n.image?.url||g,T=i&&g&&!n.image?.url;(0,u.useEffect)((()=>{T&&(async()=>{try{const e=await ho(g),t=me(e,`web-stories-page-template-${n.templateId}.jpg`,"image/jpeg"),r=await p(t,{templateId:n.templateId,mediaSource:"page-template"});s(n.templateId,{featured_media:r.id}),m({templateId:n.templateId,image:{id:r.id,height:r.height,width:r.width,url:r.src}})}catch(e){(0,L.trackError)("upload_generated_page_template_image",e?.message)}})()}),[g,p,s,n.templateId,T,m]),(0,u.useEffect)((()=>{!w&&i&&f(n)}),[w,f,n,i]);const S=(0,u.useRef)(),C=(0,u.useRef)();Xf({ref:S},[],2),Xf({ref:C},[],2);const I=rs();return(0,tr.useKeyDownEffect)(C,"tab",I,[I]),c.createElement(CG,{pageSize:r,role:"listitem",ref:t,onPointerEnter:_,onPointerLeave:v,"aria-label":n.title,isHighlighted:n.id===b,onFocus:_,onBlur:v,onClick:y},c.createElement(IG,{pageSize:r,background:n.backgroundColor},w?c.createElement(SG,{alt:n.image?.alt||(0,d.__)("Saved Page Template","web-stories"),src:w,height:n.image?.height,width:n.image?.height,draggable:!1}):n.elements.map((e=>c.createElement(yc,{key:e.id,previewMode:!0,element:e}))),h&&c.createElement(tH,{showIcon:!1}),c.createElement(j_,{ref:S,onClick:e=>{e.stopPropagation(),y(e)},"aria-label":(0,d.__)("Use template","web-stories"),$display:h,tabIndex:0===o?0:-1},c.createElement(QF,null)),c.createElement(AG,{ref:C,$display:h,onClick:e=>{e.stopPropagation(),a(n,e)},"aria-label":(0,d.__)("Delete Page Template","web-stories"),tabIndex:h?0:-1},c.createElement(TG,null))))}const xG=(0,u.forwardRef)(SavedPageTemplate);SavedPageTemplate.displayName="SavedPageTemplate";const kG=xG;function OG(){return OG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OG.apply(this,arguments)}const NG=p.default.div.withConfig({displayName:"templateList__WrapperGrid",componentId:"sc-1ukppvz-0"})(["display:grid;width:100%;margin-left:",";margin-bottom:12px;gap:12px;grid-template-columns:",";grid-template-rows:",";"],F_,(e=>{let{columnWidth:t}=e;return`repeat(auto-fit, ${t}px)`}),(e=>{let{rowHeight:t}=e;return`repeat(minmax(${t}px, 1fr))`}));const PG=function TemplateList(e){let{pages:t,parentRef:n,pageSize:r,handleDelete:a,fetchTemplates:o,...l}=e;const{addPage:i}=Sa((e=>{let{actions:t}=e;return{addPage:t.addPage}})),{isRTL:s}=Y(),{showSnackbar:p}=(0,hr.useSnackbar)(),[m,f]=(0,u.useState)(),g=(0,u.useRef)(),h=(0,u.useRef)({}),E=(0,u.useCallback)((e=>{let{templateId:t,version:n,title:r,...a}=e;const o=(0,A.duplicatePage)(a);i({page:o}),(0,L.trackEvent)("insert_page_template",{name:r||"custom"}),p({message:(0,d.__)("Page Template added.","web-stories"),dismissible:!0})}),[i,p]),b=(0,u.useCallback)((e=>{f(e)}),[]),y=a||o;return(0,u.useEffect)((()=>{t.length>0&&(m&&t.some((e=>e.id===m))||f(t[0].id))}),[m,t]),(0,u.useEffect)((()=>{o?.()}),[o]),(0,Vx.default)({containerRef:n,gridRef:g,itemRefs:h,items:t,currentItemId:m,isRTL:s}),c.createElement(NG,{ref:g,columnWidth:r.width,rowHeight:r.containerHeight,role:"list","aria-label":(0,d.__)("Page Template Options","web-stories")},y?t.map(((e,t)=>c.createElement(kG,OG({key:e.id,"data-testid":`page_template_${e.id}`,ref:t=>h.current[e.id]=t,page:e,pageSize:r,onClick:()=>E(e),handleDelete:a,onFocus:()=>b(e.id),index:t},l)))):t.map((e=>c.createElement(_G,OG({ref:t=>h.current[e.id]=t,key:e.id,"data-testid":`page_template_${e.id}`,page:e,pageSize:r,onFocus:()=>b(e.id),isActive:m===e.id,onClick:()=>E(e.story),columnWidth:r.width},l)))))},RG=p.default.div.withConfig({displayName:"defaultTemplates__ActionRow",componentId:"sc-14vj9wc-0"})(["display:flex;justify-content:space-between;margin:0px 16px 22px 16px;"]),MG=p.default.div.withConfig({displayName:"defaultTemplates__PageTemplatesParentContainer",componentId:"sc-14vj9wc-1"})(["",";margin-top:26px;overflow-x:hidden;overflow-y:scroll;"],Ez);const LG=function DefaultTemplates(e){let{pageSize:t}=e;const{actions:{getPageTemplates:n}}=X(),[r,a]=(0,u.useState)([]),[o,l]=(0,u.useState)(!1);(0,u.useEffect)((()=>{!async function(){l(!0);const e=(0,L.getTimeTracker)("load_page_templates");a(await n()),l(!1),e()}()}),[n,a]);const i=(0,u.useRef)(),[s,p]=(0,u.useState)(null),m=(0,u.useMemo)((()=>[{id:null,label:(0,d._x)("All","page templates","web-stories")},...Object.entries(mG).map((e=>{let[t,{name:n}]=e;return{id:t,label:n}}))]),[]),f=(0,u.useMemo)((()=>r.reduce(((e,t)=>[...e,...Object.values(t.postersByPage).map(((e,n)=>({id:`${t.slug}_${n}`,title:t.title,story:t.pages[n],...e}))).reduce(((e,t)=>!t.type||s&&t.type!==s?e:[...e,t]),[])]),[])),[r,s]),g=(0,u.useCallback)((e=>{p(e),(0,L.trackEvent)("search",{search_type:"page_templates",search_term:"",search_category:e})}),[]);return c.createElement(c.Fragment,null,c.createElement(B_,{items:m,selectedItemId:s,selectItem:g,deselectItem:()=>g(null)}),c.createElement(MG,{ref:i,tabIndex:-1},c.createElement(RG,null,c.createElement(Ou.Headline,{as:"h2",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Templates","web-stories"))),!o&&i.current?c.createElement(PG,{pageSize:t,parentRef:i,pages:f}):c.createElement(G_,null,c.createElement(pG.LoadingSpinner,{animationSize:64,numCircles:8}))))};function DG(){return DG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DG.apply(this,arguments)}const BG=p.default.div.withConfig({displayName:"savedTemplates__Wrapper",componentId:"sc-1bm5y87-0"})(["height:100%;padding-top:5px;overflow-y:scroll;overflow-x:hidden;min-height:96px;"]);const FG=function SavedTemplates(e){let{pageSize:t,loadTemplates:n,isLoading:r,...a}=e;const{actions:{deletePageTemplate:o}}=X(),{savedTemplates:l,setSavedTemplates:i,nextTemplatesToFetch:s}=xH((e=>({savedTemplates:e.state.savedTemplates,nextTemplatesToFetch:e.state.nextTemplatesToFetch,setSavedTemplates:e.actions.setSavedTemplates}))),{showSnackbar:p}=(0,hr.useSnackbar)(),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(null),E=(0,u.useRef)();(0,u.useLayoutEffect)((()=>{f(!1)}),[]);const b=(0,u.useCallback)((()=>{s&&n()}),[s,n]),_=(0,u.useCallback)(((e,t)=>{let{templateId:n}=e;t?.stopPropagation(),n&&(f(!0),h(n))}),[]),v=(0,u.useCallback)((()=>o(g).then((()=>{i(l.filter((e=>{let{templateId:t}=e;return t!==g}))),f(!1)})).catch((()=>{p({message:(0,d.__)("Unable to delete the template. Please try again.","web-stories"),dismissible:!0})}))),[o,g,l,p,i]);return c.createElement(BG,{ref:E,tabIndex:-1},!r&&E.current?c.createElement(PG,DG({parentRef:E,pageSize:t,pages:l,handleDelete:_,fetchTemplates:b},a)):c.createElement(G_,null,c.createElement(pG.LoadingSpinner,{animationSize:64,numCircles:8})),m&&c.createElement(y,{isOpen:!0,onClose:()=>f(!1),title:(0,d.__)("Delete Page Template","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:v,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Are you sure you want to delete this template? This action cannot be undone.","web-stories"))))},HG=e=>{if(e.elements.length>1)return!1;const t=(0,A.createPage)();if(!(0,u.shallowEqual)(e.backgroundColor?.color,t.backgroundColor?.color))return!1;const n=e.elements.find((e=>e.isBackground));return!(n&&!n.isDefaultBackground)};var UG,zG,GG;function jG(){return jG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jG.apply(this,arguments)}const SvgIllustration=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",jG({viewBox:"0 0 32 43",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,UG||(UG=c.createElement("path",{d:"M21.903 0H4a4 4 0 0 0-4 4v34.4a4 4 0 0 0 4 4h24a4 4 0 0 0 4-4V10.03a4 4 0 0 0-1.187-2.844l-6.097-6.03A4 4 0 0 0 21.903 0Z",fill:"#767E80"})),zG||(zG=c.createElement("path",{d:"m30.146 8.146-5.893-5.893a.5.5 0 0 0-.853.354V8.5a.5.5 0 0 0 .5.5h5.893a.5.5 0 0 0 .353-.854Z",fill:"#ADB1B3"})),GG||(GG=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 29a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-12.469c.535 0 .969.434.969.969v2.531H19.5a.969.969 0 0 1 0 1.938h-2.531V24.5a.969.969 0 0 1-1.938 0v-2.531H12.5a.969.969 0 0 1 0-1.938h2.531V17.5c0-.535.434-.969.969-.969Z",fill:"#E4E5E6"})))},YG=(0,c.memo)(SvgIllustration),ZG=(0,p.default)(Ke.Text).withConfig({displayName:"templateSave__StyledText",componentId:"sc-vcrsmn-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),WG=p.default.div.withConfig({displayName:"templateSave__IconWrapper",componentId:"sc-vcrsmn-1"})(["width:32px;height:42px;margin-right:29px;"]),VG=p.default.button.withConfig({displayName:"templateSave__SaveButton",componentId:"sc-vcrsmn-2"})(["border:0;background:none;height:56px;width:100%;padding:7px;background-color:",";transition:background-color ",";border-radius:",";display:flex;flex-direction:row;align-items:center;cursor:pointer;&:hover{background-color:",";}"," ",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),f.BUTTON_TRANSITION_TIMING,(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}),(e=>{let{$isDisabled:t,theme:n}=e;return t&&`\n      cursor: default;\n      background-color: ${n.colors.interactiveBg.disable};\n      &:hover {\n        background-color: ${n.colors.interactiveBg.disable};\n      }\n\n      ${WG} svg {\n        path:nth-child(1): ${n.colors.fg.disable};\n        path:nth-child(2) {\n          fill: ${n.colors.fg.tertiary};\n        }\n        path:nth-child(3) {\n          fill: ${n.colors.fg.secondary};\n        }\n      }\n\n      ${ZG} {\n        color: ${n.colors.fg.disable};\n      }\n  `}),Mu);const $G=function TemplateSave(e){let{setShowDefaultTemplates:t,updateList:n}=e;const{actions:{addPageTemplate:r}}=X(),{showSnackbar:a}=(0,hr.useSnackbar)(),{currentPage:o}=Sa((e=>{let{state:{currentPage:t}}=e;return{currentPage:t}})),l=(0,u.useMemo)((()=>o&&HG(o)),[o]),i=(0,u.useCallback)((async e=>{if(e.preventDefault(),l)return;try{const{templateId:e,...t}=o,l=await r({story_data:{...t,id:(0,he.default)(),version:er.DATA_VERSION},featured_media:undefined,title:null});n?.(l),a({message:(0,d.__)("Page Template saved.","web-stories"),dismissable:!0})}catch{a({message:(0,d.__)("Unable to save the template. Please try again.","web-stories"),dismissable:!0})}t(!1)}),[l,r,o,t,a,n]);return c.createElement(VG,{"aria-disabled":l,onClick:i,$isDisabled:l},c.createElement(WG,null,c.createElement(YG,{"aria-hidden":!0})),c.createElement(ZG,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,forwardedAs:"span"},(0,d.__)("Save current page as template","web-stories")))};function qG(){return qG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qG.apply(this,arguments)}const XG=(0,p.default)(H_).withConfig({displayName:"pageTemplatesPane__StyledPane",componentId:"sc-hm7mfr-0"})(["height:100%;padding:0;overflow:hidden;"]),KG=p.default.div.withConfig({displayName:"pageTemplatesPane__PaneInner",componentId:"sc-hm7mfr-1"})(["height:100%;display:flex;flex-direction:column;"]),QG=p.default.div.withConfig({displayName:"pageTemplatesPane__DropDownWrapper",componentId:"sc-hm7mfr-2"})(["text-align:left;margin:28px 16px 17px;"]),JG=p.default.div.withConfig({displayName:"pageTemplatesPane__ButtonWrapper",componentId:"sc-hm7mfr-3"})(["padding:0 1em;margin-top:24px;"]),ej="default",tj="saved",nj=yo.DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT,rj=_o.getItemByKey(nj);const aj=function PageTemplatesPane(e){const{actions:{getCustomPageTemplates:t}}=X(),{canViewDefaultTemplates:n}=Y(),r=Boolean(t),{savedTemplates:a,setSavedTemplates:o,nextTemplatesToFetch:l,setNextTemplatesToFetch:i}=xH((e=>({savedTemplates:e.state.savedTemplates,nextTemplatesToFetch:e.state.nextTemplatesToFetch,setSavedTemplates:e.actions.setSavedTemplates,setNextTemplatesToFetch:e.actions.setNextTemplatesToFetch}))),[s,p]=(0,u.useState)(null===rj?n:n&&rj),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(!1),E=(0,u.useCallback)((e=>{o((t=>[e,...t||[]])),f(e.id),_o.setItemByKey(nj,!1)}),[o]),b=(0,u.useCallback)((()=>{l&&(h(!0),t(l).then((e=>{let{templates:t,hasMore:n}=e;const r=t.map((e=>{let{version:t,templateId:n,...r}=e;const a={pages:[r]},o=(0,er.migrate)(a,t||25);return{templateId:n,version:er.DATA_VERSION,...o.pages[0]}}));o((e=>[...e||[],...r])),i(!!n&&l+1)})).catch((e=>{(0,L.trackError)("saved_templates",e.message),i(!1),o((e=>e??[]))})).finally((()=>h(!1))))}),[t,l,o,i]);(0,u.useEffect)((()=>{a||s||b()}),[a,b,s]),(0,u.useEffect)((()=>{let e=null;return m&&(e=setTimeout((()=>{f(null)}),1e3)),()=>clearTimeout(e)}),[m]);const y=[];n&&y.push({value:ej,label:(0,d.__)("Default templates","web-stories")}),r&&y.push({value:tj,label:(0,d.__)("Saved templates","web-stories")});const _=(0,u.useMemo)((()=>({width:158,height:Math.round(158/ae.PAGE_RATIO),containerHeight:Math.round(158/ae.FULLBLEED_RATIO)})),[]);return c.createElement(XG,qG({id:uG},e),c.createElement(KG,null,c.createElement(c.Fragment,null,r&&c.createElement(JG,null,c.createElement($G,{setShowDefaultTemplates:p,updateList:E})),c.createElement(QG,null,y.length>1&&c.createElement(hb,{options:y,selectedValue:s?ej:tj,onMenuItemClick:(e,t)=>{const n=t===ej;s!==n&&(p(ej===t),_o.setItemByKey(nj,n))},"aria-label":(0,d.__)("Select templates type","web-stories")}))),s?c.createElement(LG,{pageSize:_}):c.createElement(FG,{pageSize:_,highlightedTemplate:m,loadTemplates:b,isLoading:g})))};var oj;function lj(){return lj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lj.apply(this,arguments)}const SvgBox4Alternate=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",lj({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,oj||(oj=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8A1.5 1.5 0 0 0 8 9.5v6A1.5 1.5 0 0 0 9.5 17h4a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 13.5 8h-4ZM9 9.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-6Zm.5 9.5A1.5 1.5 0 0 0 8 20.5v2A1.5 1.5 0 0 0 9.5 24h4a1.5 1.5 0 0 0 1.5-1.5v-2a1.5 1.5 0 0 0-1.5-1.5h-4ZM9 20.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-2Zm8-11A1.5 1.5 0 0 1 18.5 8h4A1.5 1.5 0 0 1 24 9.5v3a1.5 1.5 0 0 1-1.5 1.5h-4a1.5 1.5 0 0 1-1.5-1.5v-3Zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-4Zm0 7a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-4Zm-.5 1.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-5Z",fill:"currentColor"})))},ij=(0,c.memo)(SvgBox4Alternate);const sj=function PageTemplatesIcon(){return c.createElement(ij,{title:(0,d.__)("Page templates library","web-stories")})},cj={icon:bU,tooltip:(0,d.__)("Media","web-stories"),placement:Ed.PLACEMENT.BOTTOM_START,Pane:EU,id:"media"},dj={icon:BU,tooltip:(0,d.__)("Third-party media","web-stories"),Pane:RU,id:"media3p"},uj={icon:lG,tooltip:(0,d.__)("Text","web-stories"),Pane:aG,id:"text"},pj={icon:az,tooltip:(0,d.__)("Shapes & Stickers","web-stories"),Pane:ez,id:"shapes"},mj={icon:dG,tooltip:(0,d.__)("Elements","web-stories"),Pane:cG,id:"elements"},fj={icon:sj,tooltip:(0,d.__)("Page templates","web-stories"),Pane:aj,id:"pageTemplates"},gj={STORY_TITLE:"STORY_TITLE",STYLE_PANE:"STYLE_PANE",ANIMATION:"ANIMATION",ASSISTIVE_TEXT:"ASSISTIVE_TEXT",CAPTIONS:"CAPTIONS",EXCERPT:"EXCERPT",LINK:"LINK",PAGE_BACKGROUND:"PAGE_BACKGROUND",POSTER:"POSTER",PUBLISHER_LOGO:"PUBLISHER_LOGO",VIDEO_A11Y_POSTER:"VIDEO_A11Y_POSTER",STYLE:"STYLE",FONT:"FONT",TEXT_COLOR:"TEXT_COLOR",MEDIA:"MEDIA",MEDIA3P:"MEDIA3P",TEXT_SET:"TEXT",PAGE_TEMPLATES:"PAGE_TEMPLATES"},hj={[gj.STORY_TITLE]:{focus:!0},[gj.STYLE_PANE]:{focus:!0,tab:Uy},[gj.POSTER]:{focus:!0,tab:zy},[gj.PUBLISHER_LOGO]:{focus:!0,tab:zy},[gj.EXCERPT]:{focus:!0,tab:zy},[gj.CAPTIONS]:{focus:!0,tab:Uy},[gj.ASSISTIVE_TEXT]:{focus:!0,tab:Uy},[gj.PAGE_BACKGROUND]:{focus:!0,tab:Uy},[gj.ANIMATION]:{focus:!0,tab:Uy},[gj.FONT]:{focus:!0,tab:Uy},[gj.LINK]:{focus:!0,tab:Uy},[gj.VIDEO_A11Y_POSTER]:{focus:!0,tab:Uy},[gj.STYLE]:{focus:!0,tab:Uy},[gj.TEXT_COLOR]:{focus:!0,tab:Uy},[gj.MEDIA]:{focus:!0,tab:Hy,section:cj.id},[gj.MEDIA3P]:{focus:!0,tab:Hy,section:dj.id},[gj.TEXT_SET]:{focus:!0,tab:Hy,section:uj.id},[gj.PAGE_TEMPLATES]:{focus:!0,tab:Hy,section:fj.id}},Ej=gj;const bj=function HighlightsProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),{setSelectedElementsById:a,setCurrentPage:o}=Sa((e=>{let{actions:t}=e;return{setSelectedElementsById:t.setSelectedElementsById,setCurrentPage:t.setCurrentPage}})),l=(0,u.useCallback)((e=>{let{elementId:t,elements:n,pageId:r}=e;r&&o({pageId:r}),Array.isArray(n)?a({elementIds:n.map((e=>{let{id:t}=e;return t}))}):t&&a({elementIds:[t]})}),[o,a]),i=(0,u.useCallback)((e=>{let{elements:t,elementId:n,pageId:a,highlight:o}=e;if((t||n||a)&&l({elements:t,elementId:n,pageId:a}),o){const{tab:e,section:t,...n}=hj[o];r({[o]:{...n,showEffect:!0},tab:e,section:t})}}),[l]),s=(0,u.useCallback)((()=>r({})),[r]),d=(0,u.useCallback)((e=>r((t=>({[e]:{...t[e],showEffect:!1}})))),[]),p=(0,u.useMemo)((()=>({setHighlights:i,onFocusOut:s,cancelEffect:d,...n})),[d,s,i,n]);return c.createElement(By.Provider,{value:p},t)},yj={ADD_ANIMATION:{trackingEventName:"add_animation",text:(0,d.__)("Add animation","web-stories")},ADD_LINK:{trackingEventName:"add_link",text:(0,d.__)("Add link","web-stories")},ADD_CAPTIONS:{trackingEventName:"add_captions",text:(0,d.__)("Add captions","web-stories")},AUTO_STYLE_TEXT:{trackingEventName:"auto_style_text",text:(0,d.__)("Adaptive text colors","web-stories")},CHANGE_BACKGROUND_COLOR:{trackingEventName:"change_background_color",text:(0,d.__)("Change background color","web-stories")},CHANGE_TEXT_COLOR:{trackingEventName:"change_text_color",text:(0,d.__)("Change color","web-stories")},CHANGE_COLOR:{trackingEventName:"change_color",text:(0,d.__)("Change color","web-stories")},RESET_ELEMENT:{trackingEventName:"reset_element",text:(0,d.__)("Reset element","web-stories")},CHANGE_FONT:{trackingEventName:"change_font",text:(0,d.__)("Edit text","web-stories")},INSERT_BACKGROUND_MEDIA:{trackingEventName:"insert_background_media",text:(0,d.__)("Insert background media","web-stories")},INSERT_TEXT:{trackingEventName:"insert_text",text:(0,d.__)("Insert text","web-stories")},REPLACE_BACKGROUND_MEDIA:{trackingEventName:"replace_background_media",text:(0,d.__)("Replace background","web-stories")},REPLACE_MEDIA:{trackingEventName:"replace_media",text:(0,d.__)("Replace media","web-stories")},TRIM_VIDEO:{trackingEventName:"trim_video",text:(0,d.__)("Trim video","web-stories")}},_j="animation",vj="overlay",wj="styles",Tj={locked:!0,topLeft:2,topRight:2,bottomLeft:2,bottomRight:2},Sj=0;var Cj,Ij=n(65132);function Aj(){return Aj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Aj.apply(this,arguments)}const SvgArrowLeftCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Aj({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Cj||(Cj=c.createElement("path",{d:"M15.07 22.5 9.5 17m0 0 5.57-5.5M9.5 17h7a6 6 0 0 0 6-6V9.5",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},xj=(0,c.memo)(SvgArrowLeftCurved);var kj;function Oj(){return Oj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oj.apply(this,arguments)}const SvgArrowOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Oj({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,kj||(kj=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8A1.5 1.5 0 0 0 8 9.5v13A1.5 1.5 0 0 0 9.5 24h13a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 22.5 8h-13ZM9 9.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-13Zm3.12 6.323a.5.5 0 0 1 .055-.705l3.499-3a.5.5 0 0 1 .651 0l3.5 3a.5.5 0 1 1-.651.76l-2.675-2.294V19.5a.5.5 0 1 1-1 0v-5.915l-2.674 2.292a.5.5 0 0 1-.704-.054Z",fill:"currentColor"})))},Nj=(0,c.memo)(SvgArrowOutline);var Pj;function Rj(){return Rj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rj.apply(this,arguments)}const SvgArrowRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Rj({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Pj||(Pj=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.28 10.144a.5.5 0 0 0-.702.712l4.704 4.644H9.5a.5.5 0 0 0 0 1h11.782l-4.704 4.645a.5.5 0 0 0 .702.711l5.571-5.5a.5.5 0 0 0 0-.712l-5.57-5.5Z",fill:"currentColor"})))},Mj=(0,c.memo)(SvgArrowRight);var Lj,Dj=n(80908);function Bj(){return Bj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bj.apply(this,arguments)}const SvgBox1=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Bj({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Lj||(Lj=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 10.5A1.5 1.5 0 0 1 12.5 9h6.25a1.5 1.5 0 0 1 1.5 1.5v11a1.5 1.5 0 0 1-1.5 1.5H12.5a1.5 1.5 0 0 1-1.5-1.5v-11Zm1.5-.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h6.25a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5H12.5Z",fill:"currentColor"})))},Fj=(0,c.memo)(SvgBox1);var Hj,Uj;function zj(){return zj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zj.apply(this,arguments)}const SvgBucket=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zj({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Hj||(Hj=c.createElement("path",{d:"M23.922 19.627c.01.004.014.007.016.009.171.232.534.74.851 1.285.16.274.301.547.403.793.105.257.147.44.147.547 0 .708-.637 1.35-1.5 1.35-.864 0-1.5-.642-1.5-1.35 0-.107.042-.29.147-.547a6.68 6.68 0 0 1 .403-.793c.317-.545.68-1.053.85-1.285a.069.069 0 0 1 .017-.01.212.212 0 0 1 .083-.015c.035 0 .064.007.083.016ZM15.353 7.868l7.778 7.778-7.424 7.425a1.5 1.5 0 0 1-2.121 0l-5.657-5.657a1.5 1.5 0 0 1 0-2.121l7.424-7.425Z",stroke:"currentColor"})),Uj||(Uj=c.createElement("path",{d:"m15.337 21.286 3.53-3.53-9.878-1.403 4.934 4.933a1 1 0 0 0 1.414 0Z",fill:"currentColor"})))},Gj=(0,c.memo)(SvgBucket);var jj,Yj;function Zj(){return Zj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zj.apply(this,arguments)}const SvgCaptions=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Zj({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jj||(jj=c.createElement("path",{d:"M7 22V8a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-4.586a1 1 0 0 0-.707.293l-2 2a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 0-.707-.293H8a1 1 0 0 1-1-1Z",stroke:"currentColor"})),Yj||(Yj=c.createElement("path",{d:"M14.953 13.158a2.577 2.577 0 0 0-1.898-.843c-1.46 0-2.644 1.243-2.644 2.776 0 1.532 1.184 2.775 2.644 2.775.822 0 1.556-.394 2.041-1.012M21.445 13.158a2.577 2.577 0 0 0-1.898-.843c-1.46 0-2.643 1.243-2.643 2.776 0 1.532 1.183 2.775 2.643 2.775.823 0 1.557-.394 2.042-1.012",stroke:"currentColor",strokeLinecap:"round"})))},Wj=(0,c.memo)(SvgCaptions);var Vj;function $j(){return $j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$j.apply(this,arguments)}const SvgChecklist=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",$j({viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Vj||(Vj=c.createElement("path",{d:"M22.5 7h-9v2h9V7zm0 8h-9v2h9v-2zM6.04 11 2.5 7.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L6.04 11zm0 8L2.5 15.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L6.04 19z",fill:"currentColor"})))},qj=(0,c.memo)(SvgChecklist);var Xj,Kj=n(30648);function Qj(){return Qj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qj.apply(this,arguments)}const SvgChevronRightSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Qj({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Xj||(Xj=c.createElement("path",{d:"m14 12 3 4-3 4",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Jj=(0,c.memo)(SvgChevronRightSmall);var eY,tY;function nY(){return nY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nY.apply(this,arguments)}const SvgCircleSpeed=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",nY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,eY||(eY=c.createElement("path",{d:"M21 20a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),tY||(tY=c.createElement("path",{stroke:"currentColor",strokeLinecap:"round",d:"M7.5 13.5h7M9.5 15.5h5M11.5 17.5h3"})))},rY=(0,c.memo)(SvgCircleSpeed);var aY,oY=n(94320),lY=n(74698);function iY(){return iY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iY.apply(this,arguments)}const SvgDots=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",iY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,aY||(aY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm5 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"currentColor"})))},sY=(0,c.memo)(SvgDots);var cY,dY,uY;function pY(){return pY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pY.apply(this,arguments)}const SvgEraser=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",pY({viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,cY||(cY=c.createElement("path",{stroke:"currentColor",strokeWidth:2.471,strokeLinecap:"round",d:"M36.763 57.764H63.94"})),dY||(dY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.514 51.392 61.08 32.827c.173-.173.29-.392.338-.631l1.261-6.306a1.235 1.235 0 0 0-1.454-1.454l-6.305 1.261c-.24.048-.459.166-.631.338L35.723 44.6l6.791 6.792zm-8.269 6.521a3.706 3.706 0 0 0 5.242 0l23.34-23.34a3.706 3.706 0 0 0 1.013-1.893l1.26-6.306c.52-2.593-1.767-4.879-4.36-4.36l-6.306 1.26a3.706 3.706 0 0 0-1.894 1.014L29.2 47.628a3.706 3.706 0 0 0 0 5.241l5.045 5.044z",fill:"currentColor"})),uY||(uY=c.createElement("path",{d:"M23.747 34.363a.612.612 0 0 0-1.147 0L20.96 38.8a.612.612 0 0 1-.362.362l-4.436 1.641a.612.612 0 0 0 0 1.148l4.436 1.641c.168.062.3.194.362.361L22.6 48.39a.612.612 0 0 0 1.147 0l1.642-4.437a.612.612 0 0 1 .361-.36l4.437-1.642a.612.612 0 0 0 0-1.148l-4.437-1.641a.611.611 0 0 1-.361-.362l-1.641-4.436zm7.221-10.016a.408.408 0 0 0-.765 0l-1.094 2.958a.408.408 0 0 1-.24.24L25.91 28.64a.408.408 0 0 0 0 .765l2.957 1.094c.112.042.2.13.241.241l1.094 2.958a.408.408 0 0 0 .765 0l1.095-2.958c.041-.111.129-.2.24-.24l2.958-1.095a.408.408 0 0 0 0-.765l-2.957-1.094a.408.408 0 0 1-.241-.241l-1.095-2.958z",fill:"currentColor"})))},mY=(0,c.memo)(SvgEraser);var fY,gY,hY=n(48068);function EY(){return EY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EY.apply(this,arguments)}const SvgFloppyDisk=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",EY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,fY||(fY=c.createElement("path",{d:"M12.76 20.8c-.359 0-.649-.358-.649-.8v-3.2c0-.442.29-.8.648-.8h6.482c.358 0 .648.358.648.8V20",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),gY||(gY=c.createElement("path",{d:"M21.6 24H10.4c-.371 0-.727-.169-.99-.469-.262-.3-.41-.707-.41-1.131V9.6c0-.424.148-.831.41-1.131.263-.3.619-.469.99-.469h8.646a1 1 0 0 1 .753.341l2.954 3.376a1 1 0 0 1 .247.659V22.4c0 .424-.148.831-.41 1.131-.263.3-.619.469-.99.469ZM18.333 11.2v1.6",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},bY=(0,c.memo)(SvgFloppyDisk);var yY,_Y;function vY(){return vY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vY.apply(this,arguments)}const SvgGearWithGauge=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",vY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,yY||(yY=c.createElement("rect",{width:32,height:32,rx:16,fill:"currentColor",fillOpacity:.64})),_Y||(_Y=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.564 15.406a5.122 5.122 0 0 1 0 1.192c-.053.446.132.9.522 1.122l.408.231a1 1 0 0 1 .368 1.377l-.513.873a1 1 0 0 1-1.355.363l-.45-.254c-.382-.217-.858-.15-1.214.108-.336.244-.7.452-1.087.618-.412.177-.716.563-.716 1.012v.452a1 1 0 0 1-1 1h-1.054a1 1 0 0 1-1-1v-.453c0-.449-.304-.835-.717-1.012a5.601 5.601 0 0 1-1.085-.616c-.357-.26-.833-.327-1.216-.11l-.448.254a1 1 0 0 1-1.355-.363l-.514-.873a1 1 0 0 1 .369-1.377l.404-.23c.392-.222.576-.678.524-1.126a5.129 5.129 0 0 1 0-1.188c.052-.448-.132-.904-.524-1.127l-.404-.229a1 1 0 0 1-.369-1.376l.514-.874a1 1 0 0 1 1.355-.363l.447.254c.384.217.86.15 1.216-.11a5.62 5.62 0 0 1 1.086-.617c.413-.177.716-.562.716-1.011V9.5a1 1 0 0 1 1-1h1.054a1 1 0 0 1 1 1v.453c0 .449.304.835.717 1.012.387.166.75.373 1.085.616.357.26.833.327 1.217.11l.446-.254a1 1 0 0 1 1.356.363l.513.874a1 1 0 0 1-.368 1.376l-.404.23c-.393.222-.577.678-.524 1.126zM12.5 16a3.5 3.5 0 0 1 7 0 .5.5 0 0 0 1 0 4.5 4.5 0 1 0-9 0 .5.5 0 0 0 1 0zm5.601-1.46a.5.5 0 0 0-.707-.707l-1.188 1.188a1 1 0 1 0 .745.669l1.15-1.15z",fill:"currentColor"})))},wY=(0,c.memo)(SvgGearWithGauge);var TY,SY=n(73035);function CY(){return CY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CY.apply(this,arguments)}const SvgLetterIOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",CY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,TY||(TY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 23a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 1a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm.5 2a.5.5 0 0 0-1 0v4a.5.5 0 0 0 1 0v-4Z",fill:"currentColor"})))},IY=(0,c.memo)(SvgLetterIOutline);var AY,xY;function kY(){return kY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kY.apply(this,arguments)}const SvgLetterMOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,AY||(AY=c.createElement("path",{d:"m19.526 12.955-.003.002a.73.73 0 0 0-.198.21L16 18.047l-3.325-4.88-.002-.002a.753.753 0 0 0-.209-.209.408.408 0 0 0-.221-.072.337.337 0 0 0-.266.128.427.427 0 0 0-.093.279v5.332a.95.95 0 0 0 .045.307v.001a.26.26 0 0 0 .123.144c.056.03.12.04.185.04.06 0 .12-.011.174-.042a.277.277 0 0 0 .115-.136.782.782 0 0 0 .059-.314v-4.414l3.049 4.393c.091.137.212.233.366.233.148 0 .268-.098.364-.23l.001-.002 3.05-4.394v4.414c0 .115.017.22.053.311l.002.007a.29.29 0 0 0 .12.132c.052.03.112.043.173.043.065 0 .129-.011.184-.041a.26.26 0 0 0 .123-.144v-.001a.95.95 0 0 0 .046-.307v-5.332c0-.105-.031-.2-.099-.279a.321.321 0 0 0-.26-.128.444.444 0 0 0-.231.071Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.231})),xY||(xY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 9.5A1.5 1.5 0 0 1 9.5 8h13A1.5 1.5 0 0 1 24 9.5v13a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 8 22.5v-13ZM9.5 9a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-13Z",fill:"currentColor"})))},OY=(0,c.memo)(SvgLetterMOutline);var NY;function PY(){return PY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PY.apply(this,arguments)}const SvgLetterSStrikethrough=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",PY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,NY||(NY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.503 10.826c.694-.547 1.622-.826 2.603-.826.968 0 1.87.237 2.563.769.704.54 1.142 1.35 1.228 2.39a.5.5 0 1 1-.996.082c-.065-.787-.382-1.327-.841-1.68-.47-.36-1.139-.561-1.954-.561-.801 0-1.499.229-1.985.611a1.95 1.95 0 0 0-.766 1.589c0 .6.265 1.006.613 1.3h-1.284a2.614 2.614 0 0 1-.329-1.3c0-1.003.444-1.82 1.148-2.374Zm5.075 6.674h1.183c.15.332.239.72.239 1.173 0 1.016-.402 1.87-1.138 2.46-.724.578-1.726.867-2.886.867-1.174 0-2.117-.322-2.8-.91-.682-.588-1.057-1.401-1.172-2.292a.5.5 0 0 1 .992-.128c.089.693.37 1.263.833 1.662.463.399 1.157.668 2.147.668 1.005 0 1.764-.251 2.261-.649.485-.387.763-.946.763-1.678 0-.523-.17-.894-.422-1.173Zm-9.078-2a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z",fill:"currentColor"})))},RY=(0,c.memo)(SvgLetterSStrikethrough);var MY;function LY(){return LY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LY.apply(this,arguments)}const SvgLetterTArrow=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",LY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,MY||(MY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.854 10.146a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 .708.708L21 11.707v8.586l-2.146-2.147a.5.5 0 0 0-.708.708l3 3a.5.5 0 0 0 .351.146h.006a.498.498 0 0 0 .344-.14l.007-.007 3-3a.5.5 0 0 0-.708-.707L22 20.293v-8.586l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3ZM8 10a.5.5 0 0 0 0 1h3.5v10.5a.5.5 0 0 0 1 0V11H16a.5.5 0 0 0 0-1H8Z",fill:"currentColor"})))},DY=(0,c.memo)(SvgLetterTArrow);var BY;function FY(){return FY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FY.apply(this,arguments)}const SvgLetterTPlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",FY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,BY||(BY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 11.5a.5.5 0 0 0-.5.5v.711a.5.5 0 1 1-1 0V12A1.5 1.5 0 0 1 8 10.5h7a1.5 1.5 0 0 1 1.5 1.5v.711a.5.5 0 1 1-1 0V12a.5.5 0 0 0-.5-.5h-3v10h1.3a.5.5 0 0 1 0 1H9.7a.5.5 0 0 1 0-1H11v-10H8Zm9.5 4.5a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",fill:"currentColor"})))},HY=(0,c.memo)(SvgLetterTPlus);var UY;function zY(){return zY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zY.apply(this,arguments)}const SvgLetterTLargeLetterTSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zY({viewBox:"0 0 79 79",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,UY||(UY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.677 24.838c0-.679.55-1.229 1.228-1.229H30.19v31.942h-5.16a1.229 1.229 0 1 0 0 2.457h12.777a1.228 1.228 0 1 0 0-2.457h-5.16V23.609h12.286c.678 0 1.228.55 1.228 1.229v2.894a1.229 1.229 0 0 0 2.457 0v-2.894a3.686 3.686 0 0 0-3.685-3.686H17.905a3.686 3.686 0 0 0-3.685 3.686v2.894a1.229 1.229 0 0 0 2.457 0v-2.894zm30.713 17.2c0-.68.55-1.23 1.228-1.23h4.914v14.743h-4.177a1.228 1.228 0 1 0 0 2.457h5.406v-1.229 1.229h5.405a1.228 1.228 0 1 0 0-2.457H55.99V40.809h4.914c.679 0 1.229.55 1.229 1.228v1.229a1.229 1.229 0 0 0 2.457 0v-1.229a3.686 3.686 0 0 0-3.686-3.685H48.618a3.686 3.686 0 0 0-3.685 3.685v1.229a1.228 1.228 0 1 0 2.457 0v-1.229z",fill:"currentColor"})))},GY=(0,c.memo)(SvgLetterTLargeLetterTSmall);var jY,YY=n(42914);function ZY(){return ZY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZY.apply(this,arguments)}const SvgPageMargin=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ZY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jY||(jY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 9h8a1 1 0 0 1 1 1v1.5H11V10a1 1 0 0 1 1-1Zm-1 3.5v7h10v-7H11Zm10 8H11V22a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1.5ZM10 10a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V10Z",fill:"currentColor"})))},WY=(0,c.memo)(SvgPageMargin);var VY,$Y,qY,XY;function KY(){return KY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KY.apply(this,arguments)}const SvgPageSwap=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",KY({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,VY||(VY=c.createElement("rect",{x:12,y:14,width:8,height:12,rx:1,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),$Y||($Y=c.createElement("path",{d:"M15 11V8a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),qY||(qY=c.createElement("path",{d:"M14 23h4M14 21h2",stroke:"currentColor",strokeLinecap:"round"})),XY||(XY=c.createElement("path",{d:"M20.571 6 18 8.539m0 0 2.571 2.538M18 8.54h3.23A2.77 2.77 0 0 1 24 11.308V12",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},QY=(0,c.memo)(SvgPageSwap);var JY;function eZ(){return eZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eZ.apply(this,arguments)}const SvgPercent=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",eZ({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,JY||(JY=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.785 9.089a.5.5 0 0 1 .126.696l-9 13a.5.5 0 1 1-.822-.57l9-13a.5.5 0 0 1 .696-.126ZM12 14.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm10 4a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",fill:"currentColor"})))},tZ=(0,c.memo)(SvgPercent);var nZ,rZ,aZ;function oZ(){return oZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oZ.apply(this,arguments)}const SvgPictureSwap=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",oZ({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,nZ||(nZ=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.996 15H14v10.441h.264l2.048-3.327a1.5 1.5 0 0 1 2.287-.323l.242.22a.5.5 0 0 0 .758-.1l1.598-2.5a1.5 1.5 0 0 1 2.623.175l2.176 4.674V15Zm0 11.441c.066 0 .13-.006.192-.018h.03a.5.5 0 0 0 .399-.197.998.998 0 0 0 .38-.785V15a1 1 0 0 0-1-1H14a1 1 0 0 0-1 1v10.441a1 1 0 0 0 1 1h11.996Zm-3.082-6.432a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414Zm-7.081-2.121a1.055 1.055 0 1 1 2.11 0 1.055 1.055 0 0 1-2.11 0Zm1.055-2.055a2.055 2.055 0 1 0 0 4.11 2.055 2.055 0 0 0 0-4.11Z",fill:"currentColor"})),rZ||(rZ=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 9h10v1.727h1V9a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h1.77v-1H7V9Z",fill:"currentColor"})),aZ||(aZ=c.createElement("path",{d:"M22.571 6 20 8.539m0 0 2.571 2.538M20 8.54h3.23A2.77 2.77 0 0 1 26 11.308V12M8.429 26 11 23.462m0 0-2.571-2.54M11 23.463H7.77A2.77 2.77 0 0 1 5 20.692V20",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},lZ=(0,c.memo)(SvgPictureSwap);var iZ;function sZ(){return sZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sZ.apply(this,arguments)}const SvgPlay=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",sZ({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,iZ||(iZ=c.createElement("path",{d:"M23.426 15.032a1.103 1.103 0 0 1 0 1.936l-11.826 6.4c-.724.392-1.6-.138-1.6-.967V9.599c0-.83.876-1.36 1.6-.967l11.826 6.4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},cZ=(0,c.memo)(SvgPlay);var dZ;function uZ(){return uZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uZ.apply(this,arguments)}const SvgPlusFilled=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",uZ({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,dZ||(dZ=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 24a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-12a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},pZ=(0,c.memo)(SvgPlusFilled);var mZ,fZ;function gZ(){return gZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gZ.apply(this,arguments)}const SvgSparkles=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",gZ({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,mZ||(mZ=c.createElement("path",{d:"m19 10.44 1.342 3.627a1 1 0 0 0 .59.591L24.56 16l-3.626 1.342a1 1 0 0 0-.591.59L19 21.56l-1.342-3.626a1 1 0 0 0-.59-.591L13.44 16l3.626-1.342a1 1 0 0 0 .591-.59L19 10.44Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"bevel"})),fZ||(fZ=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m11 9.96-.432 1.169a.743.743 0 0 1-.439.439L8.961 12l1.168.432a.743.743 0 0 1 .439.439L11 14.039l.432-1.168a.743.743 0 0 1 .439-.439L13.039 12l-1.168-.432a.743.743 0 0 1-.439-.439L11 9.961Zm.232-.798a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795ZM10 17.96l-.432 1.169a.743.743 0 0 1-.439.439L7.961 20l1.168.432a.743.743 0 0 1 .439.439L10 22.039l.432-1.168a.743.743 0 0 1 .439-.439L12.039 20l-1.168-.432a.743.743 0 0 1-.439-.439L10 17.961Zm.232-.798a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795Z",fill:"currentColor"})))},hZ=(0,c.memo)(SvgSparkles);var EZ,bZ=n(2779);function yZ(){return yZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yZ.apply(this,arguments)}const SvgTimeline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yZ({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,EZ||(EZ=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 10.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm3.95-.5a2.5 2.5 0 1 0 0 1H15a.5.5 0 0 1 .5.5v2.05a2.5 2.5 0 0 0 0 4.9v2.05A1.5 1.5 0 0 0 17 22h2.05a2.5 2.5 0 1 0 0-1H17a.5.5 0 0 1-.5-.5v-2.05a2.5 2.5 0 0 0 0-4.9V11.5A1.5 1.5 0 0 0 15 10h-2.05ZM20 21.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0ZM17.5 16a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z",fill:"currentColor"})))},_Z=(0,c.memo)(SvgTimeline);var vZ;function wZ(){return wZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wZ.apply(this,arguments)}const SvgUnion=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wZ({viewBox:"0 0 29 19",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vZ||(vZ=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.921 0h5.08a.5.5 0 0 1 0 1h-5.08a1.5 1.5 0 0 0-1.139.523l-5.401 6.303-1 1.165 4.159 4.677 2.514 2.829a1.5 1.5 0 0 0 1.121.503H28.5a.5.5 0 0 1 0 1h-5.325a2.5 2.5 0 0 1-1.868-.839l-2.515-2.829-4.067-4.575-4.345 5.069-2.401 2.801a2.5 2.5 0 0 1-1.898.873H1a.5.5 0 1 1 0-1h5.08a1.5 1.5 0 0 0 1.14-.524l2.401-2.801 4.434-5.172-1.48-1.664-5.624-5.876A1.5 1.5 0 0 0 5.867 1H.5a.5.5 0 1 1 0-1h5.367a2.5 2.5 0 0 1 1.806.771l5.632 5.883a.621.621 0 0 1 .012.014l1.394 1.569.91-1.062L21.023.872A2.5 2.5 0 0 1 22.921 0Z",fill:"currentColor"})))},TZ=(0,c.memo)(SvgUnion);var SZ=n(11923);function CZ(e){return e?.type===A.ELEMENT_TYPES.TEXT&&e?.borderRadius?e.borderRadius.locked&&e.borderRadius.topLeft===Tj.topLeft:!e?.borderRadius||e.borderRadius===Sj}const IZ=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];const n=[];return e?.overlay&&n.push(vj),t?.length&&n.push(_j),(e?.opacity<100||!CZ(e)||e?.border)&&n.push(wj),n};function AZ(){return AZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AZ.apply(this,arguments)}const xZ=(0,qe.default)(
/* translators: %s: Ctrl/Cmd + Z keyboard shortcut */
(0,d.__)("Press %s to undo the last change","web-stories"),(0,tr.prettifyShortcut)("mod+z")),{Bucket:kZ,ColorBucket:OZ,CircleSpeed:NZ,Eraser:PZ,LetterTPlus:RZ,Link:MZ,Media:LZ,PictureSwap:DZ,Captions:BZ}=l,MediaPicker=e=>{let{render:t,...n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o},MediaUpload:l}=Y(),{selectedElements:i,updateElementsById:s}=Sa((e=>{let{state:{selectedElements:t},actions:{updateElementsById:n}}=e;return{selectedElements:t,updateElementsById:n}})),{resetWithFetch:p,postProcessingResource:m,optimizeVideo:f,optimizeGif:g,canTranscodeResource:h}=yi((e=>{let{state:{canTranscodeResource:t},actions:{resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}}=e;return{canTranscodeResource:t,resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}})),{isTranscodingEnabled:E}=Ra(),{showSnackbar:b}=(0,hr.useSnackbar)();let y=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]);const _=(0,u.useMemo)((()=>y.map((e=>Mt(e))).flat()),[y]);E&&(y=y.concat(ka));const v=ka.filter((e=>!o.includes(e)));let w=(0,d.__)("No file types are currently supported.","web-stories");_.length&&(w=(0,qe.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,Ot.default)(_)));const T=(0,u.useCallback)(((e,t)=>{zv.default.set(e.id,{url:t,type:"cached"}),s({elementIds:[i?.[0]?.id],properties:{type:e.type,resource:e}})}),[i,s]),S=(0,u.useCallback)((e=>{try{E&&h(e)&&(v.includes(e.mimeType)&&f({resource:e}),"image/gif"===e.mimeType&&g({resource:e})),T(e,e.sizes?.medium?.sourceUrl||e.src),m(e)}catch(e){b({message:e.message,dismissable:!0})}}),[E,h,T,m,v,f,g,b]);return c.createElement(l,AZ({title:(0,d.__)("Replace media","web-stories"),buttonInsertText:(0,d.__)("Replace media","web-stories"),onSelect:S,onClose:p,type:y,onSelectErrorMessage:w,render:e=>t({onClick:e})},n))},FZ=()=>{const{capabilities:{hasUploadMediaAction:e},isRTL:t}=Y(),n=(0,u.useContextSelector)(Ea,va),{backgroundElement:r,selectedElementAnimations:a,selectedElements:o,updateElementsById:l}=Sa((e=>{let{state:{currentPage:t,selectedElementAnimations:n,selectedElements:r},actions:{updateElementsById:a}}=e;return{backgroundElement:t?.elements.find((e=>e.isBackground)),selectedElementAnimations:n,selectedElements:r,updateElementsById:a}})),{undo:i}=pr((e=>{let{actions:{undo:t}}=e;return{undo:t}})),s=(0,hr.useSnackbar)((e=>{let{showSnackbar:t}=e;return t})),{setHighlights:c}=Fy((e=>{let{setHighlights:t}=e;return{setHighlights:t}})),p=(0,u.useRef)(i);p.current=i;const m=o?.[0],f=(0,u.useCallback)((e=>{e.stopPropagation()}),[]),g=(0,u.useCallback)(((e,t,n)=>{const r={};n.includes(vj)&&(r.overlay=null),n.includes(_j)&&l({elementIds:[t],properties:e=>yw(e,{animation:{...a?.[0],delete:!0}},!0)}),n.includes(wj)&&(r.opacity=100,r.border=null,r.borderRadius=null),e===A.ELEMENT_TYPES.TEXT&&(r.borderRadius=Tj),l({elementIds:[t],properties:e=>yw(e,r,!0)})}),[a,l]),h=(0,u.useCallback)((e=>{let{elementId:t,resetProperties:n,elementType:r}=e;g(r,t,n),s({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Element properties have been reset","web-stories"),onAction:()=>{p.current(),(0,L.trackEvent)("quick_action",{name:`undo_${yj.RESET_ELEMENT.trackingEventName}`,element:r,isBackground:!0})},actionHelpText:xZ})}),[g,s]),E=(0,u.useCallback)((e=>t=>n=>{n.preventDefault(),c({elementId:t||m?.id,highlight:e})}),[c,m]),b=(0,u.useMemo)((()=>{const e=(o?.[0]?.resource?.id?.toString()||"").startsWith("media/")?Ej.MEDIA3P:Ej.MEDIA;return E(e)}),[E,o]),{handleFocusAnimationPanel:y,handleFocusLinkPanel:_,handleFocusPageBackground:v,handleFocusTextSetsPanel:w,handleFocusCaptionsPanel:T}=(0,u.useMemo)((()=>({handleFocusAnimationPanel:E(Ej.ANIMATION),handleFocusLinkPanel:E(Ej.LINK),handleFocusPageBackground:E(Ej.PAGE_BACKGROUND),handleFocusTextSetsPanel:E(Ej.TEXT_SET),handleFocusCaptionsPanel:E(Ej.CAPTIONS)})),[E]),S=(0,u.useMemo)((()=>({tooltipPlacement:t?Ed.PLACEMENT.LEFT:Ed.PLACEMENT.RIGHT,onMouseDown:f})),[f,t]),C=(0,u.useMemo)((()=>[{Icon:kZ,label:yj.CHANGE_BACKGROUND_COLOR.text,onClick:e=>{v(r?.id)(e),(0,L.trackEvent)("quick_action",{name:yj.CHANGE_BACKGROUND_COLOR.trackingEventName,element:"none"})},...S},{Icon:LZ,label:yj.INSERT_BACKGROUND_MEDIA.text,onClick:e=>{b()(e),(0,L.trackEvent)("quick_action",{name:yj.INSERT_BACKGROUND_MEDIA.trackingEventName,element:"none"})},separator:"top",...S},{Icon:RZ,label:yj.INSERT_TEXT.text,onClick:e=>{w()(e),(0,L.trackEvent)("quick_action",{name:yj.INSERT_TEXT.trackingEventName,element:"none"})},...S}]),[S,r,b,v,w]),I=(0,u.useMemo)((()=>IZ(m,a)),[m,a]),x=I.length>0,k=(0,u.useMemo)((()=>{const e=[{Icon:NZ,label:yj.ADD_ANIMATION.text,onClick:e=>{y()(e),(0,L.trackEvent)("quick_action",{name:yj.ADD_ANIMATION.trackingEventName,element:m?.type})},...S},{Icon:MZ,label:yj.ADD_LINK.text,onClick:e=>{_()(e),(0,L.trackEvent)("quick_action",{name:yj.ADD_LINK.trackingEventName,element:m?.type})},...S}],t={Icon:PZ,label:yj.RESET_ELEMENT.text,onClick:()=>{h({elementId:m?.id,resetProperties:I,elementType:m?.type}),(0,L.trackEvent)("quick_action",{name:yj.RESET_ELEMENT.trackingEventName,element:m?.type})},separator:"top",...S};return x?[...e,t]:e}),[y,m?.id,m?.type,S,_,x,h,I]),O=(0,u.useMemo)((()=>{const t=[];return e&&t.push({Icon:DZ,label:yj.REPLACE_MEDIA.text,onClick:()=>{n(ga.onReplaceForegroundMedia),(0,L.trackEvent)("quick_action",{name:yj.REPLACE_MEDIA.trackingEventName,element:m?.type})},wrapWithMediaPicker:!0,...S}),[...t,...k]}),[S,k,e,n,m?.type]),N=k,P=bM(m,(e=>l({elementIds:[m?.id],properties:e}))),R=(0,u.useMemo)((()=>[{Icon:OZ,label:yj.AUTO_STYLE_TEXT.text,onClick:()=>{P(),(0,L.trackEvent)("quick_action",{name:yj.AUTO_STYLE_TEXT.trackingEventName,element:m?.type})},...S},...k]),[P,k,S,m?.type]),M=(0,u.useMemo)((()=>{const[e,t]=x?[O.slice(0,O.length-1),O.slice(-1)]:[O,[]];return[...e,{Icon:BZ,label:yj.ADD_CAPTIONS.text,onClick:e=>{T()(e),(0,L.trackEvent)("quick_action",{name:yj.ADD_CAPTIONS.trackingEventName,element:m?.type})},...S},...t]}),[S,O,T,m?.type,x]),D=(0,u.useMemo)((()=>{const t=[{Icon:NZ,label:yj.ADD_ANIMATION.text,onClick:e=>{y()(e),(0,L.trackEvent)("quick_action",{name:yj.ADD_ANIMATION.trackingEventName,element:m?.type,isBackground:!0})},...S}];e&&t.unshift({Icon:DZ,label:yj.REPLACE_BACKGROUND_MEDIA.text,onClick:()=>{n(ga.onReplaceBackgroundMedia),(0,L.trackEvent)("quick_action",{name:yj.REPLACE_BACKGROUND_MEDIA.trackingEventName,element:m?.type,isBackground:!0})},wrapWithMediaPicker:!0,...S});const r={Icon:PZ,label:yj.RESET_ELEMENT.text,onClick:()=>{h({elementId:m?.id,resetProperties:I,elementType:A.ELEMENT_TYPES.IMAGE}),(0,L.trackEvent)("quick_action",{name:yj.RESET_ELEMENT.trackingEventName,element:m?.type,isBackground:!0})},separator:"top",...S};return x?[...t,r]:t}),[S,n,h,y,e,I,m,x]);if(o.length>1)return[];const B=Boolean(r&&r?.resource),F=0===o.length,H=o?.[0]?.isBackground;if(F||H&&!B)return C;if(H&&B){return"video"===m.type?[...D]:D}switch(o?.[0]?.type){case A.ELEMENT_TYPES.IMAGE:case A.ELEMENT_TYPES.GIF:return O;case A.ELEMENT_TYPES.SHAPE:return N;case A.ELEMENT_TYPES.TEXT:return R;case A.ELEMENT_TYPES.VIDEO:return M;case A.ELEMENT_TYPES.STICKER:return k;default:return[]}},HZ={OUTLINE:Dy,FLASH:Ly};var UZ=n(86954);const zZ=52,GZ=78,jZ=32,YZ=36,ZZ="VIDEO",WZ="IMAGE",VZ="TEXT",$Z="SHAPE",qZ="PAGE",XZ="thumbnail-scrim",KZ="thumbnail-show-hover-focus",QZ=(0,d.__)("Loading","web-stories"),JZ=p.default.button.withConfig({displayName:"styles__Container",componentId:"sc-jiqsnn-0"})((e=>{let{theme:t,$isError:n,$isOverflow:r}=e;return(0,p.css)(["position:relative;display:flex;align-items:center;justify-content:center;width:","px;height:","px;padding:0;outline:none;border:none;border-radius:",";background-color:",";cursor:pointer;.","{display:none;}&:hover{.","{display:flex;}}"," &:focus,&:focus-within{.","{display:flex;}.","{background-color:",";border:1px solid ",";}}"],zZ,GZ,t.borders.radius.small,r?t.colors.interactiveBg.secondaryNormal:"transparent",KZ,KZ,n&&(0,p.css)([".","{border:1px solid ",";background-color:",";}&:hover .","{background-color:",";}"],XZ,t.colors.border.negativeNormal,t.colors.opacity.black24,XZ,t.colors.opacity.black24),KZ,XZ,t.colors.opacity.black64,t.colors.border[n?"negativeNormal":"focus"])}));JZ.propTypes={$isError:ma().bool};const eW=p.default.div.withConfig({displayName:"styles__Background",componentId:"sc-jiqsnn-1"})((e=>{let{theme:t,$isShape:n,$isPage:r}=e;return(0,p.css)(["width:100%;height:100%;display:flex;border-radius:",";& > img,& > video{width:100%;height:100%;object-fit:cover;border-radius:",";}& > div{display:flex;height:100%;margin:0 auto;align-items:center;justify-content:center;align-self:center;color:",";}"," ",""],t.borders.radius.small,t.borders.radius.small,t.colors.fg.primary,n&&(0,p.css)(["& > div{width:","px;height:","px;& > div{width:100%;height:100%;}}"],YZ,YZ),r&&(0,p.css)([".pagePreviewOverrides{border-color:none;&::after{content:none;border:none;}}& > div > div{width:100%;}"]))}));eW.propTypes={$isPage:ma().bool,$isShape:ma().bool};const tW=p.default.div.withConfig({displayName:"styles__NestedIconContainer",componentId:"sc-jiqsnn-2"})((e=>{let{theme:t,$isError:n}=e;return(0,p.css)(["display:flex;position:absolute;top:0;width:100%;height:100%;align-items:center;justify-content:center;z-index:5;& > div{margin:auto;width:","px;}svg{width:100%;height:auto;","}"],jZ,n&&(0,p.css)(["color:",";"],t.colors.fg.negative))}));tW.propTypes={$isError:ma().bool};const nW=p.default.div.withConfig({displayName:"styles__Scrim",componentId:"sc-jiqsnn-3"})((e=>{let{theme:t,$showDefaultBackground:n}=e;return(0,p.css)(["position:absolute;box-sizing:border-box;top:0;width:100%;height:100%;border:1px solid transparent;border-radius:",";z-index:2;",";&:hover{background-color:",";}"],t.borders.radius.small,n&&(0,p.css)(["background-color:",";"],t.colors.opacity.black24),t.colors.opacity.black64)}));function rW(){return rW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rW.apply(this,arguments)}nW.propTypes={$showDefaultBackground:ma().bool};const aW=[$Z,VZ],oW=e=>{let{displayBackground:t,isError:n,onClick:r,type:a,isLoading:o,loadingMessage:l=QZ,children:i,...s}=e;return c.createElement(JZ,rW({as:r?"button":"div",onClick:r,$isError:n},s),o&&c.createElement(LoadingBar,{loadingMessage:l}),!n&&!o&&i&&c.createElement(tW,{className:KZ},i),n&&c.createElement(tW,{$isError:n},c.createElement(hY.default,null)),c.createElement(nW,{$showDefaultBackground:aW.indexOf(a)>-1,className:XZ}),c.createElement(eW,{$isShape:a===$Z,$isPage:a===qZ},t))};function lW(){return lW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lW.apply(this,arguments)}const iW=e=>{let{overflowCount:t,...n}=e;return c.createElement(JZ,lW({$isOverflow:!0,as:"div"},n),c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},(0,qe.default)(
/* translators: %s: number of thumbnails in overflow */
(0,d.__)("+ %s","web-stories"),t)))},LayerThumbnail=e=>{let{page:t}=e;const{LayerIcon:n}=(0,A.getDefinitionForType)(t?.type),{getProxiedUrl:r}=Ao(),{isDefaultBackground:a}=t,o={element:t,getProxiedUrl:r,currentPageBackgroundColor:Sa((e=>{let{state:t}=e;return!a||t.currentPage?.backgroundColor}))};return"video"===t?.type&&(o.showVideoPreviewAsBackup=!0),c.createElement(n,o)},sW={SINGLE_ISSUE:"single_issue",MULTIPLE_ISSUE:"multiple_issue"},cW={SINGLE_WITH_THUMBNAIL:"single_with_thumbnail",SINGLE:"single",DEFAULT:"single",MULTIPLE_WITH_THUMBNAIL:"multiple_with_thumbnail",MULTIPLE_WITH_THUMBNAIL_WITH_CTA:"multiple_with_thumbnail_with_cta",MULTIPLE_WITH_THUMBNAIL_OVERFLOW:" multiple_with_thumbnail_overflow"},dW={[cW.SINGLE]:"'title title title title' 'cta cta cta thumbnail' 'footer footer footer footer'",[cW.SINGLE_WITH_THUMBNAIL]:"'title title title thumbnail' 'cta cta cta thumbnail' 'footer footer footer footer'",[cW.MULTIPLE_WITH_THUMBNAIL]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'footer footer footer footer'",[cW.MULTIPLE_WITH_THUMBNAIL_WITH_CTA]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'cta cta cta cta' 'footer footer footer footer'",[cW.MULTIPLE_WITH_THUMBNAIL_WITH_CTA_OVERFLOW]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'cta cta cta cta' 'footer footer footer footer'",[cW.MULTIPLE_WITH_THUMBNAIL_OVERFLOW]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'footer footer footer footer'"},{focusableOutlineCSS:uW}=UZ,pW=p.default.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-1nhlyv8-0"})(["width:","px;display:flex;border-radius:4px;background:",";margin:8px 0;"],272,(e=>{let{theme:t}=e;return t.colors.bg.secondary})),mW=p.default.div.withConfig({displayName:"styles__Container",componentId:"sc-1nhlyv8-1"})(["width:240px;display:grid;margin:16px;grid-gap:8px;grid-template-columns:52px 52px 52px 52px;",""],(e=>{let{gridVariant:t}=e;return(0,p.css)(["grid-template-areas:",";"],dW[t])}));mW.propTypes={gridVariant:ma().oneOf(Object.values(cW))};const fW=p.default.div.withConfig({displayName:"styles__Title",componentId:"sc-1nhlyv8-2"})(["grid-area:title;&:is(button){display:flex;outline:none;margin:0;padding:0;background-color:transparent;border:none;text-align:left;cursor:pointer;border-radius:",";",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return uW(t.colors.border.focus,t.colors.bg.secondary)})),gW=p.default.div.withConfig({displayName:"styles__Cta",componentId:"sc-1nhlyv8-3"})(["grid-area:cta;margin:0;"]),hW=((0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styles__CheckboxCtaLabel",componentId:"sc-1nhlyv8-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.linkNormal})),p.default.div.withConfig({displayName:"styles__CheckboxCtaContainer",componentId:"sc-1nhlyv8-5"})(["display:flex;align-items:center;margin:14px 0 6px;label{margin:0 8px;}"]),(0,p.default)(iW).withConfig({displayName:"styles__StyledOverflowThumbnail",componentId:"sc-1nhlyv8-6"})(["width:52px;cursor:pointer;"])),EW=p.default.div.withConfig({displayName:"styles__Footer",componentId:"sc-1nhlyv8-7"})(["grid-area:footer;padding-top:8px;border-top:1px solid ",";& > *{color:",";}"],(e=>{let{theme:t}=e;return t.colors.divider.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),bW=p.default.div.withConfig({displayName:"styles__CardListWrapper",componentId:"sc-1nhlyv8-8"})(["margin-left:16px;li{color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),yW=(0,p.default)(wY).withConfig({displayName:"styles__StyledVideoOptimizationIcon",componentId:"sc-1nhlyv8-9"})(["rect{color:",";}path{color:",";}"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));function _W(e){return""===(e.featuredMedia?.url?.trim()||"")}function vW(e){let t=0;return e.elements.forEach((e=>{"text"===e.type&&(t+=(0,so.stripHTML)(e.content).length)})),t}function wW(e,t){return(e||[]).filter(t)}function TW(e,t){return(e||[]).flatMap((e=>(e?.elements||[]).map((t=>({...t,pageId:e.id}))))).filter(t)}let SW;const ThumbnailPagePreview=e=>{let{page:t}=e;return c.createElement(cx,{page:t,width:zZ,height:GZ,as:"div",help:"checklist",isActive:!0,className:"pagePreviewOverrides"})};function CW(){return CW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CW.apply(this,arguments)}const IW=p.default.div.withConfig({displayName:"thumbnailWrapper__Wrapper",componentId:"sc-3oy0ss-0"})(["grid-area:thumbnail;transition:height ease-in-out 300ms;",""],(e=>{let{$isMultiple:t}=e;return t&&(0,p.css)(["display:grid;grid-gap:8px;grid-template-columns:repeat(4,52px);grid-template-rows:auto;"])})),AW=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY}).withConfig({displayName:"thumbnailWrapper__StyledButton",componentId:"sc-3oy0ss-1"})(["grid-column:span 4;justify-content:center;height:32px;width:100%;margin:4px 0;",";"],(e=>{let{theme:t}=e;return Ru.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.tertiary)})),xW=p.default.div.withConfig({displayName:"thumbnailWrapper__IconContainer",componentId:"sc-3oy0ss-2"})(["height:18px;width:20px;svg{transform:",";transition:transform ease-in-out 300ms;}"],(e=>{let{$isExpanded:t}=e;return t&&"rotate(-180deg)"})),kW=e=>{let{children:t,isExpanded:n,...r}=e;return c.createElement(AW,CW({"aria-pressed":n},r),t||n?(0,d.__)("Collapse","web-stories"):(0,d.__)("Expand","web-stories"),c.createElement(xW,{$isExpanded:n},c.createElement(Wp.default,null)))},OW=e=>{let{children:t,...n}=e;const[r,a]=(0,u.useState)(!1),o=Array.isArray(t)?t.length:1,l=o>0&&o>4,i=r||o<=1?t:(s=t).length>4?s.slice(0,3):s;var s;const d=()=>a((e=>!e));return c.createElement(IW,CW({$isMultiple:o>1},n),i,l&&c.createElement(c.Fragment,null,!r&&c.createElement(hW,{overflowCount:o-3,onClick:d}),c.createElement(kW,{isExpanded:r,onClick:d})))};function NW(){return NW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NW.apply(this,arguments)}const PW=function(e){let{elements:t,footer:n,onThumbnailClick:r,...a}=e;return c.createElement(MW,NW({},a,{cardType:t.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,n),thumbnails:t.map((e=>c.createElement(oW,{key:e.id,onClick:()=>r(e.id,e.pageId),type:ZZ,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories")})))}))};function RW(){return RW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RW.apply(this,arguments)}const MW=e=>{let{cardType:t=sW.SINGLE_ISSUE,className:n,title:r,titleProps:a,footer:o,cta:l,thumbnails:i}=e,s=0;i&&(s=Array.isArray(i)?i.length:1);const d=(e=>{let{cardType:t,thumbnailCount:n,hasCta:r}=e;return t===sW.SINGLE_ISSUE?n>0?cW.SINGLE_WITH_THUMBNAIL:cW.SINGLE:t===sW.MULTIPLE_ISSUE&&n?r?n<=4?cW.MULTIPLE_WITH_THUMBNAIL_WITH_CTA:cW.MULTIPLE_WITH_THUMBNAIL_WITH_CTA_OVERFLOW:n<=4?cW.MULTIPLE_WITH_THUMBNAIL:cW.MULTIPLE_WITH_THUMBNAIL_OVERFLOW:cW.DEFAULT})({cardType:t,thumbnailCount:s,hasCta:Boolean(l)});return c.createElement(pW,{className:n},c.createElement(mW,{gridVariant:d},c.createElement(fW,RW({as:a?.onClick?"button":"div"},a),c.createElement(Ou.Headline,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL,as:"h2"},r)),c.createElement(OW,null,i),c.createElement(gW,null,l),c.createElement(EW,null,o)))};function LW(){return LW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LW.apply(this,arguments)}const DefaultFooterText=e=>{let{children:t,...n}=e;return c.createElement(Ke.Text,LW({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},n),t)};const DW=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),r=(0,u.useMemo)((()=>n.height>0&&TW(t,(e=>function(e,t){return!(!["text","image","shape","gif","video"].includes(e.type)||!e.link?.url?.length)&&e.width*e.height/(t.width*t.height)*100>80}(e,n)))),[t,n]),a=Fy((e=>{let{setHighlights:t}=e;return t})),o=(0,u.useCallback)(((e,t)=>a({elementId:e,pageId:t})),[a]),l=r.length>0;fu("ElementLinkTappableRegionTooBig",l);const{title:i,footer:s}=Xd.linkTappableRegionTooBig,p=(r||[]).map((e=>c.createElement(oW,{key:e.id,onClick:()=>o(e.id,e.pageId),type:VZ,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending link","web-stories")})));return l&&e&&c.createElement(MW,{title:i,cardType:r.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,s),thumbnails:p})};function BW(e){return!(!["text","image","shape","gif","video"].includes(e.type)||!e.link?.url?.length)&&(e.width<48||e.height<48)}const FW=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>TW(t,BW)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),o=n.map((e=>c.createElement(oW,{key:e.id,onClick:()=>a(e.id,e.pageId),type:VZ,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending link","web-stories")}))),l=n.length>0;fu("ElementLinkTappableRegionTooSmall",l);const{title:i,footer:s}=Xd.linkTappableRegionTooSmall;return l&&e&&c.createElement(MW,{title:i,cardType:n.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,s),thumbnails:o})};function HW(e){return["gif","image"].includes(e.type)&&!e.alt?.length&&!e.resource?.alt?.length}const UW=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>TW(t,HW)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:Ej.ASSISTIVE_TEXT})),[r]),{footer:o,title:l}=Xd.imagesMissingAltText,i=n.length>0;fu("ImageElementMissingAlt",i);const s=n.map((e=>c.createElement(oW,{key:e.id,onClick:()=>a(e.id,e.pageId),type:WZ,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories")})));return i&&e&&c.createElement(MW,{title:l,cardType:n.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};var zW=n(3605);const GW=p.default.ul.withConfig({displayName:"list__List",componentId:"sc-15nukup-0"})((e=>{let{size:t=Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,theme:n}=e;return(0,p.css)(["list-style-type:disc;list-style-position:outside;margin:0;padding:0;li{",";",";padding:0;margin:0;}"],zW.defaultTypographyStyle,Pu.expandPresetStyles({preset:n.typography.presets.paragraph[t],theme:n}))}));function jW(e){if(!["image","gif"].includes(e.type))return!1;const t=(e.scale||100)/100;return e.resource?.height<e.height*t*2||e.resource?.width<e.width*t*2}GW.propTypes={size:ma().oneOf(Qe.THEME_CONSTANTS.TYPOGRAPHY.TEXT_SIZES)};const YW=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>TW(t,jW)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e})),[r]),{footer:o,title:l}=Kd.imageResolutionTooLow,i=n.length>0;fu("ImageElementResolution",i);const s=n.map((e=>c.createElement(oW,{key:e.id,onClick:()=>a(e.id,e.pageId),type:WZ,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending image","web-stories")})));return i&&e&&c.createElement(MW,{title:l,cardType:n.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(bW,null,c.createElement(GW,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o)),thumbnails:s})};function ZW(e,t){return e>=.3333333333333333*t}function WW(e,t,n){const{pageSize:r}=n,a=(0,Pr.getBox)(e,r?.width,r?.height),o=(0,ws.default)([a]),l=o.width*o.height,i=[...t].map(((e,t)=>{const a=(0,Pr.getBox)(e,r?.width,r?.height),l=(0,ws.default)([a]),i=function(e,t){const n=Math.min(e.endX,t.endX)-Math.max(e.startX,t.startX),r=Math.min(e.endY,t.endY)-Math.max(e.startY,t.startY);return n>=0&&r>=0?n*r:0}(o,l);return{element:e.isBackground||e.isDefaultBackground?{...e,backgroundColor:n?.backgroundColor}:e,area:i,index:t}})).reverse();let s=l;const c=[];for(const e of i){if(!ZW(s,l))break;ZW(e.area,l)&&c.push(e.element),s-=e.area}return c}function VW(e){let{background:t,text:n,page:r}=e;const{pageSize:a}=r,o=(a?.width/ae.FULLBLEED_RATIO-a?.width/ae.PAGE_RATIO)/2,l=(0,Pr.getBox)(n,a?.width,a?.height),i=(0,ws.default)([l]),{resource:s,scale:c,focalX:d,focalY:u}=t,p=(0,Pr.getBox)(t,a?.width,a?.height),{width:m,height:f}=p,g=(0,dC.default)(s,m,f,c,d,u);return async function(e){let{bgImage:t,bgBox:n,overlapBox:r}=e;function a(e){return new Promise(((a,o)=>{try{const o=document.createElement("canvas");o.width=t.width,o.height=t.height;const l=o.getContext("2d");if(t.rotationAngle){const e=t.offsetX+n.width/2,r=t.offsetY+n.height/2;l.translate(e,r),l.rotate(t.rotationAngle*$W),l.translate(-e,-r)}let i=0,s=0;const{flip:c}=t;(c.vertical||c.horizontal)&&(i=c.horizontal?-1*t.width:0,s=c.vertical?-1*t.height:0,l.scale(c.horizontal?-1:1,c.vertical?-1:1)),l.drawImage(e,i,s,t.width,t.height);a(l.getImageData(r.x,r.y,r.width,r.height))}catch(e){o(e)}}))}const o=await(0,ee.default)({src:t.src,width:t.width,height:t.height}),l=await a(o),i=document.createElement("canvas");i.width=r.width,i.height=r.height;i.getContext("2d").putImageData(l,0,0);const s=await Io(i.toDataURL(),i.width,i.height),{color:{r:c,g:d,b:u}}=(0,Nm.default)(s);return{r:c,g:d,b:u}}({bgImage:{offsetX:g.offsetX,offsetY:g.offsetY,src:t.resource.src,width:g.width,height:g.height,rotationAngle:t.isBackground?void 0:t.rotationAngle,flip:t.flip},bgBox:p,overlapBox:{x:t.isBackground?g.offsetX+Math.abs(i.startX):g.offsetX+Math.abs(i.startX)-p.x,y:t.isBackground?g.offsetY+Math.abs(i.startY+o):g.offsetY+Math.abs(i.startY+o)-(p.y+o),width:i.width,height:i.height}}).catch((()=>{}))}const $W=Math.PI/180;function qW(e){const t=function(e){return SW||(SW=document.createElement("div")),SW.innerHTML=e,Array.prototype.slice.call(SW.getElementsByTagName("span"))}(e.content),n=t.map((e=>e.style?.color)).filter(Boolean),r=0===n.length&&0!==t.length,a=0!==e.content.length&&0===t.length;return(r||a)&&n.push("rgb(0, 0, 0)"),n}function XW(e){let{background:t}=e;return t?.backgroundColor?.color}function KW(e){switch(e.type){case"image":return VW;case"shape":return XW;default:return()=>{}}}async function QW(e,t){const n=[];(e||[]).forEach((e=>{const r=async function(e){const t=[];e.elements.forEach(((n,r)=>{if("text"===n.type&&"NONE"===n.backgroundTextMode){const a=qW(n),o=e.elements.slice(0,r),l=WW(n,o,e);for(const r of l){const o=KW(r)({background:r,text:n,page:e}),l=e=>e&&{backgroundColor:e,textStyleColors:a,fontSize:n.fontSize,id:n.id,isBackgroundElement:r.isBackground},i=o instanceof Promise?o.then(l):l(o);t.push(i)}}}));const n=await Promise.all(t);return n.map((e=>function(){let{backgroundColor:e,textStyleColors:t,fontSize:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!t||!e)&&t.some((t=>!!t&&!Nc(Oc(t),kc(e),n).WCAG_AA))}(e)&&{id:e.id,isBackground:e.isBackgroundElement})).filter((e=>{let{id:t}=e;return t}))}({...e,pageSize:t});r instanceof Promise?n.push(r.then((t=>({result:t,page:e})))):n.push(r)}));return(await Promise.all(n)).filter((e=>e.result.some((e=>{let{id:t}=e;return t})))).map((e=>e))}const JW=()=>{const e=Ty(),[t,n]=(0,u.useState)([]),r=Sa((e=>{let{state:t}=e;return t?.pages})),a=Zi((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}}));(0,u.useEffect)((()=>{let e=!1;return QW(r,a).then((t=>{if(e)return;const r=t.map((e=>{let{page:t}=e;return t}));n(r)})).catch((()=>{})),()=>{e=!0}}),[r,a]);const o=Fy((e=>{let{setHighlights:t}=e;return t})),l=(0,u.useCallback)((e=>o({pageId:e})),[o]),i=t.length>0;fu("PageBackgroundTextLowContrast",i);const{title:s,footer:p}=Xd.lowContrast;return i&&e?c.createElement(MW,{title:s,cardType:t.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,p),thumbnails:t.map((e=>c.createElement(oW,{key:e.id,onClick:()=>l(e.id),type:qZ,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})))}):null};function eV(e){return vW(e)<100}const tV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>wW(t,eV)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>r({pageId:e})),[r]),{footer:o,title:l}=Kd.tooLittlePageText,i=n.length>0;fu("PageTooLittleText",i);const s=n.map((e=>c.createElement(oW,{key:e.id,onClick:()=>a(e.id),type:qZ,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e?c.createElement(MW,{title:l,cardType:n.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s}):null};function nV(e){return e.elements.filter((e=>Boolean(e.link?.url?.length))).length>3}const rV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>wW(t,nV)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>r({pageId:e})),[r]),{footer:o,title:l}=Kd.tooManyLinksOnPage,i=n.length>0;fu("PageTooManyLinks",i);const s=n.map((e=>c.createElement(oW,{key:e.id,onClick:()=>a(e.id),type:qZ,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e&&c.createElement(MW,{title:l,cardType:n.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};function aV(e){return vW(e)>200}const oV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>wW(t,aV)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>{let{pageId:t,elements:n}=e;return r({pageId:t,elements:n})}),[r]),{footer:o,title:l}=Kd.tooMuchPageText,i=n.length>0;fu("PageTooMuchText",i);const s=n.map((e=>c.createElement(oW,{key:e.id,onClick:()=>a({pageId:e.id,elements:e.elements.filter((e=>{let{type:t}=e;return"text"===t}))}),type:qZ,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e&&c.createElement(MW,{title:l,cardType:n.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(bW,null,c.createElement(GW,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o)),thumbnails:s})};const lV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.story?.publisherLogo})),n=Fy((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Ej.PUBLISHER_LOGO})),[n]),a=function(e){return!e?.id}(t);fu("PublisherLogoMissing",a);const{footer:o,title:l}=Qd.noPublisherLogo;return a&&e&&c.createElement(MW,{title:l,titleProps:{onClick:r},footer:c.createElement(bW,null,c.createElement(GW,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))})};const iV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.story?.publisherLogo})),n=Fy((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Ej.PUBLISHER_LOGO})),[n]),a=function(e){return Boolean(e?.id)&&(e?.height<Zd||e?.width<Zd)}(t);fu("PublisherLogoSize",a);const{footer:o,title:l}=Qd.logoTooSmall;return a&&e&&c.createElement(MW,{title:l,titleProps:{onClick:r},footer:c.createElement(bW,null,c.createElement(GW,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))})};const sV=()=>{const e=(0,u.useRef)(),{isSaving:t,link:n,status:r}=Sa((e=>{let{state:t}=e;return{isSaving:t.meta.isSaving,link:t.story.link,status:t.story.status}})),[a,o]=(0,u.useState)(!1);(0,u.useEffect)((()=>{let a=!0;return t||async function(e){let{link:t,status:n}=e;if(!t||!["publish","future"].includes(n))return!1;try{const e=await fetch(t),n=await e.text();await window.amp.validator.init();const r=window.amp.validator.validateString(n),{status:a,errors:o}=r;return"FAIL"===a&&o.filter((e=>{let{severity:t}=e;return"ERROR"===t})).filter((e=>{let{code:t,params:n}=e;return!("MISSING_URL"===t&&n?.[0].startsWith("poster")||"MISSING_URL"===t&&n?.[0].startsWith("publisher-logo")||"INVALID_URL_PROTOCOL"===t&&n?.[0].startsWith("src"))})).length>0}catch{return!1}}({link:n,status:r}).then((t=>{a&&(o(t),t&&!e?.current&&(e.current=!0))})),()=>{a=!1}}),[n,r,t]),(0,u.useEffect)((()=>{a&&e?.current&&(0,L.trackEvent)("amp_validation_errors_found")}),[a]),fu("StoryHasAmpErrors",a);const{footer:l,title:i}=Qd.ampValidation;return a&&c.createElement(MW,{title:i,footer:c.createElement(DefaultFooterText,null,l)})};const cV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.story?.excerpt})),n=Fy((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Ej.EXCERPT})),[n]),{title:a,footer:o}=Qd.storyMissingDescription,l=function(e){return!e?.length}(t);return fu("StoryMissingExcerpt",l),l&&e?c.createElement(MW,{title:a,titleProps:{onClick:r},footer:c.createElement(DefaultFooterText,null,o)}):null};const dV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.story?.title})),n=Fy((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Ej.STORY_TITLE})),[n]),a=function(e){return"string"!=typeof e||""===e?.trim()}(t);fu("StoryMissingTitle",a);const{footer:o,title:l}=Qd.storyMissingTitle;return a&&e?c.createElement(MW,{title:l,titleProps:{onClick:r},footer:c.createElement(bW,null,c.createElement(GW,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))}):null};const uV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages?.length})),{hasTooFewPages:n,hasTooManyPages:r}=(0,u.useMemo)((()=>function(e){return{hasTooFewPages:e<4,hasTooManyPages:e>30}}(t)),[t]),{storyTooShort:a,storyTooLong:o}=Kd,l=n&&a||r&&o||{},i=n||r;return fu("StoryPagesCount",i),i&&e&&c.createElement(MW,{title:l.title,footer:c.createElement(DefaultFooterText,null,l.title)})};function StoryPosterAttached(){const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.story?.featuredMedia})),n=Fy((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Ej.POSTER})),[n]),a=(0,u.useMemo)((()=>function(e){return"string"!=typeof e?.url||_W({featuredMedia:e})}(t)),[t]);fu("StoryPosterAttached",a);const{title:o,footer:l}=Qd.storyMissingPoster;return a&&e?c.createElement(MW,{title:o,titleProps:{onClick:r},footer:c.createElement(bW,null,c.createElement(GW,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},l))}):null}const pV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.story?.featuredMedia})),n=Fy((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Ej.POSTER})),[n]),{footer:a,title:o}=Qd.storyPosterSize,l=(0,u.useMemo)((()=>function(e){return!_W({featuredMedia:e})&&(e?.height<Yd||e?.width<jd||!(Math.abs(e.width/e.height-3/4)<=.001))}(t)),[t]);return fu("StoryPosterSize",l),l&&e&&c.createElement(MW,{title:o,titleProps:{onClick:r},footer:c.createElement(bW,null,c.createElement(GW,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},a))})};const mV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.story?.title})),n=Fy((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:Ej.STORY_TITLE})),[n]),a=function(e){return e?.length>zd}(t);fu("StoryTitleLength",a);const{title:o,footer:l}=Qd.storyTitleTooLong;return a&&e&&c.createElement(MW,{title:o,footer:c.createElement(DefaultFooterText,null,l),titleProps:{onClick:r}})};function fV(e){return"text"===e.type&&e.fontSize&&e.fontSize<12}const gV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>TW(t,fV)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),{footer:o,title:l}=Xd.fontSizeTooSmall,i=n.length>0;fu("TextElementFontSizeTooSmall",i);const s=n.map((e=>c.createElement(oW,{key:e.id,onClick:()=>a(e.id,e.pageId),type:VZ,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending text element","web-stories")})));return i&&e&&c.createElement(MW,{title:l,cardType:n.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};function hV(e){return"video"===e.type&&!e?.resource?.isMuted&&!e.tracks?.length}const EV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>TW(t,hV)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:Ej.CAPTIONS})),[r]),{footer:o,title:l}=Xd.videoMissingCaptions,i=n.length>0;return fu("VideoElementMissingCaptions",i),i&&e&&c.createElement(PW,{title:l,elements:n,footer:o,onThumbnailClick:a})};function bV(e){return"video"===e.type&&!e.alt?.length&&!e.resource?.alt?.length}const yV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>TW(t,bV)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:Ej.ASSISTIVE_TEXT})),[r]),{footer:o,title:l}=Xd.videoMissingTitle,i=n.length>0;return fu("VideoElementMissingDescription",i),i&&e&&c.createElement(PW,{title:l,elements:n,footer:o,onThumbnailClick:a})};function _V(e){return"video"===e.type&&!e.resource?.poster&&!e.poster}const vV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>TW(t,_V)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:Ej.VIDEO_A11Y_POSTER})),[r]),{footer:o,title:l}=Qd.videoMissingPoster,i=n.length>0;return fu("VideoElementMissingPoster",i),i&&e&&c.createElement(PW,{title:l,elements:n,footer:o,onThumbnailClick:a})};function wV(e){if("video"!==e.type)return!1;return e.resource?.height<=480&&e.resource?.width<=852}const TV=()=>{const e=Ty(),t=Sa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>TW(t,wV)),[t]),r=Fy((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),{footer:o,title:l}=Kd.videoResolutionTooLow,i=n.length>0;return fu("VideoElementResolution",i),i&&e&&c.createElement(PW,{title:l,elements:n,footer:o,onThumbnailClick:a})},SV=(0,p.default)(m.Button).withConfig({displayName:"videoOptimization__OptimizeButton",componentId:"sc-1dz2s9g-0"})(["margin-top:4px;"]);function CV(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{resource:t}=e;if(!t)return!1;const{isOptimized:n,height:r=0,width:a=0}=t;if("video"!==e.type||n)return!1;const o=r*a,l=o>Se*Te;return l}const IV={},AV="cancelled",xV="uploaded",kV="uploading";function OV(e,t){switch(t.type){case AV:return{...e,[t.element.resource.id]:AV};case xV:return{...e,[t.element.resource.id]:xV};case kV:return{...e,[t.element.resource.id]:kV};default:throw new Error}}const BulkVideoOptimization=()=>{const e=Ty(),[t,n]=(0,u.useReducer)(OV,IV),r=Sa((e=>{let{state:t}=e;return t?.pages})),{optimizeVideo:a,isNewResourceTranscoding:o,isCurrentResourceTranscoding:l,canTranscodeResource:i}=yi((e=>{let{actions:{optimizeVideo:t},state:{isNewResourceTranscoding:n,canTranscodeResource:r,isCurrentResourceTranscoding:a}}=e;return{optimizeVideo:t,isNewResourceTranscoding:n,canTranscodeResource:r,isCurrentResourceTranscoding:a}})),s=(0,u.useMemo)((()=>TW(r,CV)),[r]).filter(((e,t,n)=>n.findIndex((t=>t.resource.id===e.resource.id))===t)),p=Fy((e=>{let{setHighlights:t}=e;return t})),m=(0,u.useCallback)((async e=>{if(i(e.resource)&&t[e.resource.id]!==kV){n({type:kV,element:e});try{await a({resource:e.resource})}catch(t){return void n({type:AV,element:e})}n({type:xV,element:e})}}),[i,a,t]),g=(0,u.useCallback)((()=>{const e=s.filter((e=>{let{resource:t}=e;return!o(t?.id)&&!l(t?.id)}));return new Promise((t=>{e.map((e=>async()=>{await m(e)})).reduce(((e,t)=>e.then(t)),Promise.resolve()).then(t)}))}),[o,l,m,s]),h=(0,u.useCallback)((async()=>{await g()}),[g]),E=(0,u.useCallback)((e=>async()=>{p({pageId:e.pageId,elementId:e.id}),await m(e)}),[m,p]),{footer:b,title:y}=Qd.videoNotOptimized,_=(0,u.useMemo)((()=>Object.values(t).filter((e=>e===kV))),[t]),v=(0,u.useMemo)((()=>_.length>0||s.some((e=>o(e.resource.id)||l(e.resource.id)))),[_,s,o,l]),w=s.length>0;fu("VideoOptimization",w);let T=1===s.length?(0,d.__)("Optimize video","web-stories"):(0,d.__)("Optimize all videos","web-stories");if(v){const e=_.length+s.filter((e=>o(e.resource.id)||l(e.resource.id))).length;T=(0,qe.default)(
/* translators: 1: number of videos currently transcoding. 2: total number of videos in list. */
(0,d._n)("Optimizing %1$d of %2$d","Optimizing %1$d of %2$d",e,"web-stories"),e,s.length)}return w&&e&&c.createElement(MW,{cta:c.createElement(SV,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:h,disabled:v},T),title:y,cardType:s.length>1?sW.MULTIPLE_ISSUE:sW.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,b),thumbnails:s.map((e=>c.createElement(oW,{key:e.resource.id,onClick:E(e),isLoading:o(e.resource.id)||l(e.resource.id),type:ZZ,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories"),isError:t[e.resource.id]===AV},c.createElement(bd.Tooltip,{title:t[e.resource.id]===kV||o(e.resource.id)||l(e.resource.id)?(0,d.__)("Video optimization in progress","web-stories"):(0,d.__)("Optimize","web-stories")},c.createElement(yW,null)))))})},NV=()=>{const{isTranscodingEnabled:e}=Ra();return e?c.createElement(BulkVideoOptimization,null):null},PV={TITLE:(0,d.__)("Review checklist before publishing.","web-stories"),SECONDARY_BUTTON:(0,d.__)("Continue to publish","web-stories"),PRIMARY_BUTTON:(0,d.__)("Review Checklist","web-stories"),BODY:(0,d.__)("Complete checklist items to make this Web Story easier to discover on Google Search.","web-stories")};const RV=function ReviewChecklistDialog(e){let{isOpen:t,onIgnore:n,onReview:r,onClose:a}=e;const{shouldReviewDialogBeSeen:o,onReviewDialogRequest:l}=du((e=>{let{actions:{onReviewDialogRequest:t},state:{shouldReviewDialogBeSeen:n}}=e;return{shouldReviewDialogBeSeen:n,onReviewDialogRequest:t}})),i=t&&o,s=(0,u.useCallback)((()=>{l()}),[l]),d=(0,u.useCallback)((()=>{r?.(),setTimeout((()=>s()),300)}),[r,s]);return(0,u.useEffect)((()=>{i&&(0,L.trackEvent)("review_prepublish_checklist")}),[i]),c.createElement(y,{isOpen:i,onClose:a,title:PV.TITLE,onSecondary:n,secondaryText:PV.SECONDARY_BUTTON,primaryText:PV.PRIMARY_BUTTON,onPrimary:d,id:"modal-review-checklist",contentStyles:{width:"434px"}},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},PV.BODY))},MV=e=>{let{checkpoint:t,...n}=e;return t===Jd.ALL?c.createElement(hY.default,n):null},LV="excerpt",DV="title",BV="44px";function FV(){return FV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FV.apply(this,arguments)}const HV=(0,p.default)(m.Button).withConfig({displayName:"buttonWithChecklistWarning__Button",componentId:"sc-jm08jq-0"})(["padding:4px 6px;height:32px;svg{width:24px;height:auto;}"]);function UV(e){let{text:t,checkpoint:n,shouldReviewDialogBeSeen:r=!1,...a}=e;return c.createElement(HV,FV({variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL},a),t,r&&c.createElement(MV,{checkpoint:n}))}const zV=function ButtonWithChecklistWarning(e){let{disabled:t,hasFutureDate:n,...r}=e;const a=lc(),{isSaving:o,canPublish:l,status:i}=Sa((e=>{let{state:t}=e;return{isSaving:t.meta?.isSaving,status:t.story.status,canPublish:Boolean(t?.capabilities?.publish)}})),{checkpoint:s,shouldReviewDialogBeSeen:p}=du((e=>{let{state:{checkpoint:t,shouldReviewDialogBeSeen:n}}=e;return{checkpoint:t,shouldReviewDialogBeSeen:n}})),m={[Jd.ALL]:p?(0,d.__)("Make updates before publishing to improve discoverability and performance on search engines","web-stories"):"",[Jd.ONLY_RECOMMENDED]:(0,d.__)("Review checklist to improve performance before publishing","web-stories"),[Jd.UNAVAILABLE]:""},f=(0,d.__)("Saving is disabled due to media currently being uploaded.","web-stories"),g=(0,d.__)("Submit your work for review, and an Editor will be able to approve it for you.","web-stories");let h=a?f:m[s];l||(h=g);const E=(0,u.useMemo)((()=>n&&"private"!==i?(0,d.__)("Schedule","web-stories"):(0,d.__)("Publish","web-stories")),[n,i]),b=l?E:(0,d.__)("Submit for review","web-stories");return c.createElement(bd.Tooltip,{title:h,popupZIndexOverride:10,hasTail:!0},c.createElement(UV,FV({text:b,disabled:t||o||a,checkpoint:s,shouldReviewDialogBeSeen:p},r)))},GV=p.default.header.withConfig({displayName:"header___Header",componentId:"sc-yxsju1-0"})(["width:100%;height:",";display:flex;align-items:center;margin-bottom:",";background-color:",";border-top-left-radius:",";border-top-right-radius:",";"],BV,"1px",(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.borders.radius.medium})),jV=(0,p.default)(m.Button).withConfig({displayName:"header__CloseButton",componentId:"sc-yxsju1-1"})(["margin:6px auto 5px 6px;"]),YV=p.default.div.withConfig({displayName:"header__PublishButtonWrapper",componentId:"sc-yxsju1-2"})(["margin:6px 6px 5px auto;"]),ZV=e=>{let{onClose:t,onPublish:n,publishButtonDisabled:r,hasFutureDate:a}=e;return c.createElement(GV,null,c.createElement(jV,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY,onClick:t,"aria-label":(0,d.__)("Close","web-stories")},c.createElement(Nu.default,null)),c.createElement(Ou.Headline,{as:"h2",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Story Details","web-stories")),c.createElement(YV,null,c.createElement(zV,{onClick:n,disabled:r,hasFutureDate:a})))},WV=e=>{let{currentSlug:t,currentTitle:n,storyId:r,updateStory:a}=e;if(!t||Number(t)===r){a({properties:{slug:encodeURIComponent(uo(n))||r}})}},VV=(0,p.default)(Ke.Text).withConfig({displayName:"excerpt__StyledText",componentId:"sc-t9wjp4-0"})(["color:",";margin-top:-4px;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const $V=function ExcerptPanel(e){let{nameOverride:t}=e;const{excerpt:n,updateStory:r}=Sa((e=>{let{state:{story:{excerpt:t=""}},actions:{updateStory:n}}=e;return{excerpt:t,updateStory:n}})),a=(0,u.useCallback)((e=>{r({properties:{excerpt:e.target.value}})}),[r]),{highlight:o,resetHighlight:l,cancelHighlight:i}=Fy((e=>({highlight:e[Ej.EXCERPT],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(qV,{onAnimationEnd:()=>l(),name:t||"excerpt",title:(0,d.__)("Story Description","web-stories"),collapsedByDefault:!1,isPersistable:!o,$_css:o?.showEffect&&HZ.FLASH},c.createElement(Wh,null,c.createElement(XV,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},value:n,onChange:a,placeholder:(0,d.__)("Write a description of the story","web-stories"),"aria-label":(0,d.__)("Story Description","web-stories"),maxLength:200,showCount:!0,rows:4,$_css2:o?.showEffect&&HZ.OUTLINE})),c.createElement(Wh,null,c.createElement(VV,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"))))};var qV=(0,p.default)(Uk).withConfig({displayName:"excerpt___StyledSimplePanel",componentId:"sc-t9wjp4-1"})(["",""],(e=>e.$_css)),XV=(0,p.default)(wE).withConfig({displayName:"excerpt___StyledTextArea",componentId:"sc-t9wjp4-2"})(["",""],(e=>e.$_css2));const KV=p.default.div.withConfig({displayName:"mainStoryInfo__FormSection",componentId:"sc-1f06m84-0"})(["padding:0 4px;&:first-of-type{margin:20px 0px 0px;}"]),QV=(0,p.default)(yE).withConfig({displayName:"mainStoryInfo___TextArea",componentId:"sc-1f06m84-1"})(["margin:8px 0 0;& > p{margin-bottom:-4px;}"]),JV=()=>{const e=Y((e=>{let{storyId:t}=e;return t})),t=Sa((e=>{let{actions:t}=e;return t.updateStory})),n=Sa((e=>{let{state:{story:t}}=e;return{[LV]:t.excerpt,[DV]:t.title||""}})),r=Sa((e=>{let{state:{story:{slug:t}}}=e;return t})),a=Fg((e=>{let{data:t}=e;return t?.modalSidebarTab?.IsolatedStatusPanel})),[o,l]=(0,u.useState)(n),i=(0,u.useCallback)((n=>{WV({currentSlug:r,currentTitle:n,storyId:e,updateStory:t})}),[r,t,e]),s=(0,u.useCallback)((e=>{let{target:n}=e;const{value:r,name:a}=n;t({properties:{[a]:r}}),a===DV&&i(r)}),[i,t]),p=e=>{let{currentTarget:t}=e;l((e=>({...e,[t.name]:t.value})))};return c.createElement(c.Fragment,null,c.createElement(KV,null,c.createElement(Ou.Headline,{as:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:DV},(0,d.__)("Story Title","web-stories")),c.createElement(QV,{name:DV,id:"story-title",showCount:!0,value:o[DV],onChange:p,onBlur:s,"aria-label":(0,d.__)("Story Title","web-stories"),placeholder:(0,d.__)("Add title","web-stories")})),c.createElement(KV,null,c.createElement(Ou.Headline,{as:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:LV},(0,d.__)("Story Description","web-stories")),c.createElement(QV,{name:LV,id:"story-excerpt",showCount:!0,maxLength:200,value:o[LV],"aria-label":(0,d.__)("Story Description","web-stories"),placeholder:(0,d.__)("Write a description of the story","web-stories"),hint:(0,d.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"),onChange:p,onBlur:s})),a&&c.createElement(a,null))},e$=p.default.div.withConfig({displayName:"storyPreview__PreviewWrapper",componentId:"sc-zk17py-0"})(["width:","px;height:","px;position:relative;margin-top:8px;"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}));e$.propTypes={width:ma().number.isRequired,height:ma().number.isRequired};const t$=p.default.div.withConfig({displayName:"storyPreview__PreviewContainer",componentId:"sc-zk17py-1"})(["width:","px;height:","px;position:absolute;"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}));t$.propTypes={width:ma().number.isRequired,height:ma().number.isRequired};const n$=p.default.img.withConfig({displayName:"storyPreview__Image",componentId:"sc-zk17py-2"})(["height:100%;width:100%;display:block;aspect-ratio:",";object-fit:cover;border-radius:",";background:",";"],ae.PAGE_RATIO,(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal})),r$=p.default.div.withConfig({displayName:"storyPreview__EmptyPlaceholder",componentId:"sc-zk17py-3"})(["height:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal})),a$=p.default.div.withConfig({displayName:"storyPreview__Gradient",componentId:"sc-zk17py-4"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.gradient.posterOverlay})),o$=p.default.div.withConfig({displayName:"storyPreview__ScrimWrapper",componentId:"sc-zk17py-5"})(["position:absolute;top:0;box-sizing:border-box;width:100%;height:100%;border-radius:",";background:",";padding:8px;"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.opacity.black3})),l$=p.default.div.withConfig({displayName:"storyPreview__ScrimContainer",componentId:"sc-zk17py-6"})(["display:flex;height:100%;width:100%;flex-wrap:wrap;justify-content:space-between;"]),i$=p.default.div.withConfig({displayName:"storyPreview__ScrimTop",componentId:"sc-zk17py-7"})(["display:grid;grid-template-columns:50% 50%;grid-template-rows:auto;grid-template-areas:'publisherLogo editButton';justify-content:inherit;width:100%;"]),s$=p.default.img.withConfig({displayName:"storyPreview__PublisherLogo",componentId:"sc-zk17py-8"})(["grid-area:publisherLogo;height:24px;width:24px;border-radius:2px;box-shadow:0 0 8px rgba(0,0,0,0.08);"]),c$=(0,p.default)(Gh).withConfig({displayName:"storyPreview__StyledMedia",componentId:"sc-zk17py-9"})(["grid-area:editButton;display:flex;flex-direction:row-reverse;"]),d$=p.default.div.withConfig({displayName:"storyPreview__ScrimBottom",componentId:"sc-zk17py-10"})(["width:100%;margin:auto 0 0;align-self:flex-end;"]),u$=(0,p.default)(Ou.Headline).attrs({as:"h3",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"storyPreview__Title",componentId:"sc-zk17py-11"})(["max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;padding:0;margin:0 0 4px;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),p$=(0,p.default)(Ke.Text).attrs({forwardAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"storyPreview__Publisher",componentId:"sc-zk17py-12"})(["display:block;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),m$=()=>{const{title:e,featuredMedia:t,publisherLogo:n,updateStory:r}=Sa((e=>{let{state:{story:t},actions:n}=e;return{title:t?.title,featuredMedia:t?.featuredMedia||{},publisherLogo:t?.publisherLogo||{},updateStory:n.updateStory}})),{allowedImageMimeTypes:a,hasUploadMediaAction:o,publisher:l}=Y((e=>{let{allowedMimeTypes:t,capabilities:n,metadata:r}=e;return{allowedImageMimeTypes:t?.image,hasUploadMediaAction:n?.hasUploadMediaAction,publisher:r?.publisher}})),i=(0,u.useMemo)((()=>a.map((e=>Mt(e))).flat()),[a]),s=Math.round(232/ae.PAGE_RATIO),p=(0,u.useCallback)((e=>r({properties:{featuredMedia:{id:e.id,url:e.src,height:e.height,width:e.width}}})),[r]);let m=(0,d.__)("No file types are currently supported.","web-stories");return i.length&&(m=(0,qe.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories"),(0,Ot.default)(i))),c.createElement(c.Fragment,null,c.createElement(Ou.Headline,{as:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL},(0,d.__)("Cover Preview","web-stories")),c.createElement(e$,{width:232,height:s},c.createElement(t$,{width:232,height:s},t?.url?c.createElement(n$,{crossOrigin:"anonymous",src:t.url,width:t.width,height:t.height,alt:(0,d.__)("Preview image","web-stories"),"data-testid":"story_preview_featured_media"}):c.createElement(r$,null),c.createElement(a$,null),c.createElement(o$,null,c.createElement(l$,null,c.createElement(i$,null,n?.url?.length>0&&c.createElement(s$,{crossOrigin:"anonymous",width:n.width,height:n.height,src:n.url,alt:(0,d.__)("Publisher Logo","web-stories"),"data-testid":"story_preview_logo"}),o&&c.createElement(c$,{onChange:p,title:(0,d.__)("Select as poster image","web-stories"),buttonInsertText:(0,d.__)("Select as poster image","web-stories"),type:a,ariaLabel:(0,d.__)("Poster image","web-stories"),onChangeErrorText:m,imgProps:t,canUpload:o,variant:yh.NONE,cropParams:{width:640,height:853}})),c.createElement(d$,null,e&&c.createElement(u$,{"data-testid":"story_preview_title"},e),l&&c.createElement(p$,{"data-testid":"story_preview_publisher"},l)))))))},f$=e=>{let{handleReviewChecklist:t}=e;const n=gu($d.PRIORITY);return c.createElement(by,{MainIcon:my,label:(0,d.__)("Checklist","web-stories"),"aria-label":(0,d.__)("Checklist","web-stories"),popupZIndexOverride:10,onClick:t,notificationCount:n})},g$=p.default.div.withConfig({displayName:"content__Main",componentId:"sc-1d1lm9j-0"})(["display:grid;min-width:917px;width:100%;height:calc(100% - "," - ",");grid-template-columns:30.5% 34% 35.5%;grid-template-rows:auto;grid-template-areas:'preview mainPanel sidePanel' 'footer mainPanel sidePanel';"],"1px",BV),h$=p.default.div.withConfig({displayName:"content___StoryPreview",componentId:"sc-1d1lm9j-1"})(["grid-area:preview;margin:20px 18px 0 32px;"]),E$=p.default.div.withConfig({displayName:"content___MainStoryInfo",componentId:"sc-1d1lm9j-2"})(["grid-area:mainPanel;display:flex;flex-direction:column;padding:0 16px;overflow-y:scroll;gap:34px;& > section{border:none;& > h2{padding-top:0;padding-bottom:2px;& > button{height:1em;}}}"]),b$=p.default.div.attrs({role:"tabpanel"}).withConfig({displayName:"content__PanelContainer",componentId:"sc-1d1lm9j-3"})(["grid-area:sidePanel;height:100%;margin-left:18px;background-color:",";border-bottom-right-radius:",";overflow-y:scroll;",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),P.scrollbarCSS),y$=p.default.div.withConfig({displayName:"content__Footer",componentId:"sc-1d1lm9j-4"})(["grid-area:footer;display:flex;align-items:flex-end;margin:0 18px 20px 32px;"]),_$=e=>{let{handleReviewChecklist:t}=e;const{DocumentPane:n,id:r}=Fg((e=>{let{data:t}=e;return t?.modalSidebarTab||{}})),a=function(){const e=(0,u.useContext)(uu)?.[0];if(!e)throw new Error("Cannot use `useHasChecklist` outside of `ChecklistCountProvider`");const{hasChecklist:t}=e;return t}();return c.createElement(g$,null,c.createElement(h$,null,c.createElement(m$,null)),c.createElement(E$,null,c.createElement(JV,null)),n&&c.createElement(b$,{"aria-label":(0,d.__)("Story Settings","web-stories"),id:r},c.createElement(n,null)),a&&c.createElement(y$,null,c.createElement(f$,{handleReviewChecklist:t})))},v$=p.default.div.withConfig({displayName:"publishModal__Container",componentId:"sc-16gvo2-0"})(["height:100%;color:",";background-color:",";border:",";border-radius:",";"],g.theme.colors.fg.primary,g.theme.colors.bg.primary,`1px solid ${g.theme.colors.divider.primary}`,g.theme.borders.radius.medium);const w$=function PublishModal(e){let{isOpen:t,onPublish:n,onClose:r,publishButtonDisabled:a,hasFutureDate:o}=e;const l=du((e=>{let{actions:t}=e;return t.onPublishDialogChecklistRequest}));(0,u.useEffect)((()=>{t&&(0,L.trackEvent)("publish_modal")}),[t]);const i=(0,u.useCallback)((()=>{(0,L.trackEvent)("review_prepublish_checklist"),r(),l()}),[r,l]);return c.createElement(T.Modal,{isOpen:t,onClose:r,contentLabel:(0,d.__)("Story details","web-stories"),contentStyles:{display:"block",width:"71vw",minWidth:"917px",height:"66vh",minHeight:"580px",overflow:"hidden"},overlayStyles:{backgroundColor:g.theme.colors.inverted.interactiveBg.modalScrim}},t&&c.createElement(bu,null,c.createElement(v$,null,c.createElement(ZV,{hasFutureDate:o,publishButtonDisabled:a,onClose:r,onPublish:n}),c.createElement(_$,{handleReviewChecklist:i}))))};const T$=function PublishButton(e){let{forceIsSaving:t}=e;const n=(0,S.useFeature)("enableUpdatedPublishStoryModal"),{date:r,storyId:a,saveStory:o,title:l,editLink:i,canPublish:s}=Sa((e=>{let{state:{story:{date:t,storyId:n,title:r,editLink:a},capabilities:o},actions:{saveStory:l}}=e;return{date:t,storyId:n,saveStory:l,title:r,editLink:a,canPublish:Boolean(o?.publish)}})),{shouldReviewDialogBeSeen:d,showPriorityIssues:p}=du((e=>{let{state:{shouldReviewDialogBeSeen:t},actions:{showPriorityIssues:n}}=e;return{shouldReviewDialogBeSeen:t,showPriorityIssues:n}})),[m,f]=(0,u.useState)(!1),g=Er(a,i),h=(0,xd.default)((0,Id.default)((0,kd.default)(r,(0,Pd.default)()),1),(0,kd.default)(new Date,(0,Pd.default)())),E=(0,u.useCallback)((()=>{let e="pending";s&&(e=h?"future":"publish"),(0,L.trackEvent)("publish_story",{status:e,title_length:l.length}),f(!1),o({status:e}),g()}),[g,o,h,l,s]),b=(0,u.useCallback)((()=>{p(),d||n?f(!0):E()}),[p,d,n,E]),y=(0,u.useCallback)((()=>f(!1)),[]);return c.createElement(c.Fragment,null,c.createElement(zV,{onClick:b,disabled:t,hasFutureDate:h}),n?c.createElement(w$,{isOpen:m,onPublish:E,onClose:y,hasFutureDate:h,publishButtonDisabled:t}):c.createElement(RV,{isOpen:m,onIgnore:E,onClose:y,onReview:y}))};const S$=function SwitchToDraftButton(e){let{forceIsSaving:t=!1}=e;const{isSaving:n,saveStory:r}=Sa((e=>{let{state:{meta:{isSaving:t}},actions:{saveStory:n}}=e;return{isSaving:t,saveStory:n}})),a=lc(),o=(0,u.useCallback)((()=>{r({status:"draft"})}),[r]),l=(0,d.__)("Switch to Draft","web-stories");return c.createElement(Tooltip,{title:l,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:o,disabled:n||t||a,"aria-label":l},c.createElement(QY,null)))};function PlainButton(e){let{text:t,onClick:n,disabled:r}=e;return c.createElement(Tooltip,{title:t,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:n,disabled:r,"aria-label":t},c.createElement(bY,null)))}const C$=function UpdateButton(e){let{hasUpdates:t=!1,forceIsSaving:n=!1}=e;const{isSaving:r,status:a,date:o,saveStory:l,canPublish:i}=Sa((e=>{let{state:{meta:{isSaving:t},story:{status:n,date:r},capabilities:a},actions:{saveStory:o}}=e;return{isSaving:t,status:n,date:r,saveStory:o,canPublish:Boolean(a?.publish)}})),s=r||n,u=lc(),{state:{hasNewChanges:p}}=pr();(0,tr.useGlobalKeyDownEffect)({key:["mod+s"]},(e=>{e.preventDefault(),s||u||l()}),[l,s,u]);const m=!s&&!u&&(p||t),f="draft"===a||!a;if("pending"===a)return c.createElement(PlainButton,{text:(0,d.__)("Save as pending","web-stories"),disabled:!m,onClick:()=>l()});if(f)return c.createElement(PlainButton,{text:(0,d.__)("Save draft","web-stories"),disabled:!m,onClick:()=>l()});const g=(0,xd.default)((0,Id.default)((0,kd.default)(o,(0,Pd.default)()),1),(0,kd.default)(new Date,(0,Pd.default)()))&&"private"!==a?(0,d.__)("Schedule","web-stories"):(0,d.__)("Update","web-stories");return c.createElement(zV,{text:g,onClick:()=>l(),disabled:!m,isUploading:u,canPublish:i})},I$=p.default.input.withConfig({displayName:"title__Input",componentId:"sc-jcmnyx-0"})(["color:",";margin:0;"," background:",";border:none !important;text-align:start;min-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-radius:",";",";",""],(e=>{let{theme:t}=e;return`${t.colors.fg.primary} !important`}),Pu.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{isHighlighted:t}=e;return!t&&"none !important"}),(e=>{let{theme:t}=e;return t.borders.radius.small}),Ru.focusableOutlineCSS,(e=>{let{isHighlighted:t}=e;return t&&(0,p.css)([""," ",""],HZ.OUTLINE,HZ.FLASH)}));const A$=function HeaderTitle(){const{title:e,slug:t,updateStory:n}=Sa((e=>{let{state:{story:{title:t,slug:n}},actions:{updateStory:r}}=e;return{title:t,slug:n,updateStory:r}})),{highlight:r,resetHighlight:a,cancelHighlight:o}=Fy((e=>({highlight:e[Ej.STORY_TITLE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{storyId:l}=Y(),i=(0,u.useCallback)((e=>n({properties:{title:e.target.value}})),[n]),s=(0,u.useCallback)((()=>{WV({currentSlug:t,currentTitle:e,storyId:l,updateStory:n})}),[t,l,e,n]);return"string"!=typeof e?null:c.createElement(I$,{ref:e=>{e&&r?.focus&&r?.showEffect&&(e.addEventListener("keydown",o,{once:!0}),e.focus())},value:e,type:"text",onBlur:s,onChange:i,placeholder:(0,d.__)("Add title","web-stories"),"aria-label":(0,d.__)("Story title","web-stories"),isHighlighted:r?.showEffect,onAnimationEnd:()=>a()})},x$=p.default.div.withConfig({displayName:"pageAdvancement__SwitchRow",componentId:"sc-11tn322-0"})(["margin-bottom:16px;"]),k$=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"pageAdvancement__MutedText",componentId:"sc-11tn322-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),O$={MIN:1,MAX:20};const N$=function PageAdvancementPanel(e){let{nameOverride:t}=e;const{autoAdvance:n,defaultPageDuration:r,updateStory:a}=Sa((e=>{let{state:{story:{autoAdvance:t=Nr,defaultPageDuration:n=Or}},actions:{updateStory:r}}=e;return{autoAdvance:t,defaultPageDuration:n,updateStory:r}})),[o,l]=(0,u.useState)(r);(0,u.useEffect)((()=>{l(r)}),[r]);const i=(0,u.useCallback)(((e,t)=>{a({properties:{autoAdvance:t}}),(0,L.trackEvent)("change_page_advancement",{status:t?"auto":"manual",duration:o})}),[a,o]),s=(0,u.useDebouncedCallback)((e=>{const t=(0,Ns.clamp)(e,O$);e!==t&&l(t),r!==t&&(a({properties:{defaultPageDuration:t}}),(0,L.trackEvent)("change_page_advancement",{status:n?"auto":"manual",duration:t}))}),800);(0,u.useEffect)((()=>{s(o)}),[o,s]);const p=(0,u.useCallback)(((e,t)=>l(t)),[]);return c.createElement(Uk,{name:t||"pageAdvancement",title:(0,d.__)("Page Advancement","web-stories"),collapsedByDefault:!1},c.createElement(Wh,null,c.createElement(k$,null,(0,d.__)("Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories"))),c.createElement(x$,null,c.createElement(dE,{groupLabel:(0,d.__)("Page Advancement","web-stories"),name:"page-advancement-switch",value:n,onLabel:(0,d.__)("Auto","web-stories"),offLabel:(0,d.__)("Manual","web-stories"),onChange:i})),n&&c.createElement(Wh,null,c.createElement(NumericInput,{unit:` ${(0,d.__)("seconds","web-stories")}`,suffix:(0,d.__)("Duration","web-stories"),value:o,onChange:p,"aria-label":(0,d.__)("Default page duration in seconds","web-stories"),min:O$.MIN,max:O$.MAX,isFloat:!0,containerStyleOverride:Lu})))},P$=(e,t)=>{let{MIN:n,MAX:r}=t;return e>=n&&e<=r},R$={MIN:1,MAX:200},M$=(0,p.default)(Wh).withConfig({displayName:"slug__PermalinkRow",componentId:"sc-12ylqoy-0"})(["margin-bottom:12px;input{color:",";:active,:focus,.","{color:",";}}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),KE.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.fg.primary})),L$=p.default.div.withConfig({displayName:"slug__LinkContainer",componentId:"sc-12ylqoy-1"})(["margin-bottom:16px;"]);const D$=function SlugPanel(e){let{nameOverride:t}=e;const{slug:n,link:r,permalinkConfig:a,updateStory:o}=Sa((e=>{let{state:{story:{slug:t="",link:n,permalinkConfig:r}},actions:{updateStory:a}}=e;return{slug:t,link:n,permalinkConfig:r,updateStory:a}})),[l,i]=(0,u.useState)(n);(0,u.useEffect)((()=>{i(n)}),[n]);const s=(0,u.useCallback)((e=>{const t=e.slice(0,R$.MAX);o({properties:{slug:uo(t)}})}),[o]),p=(0,u.useCallback)((e=>i(uo(e.target.value,!0))),[]),m=(0,u.useCallback)((e=>s(e.target.value)),[s]),f=l&&a&&P$(l.length,R$)?a.prefix+l+a.suffix:r;return c.createElement(Uk,{name:t||"permalink",title:(0,d.__)("Permalink","web-stories"),collapsedByDefault:!1},a&&c.createElement(M$,null,c.createElement(_p,{value:String(l),onChange:p,onBlur:m,placeholder:(0,d.__)("Enter slug","web-stories"),"aria-label":(0,d.__)("URL slug","web-stories"),minLength:R$.MIN,maxLength:R$.MAX,containerStyleOverride:Lu})),c.createElement(L$,null,c.createElement(Ud.Link,{rel:"noopener noreferrer",target:"_blank",href:r,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},f)))},B$=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-1n4veap-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const F$=function BackgroundAudioPanel(e){let{nameOverride:t}=e;const{capabilities:{hasUploadMediaAction:n}}=Y(),{backgroundAudio:r,updateStory:a}=Sa((e=>{let{state:{story:{backgroundAudio:t}},actions:{updateStory:n}}=e;return{backgroundAudio:t,updateStory:n}})),o=(0,u.useCallback)((e=>{a({properties:{backgroundAudio:e}})}),[a]);return r||n?c.createElement(Uk,{name:t||"backgroundAudio",title:(0,d.__)("Background Audio","web-stories"),collapsedByDefault:!0},c.createElement(Wh,null,c.createElement(B$,null,(0,d.__)("Select an audio file that plays throughout the story.","web-stories"))),c.createElement(xL,{backgroundAudio:r,updateBackgroundAudio:o})):null},H$=(ma().shape({capabilities:ma().object,description:ma().string,hierarchical:ma().bool,labels:ma().object,name:ma().string.isRequired,restBase:ma().string.isRequired,showCloud:ma().bool,slug:ma().string.isRequired,types:ma().arrayOf(ma().string),visibility:ma().object}),(0,p.default)(Ou.Headline).attrs({as:"h3",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"shared__ContentHeading",componentId:"sc-1pfee07-0"})(["margin:4px 0 16px;font-weight:",";"],(e=>{let{theme:t}=e;return t.typography.weight.regular}))),U$=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.LINK}).withConfig({displayName:"shared__LinkButton",componentId:"sc-1pfee07-1"})([""," margin-bottom:16px;font-weight:500;"],Pu.expandTextPreset(((e,t)=>{let{link:n}=e,{X_SMALL:r}=t;return n[r]}))),z$=p.default.div.withConfig({displayName:"shared__SiblingBorder",componentId:"sc-1pfee07-2"})(["padding-left:16px;padding-right:16px;& + &{border-top:1px solid ",";padding-top:16px;padding-bottom:8px;}"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),G$={Heading:(0,p.default)(H$).attrs({as:"h4"}).withConfig({displayName:"shared__Heading",componentId:"sc-1pfee07-3"})(["margin-bottom:4px;"]),Wrapper:p.default.div.withConfig({displayName:"shared__Wrapper",componentId:"sc-1pfee07-4"})(["padding:18px 0px;"]),List:p.default.ul.withConfig({displayName:"shared__List",componentId:"sc-1pfee07-5"})(["all:unset;cursor:pointer;"]),ListItem:p.default.li.withConfig({displayName:"shared__ListItem",componentId:"sc-1pfee07-6"})(["all:unset;"]),Word:(0,p.default)(U$).withConfig({displayName:"shared__Word",componentId:"sc-1pfee07-7"})(["margin:0;display:revert;"])},j$="NO_PARENT_VALUE",Y$=p.default.div.withConfig({displayName:"HierarchicalTermSelector__ContentArea",componentId:"sc-17x36f5-0"})(["label,* > label{",";color:",";}"],(e=>{let{theme:t}=e;return Pu.expandPresetStyles({preset:t.typography.presets.label[Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:t})}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Z$=p.default.form.withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryForm",componentId:"sc-17x36f5-1"})(["margin:24px 0 16px;"]),W$=p.default.div.withConfig({displayName:"HierarchicalTermSelector__ButtonContainer",componentId:"sc-17x36f5-2"})(["display:flex;gap:8px;"]),V$=(0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"HierarchicalTermSelector__Label",componentId:"sc-17x36f5-3"})(["display:inline-block;margin:12px 0;"]),$$=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.SECONDARY}).withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryButton",componentId:"sc-17x36f5-4"})(["margin-top:20px;"]);const q$=function HierarchicalTermSelector(e){let{noParentId:t=j$,taxonomy:n,canCreateTerms:r}=e;const{createTerm:a,termCache:o,terms:l,setTerms:i}=Ii((e=>{let{state:{termCache:t,terms:n},actions:{createTerm:r,setTerms:a}}=e;return{createTerm:r,setTerms:a,termCache:t,terms:n}})),s=(0,u.useMemo)((()=>o?.[n.restBase]?Object.values(o[n.restBase]).map((e=>({id:e.id,parent:e.parent,value:e.id,label:e.name,checked:l[n.restBase]?.includes(e.id),slug:e.slug}))):[]),[n,o,l]),[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(""),[h,E]=(0,u.useState)(t),b=(0,u.useMemo)(he.default,[]),[y,_]=(0,u.useState)(!1),v=(0,u.useRef)(),w=(0,u.useRef)(),[T,S]=(0,u.useState)(!1),[C,I]=(0,u.useState)(""),A=(0,u.useCallback)((e=>I(e)),[]),x=(0,Eb.default)("assertive"),k=(0,u.useCallback)((()=>{g(""),E(t)}),[t]),O=(0,u.useCallback)(((e,t)=>{let{id:r,checked:a}=t;const o=s.find((e=>e.id===r));i(n,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.findIndex((e=>e===o.id));return a&&-1===t?[...e,o.id]:!a&&t>-1?[...e.slice(0,t),...e.slice(t+1)]:e}))}),[s,i,n]),N=(0,u.useCallback)((()=>{m(!p),k(),_(!p),S(p)}),[k,p]),P=(0,u.useCallback)((e=>{g(e.target.value)}),[]),R=(0,u.useMemo)((()=>s.find((e=>e.id===h))?.slug),[h,s]),M=(0,u.useCallback)((e=>{e.preventDefault();a(n,f,{id:h===t?0:h,slug:R},!0),x((0,qe.default)(
/* Translators: %s: Taxonomy label name. */
(0,d.__)("%s added.","web-stories"),n.labels.singular_name)),m(!1),k(),S(p)}),[a,x,f,t,k,h,p,n,R]),L=(0,u.useCallback)(((e,t)=>E(t)),[]);(0,u.useEffect)((()=>{const e=v.current;if(e){const t=e=>{"Enter"===e.key&&M(e)};return e.addEventListener("keypress",t),()=>{e.removeEventListener("keypress",t)}}return null}),[M,v]),(0,u.useEffect)((()=>{T&&w.current.focus()}),[T]);const D=(0,u.useMemo)((()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=yb(e);return wb(vb(n,t))}(s,C)),[s,C]),B=(0,u.useMemo)((()=>[{value:j$,label:(0,d.__)("None","web-stories")}].concat(D).map((e=>{let{$level:t,label:n,...r}=e;return{...r,label:`${Array.from({length:t},(()=>"— ")).join("")} ${n}`}}))),[D]);return c.createElement(Y$,null,c.createElement(H$,null,n.labels.name),c.createElement(Nb,{inputValue:C,onInputChange:A,label:n.labels.searchItems,options:D,onChange:O,noOptionsText:n.labels?.notFound}),r?c.createElement(c.Fragment,null,!p&&c.createElement(U$,{ref:w,"aria-expanded":!1,onClick:N},n.labels.addNewItem),p?c.createElement(Z$,{ref:v,onSubmit:M},c.createElement(_p,{autoFocus:!0,name:n.labels.newItemName,label:n.labels.newItemName,value:f,onChange:P,hasFocus:y}),c.createElement(V$,{htmlFor:b},n.labels.parentItem),c.createElement(cb.DropDown,{id:b,ariaLabel:n.labels.parentItem,options:B,selectedValue:h,onMenuItemClick:L}),c.createElement(W$,null,c.createElement($$,{disabled:!f.length,type:"submit"},n.labels.addNewItem),c.createElement($$,{"aria-expanded":!0,onClick:N},(0,d.__)("Cancel","web-stories")))):null):null)};function X$(e){return e.replace(/( +)/g," ").trim()}function K$(e){const t=new Map;return e.forEach((e=>{t.set(uo(e),e)})),[...t.values()]}function Q$(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===t.length&&e.every((e=>t.includes(e)))}const J$="updateValue",eq="submitValue",tq="removeTag",nq="resetOffset",rq="resetValue",aq="incrementOffset",oq="decrementOffset",lq="updateTags";const iq=function(e,t){switch(t.type){case J$:{const n=t.payload.split(",");if(n.length<=1)return{...e,value:t.payload};const r=n.slice(0,-1).map(X$).filter((e=>e.length)),a=n[n.length-1];return function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>e.includes(t)))}(r,e.tags)?{...e,value:a}:{...e,value:a,tagBuffer:K$([...e.tags.slice(0,e.tags.length-e.offset),...r,...e.tags.slice(e.tags.length-e.offset)])}}case eq:{const n=X$(t?.payload||e.value);return""===n||e.tags.includes(n)?{...e,value:""}:{...e,value:"",tagBuffer:K$([...e.tags.slice(0,e.tags.length-e.offset),n,...e.tags.slice(e.tags.length-e.offset)])}}case tq:{const n="string"==typeof t.payload?e.tags.findIndex((e=>e===t.payload)):e.tags.length-1-e.offset;return n<0?e:{...e,tagBuffer:[...e.tags.slice(0,n),...e.tags.slice(n+1,e.tags.length)]}}case aq:return{...e,offset:(0,Ns.clamp)(e.offset+1,{MIN:0,MAX:e.tags.length})};case oq:return{...e,offset:(0,Ns.clamp)(e.offset-1,{MIN:0,MAX:e.tags.length})};case nq:return{...e,offset:0};case rq:return{...e,value:""};case lq:{const n=e.tags.map((e=>[uo(e),e])),r=t.payload.map((e=>[uo(e),e]));if(Q$(n.map((e=>{let[t]=e;return t})),r.map((e=>{let[t]=e;return t}))))return e;const a=n.filter((e=>{let[t]=e;return r.map((e=>{let[t]=e;return t})).includes(t)})).map((e=>{let[,t]=e;return t})),o=r.filter((e=>{let[t]=e;return!n.map((e=>{let[t]=e;return t})).includes(t)})).map((e=>{let[,t]=e;return t}));return{...e,tags:[...a,...o],tagBuffer:null}}default:return e}},sq=p.default.button.withConfig({displayName:"tag__Dismiss",componentId:"sc-14unxs6-0"})(["all:unset;cursor:pointer;border-radius:",";",";width:22px;min-width:22px;height:22px;display:flex;justify-content:center;align-items:center;svg{height:20px;width:20px;margin:auto;}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),Ru.focusableOutlineCSS),cq=p.default.span.withConfig({displayName:"tag__Token",componentId:"sc-14unxs6-1"})([""," position:relative;display:flex;align-items:center;padding:2px;margin:2px;max-width:calc(100% - 4px);height:32px;"],(e=>{let{theme:t}=e;return(0,p.css)(["color:",";border:1px solid ",";border-radius:",";"],t.colors.fg.primary,t.colors.border.defaultNormal,t.borders.radius.small)})),dq=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"tag__TokenText",componentId:"sc-14unxs6-2"})(["padding-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);const uq=function Tag(e){let{children:t,onDismiss:n}=e;const r=(0,u.useMemo)((()=>(0,he.default)()),[]);return c.createElement(cq,{"data-testid":"flat-term-token"},c.createElement(dq,{id:r},t),c.createElement(bd.Tooltip,{title:(0,d.__)("Remove Tag","web-stories"),placement:Ed.PLACEMENT.BOTTOM,hasTail:!0,popupZIndexOverride:10},c.createElement(sq,{onClick:n,"aria-label":(0,d.__)("Remove Tag","web-stories"),"aria-describedby":r},c.createElement(Nu.default,null))))};function pq(){return pq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pq.apply(this,arguments)}const mq=(0,he.default)(),fq=p.default.div.withConfig({displayName:"input__Border",componentId:"sc-1nuo5lh-0"})([""," display:flex;flex-direction:column;margin-bottom:6px;"],(e=>{let{theme:t,isInputFocused:n}=e;return(0,p.css)(["color:",";border:1px solid ",";border-radius:",";",";"],t.colors.fg.primary,t.colors.border.defaultNormal,t.borders.radius.small,n&&Ru.focusCSS)})),gq=p.default.div.withConfig({displayName:"input__InputWrapper",componentId:"sc-1nuo5lh-1"})(["display:flex;flex-wrap:wrap;padding:0;"]),hq=(0,p.default)(yp).attrs({type:"text"}).withConfig({displayName:"input__TextInput",componentId:"sc-1nuo5lh-2"})(["width:auto;flex-grow:1;height:32px;margin:2px 0;padding-left:4px;"]),Eq=(0,p.default)(GW).withConfig({displayName:"input__SuggestionList",componentId:"sc-1nuo5lh-3"})(["max-height:120px;overflow-y:scroll;border-top:",";display:block;list-style-type:none;width:100%;padding:6px 4px 4px;margin-top:6px;li{cursor:pointer;padding:4px;width:100%;"," border-radius:",";&:hover{background-color:",";}}"],(e=>{let{theme:t}=e;return`1px solid ${t.colors.border.defaultNormal}`}),Ru.focusableOutlineCSS(),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary}));const bq=function(e){let{suggestedTerms:t=[],onTagsChange:n,onInputChange:r,suggestedTermsLabel:a,tagDisplayTransformer:o,tokens:l=[],onUndo:i=sv.noop,...s}=e;const[{value:d,tags:p,offset:m,tagBuffer:f},g]=(0,u.useReducer)(iq,{value:"",tags:[...l],tagBuffer:null,offset:0}),[h,E]=(0,u.useState)(!1),[b,y]=(0,u.useState)(!1),_=(0,u.useRef)(),v=(0,u.useRef)(),w=(0,u.useRef)();(0,u.useEffect)((()=>{g({type:lq,payload:l})}),[l]);const T=(0,he.default)(),S=t.length;(0,u.useEffect)((()=>{y(S>0)}),[S]);const C=(0,u.useRef)(n);C.current=n,(0,u.useEffect)((()=>{f&&C.current?.(f)}),[f]);const I=(0,u.useRef)(r);I.current=r,(0,u.useEffect)((()=>{I.current?.(d)}),[d]);const{handleFocus:A,handleBlur:x,handleKeyDown:k,handleChange:O,removeTag:N}=(0,u.useMemo)((()=>({handleKeyDown:e=>{""===e.target.value&&("ArrowLeft"===e.key&&g({type:aq}),"ArrowRight"===e.key&&g({type:oq}),"Backspace"===e.key&&g({type:tq}),"z"===e.key&&e.metaKey&&i(e)),"ArrowDown"===e.key&&t.length>0&&v?.current?.firstChild?.focus(),["Comma",",","Enter"].includes(e.key)&&g({type:eq})},handleChange:e=>{g({type:J$,payload:e.target.value})},removeTag:e=>()=>{g({type:tq,payload:e}),_?.current.focus()},handleFocus:()=>{E(!0)},handleBlur:()=>{g({type:nq}),E(!1)}})),[i,t]),P=f||p,R=(0,u.useCallback)(((e,t)=>{e.preventDefault(),y(!1),g({type:eq,payload:t}),_?.current.focus()}),[]),M=(0,u.useCallback)(((e,t,n)=>{const r=t+1,a=t-1;"ArrowDown"===e.key&&r<S&&v?.current?.children?.[r]?.focus(),"ArrowUp"===e.key&&(a<0?_?.current.focus():v?.current?.children?.[a]?.focus()),"Enter"===e.key&&R(e,n)}),[R,S]);return c.createElement(fq,{ref:w,isInputFocused:h},c.createElement(gq,null,[...P.slice(0,P.length-m),mq,...P.slice(P.length-m)].map((e=>e===mq?c.createElement(hq,pq({},s,{key:mq,value:d,onKeyDown:k,onChange:O,onFocus:A,onBlur:x,size:"4",ref:_,autoComplete:b?"off":"on","aria-expanded":b,"aria-autocomplete":"list","aria-owns":b?T:null,role:"combobox"})):c.createElement(uq,{key:e,onDismiss:N(e)},o(e)||e)))),b&&c.createElement(Eq,{"aria-label":a,role:"listbox",ref:v,id:T,"data-testid":"suggested_terms_list"},t.map(((e,t)=>{let{name:n,id:r}=e;return c.createElement("li",{key:r,"aria-selected":d===n,role:"option",tabIndex:0,onClick:e=>R(e,n),onKeyDown:e=>M(e,t,n)},n)}))))},yq=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"description",componentId:"sc-1gy988t-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),_q=(0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"label",componentId:"sc-1y7bq6c-0"})(["display:inline-block;color:",";margin-bottom:8px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),vq={Input:bq,Description:yq,Label:_q};const wq=function FlatTermSelector(e){let{taxonomy:t,canCreateTerms:n}=e;const[r,a]=(0,u.useState)([]),{createTerm:o,termCache:l,addSearchResultsToCache:i,terms:s=[],setTerms:p,addTermToSelection:m}=Ii((e=>{let{state:{termCache:t,terms:n},actions:{createTerm:r,addSearchResultsToCache:a,setTerms:o,addTermToSelection:l}}=e;return{termCache:t,createTerm:r,addSearchResultsToCache:a,terms:n,setTerms:o,addTermToSelection:l}})),{undo:f}=pr((e=>{let{actions:{undo:t}}=e;return{undo:t}})),[g,h]=(0,u.useState)([]),E=(0,Eb.default)("assertive"),b=(0,u.useCallback)((e=>{const r=e.map((e=>[uo(e),e])),a=r.map((e=>{let[t]=e;return t})).map((e=>l[t.restBase]?.[e])).filter((e=>e)).map((e=>e.id));if(Q$(s[t.restBase],a)||p(t,a),!n)return;const i=r.filter((e=>{let[n]=e;return!l[t.restBase]?.[n]})).map((e=>{let[,t]=e;return t}));i.forEach((e=>o(t,e,null,!0)))}),[n,s,t,l,p,o]),y=(0,u.useDebouncedCallback)((async e=>{if(0===e.length)return void h([]);if(e.length<3)return;const n=await i(t,{search:e,per_page:20});h(n);const r=n.length,a=(0,qe.default)(
/* Translators: %d: Number of results. */
(0,d._n)("%d result found.","%d results found.","web-stories","web-stories"),r);E(a)}),300),_=(0,u.useMemo)((()=>(s[t.restBase]||[]).map((e=>Object.values(l[t.restBase]||{}).find((t=>t.id===e)))).filter((e=>void 0!==e)).map((e=>e.name))),[t,s,l]),v=(0,u.useCallback)((e=>l[t.restBase]?.[uo(e)]?.name),[t,l]);return(0,u.useEffect)((()=>{!async function(){const e=await i(t,{orderby:"count",order:"desc",hide_empty:!0});a(e)}()}),[t,i]),c.createElement(c.Fragment,null,c.createElement(H$,null,t.labels.name),c.createElement("div",{key:t.slug},c.createElement(vq.Label,{htmlFor:`${t.slug}-input`},t.labels.addNewItem),c.createElement(vq.Input,{id:`${t.slug}-input`,"aria-describedby":`${t.slug}-description`,name:t.slug,onTagsChange:b,onInputChange:y,tagDisplayTransformer:v,tokens:_,onUndo:f,suggestedTerms:g,suggestedTermsLabel:t?.labels?.itemsList}),c.createElement(vq.Description,{id:`${t.slug}-description`},t.labels.separateItemsWithCommas),r.length>0&&c.createElement(G$.Wrapper,{"data-testid":`${t.slug}-most-used`},c.createElement(G$.Heading,null,t.labels.mostUsed),c.createElement(G$.List,null,r.map(((e,n)=>c.createElement(G$.ListItem,{key:e.id},c.createElement(G$.Word,{onClick:()=>{s[t.restBase]?.includes(e.id)||m(t,e)}},e.name,n<r.length-1&&
/* translators: delimiter used in a list */
(0,d.__)(",","web-stories")),n<r.length-1&&" ")))))))};function Tq(){return Tq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tq.apply(this,arguments)}const Sq=(0,p.default)(Uk).withConfig({displayName:"taxonomies__StyledSimplePanel",componentId:"sc-171mnp-0"})(["padding-left:0;padding-right:0;"]);const Cq=function TaxonomiesPanel(e){let{nameOverride:t,...n}=e;const{capabilities:r}=Sa((e=>{let{state:{capabilities:t}}=e;return{capabilities:t}})),{taxonomies:a}=Ii((e=>{let{state:{taxonomies:t}}=e;return{taxonomies:t}}));if(!a?.length)return null;const o=a.filter((e=>{const t=e?.visibility?.show_ui,n=Boolean(r[`assign-${e?.restBase}`]||r[`assign-${e?.slug}`]);return t&&n}));return 0===o.length?null:c.createElement(Sq,Tq({name:t||"taxonomies",title:(0,d.__)("Taxonomies","web-stories")},n),o.map((e=>{const t=Boolean(r[`create-${e?.restBase}`]||r[`create-${e?.slug}`]);return c.createElement(z$,{key:e.slug},e.hierarchical?c.createElement(q$,{taxonomy:e,canCreateTerms:t}):c.createElement(wq,{taxonomy:e,canCreateTerms:t}))})))};var Iq=n(15242);const Aq=function(e){if(!e)return"00:00:00";let t=e/1e3;const n=parseInt(t/3600);t%=3600;const r=parseInt(t/60);return t%=60,`${se(n)}:${se(r)}:${se(t)}`};const xq=function(e){if(!e)return 0;const t=e.split(":");if(3!==t.length)return 0;const n=parseFloat(t[2])+60*parseInt(t[1])+3600*parseInt(t[0]);return Math.round(1e3*n)};const kq=function(){const{isEditing:e,isTrimMode:t,setEditingElementWithState:n,clearEditing:r}=xs((e=>{let{state:{isEditing:t,editingElementState:{isTrimMode:n}={}},actions:{setEditingElementWithState:r,clearEditing:a}}=e;return{isEditing:t,isTrimMode:n,setEditingElementWithState:r,clearEditing:a}})),{selectedElement:a}=Sa((e=>{let{state:{selectedElements:t}}=e;return{selectedElement:1===t.length?t[0]:null}})),{actions:{getMediaById:o}}=X(),[l,i]=(0,u.useState)(null),{isCurrentResourceUploading:s}=yi((e=>{let{state:{isCurrentResourceUploading:t}}=e;return{isCurrentResourceUploading:t}})),c=(0,u.useCallback)((()=>{const{resource:e}=a,{trimData:t}=e,n={element:a,resource:e,start:0,end:null};o&&t?.original?(i(null),o(t.original).then((e=>({element:a,resource:e,start:xq(t.start),end:xq(t.end)})),(()=>n)).then((e=>i(e)))):i(n)}),[o,a]);(0,u.useEffect)((()=>{a?.resource?.trimData&&c()}),[a,c]);const d=(0,u.useCallback)((()=>{e?r():(n(a.id,{isTrimMode:!0,hasEditMenu:!0,showOverflow:!1}),c()),(0,L.trackEvent)("video_trim_mode_toggled",{status:e?"closed":"open"})}),[e,r,n,a,c]),{isTranscodingEnabled:p}=Ra(),m=(0,u.useMemo)((()=>{if("video"!==a?.type||!a?.resource)return!1;const{id:e,isExternal:t}=a.resource;return p&&!t&&!s(e)}),[a,p,s]);return{isTrimMode:Boolean(e&&t),hasTrimMode:m,toggleTrimMode:d,videoData:l}};const Oq=function(e){const[t,n]=(0,u.useState)(null),[r,a]=(0,u.useState)(null),[o,l]=(0,u.useState)(null),[i,s]=(0,u.useState)(null),[c,d]=(0,u.useState)(null),[p,m]=(0,u.useState)(null),[f,g]=(0,u.useState)(null),[h,E]=(0,u.useState)(!1),b=(0,u.useRef)(!1);(0,u.useEffect)((()=>{f&&(b.current||(h?f.pause():(f.currentTime=r/1e3,f.play())))}),[f,h,r]);const y=f?f.paused:null;(0,u.useEffect)((()=>{h||(b.current=y)}),[y,h]),(0,u.useEffect)((()=>{if(f&&e)return f.addEventListener("timeupdate",c),f.addEventListener("loadedmetadata",o),()=>{f.removeEventListener("timeupdate",c),f.removeEventListener("loadedmetadata",o)};function t(e){f.currentTime=e/1e3,f.play()}function o(r){const o=Math.floor(1e3*r.target.duration);a(e.start),l(e.start),n(e.start),s(e.end??o),d(e.end??o),m(o),t(e.start)}function c(e){const a=Math.floor(1e3*e.target.currentTime);n(Math.min(a,i)),a>i&&!b.current&&t(r)}}),[r,i,e,f]);const _=(0,u.useCallback)((e=>{e=Math.min(i-100,e),e=Math.max(0,e),a(e),f.currentTime=e/1e3}),[f,i]),v=(0,u.useCallback)((e=>{e=Math.max(r+100,e),e=Math.min(p,e),s(e),f.currentTime=e/1e3}),[f,r,p]);return{hasChanged:(0,u.useMemo)((()=>r!==o||i!==c),[r,o,i,c]),currentTime:t,startOffset:r,endOffset:i,maxOffset:p,setStartOffset:_,setEndOffset:v,setVideoNode:g,setIsDraggingHandles:E}};const Nq=function VideoTrimProvider(e){let{children:t}=e;const{trimExistingVideo:n}=yi((e=>{let{actions:{trimExistingVideo:t}}=e;return{trimExistingVideo:t}})),{isTrimMode:r,hasTrimMode:a,toggleTrimMode:o,videoData:l}=kq(),{hasChanged:i,currentTime:s,startOffset:d,endOffset:p,maxOffset:m,setStartOffset:f,setEndOffset:g,setVideoNode:h,setIsDraggingHandles:E}=Oq(l),b=(0,u.useCallback)((()=>{const{resource:e,element:t}=l;if(!e)return;const r=Math.round(p/1e3-d/1e3);n({resource:{...e,length:r,lengthFormatted:ce(r)},canvasResourceId:t.resource.id,elementId:t.id,start:Aq(d),end:Aq(p)}),(0,L.trackEvent)("video_trim",{original_length:e.length,new_length:r,start_offset:d,end_offset:p}),o()}),[p,d,n,o,l]),y={state:{videoData:l,hasChanged:i,isTrimMode:r,hasTrimMode:a,currentTime:s,startOffset:d,endOffset:p,maxOffset:m},actions:{performTrim:b,toggleTrimMode:o,setVideoNode:h,setStartOffset:f,setEndOffset:g,setIsDraggingHandles:E}};return c.createElement(cS.Provider,{value:y},t)},Pq=p.default.div.withConfig({displayName:"layout__Area",componentId:"sc-1encx56-0"})(["grid-area:",";position:relative;overflow:hidden;z-index:",";"],(e=>{let{area:t}=e;return t}),(e=>{let{zIndex:t}=e;return t})),Rq=(0,p.default)(Pq).attrs({area:"canv",zIndex:1}).withConfig({displayName:"layout__CanvasArea",componentId:"sc-1encx56-1"})([""]),Mq=(0,p.default)(Pq).attrs({area:"sidebar",zIndex:2}).withConfig({displayName:"layout__SidebarArea",componentId:"sc-1encx56-2"})([""]);const Lq=function Workspace(e){let{header:t,footer:n}=e;const{editingElementState:r}=xs((e=>({editingElementState:e.state.editingElementState})));return c.createElement(Nq,null,c.createElement(Sr.RichTextProvider,{editingState:r},c.createElement(Mq,null,c.createElement(z,null,c.createElement(T_,null))),c.createElement(Rq,null,c.createElement(z,null,c.createElement(YF,{header:t,footer:n})))))},Dq="OPEN_MENU",Bq="CLOSE_MENU",Fq="RESET",Hq={isMenuOpen:!1,menuPosition:{x:0,y:0}};const Uq=function(e,t){switch(t.type){case Bq:return{...e,isMenuOpen:!1,menuPosition:Hq.menuPosition};case Dq:return{...e,isMenuOpen:!0,menuPosition:t.payload};case Fq:return{...Hq};default:return e}},zq=(0,qe.default)(
/* translators: %s: Ctrl/Cmd + Z keyboard shortcut */
(0,d.__)("Press %s to undo the last change","web-stories"),(0,tr.prettifyShortcut)("mod+z"));const Gq=()=>{const e=pr((e=>{let{actions:t}=e;return t.undo})),{addAnimations:t,copySelectedElement:n,copiedElementState:r,selectedElement:a,selectedElementType:o,selectedElementAnimations:l,updateSelectedElements:i,isSelectedElementBackground:s}=Sa((e=>{let{state:t,actions:n}=e;return{addAnimations:n.addAnimations,copiedElementState:t.copiedElementState,copySelectedElement:n.copySelectedElement,selectedElement:t.selectedElements?.[0],selectedElementType:t.selectedElements?.[0]?.type,isSelectedElementBackground:t.selectedElements?.[0]?.isBackground,selectedElementAnimations:t.selectedElementAnimations,updateSelectedElements:n.updateSelectedElements}})),c=(0,hr.useSnackbar)((e=>e.showSnackbar)),p=(0,u.useRef)(e);p.current=e;const m=(0,u.useCallback)((()=>{n(),c({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Copied style.","web-stories"),onAction:()=>{p.current(),(0,L.trackEvent)("context_menu_action",{name:"undo_copy_styles",element:o,isBackground:s})},actionHelpText:zq}),(0,L.trackEvent)("context_menu_action",{name:"copy_styles",element:o,isBackground:s})}),[n,c,o,s]),f=(0,u.useCallback)(((e,t)=>{i({properties:n=>{const r=yw(n,e,t),a=PT({...n,...r});return{...r,...a}}})}),[i]),g=VM({pushUpdate:f}),h=(0,u.useCallback)((()=>{const e=a?.id;if(!e||o!==r.type)return;const n=l.length?{...l[0],delete:!0}:void 0,u=r.animations.map((e=>({...e,id:(0,he.default)(),targets:[a.id]})));if(t({animations:u}),"text"===r.type&&r.styles.content){const e=function(e,t){const{textStyles:n}=ig([e.styles],{textStyles:[],colors:[]},ze),{colors:r}=ig([e.styles],{textStyles:[],colors:[]},Ge),{content:a,...o}=e.styles;return{...o,...n[0],...r[0].color,animation:t,border:o.border||null}}(r,n);g(e)}else i({properties:e=>yw(e,{...r.styles,animation:n},!0)});c({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Pasted style.","web-stories"),onAction:()=>{p.current(),(0,L.trackEvent)("context_menu_action",{name:"undo_paste_styles",element:o,isBackground:s})},actionHelpText:zq}),(0,L.trackEvent)("context_menu_action",{name:"paste_styles",element:o,isBackground:s})}),[t,r,g,a,l,c,i,o,s]);return{copiedElementType:r?.type,handleCopyStyles:m,handlePasteStyles:h}},jq=()=>{const{clearBackgroundElement:e,duplicateElementsById:t,selectedElements:n,setBackgroundElement:r,updateElementsById:a}=Sa((e=>{let{state:t,actions:n}=e;return{clearBackgroundElement:n.clearBackgroundElement,duplicateElementsById:n.duplicateElementsById,selectedElements:t.selectedElements,setBackgroundElement:n.setBackgroundElement,updateElementsById:n.updateElementsById}})),o=(0,hr.useSnackbar)((e=>e.showSnackbar)),l=xs((e=>{let{actions:t}=e;return t.setEditingElement})),i=pr((e=>{let{actions:t}=e;return t.undo})),s=(0,u.useRef)(i);s.current=i;return{handleDuplicateSelectedElements:(0,u.useCallback)((()=>{n.length&&(t({elementIds:n.map((e=>{let{id:t}=e;return t}))}),o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Duplicated elements.","web-stories"),onAction:()=>{s.current(),(0,L.trackEvent)("context_menu_action",{name:"undo_duplicate_elements",elements:n.map((e=>e.type))})},actionHelpText:zq}),(0,L.trackEvent)("context_menu_action",{name:"duplicate_elements",elements:n.map((e=>e.type))}))}),[t,n,o]),handleOpenScaleAndCrop:(0,u.useCallback)((e=>{const t=n?.[0];t&&(l(t.id,e),(0,L.trackEvent)("context_menu_action",{name:"open_scale_and_crop",element:t.type,isBackground:t.isBackground}))}),[n,l]),handleSetPageBackground:(0,u.useCallback)((()=>{const e=n?.[0];e&&!e.isBackground&&(r({elementId:e.id}),o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Set page background.","web-stories"),onAction:()=>{s.current(),(0,L.trackEvent)("context_menu_action",{name:"undo_set_page_background",element:e.type,isBackground:e.isBackground})},actionHelpText:zq}),(0,L.trackEvent)("context_menu_action",{name:"set_as_page_background",element:e.type,isBackground:e.isBackground}))}),[n,r,o]),handleRemovePageBackground:(0,u.useCallback)((()=>{const t=n?.[0];t&&t.isBackground&&(a({elementIds:[t.id],properties:e=>yw(e,{isBackground:!1,opacity:100,overlay:null},!0)}),e(),o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Removed page background.","web-stories"),onAction:()=>{s.current(),(0,L.trackEvent)("context_menu_action",{name:"undo_remove_page_background",elements:t.type,isBackground:t.isBackground})},actionHelpText:zq}),(0,L.trackEvent)("context_menu_action",{name:"remove_media_from_background",element:t.type,isBackground:t.isBackground}))}),[e,n,o,a])}},Yq=()=>{const{arrangeElement:e,elements:t,selectedElement:n}=Sa((e=>{let{state:t,actions:n}=e;return{arrangeElement:n.arrangeElement,elements:t.currentPage?.elements||[],selectedElement:t.selectedElements?.[0]}})),r=t.findIndex((e=>{let{id:t}=e;return t===n?.id})),a=n&&!n.isBackground&&r>1,o=n&&!n.isBackground&&r<t.length-1,l=(0,u.useCallback)((()=>{if(!a)return;const t=1===r?r:r-1;e({elementId:n.id,position:t}),(0,L.trackEvent)("context_menu_action",{name:"send_backward",element:n.type,isBackground:n.isBackground})}),[e,a,r,n]),i=(0,u.useCallback)((()=>{a&&(e({elementId:n.id,position:1}),(0,L.trackEvent)("context_menu_action",{name:"send_to_back",element:n.type}))}),[e,a,n]),s=(0,u.useCallback)((()=>{if(!o)return;const a=r>=t.length-1?r:r+1;e({elementId:n.id,position:a}),(0,L.trackEvent)("context_menu_action",{name:"bring_forward",element:n.type})}),[e,o,r,t,n]),c=(0,u.useCallback)((()=>{o&&(e({elementId:n.id,position:t.length-1}),(0,L.trackEvent)("context_menu_action",{name:"bring_to_front",element:n.type}))}),[e,o,t,n]);return{canElementMoveBackwards:a,canElementMoveForwards:o,handleBringForward:s,handleBringToFront:c,handleSendBackward:l,handleSendToBack:i}},Zq=()=>{const{addPageAt:e,currentPage:t,deleteCurrentPage:n,isSelectedElementBackground:r,pageLength:a,selectedElementType:o}=Sa((e=>{let{state:t,actions:n}=e;return{addPageAt:n.addPageAt,currentPage:t.currentPage,deleteCurrentPage:n.deleteCurrentPage,isSelectedElementBackground:t.selectedElements?.[0]?.background||!1,pageLength:t.pages?.length||1,selectedElementType:t.selectedElements?.[0]?.type||null}}));return{handleAddPageAtPosition:(0,u.useCallback)((t=>{let n=Boolean(t)||0===t?t:a-1;n=n>a?a-1:n,n=n<0?0:n,e({page:(0,A.createPage)(),position:n}),(0,L.trackEvent)("context_menu_action",{name:"page_added",element:o,isBackground:r})}),[e,r,a,o]),handleDuplicatePage:(0,u.useCallback)((()=>{e({page:(0,A.duplicatePage)(t),position:null})}),[e,t]),handleDeletePage:(0,u.useCallback)((()=>{n(),(0,L.trackEvent)("context_menu_action",{name:"page_deleted",element:o,isBackground:r})}),[n,r,o])}},Wq=()=>{const{addGlobalPreset:e}=dg({presetType:ze}),{addGlobalPreset:t}=dg({presetType:Ge}),n=LM({onEmpty:Ft}),{deleteGlobalColor:r}=Tg({onEmpty:Ft}),a=Sa((e=>{let{state:t}=e;return t.selectedElements?.[0]})),o=(0,hr.useSnackbar)((e=>e.showSnackbar)),l=pr((e=>{let{actions:t}=e;return t.undo}));(0,u.useRef)(l).current=l;return{handleAddTextPreset:(0,u.useCallback)((t=>{const r=e(t);o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)('Saved style to "Saved Styles".',"web-stories"),onAction:()=>{n(r),(0,L.trackEvent)("context_menu_action",{name:"remove_text_preset",element:a?.type})},actionHelpText:zq}),(0,L.trackEvent)("context_menu_action",{name:"add_text_preset",element:a?.type})}),[e,n,a?.type,o]),handleAddColorPreset:(0,u.useCallback)((e=>{const n=t(e);o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)('Added color to "Saved Colors".',"web-stories"),onAction:()=>{r(n),(0,L.trackEvent)("context_menu_action",{name:"remove_color_preset",element:a?.type})},actionHelpText:zq}),(0,L.trackEvent)("context_menu_action",{name:"add_color_preset",element:a?.type})}),[t,r,a?.type,o])}};const Vq=function RightClickMenuProvider(e){let{children:t}=e;const[{isMenuOpen:n,menuPosition:r},a]=(0,u.useReducer)(Uq,Hq),{handleCopyStyles:o,handlePasteStyles:l}=Gq(),i=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation();let t=e?.clientX,n=e?.clientY;if(!t&&!n){const r=e.target.getBoundingClientRect();t=r.x,n=r.y}a({type:Dq,payload:{x:t,y:n}}),(0,L.trackEvent)("context_menu_action",{name:"context_menu_opened"})}),[]),s=(0,u.useCallback)((()=>{n&&a({type:Bq})}),[n]);(0,tr.useGlobalKeyDownEffect)({key:["mod+alt+o"]},(e=>{e.preventDefault(),o()}),[o]),(0,tr.useGlobalKeyDownEffect)({key:["mod+alt+p"]},(e=>{e.preventDefault(),l()}),[l]);const d=(0,u.useMemo)((()=>({isMenuOpen:n,menuPosition:r,onCloseMenu:s,onOpenMenu:i})),[s,i,n,r]);return c.createElement(ac.Provider,{value:d},t)};var $q=n(8682);const qq=(0,p.default)(Ke.Text).attrs({forwardedAs:"kbd",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"shortcut__StyledText",componentId:"sc-74dfi9-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const Xq=function Shortcut(e){return c.createElement(qq,e)},Kq=p.default.div.withConfig({displayName:"suffix__Suffix",componentId:"sc-1l1uahg-0"})(["position:relative;svg{width:32px;color:",";position:absolute;right:-14px;top:-16px;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Qq=Kq;function Jq(){return Jq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jq.apply(this,arguments)}const eX=(0,p.default)(ow.default).withConfig({displayName:"item__StyledButton",componentId:"sc-p2jje0-0"})(["",""],(e=>{let{supportsIcon:t}=e;return t&&"\n    svg {\n      width: 32px;\n      position: absolute;\n      margin-left: -12px;\n    }\n    span {\n      padding-left: 18px;\n      font-size: 12px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  "}));const tX=(0,u.forwardRef)((function MenuItemWithRef(e,t){let{label:n,shortcut:r,icon:a,SuffixIcon:o,...l}=e;return c.createElement(eX,Jq({ref:t},l),a,n,r&&c.createElement(Xq,null,r.display),o&&c.createElement(Qq,null,c.createElement(o,null)))}));tX.propTypes={label:ma().oneOfType([ma().string,ma().object]),shortcut:ma().shape({display:ma().object.isRequired,title:ma().string}),icon:ma().node,SuffixIcon:ma().object};const nX=tX;function rX(){return rX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rX.apply(this,arguments)}const aX=function SubMenuTrigger(e){let{openSubMenu:t,closeSubMenu:n,isSubMenuOpen:r,isRTL:a=!1,subMenuRef:o,parentMenuRef:l,...i}=e;const s=(0,u.useRef)(),d=(0,u.useRef)({}),{setFocusedId:p}=(0,$q.default)((e=>{let{actions:t}=e;return{setFocusedId:t.setFocusedId}})),m=e=>{const{x:t,y:n,width:r,height:a}=e.getBoundingClientRect(),{x:o,y:l}=d.current;if(void 0===o||void 0===l)return!0;return o<t-2||o>t+r+2||l<n-2||l>n+a+2},f=(0,u.useDebouncedCallback)((()=>{s.current&&o.current?.firstChild&&m(s.current)&&m(o.current.firstChild)&&n()}),200);(0,u.useEffect)((()=>{if(r&&o.current){const t=(e=o.current,Array.from(e.querySelectorAll(Dn.FOCUSABLE_SELECTORS.join(", "))));t[0].focus(),p(t[0].id)}var e}),[r,o,p]),(0,u.useEffect)((()=>{const e=l.current?.querySelector('[role="dialog"]');if(!r||!e)return;const t=e=>{d.current.x=e.clientX,d.current.y=e.clientY,f()};return e.addEventListener("pointermove",t),()=>{e.removeEventListener("pointermove",t)}}),[r,l,f]);const g=(0,u.useCallback)((e=>{const{code:o}=e;[Dn.KEYS.SPACE,Dn.KEYS.ENTER].includes(o)?r?n():t():(!a&&Dn.KEYS.RIGHT===o||(a&&Dn.KEYS.LEFT)===o)&&(r||t())}),[t,n,r,a]);return(0,tr.useKeyDownEffect)(s,{key:["enter","space","left","right"]},g,[g]),c.createElement(nX,rX({},i,{ref:s,onPointerEnter:t,onPointerLeave:()=>{d.current={},f()},onClick:e=>e.preventDefault(),"aria-haspopup":!0,"aria-expanded":r,dismissOnClick:!1}))},oX={ADD_NEW_PAGE_AFTER:(0,d.__)("Add New Page After","web-stories"),ADD_NEW_PAGE_BEFORE:(0,d.__)("Add New Page Before","web-stories"),ADD_TO_COLOR_PRESETS:(0,d.__)("Add Color to “Saved Colors”","web-stories"),ADD_TO_TEXT_PRESETS:(0,d.__)("Add Style to “Saved Styles”","web-stories"),BRING_FORWARD:(0,d.__)("Bring Forward","web-stories"),BRING_TO_FRONT:(0,d.__)("Bring to Front","web-stories"),BROWSE_STOCK_IMAGES_AND_VIDEO:(0,d.__)("Browse Stock Images and Video","web-stories"),BROWSE_PAGE_TEMPLATES:(0,d.__)("Browse Page Templates","web-stories"),CLEAR_IMAGE_STYLES:(0,d.__)("Clear Image Styles","web-stories"),CLEAR_SHAPE_STYLES:(0,d.__)("Clear Shape Styles","web-stories"),CLEAR_VIDEO_STYLES:(0,d.__)("Clear Video Styles","web-stories"),CLEAR_STYLES:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,d._n)("Clear style","Clear styles",e,"web-stories")},CHOOSE_IMAGE_OR_VIDEO:(0,d.__)("Choose Image or Video","web-stories"),COPY_IMAGE_STYLES:(0,d.__)("Copy Image Styles","web-stories"),COPY_SHAPE_STYLES:(0,d.__)("Copy Shape Styles","web-stories"),COPY_VIDEO_STYLES:(0,d.__)("Copy Video Styles","web-stories"),COPY_STYLES:(0,d.__)("Copy Style","web-stories"),DELETE_PAGE:(0,d.__)("Delete Page","web-stories"),DETACH_IMAGE_FROM_BACKGROUND:(0,d.__)("Detach Image From Background","web-stories"),DETACH_VIDEO_FROM_BACKGROUND:(0,d.__)("Detach Video From Background","web-stories"),DUPLICATE_PAGE:(0,d.__)("Duplicate Page","web-stories"),DUPLICATE_ELEMENTS:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,d._n)("Duplicate Element","Duplicate Elements",e,"web-stories")},PASTE_IMAGE_STYLES:(0,d.__)("Paste Image Styles","web-stories"),PASTE_SHAPE_STYLES:(0,d.__)("Paste Shape Styles","web-stories"),PASTE_VIDEO_STYLES:(0,d.__)("Paste Video Styles","web-stories"),PASTE_STYLES:(0,d.__)("Paste Style","web-stories"),SCALE_AND_CROP_BACKGROUND_IMAGE:(0,d.__)("Scale & Crop Background Image","web-stories"),SCALE_AND_CROP_BACKGROUND_VIDEO:(0,d.__)("Scale & Crop Background Video","web-stories"),SCALE_AND_CROP_IMAGE:(0,d.__)("Scale & Crop Image","web-stories"),SCALE_AND_CROP_VIDEO:(0,d.__)("Scale & Crop Video","web-stories"),SEND_BACKWARD:(0,d.__)("Send Backward","web-stories"),SEND_TO_BACK:(0,d.__)("Send to Back","web-stories"),SET_AS_PAGE_BACKGROUND:(0,d.__)("Set as Page Background","web-stories"),TRIM_VIDEO:(0,d.__)("Trim Video","web-stories"),UPLOAD_IMAGE_OR_VIDEO:(0,d.__)("Upload Image or Video","web-stories")},lX=(0,p.default)(Ke.Text).attrs({forwardedAs:"kbd",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"constants__StyledKbd",componentId:"sc-m1qol5-0"})(["color:inherit;:not(:last-child){margin-right:4px;}"]),iX={SEND_BACKWARD:{display:c.createElement(tr.Shortcut,{shortcut:"mod down",component:lX}),title:(0,tr.createShortcutAriaLabel)("mod down")},SEND_TO_BACK:{display:c.createElement(tr.Shortcut,{shortcut:"mod shift down",component:lX}),title:(0,tr.createShortcutAriaLabel)("mod shift down")},BRING_FORWARD:{display:c.createElement(tr.Shortcut,{shortcut:"mod up",component:lX}),title:(0,tr.createShortcutAriaLabel)("mod up")},BRING_TO_FRONT:{display:c.createElement(tr.Shortcut,{shortcut:"mod shift up",component:lX}),title:(0,tr.createShortcutAriaLabel)("mod shift up")},DELETE:{display:c.createElement(tr.Shortcut,{shortcut:"delete",component:lX}),title:(0,tr.createShortcutAriaLabel)("delete")},COPY_STYLES:{display:c.createElement(tr.Shortcut,{shortcut:"alt mod O",component:lX}),title:(0,tr.createShortcutAriaLabel)("alt mod O")},PASTE_STYLES:{display:c.createElement(tr.Shortcut,{shortcut:"alt mod P",component:lX}),title:(0,tr.createShortcutAriaLabel)("alt mod P")}},sX=(0,p.default)(Jj).withConfig({displayName:"useLayerSelect__ReversedIcon",componentId:"sc-169lxcx-0"})(["transform:rotate(180deg);"]);const cX=function(e){let{menuItemProps:t,menuPosition:n,isMenuOpen:r}=e;const{isRTL:a}=Y(),[o,l]=(0,u.useState)(!1),i=xs((e=>{let{state:{nodesById:t}}=e;return t})),{currentPage:s,selectedElements:p,setSelectedElementsById:m}=Sa((e=>{let{state:{currentPage:t,selectedElements:n},actions:{setSelectedElementsById:r}}=e;return{currentPage:t,selectedElements:n,setSelectedElementsById:r}}));(0,u.useEffect)((()=>{r||l(!1)}),[r]);const{x:f,y:g}=n,h=(0,u.useCallback)((()=>{if(!s?.elements?.length||!Object.keys(i)?.length)return[];const e=new(zi().Vector)(f,g),t=s.elements.map((t=>{const{id:n,rotationAngle:r}=t,a=i[n];if(!a)return null;const{x:o,y:l,width:s,height:c}=a.getBoundingClientRect(),d=Ts(r,o,l,s,c);return zi().pointInPolygon(e,d)?t:null})).filter((e=>e));return t.reverse(),t}),[s,f,g,i]),E=(0,u.useMemo)((()=>{if(!r||0===p.length)return[];const e=h();return 1===e.length&&e[0].id===p[0].id?[]:e.map((e=>{const{id:n,isBackground:r,type:a}=e,{LayerContent:o}=(0,A.getDefinitionForType)(a);return{key:n,supportsIcon:!0,icon:p[0].id===n?c.createElement($H.default,null):null,label:r?c.createElement("span",null,(0,d.__)("Background","web-stories")):c.createElement(o,{element:e}),onClick:()=>{m({elementIds:[n]}),(0,L.trackEvent)("context_menu_action",{name:"layer_selected",element:a,isBackground:r})},...t}}))}),[h,r,t,m,p]);return E.length>0?{label:(0,d.__)("Select Layer","web-stories"),openSubMenu:()=>l(!0),closeSubMenu:()=>l(!1),isSubMenuOpen:o,subMenuItems:o?E:[],SuffixIcon:a?sX:Jj,...t}:null},dX=p.default.div.withConfig({displayName:"shared__SubMenuContainer",componentId:"sc-anftx6-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(e=>{let{position:t}=e;return t?.y??0}),(e=>{let{position:t}=e;return t?.x??0}));dX.propTypes={position:ma().shape({x:ma().number,y:ma().number})};const uX=210,pX=(0,d.__)("Select a layer","web-stories");ma().oneOfType([ma().func,ma().shape({current:ma().instanceOf(Element)})]).isRequired;function mX(){return mX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mX.apply(this,arguments)}const fX=function ForegroundMediaMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElement:r}=Sa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElement:t.selectedElements?.[0]}})),{handleCopyStyles:a,handlePasteStyles:o}=Gq(),{handleDuplicateSelectedElements:l,handleOpenScaleAndCrop:i,handleSetPageBackground:s}=jq(),{canElementMoveBackwards:d,canElementMoveForwards:p,handleSendBackward:m,handleSendToBack:f,handleBringForward:g,handleBringToFront:h}=Yq(),E=yi((e=>e.state.canTranscodeResource)),{hasTrimMode:b,toggleTrimMode:y}=dS((e=>{let{state:t,actions:n}=e;return{hasTrimMode:t.hasTrimMode,toggleTrimMode:n.toggleTrimMode}})),_=(0,u.useRef)(),{menuPosition:v,onCloseMenu:w}=oc(),T=cX({menuPosition:v,isMenuOpen:!0}),{closeSubMenu:S,isSubMenuOpen:C,subMenuItems:I,...A}=T||{},x="video"===r?.type,k=x?oX.SCALE_AND_CROP_VIDEO:oX.SCALE_AND_CROP_IMAGE,O=x?oX.COPY_VIDEO_STYLES:oX.COPY_IMAGE_STYLES,N=x?oX.PASTE_VIDEO_STYLES:oX.PASTE_IMAGE_STYLES,P=x&&b;return c.createElement(c.Fragment,null,T&&c.createElement(c.Fragment,null,c.createElement(aX,mX({closeSubMenu:S,parentMenuRef:t,subMenuRef:_,isSubMenuOpen:C},A)),c.createElement(dX,{ref:_,position:{x:(t.current.firstChild?.offsetWidth||uX)+2,y:0}},c.createElement(Zv.default,{onDismiss:w,isOpen:C,onCloseSubMenu:S,"aria-label":pX,isSubMenu:!0,parentMenuRef:t},I.map((e=>{let{key:t,...n}=e;return c.createElement(nX,mX({key:t},n))})))),c.createElement(pw.default,null)),c.createElement(ow.default,{onClick:l},oX.DUPLICATE_ELEMENTS(1)),c.createElement(pw.default,null),c.createElement(ow.default,{disabled:!d,onClick:m},oX.SEND_BACKWARD,c.createElement(Xq,null,iX.SEND_BACKWARD.display)),c.createElement(ow.default,{disabled:!d,onClick:f},oX.SEND_TO_BACK,c.createElement(Xq,null,iX.SEND_TO_BACK.display)),c.createElement(ow.default,{disabled:!p,onClick:g},oX.BRING_FORWARD,c.createElement(Xq,null,iX.BRING_FORWARD.display)),c.createElement(ow.default,{disabled:!p,onClick:h},oX.BRING_TO_FRONT,c.createElement(Xq,null,iX.BRING_TO_FRONT.display)),c.createElement(pw.default,null),c.createElement(ow.default,{onClick:s},oX.SET_AS_PAGE_BACKGROUND),c.createElement(ow.default,{onClick:i},k),P&&c.createElement(ow.default,{disabled:!E(r?.resource),onClick:y},oX.TRIM_VIDEO),c.createElement(ow.default,{onClick:a},O,c.createElement(Xq,null,iX.COPY_STYLES.display)),c.createElement(ow.default,{disabled:n!==r?.type,onClick:o},N,c.createElement(Xq,null,iX.PASTE_STYLES.display)))};const gX=function MultipleElementsMenu(){const{handleDuplicateSelectedElements:e}=jq();return c.createElement(ow.default,{onClick:e},oX.DUPLICATE_ELEMENTS(2))};function hX(){return hX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hX.apply(this,arguments)}const EX=function(e){let{parentMenuRef:t}=e;const{currentPageIndex:n,canDeletePage:r,selectedElement:a}=Sa((e=>{let{state:t}=e;return{currentPageIndex:t.currentPageIndex,canDeletePage:t.pages.length>1,selectedElement:t.selectedElements?.[0]}})),{handleOpenScaleAndCrop:o,handleRemovePageBackground:l}=jq(),{handleAddPageAtPosition:i,handleDeletePage:s,handleDuplicatePage:d}=Zq(),p=yi((e=>e.state.canTranscodeResource)),{hasTrimMode:m,toggleTrimMode:f}=dS((e=>{let{state:t,actions:n}=e;return{hasTrimMode:t.hasTrimMode,toggleTrimMode:n.toggleTrimMode}})),g=(0,u.useRef)(),{menuPosition:h,onCloseMenu:E}=oc(),b=cX({menuPosition:h,isMenuOpen:!0}),{closeSubMenu:y,isSubMenuOpen:_,subMenuItems:v,...w}=b||{},T=a?.isDefaultBackground,S="video"===a?.type,C=S?oX.DETACH_VIDEO_FROM_BACKGROUND:oX.DETACH_IMAGE_FROM_BACKGROUND,I=S?oX.SCALE_AND_CROP_BACKGROUND_VIDEO:oX.SCALE_AND_CROP_BACKGROUND_IMAGE,A=S&&m;return c.createElement(c.Fragment,null,b&&c.createElement(c.Fragment,null,c.createElement(aX,hX({closeSubMenu:y,parentMenuRef:t,subMenuRef:g,isSubMenuOpen:_},w)),c.createElement(dX,{ref:g,position:{x:(t.current.firstChild?.offsetWidth||uX)+2,y:0}},c.createElement(Zv.default,{onDismiss:E,isOpen:_,onCloseSubMenu:y,"aria-label":pX,isSubMenu:!0,parentMenuRef:t},v.map((e=>{let{key:t,...n}=e;return c.createElement(nX,hX({key:t},n))})))),c.createElement(pw.default,null)),c.createElement(ow.default,{disabled:T,onClick:l},C),c.createElement(ow.default,{disabled:T,onClick:o},I),c.createElement(pw.default,null),A&&c.createElement(c.Fragment,null,c.createElement(ow.default,{disabled:!p(a?.resource),onClick:f},C),c.createElement(pw.default,null)),c.createElement(ow.default,{onClick:()=>i(n+1)},oX.ADD_NEW_PAGE_AFTER),c.createElement(ow.default,{onClick:()=>i(n)},oX.ADD_NEW_PAGE_BEFORE),c.createElement(ow.default,{onClick:d},oX.DUPLICATE_PAGE),c.createElement(ow.default,{disabled:!r,onClick:s},oX.DELETE_PAGE))};function bX(){return bX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bX.apply(this,arguments)}const yX=function ShapeMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElementType:r}=Sa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElementType:t.selectedElements?.[0].type}})),{handleCopyStyles:a,handlePasteStyles:o}=Gq(),{handleDuplicateSelectedElements:l}=jq(),{canElementMoveBackwards:i,canElementMoveForwards:s,handleSendBackward:d,handleSendToBack:p,handleBringForward:m,handleBringToFront:f}=Yq(),{handleAddColorPreset:g}=Wq(),h=(0,u.useRef)(),{menuPosition:E,onCloseMenu:b}=oc(),y=cX({menuPosition:E,isMenuOpen:!0}),{closeSubMenu:_,isSubMenuOpen:v,subMenuItems:w,...T}=y||{};return c.createElement(c.Fragment,null,y&&c.createElement(c.Fragment,null,c.createElement(aX,bX({closeSubMenu:_,parentMenuRef:t,subMenuRef:h,isSubMenuOpen:v},T)),c.createElement(dX,{ref:h,position:{x:(t.current.firstChild?.offsetWidth||uX)+2,y:0}},c.createElement(Zv.default,{onDismiss:b,isOpen:v,onCloseSubMenu:_,"aria-label":pX,isSubMenu:!0,parentMenuRef:t},w.map((e=>{let{key:t,...n}=e;return c.createElement(nX,bX({key:t},n))})))),c.createElement(pw.default,null)),c.createElement(ow.default,{onClick:l},oX.DUPLICATE_ELEMENTS(1)),c.createElement(pw.default,null),c.createElement(ow.default,{disabled:!i,onClick:d},oX.SEND_BACKWARD,c.createElement(Xq,null,iX.SEND_BACKWARD.display)),c.createElement(ow.default,{disabled:!i,onClick:p},oX.SEND_TO_BACK,c.createElement(Xq,null,iX.SEND_TO_BACK.display)),c.createElement(ow.default,{disabled:!s,onClick:m},oX.BRING_FORWARD,c.createElement(Xq,null,iX.BRING_FORWARD.display)),c.createElement(ow.default,{disabled:!s,onClick:f},oX.BRING_TO_FRONT,c.createElement(Xq,null,iX.BRING_TO_FRONT.display)),c.createElement(pw.default,null),c.createElement(ow.default,{onClick:a},oX.COPY_SHAPE_STYLES,c.createElement(Xq,null,iX.COPY_STYLES.display)),c.createElement(ow.default,{disabled:n!==r,onClick:o},oX.PASTE_SHAPE_STYLES,c.createElement(Xq,null,iX.PASTE_STYLES.display)),c.createElement(ow.default,{onClick:g},oX.ADD_TO_COLOR_PRESETS))};function _X(){return _X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_X.apply(this,arguments)}const vX=function StickerMenu(e){let{parentMenuRef:t}=e;const{handleDuplicateSelectedElements:n}=jq(),{canElementMoveBackwards:r,canElementMoveForwards:a,handleSendBackward:o,handleSendToBack:l,handleBringForward:i,handleBringToFront:s}=Yq(),d=(0,u.useRef)(),{menuPosition:p,onCloseMenu:m}=oc(),f=cX({menuPosition:p,isMenuOpen:!0}),{closeSubMenu:g,isSubMenuOpen:h,subMenuItems:E,...b}=f||{};return c.createElement(c.Fragment,null,f&&c.createElement(c.Fragment,null,c.createElement(aX,_X({closeSubMenu:g,parentMenuRef:t,subMenuRef:d,isSubMenuOpen:h},b)),c.createElement(dX,{ref:d,position:{x:(t.current.firstChild?.offsetWidth||uX)+2,y:0}},c.createElement(Zv.default,{onDismiss:m,isOpen:h,onCloseSubMenu:g,"aria-label":pX,isSubMenu:!0,parentMenuRef:t},E.map((e=>{let{key:t,...n}=e;return c.createElement(nX,_X({key:t},n))})))),c.createElement(pw.default,null)),c.createElement(ow.default,{onClick:n},oX.DUPLICATE_ELEMENTS(1)),c.createElement(pw.default,null),c.createElement(ow.default,{disabled:!r,onClick:o},oX.SEND_BACKWARD,c.createElement(Xq,null,iX.SEND_BACKWARD.display)),c.createElement(ow.default,{disabled:!r,onClick:l},oX.SEND_TO_BACK,c.createElement(Xq,null,iX.SEND_TO_BACK.display)),c.createElement(ow.default,{disabled:!a,onClick:i},oX.BRING_FORWARD,c.createElement(Xq,null,iX.BRING_FORWARD.display)),c.createElement(ow.default,{disabled:!a,onClick:s},oX.BRING_TO_FRONT,c.createElement(Xq,null,iX.BRING_TO_FRONT.display)))};function wX(){return wX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wX.apply(this,arguments)}const TX=function TextMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElementType:r}=Sa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElementType:t.selectedElements?.[0].type}})),{handleCopyStyles:a,handlePasteStyles:o}=Gq(),{handleDuplicateSelectedElements:l}=jq(),{canElementMoveBackwards:i,canElementMoveForwards:s,handleSendBackward:d,handleSendToBack:p,handleBringForward:m,handleBringToFront:f}=Yq(),{handleAddColorPreset:g,handleAddTextPreset:h}=Wq(),E=(0,u.useRef)(),{menuPosition:b,onCloseMenu:y}=oc(),_=cX({menuPosition:b,isMenuOpen:!0}),{closeSubMenu:v,isSubMenuOpen:w,subMenuItems:T,...S}=_||{};return c.createElement(c.Fragment,null,_&&c.createElement(c.Fragment,null,c.createElement(aX,wX({closeSubMenu:v,parentMenuRef:t,subMenuRef:E,isSubMenuOpen:w},S)),c.createElement(dX,{ref:E,position:{x:(t.current.firstChild?.offsetWidth||uX)+2,y:0}},c.createElement(Zv.default,{onDismiss:y,isOpen:w,onCloseSubMenu:v,"aria-label":pX,isSubMenu:!0,parentMenuRef:t},T.map((e=>{let{key:t,...n}=e;return c.createElement(nX,wX({key:t},n))})))),c.createElement(pw.default,null)),c.createElement(ow.default,{onClick:l},oX.DUPLICATE_ELEMENTS(1)),c.createElement(pw.default,null),c.createElement(ow.default,{disabled:!i,onClick:d},oX.SEND_BACKWARD,c.createElement(Xq,null,iX.SEND_BACKWARD.display)),c.createElement(ow.default,{disabled:!i,onClick:p},oX.SEND_TO_BACK,c.createElement(Xq,null,iX.SEND_TO_BACK.display)),c.createElement(ow.default,{disabled:!s,onClick:m},oX.BRING_FORWARD,c.createElement(Xq,null,iX.BRING_FORWARD.display)),c.createElement(ow.default,{disabled:!s,onClick:f},oX.BRING_TO_FRONT,c.createElement(Xq,null,iX.BRING_TO_FRONT.display)),c.createElement(pw.default,null),c.createElement(ow.default,{onClick:a},oX.COPY_STYLES,c.createElement(Xq,null,iX.COPY_STYLES.display)),c.createElement(ow.default,{disabled:n!==r,onClick:o},oX.PASTE_STYLES,c.createElement(Xq,null,iX.PASTE_STYLES.display)),c.createElement(ow.default,{onClick:h},oX.ADD_TO_TEXT_PRESETS),c.createElement(ow.default,{onClick:g},oX.ADD_TO_COLOR_PRESETS))};async function SX(e){const t=await n(38803)(`./${e}.json`);return(0,er.migrate)(t.default,t.default.version).pages.reduce(((t,n)=>{const r={minX:1/0,maxX:0,minY:1/0,maxY:0},a=n.elements.filter((e=>!e.isBackground&&Boolean(function(e,t){return e.minX=Math.min(e.minX,t.x),e.maxX=Math.max(e.maxX,t.x+t.width),e.minY=Math.min(e.minY,t.y),e.maxY=Math.max(e.maxY,t.y+t.height),e}(r,e))));return[...t,{textSetFonts:n.fonts,id:n.id,textSetCategory:e,elements:a.map((e=>({...e,normalizedOffsetX:e.x-r.minX,normalizedOffsetY:e.y-r.minY,textSetWidth:r.maxX-r.minX,textSetHeight:r.maxY-r.minY})))}]}),[])}var CX=n(52829);const IX=new Set([mj,cj,dj,fj,pj,uj].map((e=>e.id)));const AX=function LibraryProvider(e){let{children:t}=e;const{showMedia3p:n,canViewDefaultTemplates:r}=Y(),{actions:{getMedia:a,getCustomPageTemplates:o}}=X(),l=Boolean(o),i=r||l,s=Boolean(a),[d,p]=(0,u.useState)({}),[m,f]=(0,u.useState)({}),[g,h]=(0,u.useState)(null),[E,b]=(0,u.useState)(1),[y,_]=(0,u.useState)(!1),v=(0,u.useCallback)((e=>h((t=>(0,CX.default)("function"==typeof e?e(t):e,"templateId")))),[]),w=(0,u.useCallback)((e=>{h((t=>t.map((t=>t.templateId===e.templateId?{...t,...e}:t))))}),[]),{showElementsTab:T}=(0,S.useFeatures)(),C=(0,u.useMemo)((()=>[s&&cj,n&&dj,uj,pj,T&&mj,i&&fj].filter(Boolean)),[n,T,s,i]),[I,A]=(0,u.useState)(C[0].id),x=as(),{insertTextSet:k,insertTextSetByOffset:O}=WF(y),{highlightedTab:N}=Fy((e=>{let{section:t}=e;return{highlightedTab:t}}));(0,u.useEffect)((()=>{IX.has(N)&&(A(N),(0,L.trackEvent)("quick_action_tab_change",{name:N}))}),[N]);const P=(0,u.useRef)(null),R=(0,u.useRef)(null),M=(0,u.useRef)(null),D=(0,u.useRef)(null),B=(0,u.useRef)(null),F=(0,u.useRef)(null),H=(0,u.useMemo)((()=>({[cj.id]:P,[dj.id]:R,[uj.id]:M,[pj.id]:D,[mj.id]:B,[fj.id]:F})),[]),U=(0,u.useMemo)((()=>({state:{areTextSetsLoading:m,tab:I,tabRefs:H,textSets:d,savedTemplates:g,nextTemplatesToFetch:E,shouldUseSmartColor:y},actions:{setTab:A,insertElement:x,insertTextSet:k,insertTextSetByOffset:O,setSavedTemplates:v,updateSavedTemplate:w,setNextTemplatesToFetch:b,setShouldUseSmartColor:_},data:{tabs:C}})),[m,I,H,d,g,x,k,O,C,E,b,y,v,w]);return(0,u.useEffect)((()=>{let e=!0;return I!==uj.id||Object.keys(d).length||async function(){const t=(0,L.getTimeTracker)("load_text_sets");f(!0);const n=await async function(){const e=await Promise.all(["cover","step","section_header","editorial","contact","table","list","quote"].map((async e=>[e,await SX(e)])));return Object.fromEntries(e)}();t(),e&&(p(n),f(!1))}(),()=>{e=!1}}),[I,d]),c.createElement(AH.Provider,{value:U},t)},MediaButton=()=>{const{onSelect:e}=kH();return c.createElement(Kh,{renderButton:e=>c.createElement(ow.default,{onClick:e},oX.UPLOAD_IMAGE_OR_VIDEO),onInsert:e})};const xX=function EmptyStateMenu(){const{setHighlights:e}=Fy((e=>{let{setHighlights:t}=e;return{setHighlights:t}}));return c.createElement(c.Fragment,null,c.createElement(ow.default,{onClick:()=>{e({highlight:Ej.MEDIA})}},oX.CHOOSE_IMAGE_OR_VIDEO),c.createElement(AX,null,c.createElement(MediaButton,null)),c.createElement(ow.default,{onClick:()=>{e({highlight:Ej.PAGE_TEMPLATES})}},oX.BROWSE_PAGE_TEMPLATES),c.createElement(ow.default,{onClick:()=>{e({highlight:Ej.MEDIA3P})}},oX.BROWSE_STOCK_IMAGES_AND_VIDEO))},kX=p.default.div.withConfig({displayName:"rightClickMenu__RightClickMenuContainer",componentId:"sc-11e09ag-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(e=>{let{position:t}=e;return t?.y??0}),(e=>{let{position:t}=e;return t?.x??0})),OX=()=>{const{isRTL:e}=Y(),{selectedElements:t,isThisEmptyStory:n}=Sa((e=>({selectedElements:e.state.selectedElements,isThisEmptyStory:BF(e.state.pages)}))),{isMenuOpen:r,menuPosition:a,onCloseMenu:o,maskRef:l}=oc(),i=(0,u.useRef)(),s=e=>{e.preventDefault(),e.stopPropagation()},m=(0,u.useMemo)((()=>{if(n)return xX;if(t.length>1)return gX;const e=t?.[0];if(e?.isDefaultBackground)return EX;switch(e?.type){case A.ELEMENT_TYPES.IMAGE:case A.ELEMENT_TYPES.VIDEO:case A.ELEMENT_TYPES.GIF:return e?.isBackground?EX:fX;case A.ELEMENT_TYPES.SHAPE:return yX;case A.ELEMENT_TYPES.TEXT:return TX;case A.ELEMENT_TYPES.STICKER:return vX;default:return EX}}),[t,n]);return(0,u.useEffect)((()=>{const e=i.current;return e.addEventListener("contextmenu",s),()=>{e.removeEventListener("contextmenu",s)}}),[i]),(0,u.createPortal)(c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(kX,{position:a,ref:i},c.createElement(bu,null,c.createElement(Zv.default,{"data-testid":"right-click-context-menu",isOpen:r,onDismiss:o,"aria-label":(0,d.__)("Context Menu for the selected element","web-stories"),maskRef:l,onMouseDown:e=>e.stopPropagation(),isRTL:e},c.createElement(m,{parentMenuRef:i}))))),document.body)};function NX(){return NX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NX.apply(this,arguments)}const PX=function LibraryPanes(){const{tab:e,tabs:t}=xH((e=>({tab:e.state.tab,tabs:e.data.tabs}))),{actions:{getMedia:n}}=X(),r=Boolean(n),a=Fy((e=>{let{...t}=e;return t})),o=a[cj.id],l=a[dj.id],i=a[uj.id];return t.map((t=>{let{id:n}=t;const a=n===e,s={key:n,isActive:a,"aria-labelledby":z_(n)};if(!a)return c.createElement(H_,NX({key:n},s));switch(n){case cj.id:return r?c.createElement(RX,NX({},s,{$_css:o?.showEffect&&HZ.FLASH})):null;case dj.id:return c.createElement(MX,NX({},s,{$_css2:l?.showEffect&&HZ.FLASH}));case pj.id:return c.createElement(ez,s);case uj.id:return c.createElement(LX,NX({},s,{$_css3:i?.showEffect&&HZ.FLASH}));case mj.id:return c.createElement(cG,s);case fj.id:return c.createElement(aj,s);default:return null}}))};var RX=(0,p.default)(EU).withConfig({displayName:"libraryPanes___StyledMediaPane",componentId:"sc-g5zq8j-0"})(["",""],(e=>e.$_css)),MX=(0,p.default)(RU).withConfig({displayName:"libraryPanes___StyledMedia3pPane",componentId:"sc-g5zq8j-1"})(["",""],(e=>e.$_css2)),LX=(0,p.default)(aG).withConfig({displayName:"libraryPanes___StyledTextPane",componentId:"sc-g5zq8j-2"})(["",""],(e=>e.$_css3));const DX=p.default.section.attrs({"aria-label":(0,d.__)("Library","web-stories"),"data-testid":"libraryLayout"}).withConfig({displayName:"libraryLayout__Layout",componentId:"sc-6ze1kl-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),BX=p.default.nav.attrs({"aria-label":(0,d.__)("Library tabs","web-stories")}).withConfig({displayName:"libraryLayout__TabsArea",componentId:"sc-6ze1kl-1"})(["padding:0 4px;"]),FX=p.default.div.withConfig({displayName:"libraryLayout__LibraryPaneContainer",componentId:"sc-6ze1kl-2"})(["height:100%;min-height:0;"]);const HX=function LibraryLayout(){const{setTab:e,tab:t,tabRefs:n,tabs:r}=xH((e=>({tab:e.state.tab,tabRefs:e.state.tabRefs,setTab:e.actions.setTab,tabs:e.data.tabs}))),{highlight:a}=Fy((e=>({highlight:{[cj.id]:e[Ej.MEDIA],[dj.id]:e[Ej.MEDIA3P],[uj.id]:e[Ej.TEXT_SET]}}))),o=(0,u.useCallback)((t=>{e(t),(0,L.trackEvent)("library_tab_change",{name:t})}),[e]);return c.createElement(DX,null,c.createElement(BX,null,c.createElement(f_,{label:(0,d.__)("Element Library Selection","web-stories"),tabs:r,tabRefs:n,tab:t,onTabChange:o,onTabRefUpdated:(e,t)=>{const n=a[t];e&&n?.focus&&n?.showEffect&&e.focus()},getTabId:z_,getAriaControlsId:U_,shortcut:"mod+option+1"})),c.createElement(FX,null,c.createElement(PX,null)))},UX="edit-story-library-upload-message";const zX=function LibraryUploadDropTarget(e){let{children:t}=e;const{uploadMedia:n}=yi((e=>{let{actions:{uploadMedia:t}}=e;return{uploadMedia:t}})),r=(0,u.useCallback)((e=>{n(e)}),[n]);return c.createElement($y,{onDrop:r,labelledBy:UX},t,c.createElement(l_,{id:UX,message:(0,d.__)("Upload to media library","web-stories")}))};const GX=function Library(){return c.createElement(AX,null,c.createElement(zX,null,c.createElement(HX,null)))};const jX=function(){const e=(0,u.useRef)([]),t=(0,u.useCallback)((t=>{const n=e.current;return n.push(t),()=>{n.splice(n.indexOf(t),1)}}),[]);return(0,u.useMemo)((()=>[e.current,t]),[t])};var YX=n(60811);const ZX=Object.values(YX.default);const WX=function(e){if(0===e.length)return[];if(1===e.length&&e[0].isBackground){const t=[];return!e[0].isDefaultBackground&&(t.push({type:YX.default.PAGE_BACKGROUND,Panel:rR}),t.push({type:YX.default.FILTER,Panel:lP}),t.push({type:YX.default.ANIMATION,Panel:xN})),"video"===e[0].type?(t.push({type:YX.default.VIDEO_OPTIONS,Panel:yL}),t.push({type:YX.default.CAPTIONS,Panel:KN}),t.push({type:YX.default.VIDEO_ACCESSIBILITY,Panel:uL})):["gif","image"].includes(e[0].type)?t.push({type:YX.default.IMAGE_ACCESSIBILITY,Panel:dP}):t.unshift({type:YX.default.PAGE_BACKGROUND,Panel:rR}),t.push({type:YX.default.PAGE_ATTACHMENT,Panel:GP}),t.push({type:YX.default.PAGE_BACKGROUND_AUDIO,Panel:OL}),t}return e.map((e=>{let{type:t}=e;return A.elementTypes[t].panels})).reduce(((e,t)=>{return n=t,e.filter((e=>n.includes(e)));var n}),ZX).map((e=>{switch(e){case YX.default.ANIMATION:return{type:e,Panel:xN};case YX.default.PAGE_BACKGROUND:return null;case YX.default.FILTER:return{type:e,Panel:lP};case YX.default.SIZE_POSITION:return{type:e,Panel:AR};case YX.default.LINK:return{type:e,Panel:DP};case YX.default.TEXT_STYLE:return{type:e,Panel:aL};case YX.default.SHAPE_STYLE:return{type:e,Panel:oR};case YX.default.BORDER:return{type:e,Panel:zN};case YX.default.VIDEO_OPTIONS:return{type:e,Panel:yL};case YX.default.CAPTIONS:return{type:e,Panel:KN};case YX.default.VIDEO_ACCESSIBILITY:return{type:e,Panel:uL};case YX.default.IMAGE_ACCESSIBILITY:return{type:e,Panel:dP};case YX.default.ELEMENT_ALIGNMENT:return{type:e,Panel:rP};default:throw new Error(`Unknown panel: ${e}`)}})).filter((e=>e))};const VX=function(){const{selectedElementIds:e,selectedElements:t,selectedElementAnimations:n,deleteSelectedElements:r,updateElementsById:a,updateAnimationState:o}=Sa((e=>{let{state:{selectedElementIds:t,selectedElements:n,selectedElementAnimations:r},actions:{deleteSelectedElements:a,updateElementsById:o,updateAnimationState:l}}=e;return{selectedElementIds:t,selectedElements:n,selectedElementAnimations:r,deleteSelectedElements:a,updateElementsById:o,updateAnimationState:l}})),l=(0,u.useMemo)((()=>WX(t)),[t]),[i,s]=jX(),c=(0,u.useCallback)((t=>{a({elementIds:e,properties:e=>yw(e,t,!0)})}),[e,a]),d=(0,u.useCallback)((e=>t=>(i.forEach((n=>n(c,e,t))),t)),[c,i]);return(0,u.useEffect)((()=>{const e={},t=s(((t,n,r)=>{c===t&&(e[n]=r)}));return()=>{t(),Object.values(e).forEach((e=>e()))}}),[c,s]),(0,u.useMemo)((()=>({panels:l,createSubmitHandlerForPanel:d,panelProperties:{onSetProperties:c,deleteSelectedElements:r,selectedElements:t,selectedElementAnimations:n,updateAnimationState:o}})),[l,d,c,r,t,n,o])};function $X(){return $X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$X.apply(this,arguments)}const qX=p.default.form.withConfig({displayName:"designPanel__Form",componentId:"sc-178nkfr-0"})(["padding:0;margin:0;"]),XX=p.default.input.attrs({type:"submit"}).withConfig({displayName:"designPanel__AutoSubmitButton",componentId:"sc-178nkfr-1"})(["display:none;"]);const KX=function(e){let{panelType:t,selectedElements:n,onSetProperties:r,registerSubmitHandler:a,...o}=e;const l=(0,u.useRef)(null),[i,s]=jX(),d=(0,u.useMemo)((()=>({isMultiple:n.length>1,registerPresubmitHandler:s})),[n,s]),[p,m]=(0,u.useState)({}),f=(0,u.useMemo)((()=>n.map((e=>({...e,...p[e.id]})))),[n,p]),g=(0,u.useCallback)((e=>{if(0===Object.keys(e).length)return;const t=e;i.length>0&&n.forEach((n=>{const r=yw(n,e[n.id],!0);let a=r;i.forEach((e=>{const t=e({...n,...a},r,n);a={...a,...t}})),t[n.id]=a})),r((e=>t[e.id]))}),[i,n,r]),h=a((0,u.useCallback)((e=>{e&&(e.preventDefault(),m({})),g(p)}),[g,p])),E=(0,u.useCallback)((()=>{setTimeout((()=>{const e=l.current;e&&e.dispatchEvent(new window.Event("submit",{cancelable:!0,bubbles:!0}))}))}),[]),b=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m((t=>{const r={};return n.forEach((n=>{const a={...n,...t[n.id]},o=yw(a,e,!1);r[n.id]={...t[n.id],...o}})),r})),t&&E()}),[n,E]),y=(0,u.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b((r=>{const a=r[e]||n;return{[e]:t?{...a,...yw(a,t,!1)}:null}}),r)}),[b]),_=t;return c.createElement(qX,{ref:l,onSubmit:h},c.createElement(XX,null),c.createElement(TE.Provider,{value:d},c.createElement(_,$X({selectedElements:f,submittedSelectedElements:n,pushUpdate:b,pushUpdateForObject:y,submit:E},o))))};function QX(){return QX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QX.apply(this,arguments)}const JX=p.default.div.withConfig({displayName:"designPanels__NoSelection",componentId:"sc-rotabe-0"})(["height:100%;display:flex;justify-content:center;align-items:center;"]),eK=(0,p.default)(Ke.Text).withConfig({displayName:"designPanels__Note",componentId:"sc-rotabe-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const tK=function DesignPanels(){const{panels:e,createSubmitHandlerForPanel:t,panelProperties:n}=VX();return e?.length?e.map((e=>{let{Panel:r,type:a}=e;return c.createElement(KX,QX({key:a,panelType:r,registerSubmitHandler:t(a)},n))})):c.createElement(JX,null,c.createElement(eK,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},(0,d.__)("Nothing selected","web-stories")))},nK=p.default.div.withConfig({displayName:"designInspector__Wrapper",componentId:"sc-bbp9yb-0"})(["height:100%;overflow:auto;"]);var rK=(0,p.default)(nK).withConfig({displayName:"designInspector___StyledWrapper",componentId:"sc-bbp9yb-1"})(["",""],(e=>e.$_css));const aK=function DesignInspector(){const e=Sa((e=>{let{actions:t}=e;return t.updateAnimationState})),{highlight:t,resetHighlight:n}=Fy((e=>({highlight:e[Ej.STYLE_PANE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),r=(0,u.useCallback)((()=>e({animationState:kn.STORY_ANIMATION_STATE.RESET})),[e]);return c.createElement(rK,{onAnimationEnd:n,onFocus:r,$_css:t?.showEffect&&HZ.FLASH},c.createElement(tK,null))},oK=new Set([Hy,zy,Uy]);const lK=function SidebarProvider(e){let{sidebarTabs:t,children:n}=e;const r=(0,S.useFeature)("enableUpdatedPublishStoryModal"),{actions:{getAuthors:a}}=X(),{selectedElementIds:o,currentPage:l}=Sa((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds,currentPage:t.currentPage}})),{tab:i,highlight:s}=Fy((e=>({tab:e.tab,highlight:e[Ej.STYLE_PANE]})));(0,u.useEffect)((()=>{oK.has(i)&&(f(i),(0,L.trackEvent)("quick_action_tab_change",{name:i}))}),[i]);const p=(0,u.useRef)(null),[m,f]=(0,u.useState)(Hy),[g,h]=(0,u.useState)([]),[E,b]=(0,u.useState)(null),y=(0,u.useRef)(),_=(0,u.useRef)(m),v=(0,u.useRef)(null),w=(0,u.useRef)(null),T=(0,u.useRef)(null),C=(0,u.useMemo)((()=>({[Hy]:v,[Uy]:w,[zy]:T})),[]),[I,A]=(0,u.useState)(!1),x=(0,u.useCallback)((e=>{y.current=e}),[]);(0,u.useResizeEffect)(y,(e=>{let{height:t}=e;return b(t)}),[]),(0,u.useEffect)((()=>{o.length>0&&_.current===zy&&f(Uy)}),[o]),(0,u.useEffect)((()=>{_.current===zy&&f(Uy)}),[l]),(0,u.useEffect)((()=>{const e=w.current;e&&s?.focus&&s?.showEffect&&e.focus()}),[s]);const k=(0,u.useCallback)((()=>{I||0!==g.length||(A(!0),a().then((e=>{const t=e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}}));h(t)})).finally((()=>{A(!1)})))}),[I,g.length,a]),O={state:{tab:m,tabRefs:C,users:g,sidebarContentHeight:E,isUsersLoading:I},refs:{sidebar:p},actions:{setTab:f,loadUsers:k,setSidebarContentNode:x},data:{tabs:[{id:Hy,title:(0,d.__)("Insert","web-stories"),Pane:GX},{id:Uy,title:(0,d.__)("Style","web-stories"),Pane:aK}]}};return t?.document&&O.data.tabs.push({id:zy,...t.document}),t?.publishModal&&r&&(O.data.modalSidebarTab={id:"publish_modal_document",...t.publishModal}),c.createElement(Bg.Provider,{value:O},n)},iK=(0,I.withOverlay)(p.default.section.attrs({"aria-label":(0,d.__)("Web Stories Editor","web-stories")}).withConfig({displayName:"layout__Editor",componentId:"sc-9gpyr-0"})([""," background-color:",";position:relative;max-height:100vh;height:100%;width:100%;display:grid;grid:'sidebar   canv          ' 1fr 'sidebar   supplementary ' auto / ","px minmax(","px,1fr);"],Pu.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.bg.primary}),360,570));const sK=function(e){let{header:t,footer:n={},sidebarTabs:r,children:a}=e;const o=(0,hr.useSnackbar)((e=>{let{removeSnack:t,currentSnacks:n,placement:r}=e;return{onRemove:t,notifications:n,placement:r}}));return c.createElement(c.Fragment,null,c.createElement(Ji,null,c.createElement(ChecklistCheckpointProvider,null,c.createElement(bj,null,c.createElement(lK,{sidebarTabs:r},c.createElement(iK,{zIndex:3},c.createElement(As,null,c.createElement(Vq,null,c.createElement(Lq,{header:t,footer:n}),c.createElement(OX,null))),a))))),c.createElement(Iq.Snackbar.Container,o))};var cK=n(43246),dK=n(89511);window.wp.domReady;const uK=function PostPublishDialog(){const{embedPostLink:e,link:t,isFreshlyPublished:n}=Sa((e=>{let{state:{story:{embedPostLink:t,link:n},meta:{isFreshlyPublished:r}}}=e;return{embedPostLink:t,link:n,isFreshlyPublished:r}})),[r,a]=(0,u.useState)(!1);(0,u.useEffect)((()=>a(Boolean(n))),[n]);const o=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"add_story_to_new_post")}),[]),l=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"view_story")}),[]),i=(0,u.useCallback)((()=>a(!1)),[]),s=e?(0,d.__)("Add to new post","web-stories"):"";return c.createElement(y,{isOpen:r,onClose:i,title:(0,d.__)("Story published.","web-stories"),secondaryText:(0,d.__)("Dismiss","web-stories"),primaryText:s,onPrimary:o,primaryRest:{href:e}},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:t,target:"_blank",rel:"noopener noreferrer",onClick:l})}},(0,d.__)("Your story has been successfully published! <a>View story</a>.","web-stories"))),e&&c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},
/* translators: 'it' refers to a web story. */
(0,d.__)("Would you like to include it on a new post?","web-stories")))},pK=(0,u.createContext)({state:{},actions:{}});const mK=function(e){return(0,u.useContextSelector)(pK,e??u.identity)},fK=p.default.nav.withConfig({displayName:"buttons__ButtonList",componentId:"sc-1h0vadn-0"})(["display:flex;justify-content:flex-end;padding:1em;height:100%;"]),gK=p.default.div.withConfig({displayName:"buttons__List",componentId:"sc-1h0vadn-1"})(["display:flex;align-items:center;gap:8px;"]),hK=p.default.div.withConfig({displayName:"buttons__Spinner",componentId:"sc-1h0vadn-2"})(["position:absolute;top:0;"]),EK=p.default.div.withConfig({displayName:"buttons__IconWithSpinner",componentId:"sc-1h0vadn-3"})(["position:relative;"]);function Loading(){return c.createElement(hK,null,c.createElement(Jp.default,{size:32}))}function DraftButtons(e){let{forceIsSaving:t,hasUpdates:n}=e;return c.createElement(c.Fragment,null,c.createElement(C$,{hasUpdates:n,forceIsSaving:t}),c.createElement(T$,{forceIsSaving:t}))}function PendingButtons(e){let{forceIsSaving:t,hasUpdates:n,canPublish:r}=e;return c.createElement(c.Fragment,null,c.createElement(S$,{forceIsSaving:t}),r&&c.createElement(C$,{hasUpdates:n,forceIsSaving:t}),c.createElement(T$,{forceIsSaving:t}))}function PublishedButtons(e){let{forceIsSaving:t,hasUpdates:n}=e;return c.createElement(c.Fragment,null,c.createElement(S$,{forceIsSaving:t}),c.createElement(C$,{hasUpdates:n,forceIsSaving:t}))}const bK=function(){const{status:e,canPublish:t,isSaving:n}=Sa((e=>{let{state:{story:{status:t},meta:{isSaving:n},capabilities:r}}=e;return{status:t,isSaving:n,canPublish:Boolean(r?.publish)}})),r="pending"===e,a="draft"===e||!e,o=a||r,{hasMetaBoxes:l,isSavingMetaBoxes:i}=mK((e=>{let{state:{hasMetaBoxes:t,isSavingMetaBoxes:n}}=e;return{hasMetaBoxes:t,isSavingMetaBoxes:n}}));return c.createElement(fK,null,c.createElement(gK,null,c.createElement(Undo,null),c.createElement(Redo,null),c.createElement(EK,null,c.createElement(Cd,{forceIsSaving:i}),n&&c.createElement(Loading,null)),a&&c.createElement(DraftButtons,{forceIsSaving:i,hasUpdates:l}),r&&c.createElement(PendingButtons,{forceIsSaving:i,hasUpdates:l,canPublish:t}),!o&&c.createElement(PublishedButtons,{forceIsSaving:i,hasUpdates:l})))},yK=p.default.header.attrs({role:"group","aria-label":(0,d.__)("Story canvas header","web-stories")}).withConfig({displayName:"header__Background",componentId:"sc-1i9ezrs-0"})(["display:flex;align-items:center;justify-content:space-between;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),_K=p.default.div.withConfig({displayName:"header__Head",componentId:"sc-1i9ezrs-1"})(["flex:1 1 auto;padding:1em;"]),vK=p.default.div.withConfig({displayName:"header__ButtonCell",componentId:"sc-1i9ezrs-2"})(["grid-area:buttons;"]);const wK=(0,u.memo)((function HeaderLayout(){return c.createElement(yK,null,c.createElement(_K,null,c.createElement(A$,null)),c.createElement(vK,null,c.createElement(bK,null)))})),TK=p.default.div.withConfig({displayName:"menuItem__Box",componentId:"sc-1wx1c0e-0"})(["width:32px;height:32px;display:flex;justify-content:center;align-items:center;"]),SK=p.default.div.withConfig({displayName:"menuItem__Item",componentId:"sc-1wx1c0e-1"})([""]);const CK=function(){const{metaBoxesVisible:e,toggleMetaBoxesVisible:t,hasMetaBoxes:n}=mK((e=>{let{state:t,actions:n}=e;return{hasMetaBoxes:t.hasMetaBoxes,metaBoxesVisible:t.metaBoxesVisible,toggleMetaBoxesVisible:n.toggleMetaBoxesVisible}})),r=(0,u.useCallback)((()=>{t(),(0,L.trackEvent)("meta_boxes_toggled",{status:e?"visible":"hidden"})}),[e,t]);return n?c.createElement(SK,null,c.createElement(TK,null,c.createElement(Tooltip,{title:(0,d.__)("Third-Party Meta Boxes","web-stories"),placement:Ed.PLACEMENT.TOP,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:r,"aria-label":(0,d.__)("Third-Party Meta Boxes","web-stories")},c.createElement(OY,null))))):null},IK=p.default.div.withConfig({displayName:"metaBoxesArea__Wrapper",componentId:"sc-nk2qm0-0"})(["position:relative;&__container,.inside{box-sizing:content-box;}#poststuff{margin:0 auto;padding-top:0;min-width:auto;}#poststuff h3.hndle,#poststuff .stuffbox > h3,#poststuff h2.hndle{color:",";font-size:14px;font-weight:500;outline:none;padding:15px;width:100%;}.postbox{border:0;color:inherit;margin-bottom:0;}.postbox > .hndle,.postbox .postbox-header{background:",";color:",";border-bottom:1px solid ",";}.postbox .handlediv{height:44px;width:44px;}.postbox .handlediv .toggle-indicator{color:",";}.postbox .handle-order-higher,.postbox .handle-order-lower{color:",";&[aria-disabled='true']{color:",";}}.is-hidden{display:none;}"],(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.white,.04)}),(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,Xe.rgba)(t.colors.standard.white,.3)})),AK=p.default.div.withConfig({displayName:"metaBoxesArea__Spinner",componentId:"sc-nk2qm0-1"})(["position:absolute;top:10px;right:100px;z-index:1;"]);const xK=function MetaBoxesArea(e){let{location:t}=e;const n=(0,u.useRef)(),r=(0,u.useRef)(),{isSaving:a}=Sa((e=>{let{state:t}=e;return{isSaving:t.meta.isSaving}}));return(0,u.useEffect)((()=>{const e=document.querySelector(`.metabox-location-${t}`);return n.current=e,n.current&&r.current&&r.current.appendChild(n.current),()=>{document.querySelector("#metaboxes").appendChild(e)}})),c.createElement(IK,{className:`web-stories-meta-boxes-area-${t}`},a&&c.createElement(AK,null,c.createElement(Jp.default,{size:30})),c.createElement("div",{ref:r}))},kK=window.wp.apiFetch;const OK=function(e){let{story:t,isSavingStory:n,isAutoSavingStory:r}=e;const{hasMetaBoxes:a,locations:o,isSavingMetaBoxes:l,setIsSavingMetaBoxes:i}=mK((e=>{let{state:t,actions:n}=e;return{hasMetaBoxes:t.hasMetaBoxes,locations:t.locations,isSavingMetaBoxes:t.isSavingMetaBoxes,setIsSavingMetaBoxes:n.setIsSavingMetaBoxes}})),{api:{metaBoxes:s}}=Y(),c=(0,u.usePrevious)(n),d=(0,u.usePrevious)(r);(0,u.useEffect)((()=>{!a||n||r||l||!c||d||async function(){window.tinyMCE?.triggerSave();const e=document.querySelector(".metabox-base-form"),n=[new window.FormData(e||void 0),...o.map((e=>new window.FormData(document.querySelector(`.metabox-location-${e}`)||void 0)))].reduce(((e,t)=>{for(const[n,r]of t)e.append(n,r);return e}),new window.FormData);i(!0),await function(e,t,n){return[!!e.comment_status&&["comment_status",e.comment_status],!!e.ping_status&&["ping_status",e.ping_status],!!e.sticky&&["sticky",e.sticky],!!e.author&&["post_author",e.author.id]].filter(Boolean).forEach((e=>{let[n,r]=e;return t.append(n,r)})),kK({url:n,method:"POST",body:t,parse:!1})}(t,n,s),i(!1)}()}),[a,t,n,c,r,d,l,i,o,s])},NK=p.default.div.withConfig({displayName:"metaBoxes__Wrapper",componentId:"sc-1gguxet-0"})([""]),PK=p.default.div.withConfig({displayName:"metaBoxes__Area",componentId:"sc-1gguxet-1"})(["grid-area:",";position:relative;overflow:hidden;z-index:2;"],(e=>{let{area:t}=e;return t})),RK=(0,p.default)(PK).attrs({area:"supplementary"}).withConfig({displayName:"metaBoxes__MetaBoxesContainer",componentId:"sc-1gguxet-2"})(["overflow-y:auto;"]);const MK=function MetaBoxes(){const{metaBoxesVisible:e,hasMetaBoxes:t}=mK((e=>{let{state:t}=e;return{hasMetaBoxes:t.hasMetaBoxes,metaBoxesVisible:t.metaBoxesVisible}})),[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(null),{postType:o,metaBoxes:l={}}=Y(),{pages:i,isSavingStory:s,isAutoSavingStory:d,story:p}=Sa((e=>{let{state:{meta:{isSavingStory:t,isAutoSavingStory:n},story:r,pages:a}}=e;return{pages:a,isSavingStory:t,isAutoSavingStory:n,story:r}}));if(OK({isSavingStory:s,isAutoSavingStory:d,story:p}),(0,u.useEffect)((()=>{let e;return!n&&t&&i.length>0&&(e=setTimeout((()=>{a.current=document.getElementById("primary-menu-items"),r(null!==a.current)}))),()=>{clearTimeout(e)}}),[i,t,n]),(0,u.useEffect)((()=>{const e=setTimeout((()=>{window.postboxes?.page!==o&&window.postboxes?.add_postbox_toggles(o)}));return()=>{clearTimeout(e)}}),[o]),!t)return null;const m=Object.keys(l);return c.createElement(RK,null,e&&c.createElement(NK,null,m.map((e=>c.createElement(xK,{key:e,location:e})))),n&&(0,u.createPortal)(c.createElement(CK,null),a.current))};const LK=function MetaBoxesProvider(e){let{children:t}=e;const{metaBoxes:n={}}=Y(),[r,a]=(0,u.useState)(!1),[o,l]=(0,u.useState)(!1),i=(0,u.useCallback)((()=>a((e=>!e))),[a]),s=Object.keys(n).some((e=>Boolean(n[e]?.length))),d=Object.keys(n),p=(0,u.useMemo)((()=>({state:{isSavingMetaBoxes:o,metaBoxesVisible:r,metaBoxes:n,locations:d,hasMetaBoxes:s},actions:{toggleMetaBoxesVisible:i,setIsSavingMetaBoxes:l}})),[o,r,l,i,n,d,s]);return c.createElement(pK.Provider,{value:p},t)};function DK(e){return kK({path:e})}function BK(e,t){return kK({path:e,data:{id:t},method:"POST"})}var FK=n(4504);const HK={embedWebStories:{title:(0,d.__)("Embed Web Stories","web-stories"),figureSrcImg:"images/help-center/story_embed_module_1",figureAlt:(0,d.__)("Graphic showing embed functionality","web-stories"),description:[(0,d.__)("When you create a new post in WordPress, you can embed any of your Stories. <a>Learn more</a>","web-stories")],href:(0,d.__)("https://wp.stories.google/docs/","web-stories")}},UK="public",zK="private",GK="protected",jK={PUBLISH:"publish",FUTURE:"future",PRIVATE:"private",DRAFT:"draft"},YK="Y-m-d\\TH:i:s",ZK=()=>n.e(2392).then(n.bind(n,73));const WK=function PublishTime(){const{date:e,modified:t,status:n,updateStory:r}=Sa((e=>{let{state:{story:{date:t,modified:n,status:r}},actions:{updateStory:a}}=e;return{date:t,modified:n,status:r,updateStory:a}})),a=Ld(),{isRTL:o}=Y(),l=(0,d.__)("d/m/Y","web-stories"),[i,s]=(0,u.useState)(!1),p=(0,u.useRef)(),m=(0,u.useRef)();(0,tr.useKeyDownEffect)(m,{key:["space","enter"]},(()=>{s((e=>!e))}),[]),(0,u.useFocusOut)(p,(()=>s(!1)),[i]);const f=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&i&&s(!1);const n=e?(0,Nd.default)(new Date(e),YK):e;r({properties:{date:n}})}),[i,r]),g=["draft","pending","auto-draft"].includes(n)&&(e===t||null===e),h=Date.now(),E=g?(0,d.__)("Immediately","web-stories"):(0,Nd.default)(e||h,l)+" "+Md(e||h);return c.createElement(c.Fragment,null,c.createElement(Wh,null,c.createElement(FK.default,{dropDownLabel:(0,d.__)("Publish","web-stories"),"aria-pressed":i,"aria-haspopup":!0,"aria-expanded":i,"aria-label":(0,d.__)("Story publish time","web-stories"),onSelectClick:e=>{e.preventDefault(),i||s(!0)},ref:m,activeItemLabel:E,selectButtonStylesOverride:Mu,onPointerEnter:()=>ZK(),onFocus:()=>ZK()})),c.createElement(Zp.Popup,{topOffset:32,anchor:m,isOpen:i,isRTL:o,zIndex:10,renderContents:t=>{let{propagateDimensionChange:r}=t;return c.createElement(VE,{value:g?h:e,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(e,t)},onViewChange:()=>r(),is12Hour:a,forwardedRef:p,onClose:()=>s(!1),canReset:["draft","pending","auto-draft"].includes(n)&&!g})}}))};function VK(){return VK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VK.apply(this,arguments)}const $K=function Author(){const{actions:{getAuthors:e}}=X(),{state:{users:t,isUsersLoading:n},actions:{loadUsers:r}}=Fg(),{isSaving:a,author:o,updateStory:l}=Sa((e=>{let{state:{meta:{isSaving:t},story:{author:n={}}},actions:{updateStory:r}}=e;return{isSaving:t,author:n,updateStory:r}})),[i,s]=(0,u.useState)(null),[p,m]=(0,u.useState)(null);(0,u.useEffect)((()=>{r()}),[r]);const f=(0,u.useCallback)((t=>e(t).then((e=>{const t=e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}}));s(t)}))),[e]);(0,u.useEffect)((()=>{if(t?.length){const e=t.find((e=>{let{id:t}=e;return o.id===t}));m(e?t:[o,...t])}}),[o,t]);const g=n||!p,h={hasSearch:!0,lightMode:!0,onChange:(0,u.useCallback)((e=>{let{id:t,name:n}=e;l({properties:{author:{id:t,name:n}}})}),[l]),getOptionsByQuery:f,selectedId:o.id,dropDownLabel:(0,d.__)("Author","web-stories"),placeholder:g?(0,d.__)("Loading…","web-stories"):"",disabled:!!g||a,primaryOptions:g?[]:p,zIndex:10};return c.createElement(Wh,null,c.createElement(LT.default.DropDown,VK({options:i,searchResultsLabel:(0,d.__)("Search results","web-stories"),dropdownButtonLabel:(0,d.__)("Author","web-stories"),title:(0,d.__)("Available authors","web-stories")},h)))};function qK(){return qK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qK.apply(this,arguments)}const XK=p.default.div.withConfig({displayName:"publish__LabelWrapper",componentId:"sc-c431y8-0"})(["height:40px;"]),KK=(0,p.default)(Ke.Text).attrs({as:"label",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"publish__Label",componentId:"sc-c431y8-1"})(["color:",";font-size:14px;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),QK=p.default.div.withConfig({displayName:"publish__MediaWrapper",componentId:"sc-c431y8-2"})(["display:flex;align-items:center;margin-bottom:20px;margin-top:4px;height:96px;"]),JK=(0,p.default)(Gh).withConfig({displayName:"publish__StyledMedia",componentId:"sc-c431y8-3"})(["width:","px;height:","px;"],(e=>{let{$width:t}=e;return t}),(e=>{let{$height:t}=e;return t})),eQ=(0,p.default)(Wh).attrs({spaceBetween:!1}).withConfig({displayName:"publish__HighlightRow",componentId:"sc-c431y8-4"})(["position:relative;&::after{content:'';position:absolute;top:-10px;bottom:-10px;left:-20px;right:-10px;"," pointer-events:none;}"],(e=>{let{isHighlighted:t}=e;return t&&HZ.FLASH})),tQ=p.default.div.withConfig({displayName:"publish__MediaInputWrapper",componentId:"sc-c431y8-5"})(["height:160px;"]),nQ=p.default.div.withConfig({displayName:"publish__DropdownWrapper",componentId:"sc-c431y8-6"})(["position:relative;width:138px;margin-left:30px;margin-top:3px;"]),rQ=p.default.img.withConfig({displayName:"publish__LogoImg",componentId:"sc-c431y8-7"})(["object-fit:cover;width:100%;height:100%;max-width:96px;max-height:96px;"]);const aQ=function PublishPanel(e){let{nameOverride:t}=e;const{state:{users:n}}=Fg(),{api:{publisherLogos:r}}=Y(),{getPublisherLogos:a,addPublisherLogo:o}=i,{allowedMimeTypes:{image:l},dashboardSettingsLink:s,capabilities:{hasUploadMediaAction:p,canManageSettings:m},MediaUpload:f}=Y(),g=(0,u.useMemo)((()=>l.map((e=>Mt(e))).flat()),[l]),[h,E]=(0,u.useState)([]);(0,u.useEffect)((()=>{a(r).then(E)}),[a,r]);const{highlightPoster:b,highlightLogo:y,resetHighlight:_}=Fy((e=>({highlightPoster:e[Ej.POSTER],highlightLogo:e[Ej.PUBLISHER_LOGO],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{featuredMedia:v,publisherLogo:w,updateStory:T,capabilities:S}=Sa((e=>{let{state:{story:{featuredMedia:t={id:0,url:"",height:0,width:0},publisherLogo:n={id:0,url:"",height:0,width:0}},capabilities:r},actions:{updateStory:a}}=e;return{featuredMedia:t,publisherLogo:n,updateStory:a,capabilities:r}})),C=(0,u.useCallback)((e=>T({properties:{featuredMedia:{id:e.id,url:e.src,height:e.height,width:e.width}}})),[T]),I=e=>{let{id:t,src:n}=e;const a={id:t,url:n};o(r,t),E((e=>[...e,a])),A(a)},A=e=>{T({properties:{publisherLogo:{id:e.id,url:e.url}}})},x=e=>{let t=(0,d.__)("No file types are currently supported.","web-stories");return g.length&&(t=(0,qe.default)(e,(0,Ot.default)(g))),t},k=x(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as publisher logo.","web-stories")),O=x(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories")),N=(0,u.forwardRef)(((e,t)=>{let{option:n,...r}=e;return n.props?n:c.createElement(LT.default.Option,qK({value:n.id,ref:t},r),c.createElement(rQ,{src:n.url,alt:"",decoding:"async",crossOrigin:"anonymous"}))})),P=e=>c.createElement(LT.default.Option,{onClick:e,"aria-label":(0,d.__)("Add new","web-stories")},c.createElement(Ky,{height:32,width:32}),c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Add new","web-stories"))),R=[...h];if(p){const e={width:96,height:96};R.unshift(c.createElement(f,{onSelect:I,onSelectErrorMessage:k,type:l,render:P,title:(0,d.__)("Select as publisher logo","web-stories"),buttonInsertText:(0,d.__)("Select as publisher logo","web-stories"),cropParams:e}))}return c.createElement(uk,{name:t||"publishing",collapsedByDefault:!1,isPersistable:!(y||b)},c.createElement(Mk,null,(0,d.__)("Publishing","web-stories")),c.createElement(Fk,null,S?.publish&&c.createElement(WK,null),S?.["assign-author"]&&n&&c.createElement($K,null),c.createElement(eQ,{isHighlighted:b?.showEffect||y?.showEffect,onAnimationEnd:()=>_()},c.createElement(tQ,null,c.createElement(QK,null,c.createElement(JK,{ref:e=>{e&&b?.focus&&b?.showEffect&&e.focus()},$width:72,$height:96,cropParams:{width:640,height:853},value:v?.url,onChange:C,title:(0,d.__)("Select as poster image","web-stories"),buttonInsertText:(0,d.__)("Select as poster image","web-stories"),type:l,ariaLabel:(0,d.__)("Poster image","web-stories"),onChangeErrorText:O,imgProps:v,canUpload:p})),c.createElement(XK,null,c.createElement(KK,null,(0,d.__)("Poster image","web-stories")),c.createElement(XE,null))),c.createElement(nQ,null,c.createElement(QK,null,c.createElement(LT.default.DropDown,{options:R,primaryOptions:R,onChange:A,title:(0,d.__)("Available publisher logos","web-stories"),dropdownButtonLabel:(0,d.__)("Publisher Logo","web-stories"),renderer:N,activeItemRenderer:()=>{const e=h.length?(0,d.__)("Select logo","web-stories"):(0,d.__)("No logo","web-stories");return w.id?c.createElement(rQ,{src:w.url,alt:""}):c.createElement(Ke.Text,{as:"span",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},e)},selectedId:w.id,zIndex:10,disabled:!R.length,ref:e=>{e&&y?.focus&&y?.showEffect&&e.focus()}})),c.createElement(XK,null,c.createElement(KK,null,(0,d.__)("Publisher Logo","web-stories")),c.createElement(Wh,null,c.createElement(XE,null),m&&c.createElement(Ud.Link,{rel:"noopener noreferrer",target:"_blank",href:s,size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Manage","web-stories"))))))))};function oQ(){return oQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oQ.apply(this,arguments)}const lQ=p.default.li.withConfig({displayName:"status__StyledListItem",componentId:"sc-1pq370j-0"})(["position:relative;padding:6px 8px;margin:4px 8px;align-items:center;border-radius:4px;cursor:pointer;"," &:hover{background-color:",";}"],Ru.focusableOutlineCSS,g.theme.colors.border.defaultNormal),iQ=(0,p.default)(Text).attrs({as:"span"}).withConfig({displayName:"status__LabelText",componentId:"sc-1pq370j-1"})(["font-size:14px;color:",";"],g.theme.colors.fg.primary),sQ=(0,p.default)(Text).attrs({as:"span"}).withConfig({displayName:"status__HelperText",componentId:"sc-1pq370j-2"})(["color:",";"],g.theme.colors.fg.tertiary),cQ=(0,u.forwardRef)(((e,t)=>{let{option:n,isSelected:r,...a}=e;return c.createElement(lQ,oQ({ref:t,active:r},a),c.createElement(iQ,null,n.label),c.createElement("br",null),c.createElement(sQ,null,n.helper))}));const dQ=function StatusPanel(e){let{nameOverride:t,popupZIndex:n,canCollapse:r,isPersistable:a,...o}=e;const{status:l="",password:i,updateStory:s,saveStory:p,capabilities:m,editLink:f,title:g,storyId:h,visibility:E}=Sa((e=>{let{state:{story:{status:t,password:n,editLink:r,title:a,storyId:o,visibility:l},capabilities:i},actions:{updateStory:s,saveStory:c}}=e;return{status:t,password:n,updateStory:s,saveStory:c,capabilities:i,editLink:r,title:a,storyId:o,visibility:l}})),b=(0,S.useFeature)("enableUpdatedPublishStoryModal"),[y,_]=(0,u.useState)(!1),v=(0,u.useCallback)((()=>_(!1)),[]),{shouldReviewDialogBeSeen:w}=du((e=>{let{state:{shouldReviewDialogBeSeen:t}}=e;return{shouldReviewDialogBeSeen:t}})),T=lc();(0,u.useEffect)((()=>{i?s({properties:{visibility:GK}}):l!==jK.PRIVATE?E||s({properties:{visibility:UK}}):s({properties:{visibility:zK}})}),[i,l,s,E]);const C=[{value:UK,label:(0,d.__)("Public","web-stories"),helper:(0,d.__)("Visible to everyone","web-stories")}];m?.publish&&(C.push({value:zK,label:(0,d.__)("Private","web-stories"),helper:(0,d.__)("Visible to site admins & editors only","web-stories"),disabled:T&&E!==zK}),C.push({value:GK,label:(0,d.__)("Password Protected","web-stories"),helper:(0,d.__)("Visible only to those with the password.","web-stories")}));const I=(0,u.useCallback)((e=>{s({properties:{password:e.target.value}})}),[s]),A=Er(h,f),x=(0,u.useCallback)((()=>{const e={status:jK.PRIVATE,password:"",visibility:zK};(0,L.trackEvent)("publish_story",{status:jK.PRIVATE,title_length:g.length}),A(),p(e)}),[g.length,A,p]),k=[jK.PUBLISH,jK.FUTURE,jK.PRIVATE].includes(l),O=(0,u.useCallback)(((e,t)=>{const n=t;if(zK===n&&!k&&!window.confirm((0,d.__)("Would you like to privately publish this story now?","web-stories")))return;const r={};switch(n){case UK:r.status=E===zK?jK.DRAFT:l,r.password="",r.visibility=UK;break;case zK:return void(b||!w||k?x():(_(!0),r.visibility=zK));case GK:r.status=E===zK?jK.DRAFT:l,r.password=i||"",r.visibility=GK}s({properties:r})}),[l,E,i,s,x,w,k,b]);return c.createElement(c.Fragment,null,c.createElement(Uk,oQ({name:t||"status",title:(0,d.__)("Visibility","web-stories"),canCollapse:r,isPersistable:a,collapsedByDefault:!1},o),c.createElement(c.Fragment,null,c.createElement(Wh,null,c.createElement(cb.DropDown,{options:C,selectedValue:E,onMenuItemClick:O,popupZIndex:n,disabled:C.length<=1,renderItem:cQ,hint:C.find((e=>E===e.value))?.helper})),E===GK&&c.createElement(Wh,null,c.createElement(_p,{"aria-label":(0,d.__)("Password","web-stories"),value:i,onChange:I,placeholder:(0,d.__)("Enter a password","web-stories")})))),c.createElement(RV,{isOpen:y,onIgnore:x,onClose:v,onReview:v}))};function PublishModalDocumentPane(){return c.createElement(c.Fragment,null,c.createElement(aQ,{nameOverride:"storyDetailsPublishing"}),c.createElement(D$,{nameOverride:"storyDetailsExcerpt"}),c.createElement(N$,{nameOverride:"storyDetailsPageAdvancement"}),c.createElement(F$,{nameOverride:"storyDetailsBackgroundAudio"}),c.createElement(Cq,{nameOverride:"storyDetailsTaxonomies"}))}const uQ=(0,p.default)(dQ).withConfig({displayName:"documentPane__IsolatedPanel",componentId:"sc-3jx0y8-0"})(["padding:4px 4px 8px;"]);function IsolatedStatusPanel(){return c.createElement(uQ,{nameOverride:"storyDetailsStatus",canCollapse:!1,isPersistable:!1,popupZIndex:11})}const pQ=function DocumentPane(){return c.createElement(c.Fragment,null,c.createElement(dQ,null),c.createElement(aQ,null),c.createElement($V,null),c.createElement(D$,null),c.createElement(N$,null),c.createElement(F$,null),c.createElement(Cq,null))},mQ=p.default.div.withConfig({displayName:"videoOptimizationCheckbox__CheckboxContainer",componentId:"sc-mjnlj7-0"})(["display:flex;align-items:flex-start;"]),fQ=p.default.div.withConfig({displayName:"videoOptimizationCheckbox__ButtonContainer",componentId:"sc-mjnlj7-1"})(["display:flex;align-items:center;justify-content:center;margin-top:16px;"]),gQ=(0,p.default)(Ke.Text).attrs({as:"span",isBold:!0}).withConfig({displayName:"videoOptimizationCheckbox__BoldText",componentId:"sc-mjnlj7-2"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),hQ=(0,p.default)(Ke.Text).attrs({size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"videoOptimizationCheckbox__DescriptionText",componentId:"sc-mjnlj7-3"})(["color:",";margin-bottom:16px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),EQ=(0,p.default)(hQ).withConfig({displayName:"videoOptimizationCheckbox__CheckboxLabel",componentId:"sc-mjnlj7-4"})(["margin-left:8px;margin-bottom:0;line-height:20px;cursor:pointer;"]);const bQ=function VideoOptimizationCheckbox(){const e=Ty(),{capabilities:{hasUploadMediaAction:t}={},dashboardSettingsLink:n}=Y(),[r,a]=(0,u.useState)(!1),o=(0,u.useRef)(),{currentUser:l,toggleWebStoriesMediaOptimization:i}=xa((e=>{let{state:t,actions:n}=e;return{currentUser:t.currentUser,toggleWebStoriesMediaOptimization:n.toggleWebStoriesMediaOptimization}})),s=l?.meta?.web_stories_media_optimization,p=!s&&t,g=(0,u.useCallback)((()=>{a(!0),i()}),[i]),{isSaving:h,saveStory:E}=Sa((e=>{let{state:t,actions:n}=e;return{isSaving:t.meta.isSaving,saveStory:n.saveStory}}));return(0,u.useEffect)((()=>{r&&o.current.focus()}),[r]),(p||r)&&e?c.createElement(MW,{title:(0,d.__)("Optimize all videos in the Story to ensure smooth playback.","web-stories"),footer:r?c.createElement(c.Fragment,null,c.createElement(DefaultFooterText,null,c.createElement(Hd.default,{mapping:{b:c.createElement(gQ,null)}},(0,d.__)("Automatic video optimization enabled. <b>Reload the page</b> to apply changes.","web-stories"))),c.createElement(fQ,null,c.createElement(m.Button,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:async()=>{await E(),window.location.reload(!0)},disabled:h,ref:o},(0,d.__)("Save & Reload","web-stories")))):c.createElement(mQ,null,c.createElement(tp.Checkbox,{id:"automatic-video-optimization-toggle",checked:l?.meta?.web_stories_media_optimization,onChange:g}),c.createElement(EQ,{forwardedAs:"label",htmlFor:"automatic-video-optimization-toggle"},c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:e=>(0,L.trackClick)(e,"click_video_optimization_settings"),href:n,isBold:!0})}},(0,d.__)("Enable automatic optimization. Change this any time in <a>Settings</a>.","web-stories"))))}):null};const yQ=function Accessibility(){const{hasUploadMediaAction:e}=Y((e=>{let{capabilities:t}=e;return{hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(JW,null),c.createElement(gV,null),c.createElement(yV,null),e&&c.createElement(EV,null),c.createElement(FW,null),c.createElement(DW,null),c.createElement(UW,null),c.createElement(bQ,null))};const _Q=function Design(){const{hasUploadMediaAction:e}=Y((e=>{let{capabilities:t}=e;return{hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(uV,null),c.createElement(oV,null),c.createElement(tV,null),c.createElement(rV,null),e&&c.createElement(TV,null),e&&c.createElement(YW,null))},vQ=()=>{const e=Ty(),{generalSettingsLink:t,publisherName:n}=Y((e=>{let{metadata:t,generalSettingsLink:n}=e;return{publisherName:t?.publisher,generalSettingsLink:n}})),r=n?.trim().length>0,{title:a}=Qd.storyMissingPublisherName;return fu("StoryMissingPublisherName",!r),!r&&e&&c.createElement(MW,{title:a,footer:c.createElement(DefaultFooterText,null,c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{href:t,rel:"noreferrer",target:"_blank",size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("Your site title is used when your Story appears on Google. You can set your site title by going to <a>General Settings</a>.","web-stories")))})};const wQ=function Priority(){const{canManageSettings:e,hasUploadMediaAction:t}=Y((e=>{let{capabilities:t}=e;return{canManageSettings:t.canManageSettings,hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(dV,null),e&&c.createElement(vQ,null),c.createElement(mV,null),c.createElement(cV,null),t&&c.createElement(StoryPosterAttached,null),t&&c.createElement(pV,null),t&&c.createElement(lV,null),t&&c.createElement(iV,null),t&&c.createElement(vV,null),c.createElement(NV,null),c.createElement(sV,null))};function TQ(){return TQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TQ.apply(this,arguments)}const SQ=p.default.div.withConfig({displayName:"footer__Panel",componentId:"sc-6wcfz2-0"})(["padding:16px 0 24px 0;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),CQ=p.default.ul.withConfig({displayName:"footer__Links",componentId:"sc-6wcfz2-1"})(["margin:8px 0 0 0;padding:0;list-style-position:inside;list-style-type:none;"]),IQ=p.default.li.withConfig({displayName:"footer__ListItem",componentId:"sc-6wcfz2-2"})([""," &::before{content:'- ';}&,& > *{font-weight:700;}"],Pu.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{X_SMALL:r}=t;return n[r]})));function AQ(e){let{children:t,...n}=e;return c.createElement(IQ,null,c.createElement(Ud.Link,TQ({},n,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}),t))}const xQ=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),kQ=(0,d.__)("https://youtube.com/playlist?list=PLfVPq9A6B0RNoQ3HTE9LQzgAdVzcb7tmt","web-stories");function OQ(){const e=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"click_support_page")}),[]),t=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"click_website_docs")}),[]),n=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"click_storytime_channel")}),[]);return c.createElement(SQ,null,c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Discover more resources to get the most out of Web Stories. Read our start guide or visit our support forum to get answers to your questions.","web-stories")),c.createElement(CQ,null,c.createElement(AQ,{href:"https://wp.stories.google/docs/",target:"_blank",rel:"noreferrer",onClick:t},(0,d.__)("Read Start Guide","web-stories")),c.createElement(AQ,{href:xQ,target:"_blank",rel:"noreferrer",onClick:e},(0,d.__)("Visit Support Forums","web-stories")),c.createElement(AQ,{href:kQ,target:"_blank",rel:"noreferrer",onClick:n},(0,d.__)("Storytime YouTube Series","web-stories"))))}const NQ=function(){return c.createElement(LK,null,c.createElement(sK,{header:c.createElement(wK,null),footer:{secondaryMenu:{helpCenter:{Footer:OQ},checklist:{Priority:wQ,Design:_Q,Accessibility:yQ}}},sidebarTabs:{document:{title:(0,d.__)("Document","web-stories"),Pane:pQ},publishModal:{DocumentPane:PublishModalDocumentPane,IsolatedStatusPanel}}},c.createElement(MK,null)))};var PQ=n(51048);const RQ=e=>{const{src:t,url:n,mime:r,alt:a,date:o,id:l,featured_media:i,featured_media_src:{src:s,width:c,height:d,generated:u}="",media_details:{width:p,height:m,length:f,length_formatted:g,sizes:h={}}={},web_stories_media_source:E,web_stories_is_muted:b,web_stories_base_color:y,web_stories_blurhash:_,trim_data:v}=e,w=Object.entries(h).reduce(((e,t)=>{let[n,r]=t;return e[n]=(0,PQ.snakeToCamelCaseObjectKeys)(r),e}),{});return re({baseColor:y,blurHash:_,mimeType:r,creationDate:o,src:n||t,...oe({width:p,height:m,posterGenerated:u,posterWidth:c,posterHeight:d}),poster:s,posterId:i,id:l,length:f,lengthFormatted:g,alt:a,sizes:w,local:!1,isExternal:!1,isOptimized:"video-optimization"===E,isMuted:b,trimData:v})},MQ=(e,t,n,r,a,o)=>(!0!==e||!0!==t)&&((!0!==e||r!==o)&&((!0!==t||n!==a)&&((n!==a||r!==o)&&!(Math.abs(n/r-a/o)<Number.EPSILON)))),LQ=(e,t)=>{const n=t.get("control"),r=Boolean(parseInt(n.params.flex_width)),a=Boolean(parseInt(n.params.flex_height)),o=e.get("width"),l=e.get("height");let i=parseInt(n.params.width),s=parseInt(n.params.height);const c=i/s,d=i,u=s;t.set("canSkipCrop",!n.mustBeCropped(r,a,i,s,o,l)),o/l>c?(s=l,i=s*c):(i=o,s=i/c);const p=(o-i)/2,m=(l-s)/2,f={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:o,imageHeight:l,minWidth:d>i?i:d,minHeight:u>s?s:u,x1:p,y1:m,x2:i+p,y2:s+m};return!1===a&&!1===r&&(f.aspectRatio=i+":"+s),!0===a&&(delete f.minHeight,f.maxWidth=o),!0===r&&(delete f.minWidth,f.maxHeight=l),f},DQ=window.wp?.media?.controller?.Cropper?.extend?.({doCrop:function(e){const t=e.get("cropDetails"),n=this.get("control"),r=t.width/t.height;return n.params.flex_width&&n.params.flex_height?(t.dst_width=t.width,t.dst_height=t.height):(t.dst_width=n.params.flex_width?n.params.height*r:n.params.width,t.dst_height=n.params.flex_height?n.params.width/r:n.params.height),window.wp.ajax.post("crop-image",{nonce:e.get("nonces").edit,id:e.get("id"),context:n.id,cropDetails:t})}}),BQ=DQ,FQ={height:0,width:0,flex_width:!1,flex_height:!1};function HQ(e){let{title:t=(0,d.__)("Upload to Story","web-stories"),buttonInsertText:n=(0,d.__)("Insert into page","web-stories"),onSelect:r,onSelectErrorMessage:a=(0,d.__)("Unable to use this file type.","web-stories"),onClose:o,onPermissionError:l,type:i="",multiple:s=!1,cropParams:c}=e;const{actions:{updateMedia:p}}=X(),{capabilities:{hasUploadMediaAction:m}}=Y(),{showSnackbar:f}=(0,hr.useSnackbar)();(0,u.useEffect)((()=>{try{window.wp.Uploader.prototype.success=e=>{let{attributes:t}=e;p(t.id,{mediaSource:"editor",altText:t.alt||t.title})}}catch(e){}}),[p]);const g=(0,u.useCallback)((e=>{if((0,L.trackEvent)("open_media_modal"),!m)return l&&l(),void e.preventDefault();const c=window.wp.media({title:t,library:{type:i},button:{text:n},multiple:s});c.once("select",(()=>{const e=c.state().get("selection").first().toJSON();!Array.isArray(i)||i.includes(e.mime)?(e.alt=e.alt||e.title,r(RQ(e))):f({message:a})})),o&&c.once("close",o),c.once("content:activate:browse",(()=>{c.content?.get()?.collection?._requery(!0),c.content?.get()?.options?.selection?.reset()})),c.open(),e.preventDefault()}),[m,f,l,o,r,n,a,s,i,t]),h=(0,u.useCallback)((e=>{if((0,L.trackEvent)("open_media_crop_modal"),!m)return l&&l(),void e.preventDefault();const d={...FQ,...c},u={id:"control-id",params:d,mustBeCropped:MQ},g={text:n,close:!1},h=window.wp.media({button:g,states:[new window.wp.media.controller.Library({title:t,library:window.wp.media.query({type:i}),button:g,multiple:s,suggestedWidth:d.width,suggestedHeight:d.height}),BQ&&new BQ({imgSelectOptions:LQ,control:u})]});h.once("cropped",(e=>{if(e?.id){const t=e.alt||e.title;p(e.id,{mediaSource:"editor",altText:t}),e.alt=t}r(RQ(e))})),h.once("skippedcrop",(()=>{const e=h.state().get("selection").first().toJSON();e.alt=e.alt||e.title,r(RQ(e))})),h.once("select",(()=>{const e=h.state().get("selection").first().toJSON();if(Array.isArray(i)&&!i.includes(e.mime))return h.close(),void f({message:a});u.params.width!==e.width||u.params.height!==e.height||u.params.flex_width||u.params.flex_height?h.setState("cropper"):(e.alt=e.alt||e.title,r(RQ(e)),h.close())})),o&&h.once("close",o),h.once("content:activate:browse",(()=>{h.content?.get()?.collection?._requery(!0),h.content?.get()?.options?.selection?.reset()})),h.open(),e.preventDefault()}),[m,c,n,t,i,s,r,o,l,p,f,a]);return(0,u.useMemo)((()=>c?h:g),[c,h,g])}HQ.propTypes={title:pa.string,buttonInsertText:pa.string,onSelect:pa.func.isRequired,onSelectErrorMessage:pa.string,onClose:pa.func,onPermissionError:pa.func,type:pa.oneOfType([pa.string,pa.arrayOf(pa.string)]),cropParams:pa.object,multiple:pa.bool};const UQ=HQ;function MediaUpload(e){let{render:t,...n}=e;return t(UQ(n))}MediaUpload.propTypes={render:pa.func.isRequired,...UQ.propTypes};const zQ=MediaUpload;var GQ=n(6389);function jQ(e,t){return kK({path:`${t}${e}/lock/`,method:"POST"})}const YQ=p.default.img.withConfig({displayName:"shared__Img",componentId:"sc-1djlecd-0"})(["float:left;margin:0px 10px 10px 0px;"]);const ZQ=function PostLockDialog(e){let{isOpen:t,onClose:n,user:r,dashboardLink:a,previewLink:o,showTakeOver:l=!1}=e;const i=(0,d.__)("Story is locked","web-stories"),s=l?(0,qe.default)(
/* translators: %s: user's name */
(0,d.__)("%s is already editing this story. Do you want to take over?","web-stories"),r?.name):(0,qe.default)(
/* translators: %s: user's name */
(0,d.__)("%s is already editing this story.","web-stories"),r?.name);return c.createElement(y,{isOpen:t,onClose:n,title:i,contentLabel:i,actions:c.createElement(c.Fragment,null,c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,href:a},(0,d.__)("Dashboard","web-stories")),c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,href:o,target:"_blank",rel:"noreferrer"},(0,d.__)("Preview","web-stories")),l&&c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:n},(0,d.__)("Take over","web-stories")))},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r?.avatar&&c.createElement(YQ,{src:r.avatar,alt:r.name,height:48,width:48,crossOrigin:"anonymous",decoding:"async"}),s))};const WQ=function PostTakeOverDialog(e){let{isOpen:t,user:n,dashboardLink:r,onClose:a}=e;const o=(0,d.__)("Someone else has taken over this story.","web-stories"),l=(0,qe.default)(
/* translators: %s: user's name */
(0,d.__)("%s now has editing control of this story.","web-stories"),n?.name);return c.createElement(y,{isOpen:t,title:o,contentLabel:o,onClose:a,actions:c.createElement(m.Button,{type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE,href:r},(0,d.__)("Dashboard","web-stories"))},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},n.avatar&&c.createElement(YQ,{src:n.avatar,alt:n.name,height:48,width:48,crossOrigin:"anonymous",decoding:"async"}),l))};const VQ=function PostLock(){const{currentUser:e}=xa((e=>{let{state:t}=e;return{currentUser:t.currentUser}})),{storyId:t,dashboardLink:n,nonce:r,postLock:{interval:a,showLockedDialog:o},api:{stories:l,storyLocking:i}}=Y(),{previewLink:s,lockUser:d}=Sa((e=>{let{state:{story:{previewLink:t,extras:{lockUser:n={}}={}}}}=e;return{previewLink:t,lockUser:n}})),{enablePostLocking:p,enablePostLockingTakeOver:m}=(0,S.useFeatures)(),[f,g]=(0,u.useState)(!0),[h,E]=(0,u.useState)({}),[b,y]=(0,u.useState)(r),_=(0,u.useCallback)((()=>{m&&(E({}),jQ(t,l))}),[m,t,l]),v=(0,u.useMemo)((()=>Boolean(Object.keys(e).length)),[e]),w=(0,u.useCallback)((()=>{p&&o&&v&&function(e,t){const n=(0,GQ.default)(`${t}${e}/lock/`,{_embed:"author"});return kK({path:n})}(t,l).then((n=>{let{locked:r,nonce:a,_embedded:o}=n;const i={id:o?.author?.[0]?.id||0,name:o?.author?.[0]?.name||"",avatar:o?.author?.[0]?.avatar_urls?.[96]||""};r&&i?.id&&i?.id!==e.id?E(i):jQ(t,l),y(a)})).catch((e=>{(0,L.trackError)("post_lock",e.message)}))}),[E,t,l,e,p,o,v]),T=(0,u.useRef)(w);return(0,u.useEffect)((()=>{T.current=w}),[w,v]),(0,u.useEffect)((()=>{p&&o&&v&&d?.id&&d?.id!==e.id&&E(d)}),[d,e,v,p,o]),(0,u.useEffect)((()=>{function e(){p&&o&&h?.id&&b&&function(e,t,n){const r=new window.FormData;r.append("_wpnonce",t);const a=(0,GQ.default)(n,{_method:"DELETE"});window.navigator.sendBeacon?.(a,r)}(0,b,i)}return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t,p,o,h,b,i]),(0,u.useEffect)((()=>{const e=setInterval((()=>{a&&v&&(T.current(),g(!1))}),1e3*a);return()=>clearInterval(e)}),[a,v]),p&&o&&h?f?c.createElement(ZQ,{isOpen:Boolean(h?.id),user:h,onClose:_,previewLink:s,dashboardLink:n,showTakeOver:m}):m?c.createElement(WQ,{isOpen:Boolean(h?.id),user:h,dashboardLink:n,onClose:_}):null:null};const $Q=function(e){return"__WEB_STORIES_ENCODED__"+btoa(encodeURIComponent(e))};const qQ=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories");const XQ=function StatusCheckFailed(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"click_support_page")}),[]);return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Unable to save your story","web-stories"),contentLabel:(0,d.__)("Unable to save your story","web-stories"),onPrimary:n,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:qQ,target:"_blank",rel:"noopener noreferrer",onClick:r})}},(0,d.__)("We are currently unable to save your story, any changes you make may be lost. This may be due to temporary issues connecting to WordPress. <a>Submit a new support topic</a> for additional help.","web-stories"))))};const KQ=function StatusCheck(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>t(!1)),[]),{api:{statusCheck:r},encodeMarkup:a}=Y();return(0,u.useEffect)((()=>{(function(e,t,n){return kK({path:t,data:{content:n?$Q(e):e},method:"POST"})})(qr({storyId:1,title:"Story!",author:{id:1,name:"John Doe"},slug:"story",publisherLogo:{id:1,url:"https://example.com/logo.png",height:0,width:0},defaultPageDuration:7,status:"publish",date:"2020-04-10T07:06:26",modified:"",excerpt:"",featuredMedia:{id:123,url:"https://example.com/image.png",width:123,height:456},password:"",globalStoryStyles:""},[{type:"page",id:"2",elements:[]}],{publisher:"Web Stories"}),r,a).catch((e=>{t(!0),(0,L.trackError)("status_check",e.message)}))}),[a,r]),c.createElement(XQ,{isOpen:e,onClose:n})},QQ=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),JQ=(0,d.__)("https://wp.stories.google/docs","web-stories");const eJ=function CorsCheckFailed(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"click_support_page")}),[]);return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Unable to load media","web-stories"),contentLabel:(0,d.__)("Unable to load media","web-stories"),onPrimary:n,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:JQ,target:"_blank",rel:"noopener noreferrer"}),help:c.createElement(Ud.Link,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:QQ,target:"_blank",rel:"noopener noreferrer",onClick:r})}},(0,d.__)("We detected a potential misconfiguration that prevents media items from loading correctly. This may be due to media being hosted on an external CDN. <a>Learn how to address this</a> or <help>submit a new support topic</help> for additional help.","web-stories"))))};const tJ=function CorsCheck(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>t(!1)),[]),{actions:{getMediaForCorsCheck:r}}=X(),a=(0,S.useFeature)("enableCORSCheck");return(0,u.useEffect)((()=>{(async()=>{if(!a)return;let e;try{e=await r()}catch(e){return}if(e?.length)try{await Promise.all([...new Set(e.filter((e=>!e.startsWith(location.origin))))].map((e=>fetch(e,{method:"HEAD"}))))}catch(e){t(!0),(0,L.trackError)("cors_check",e.message)}})()}),[]),c.createElement(eJ,{isOpen:e,onClose:n})},nJ=p.default.div.withConfig({displayName:"fontCheckDialog__DialogContent",componentId:"sc-5gbbgj-0"})(["display:grid;row-gap:20px;"]),rJ=(0,p.default)(Jj).withConfig({displayName:"fontCheckDialog__ChevronRight",componentId:"sc-5gbbgj-1"})(["width:32px;height:32px;"]),aJ=(0,p.default)(rJ).withConfig({displayName:"fontCheckDialog__ChevronLeft",componentId:"sc-5gbbgj-2"})(["transform:rotate(180deg);"]),oJ=(0,p.default)(Ud.Link).withConfig({displayName:"fontCheckDialog__StyledLink",componentId:"sc-5gbbgj-3"})(["display:flex;color:",";align-items:center;font-weight:normal;margin:0 auto 0 0;"],(e=>{let{theme:t}=e;return t.colors.standard.black})),lJ=(0,p.default)(m.Button).withConfig({displayName:"fontCheckDialog__StyledButton",componentId:"sc-5gbbgj-4"})(["margin-left:16px;"]),iJ=p.default.div.withConfig({displayName:"fontCheckDialog__ActionsWrap",componentId:"sc-5gbbgj-5"})(["display:flex;align-self:flex-end;width:100%;"]),FontCheckDialog=e=>{let{isOpen:t,defaultCloseAction:n,missingFont:r,closeDialog:a}=e;const{dashboardLink:o,dashboardSettingsLink:l,isRTL:i}=Y(),[s,p]=(0,u.useState)(A.TEXT_ELEMENT_DEFAULT_FONT),{updateElementsByFontFamily:m}=Sa((e=>{let{actions:t}=e;return{updateElementsByFontFamily:t.updateElementsByFontFamily}})),g=(0,u.useCallback)((e=>{(0,L.trackEvent)("font_check_cancel"),n(e)}),[n]),h=(0,u.useCallback)((e=>{(0,L.trackClick)(e,"click_font_check_settings")}),[]),E=(0,u.useCallback)((()=>{(0,L.trackEvent)("font_check_replace_default"),m({family:r,properties:{font:A.TEXT_ELEMENT_DEFAULT_FONT}}),a()}),[a,r,m]),b=(0,u.useCallback)((()=>{(0,L.trackEvent)("font_check_replace_selected"),m({family:r,properties:{font:s}}),a()}),[s,a,r,m]),_=i?rJ:aJ;return c.createElement(y,{isOpen:t,onClose:g,title:(0,d.__)("Missing Fonts","web-stories"),contentLabel:(0,d.__)("Missing Fonts","web-stories"),actions:c.createElement(iJ,null,c.createElement(oJ,{href:o},c.createElement(_,null),(0,d.__)("Back to dashboard","web-stories")),c.createElement(lJ,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:E},(0,d.__)("Open anyway","web-stories")),c.createElement(lJ,{type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:b},(0,d.__)("Replace font","web-stories")))},c.createElement(nJ,null,c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("This story contains the following font that is no longer available:","web-stories")),c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},r),c.createElement("div",null,c.createElement(Hd.default,{mapping:{a:c.createElement(Ud.Link,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:h,href:l,isBold:!0})}},(0,d.__)("To replace this font with your own or re-add it, go to <a>Settings</a>. To replace this font with a default, open the story.","web-stories"))),c.createElement(Ke.Text,{size:Qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Or, choose replacement font below:","web-stories")),c.createElement(FT,{zIndex:10,currentValue:s.family,onChange:p})))},sJ=()=>{const{dashboardLink:e}=Y(),t=(0,S.useFeature)("notifyDeletedFonts"),{isStoryLoaded:n}=Sa((e=>{let{state:{pages:t}}=e;return{isStoryLoaded:t.length>0}})),r=Sa((e=>{let{state:{pages:t}}=e;return t})),{actions:{getFonts:a}}=X(),[o,l]=(0,u.useState)(null),[i,s]=(0,u.useState)(!1),d=(0,u.useCallback)((()=>{window.location=e}),[e]);return(0,u.useEffect)((()=>{(async()=>{if(!n)return;const e=hz(r),t=await a({include:e.join(",")}),o=e.filter((e=>!new Set(t.map((e=>e.family))).has(e)));o&&o.length>=1&&(s(!0),l(o[0]))})()}),[n,r,a]),t?c.createElement(FontCheckDialog,{isOpen:i,missingFont:o||"",defaultCloseAction:d,closeDialog:()=>s(!1)}):null};function cJ(e,t){return kK({path:(0,GQ.default)(e.api.users,{per_page:"100",who:"authors",search:t})}).then((e=>e.map((e=>(delete e._links,(0,PQ.snakeToCamelCaseObjectKeys)(e))))))}const dJ=["id","title","status","slug","date","modified","excerpt","link","story_data","preview_link","edit_link","embed_post_link","permalink_template","style_presets","password"].join(","),uJ="wp:featuredmedia,wp:lockuser,author,wp:publisherlogo,wp:term",pJ=["id","date_gmt","media_details","mime_type","featured_media","featured_media_src","alt_text","source_url","meta","web_stories_media_source","web_stories_is_muted","body","status","headers"].join(",");const mJ=function(e){const{_embedded:t={},_links:n={},...r}=e,a={...(0,PQ.snakeToCamelCaseObjectKeys)(r,["story_data"]),author:{id:t?.author?.[0].id||0,name:t?.author?.[0].name||""},capabilities:{},extras:{lockUser:{id:t?.["wp:lockuser"]?.[0].id||0,name:t?.["wp:lockuser"]?.[0].name||"",avatar:t?.["wp:lockuser"]?.[0].avatar_urls?.[96]||""}},featuredMedia:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""},publisherLogo:{id:t?.["wp:publisherlogo"]?.[0].id||0,height:t?.["wp:publisherlogo"]?.[0]?.media_details?.height||0,width:t?.["wp:publisherlogo"]?.[0]?.media_details?.width||0,url:t?.["wp:publisherlogo"]?.[0]?.source_url||""},taxonomies:n?.["wp:term"]?.map((e=>{let{taxonomy:t}=e;return t}))||[],terms:t?.["wp:term"]||[]};for(const e of Object.keys(n)){if(!e.startsWith("wp:action-"))continue;const t=e.replace("wp:action-","");a.capabilities[t]=!0}return a};function fJ(e,t){const n=(0,GQ.default)(`${e.api.stories}${t}/`,{context:"edit",_embed:uJ,_fields:dJ});return kK({path:n}).then(mJ)}const gJ=(e,t)=>{let{pages:n,featuredMedia:r,globalStoryStyles:a,publisherLogo:o,autoAdvance:l,defaultPageDuration:i,currentStoryStyles:s,backgroundAudio:c,content:d,author:u,...p}=e;return{story_data:{version:er.DATA_VERSION,pages:n,autoAdvance:l,defaultPageDuration:i,currentStoryStyles:s,backgroundAudio:c},featured_media:r.id,style_presets:a,meta:{web_stories_publisher_logo:o?.id},publisher_logo:o,content:t?$Q(d):d,author:u.id,...p}};function hJ(e,t){const{storyId:n}=t,r=gJ(t,e.encodeMarkup),a=(0,GQ.default)(`${e.api.stories}${n}/`,{_fields:["status","slug","link","preview_link","edit_link","embed_post_link"].join(","),_embed:uJ});return kK({path:a,data:r,method:"POST"}).then((e=>{const{_embedded:t={},...n}=e;return{...(0,PQ.snakeToCamelCaseObjectKeys)(n),featuredMedia:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""}}}))}function EJ(e,t){const{storyId:n}=t,r=gJ(t,e.encodeMarkup);return kK({path:`${e.api.stories}${n}/autosaves/`,data:r,method:"POST"}).then((e=>(0,PQ.snakeToCamelCaseObjectKeys)(e,["story_data"])))}const bJ=function(e){const{mime_type:t,web_stories_media_source:n}=e;return"gif-conversion"===n?function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a},mime_type:o,featured_media:l,featured_media_src:{src:i,width:s,height:c,generated:d},alt_text:u,source_url:p,meta:{web_stories_base_color:m,web_stories_blurhash:f}}=e;return re({baseColor:m,blurHash:f,type:"gif",mimeType:"image/gif",creationDate:n,src:p,...oe({width:r,height:a,posterGenerated:d,posterWidth:s,posterHeight:c}),posterId:l,poster:i,id:t,alt:u,local:!1,isOptimized:!0,isExternal:!1,output:{mimeType:o,src:p}})}(e):"image"===ne(t)?function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a,sizes:o={}}={},mime_type:l,alt_text:i,source_url:s,meta:{web_stories_base_color:c,web_stories_blurhash:d}}=e,u=Object.entries(o).reduce(((e,t)=>{let[n,r]=t;return e[n]=(0,PQ.snakeToCamelCaseObjectKeys)(r),e}),{});return re({baseColor:c,blurHash:d,mimeType:l,creationDate:n,src:s,width:r,height:a,id:t,alt:i,sizes:u,local:!1,isExternal:!1})}(e):function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a,length:o,length_formatted:l},mime_type:i,featured_media:s,featured_media_src:{src:c,width:d,height:u,generated:p},web_stories_is_muted:m,alt_text:f,source_url:g,web_stories_media_source:h,meta:{web_stories_trim_data:E,web_stories_base_color:b,web_stories_blurhash:y}}=e;return re({baseColor:b,blurHash:y,mimeType:i,creationDate:n,src:g,...oe({width:r,height:a,posterGenerated:p,posterWidth:d,posterHeight:u}),poster:c,posterId:s,id:t,length:o,lengthFormatted:l,alt:f,local:!1,isExternal:!1,isOptimized:"video-optimization"===h,isMuted:m,trimData:E})}(e)},yJ=(e,t,n)=>{if("object"==typeof n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&yJ(e,`${t}[${r}]`,n[r]);else e.append(t,n)},_J=yJ;function vJ(e,t){let{mediaType:n,searchTerm:r,pagingNum:a,cacheBust:o}=t,l=(0,GQ.default)(e.api.media,{context:"edit",per_page:50,page:a,_web_stories_envelope:!0,_fields:pJ});return n&&(l=(0,GQ.default)(l,{media_type:n})),r&&(l=(0,GQ.default)(l,{search:r})),o&&(l=(0,GQ.default)(l,{cache_bust:!0})),kK({path:l}).then((e=>{let{body:t,headers:n}=e;return{data:t.map(bJ),headers:{...n,totalItems:n["X-WP-Total"],totalPages:n["X-WP-TotalPages"]}}}))}function wJ(e){const t=(0,GQ.default)(e.api.media,{context:"edit",per_page:10,_fields:"source_url"});return kK({path:t}).then((e=>e.map((e=>e.source_url))))}function TJ(e,t){const n=(0,GQ.default)(`${e.api.media}${t}/`,{context:"edit",_fields:pJ});return kK({path:n}).then(bJ)}async function SJ(e,t){const n=(0,GQ.default)(`${e.api.media}${t}/`,{context:"edit",_fields:"meta.web_stories_muted_id"}),r=await kK({path:n});return r?.meta?.web_stories_muted_id?TJ(e,r.meta.web_stories_muted_id):null}async function CJ(e,t){const n=(0,GQ.default)(`${e.api.media}${t}/`,{context:"edit",_fields:"meta.web_stories_optimized_id"}),r=await kK({path:n});return r?.meta?.web_stories_optimized_id?TJ(e,r.meta.web_stories_optimized_id):null}async function IJ(e,t){const n=(0,GQ.default)(`${e.api.media}${t}/`,{context:"edit",_fields:"featured_media"}),r=await kK({path:n});return r?.featured_media?TJ(e,r.featured_media):null}function AJ(e,t,n){const{originalId:r,mediaId:a,storyId:o,templateId:l,isMuted:i,mediaSource:s,trimData:c,baseColor:d,blurHash:u}=n,p={web_stories_media_source:s,web_stories_is_muted:i,post:l||o||a,original_id:r,web_stories_trim_data:c,web_stories_base_color:d,web_stories_blurhash:u};Object.entries(p).forEach((e=>{let[t,n]=e;void 0===n&&delete p[t]}));const m=new window.FormData;return m.append("file",t,t.name||t.type.replace("/",".")),Object.entries(p).forEach((e=>{let[t,n]=e;return _J(m,t,n)})),kK({path:e.api.media,body:m,method:"POST"}).then((e=>bJ(e)))}function xJ(e,t,n){const{baseColor:r,blurHash:a,isMuted:o,mediaSource:l,optimizedId:i,mutedId:s,posterId:c,storyId:d,altText:u}=n,p={meta:{web_stories_base_color:r,web_stories_blurhash:a,web_stories_optimized_id:i,web_stories_muted_id:s,web_stories_poster_id:c},web_stories_is_muted:o,web_stories_media_source:l,featured_media:c,post:d,alt_text:u};return Object.entries(p.meta).forEach((e=>{let[t,n]=e;void 0===n&&delete p.meta[t]})),Object.entries(p).forEach((e=>{let[t,n]=e;void 0===n&&delete p[t]})),kK({path:`${e.api.media}${t}/`,data:p,method:"POST"}).then(bJ)}function kJ(e,t){kK({path:(0,GQ.default)(`${e.api.media}${t}/`,{_method:"DELETE"}),data:{force:!0},method:"POST"})}function OJ(e,t){const n=(0,GQ.default)(e.api.link,{url:t});return kK({path:n})}const NJ=["id","story_data","body","headers"],PJ="wp:featuredmedia";function RJ(e){const{_embedded:t={},id:n,story_data:r={}}=e;return{id:n,elements:[],...r,templateId:n,image:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""}}}function MJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=100,r=(0,GQ.default)(e.api.pageTemplates,{context:"edit",per_page:n,page:t,_web_stories_envelope:!0,_fields:NJ,_embed:PJ});return kK({path:r}).then((e=>{let{headers:n,body:r}=e;const a=parseInt(n["X-WP-TotalPages"]);return{templates:r.map(RJ),hasMore:a>t}}))}function LJ(e,t){return kK({path:`${e.api.pageTemplates}/`,data:{...t,status:"publish"},method:"POST"}).then(RJ)}function DJ(e,t,n){return kK({path:`${e.api.pageTemplates}${t}/`,data:{...n},method:"POST"}).then(RJ)}function BJ(e,t){return kK({path:(0,GQ.default)(`${e.api.pageTemplates}${t}/`,{_method:"DELETE"}),data:{force:!0},method:"POST"})}function FJ(e){return{id:e.id,trackingOptin:e.meta.web_stories_tracking_optin,onboarding:e.meta.web_stories_onboarding,mediaOptimization:e.meta.web_stories_media_optimization}}function HJ(e){return kK({path:e.api.currentUser}).then(FJ)}function UJ(e,t){const{trackingOptin:n,onboarding:r,mediaOptimization:a}=t,o={meta:{web_stories_tracking_optin:n,web_stories_onboarding:r,web_stories_media_optimization:a}};return Object.entries(o.meta).forEach((e=>{let[t,n]=e;void 0===n&&delete o.meta[t]})),kK({path:e.api.currentUser,method:"POST",data:o}).then(FJ)}function zJ(e,t){const n=(0,GQ.default)(e.api.hotlink,{url:t});return kK({path:n}).then(PQ.snakeToCamelCaseObjectKeys)}function GJ(e,t){return(0,GQ.default)(e.api.proxy,{url:t,_wpnonce:e.nonce})}async function jJ(e){const t=await kK({path:(0,GQ.default)(e.api.taxonomies,{type:e.postType,context:"edit"})});return Object.values(t).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,PQ.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function YJ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return kK({url:(0,GQ.default)(t,n)})}function ZJ(e,t,n){return kK({url:(0,GQ.default)(t,n),method:"POST"})}function WJ(e,t){let{include:n,search:r,service:a}=t,o=(0,GQ.default)(`${e.api.fonts}`,{search:r,service:a});const l=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(",").filter(Boolean).map((e=>`include[]=${encodeURI(e)}`)).join("&")}(n);return l.length>0&&(o+=o.includes("?")?`&${l}`:`?${l}`),kK({path:o})}const VJ=(0,p.createGlobalStyle)([".","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}"],T.OVERLAY_CLASS,32,160,T.OVERLAY_CLASS,36);window.webStories=window.webStories||{},window.webStories.initializeStoryEditor=(e,t,n)=>{const r=document.getElementById(e);(0,cK.setAppElement)(r),(0,Od.updateSettings)(t.locale),(0,L.initializeTracking)("Editor"),n.story=n.story?mJ(n.story):null;const a={...t,apiCallbacks:(0,dK.default)(s,t),additionalTips:HK,MediaUpload:zQ,styleConstants:{topOffset:32,leftOffset:160}};(0,u.render)(c.createElement(u.StrictMode,null,c.createElement(od,{config:a,initialEdits:n},c.createElement(VJ,null),c.createElement(NQ,null),c.createElement(uK,null),c.createElement(KQ,null),c.createElement(tJ,null),c.createElement(sJ,null),c.createElement(VQ,null))),r)}}},l={};function __webpack_require__(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=o,__webpack_require__.amdO={},e=[],__webpack_require__.O=(t,n,r,a)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],l=!0,i=0;i<n.length;i++)(!1&a||o>=a)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](n[i])))?n.splice(i--,1):(l=!1,a<o&&(o=a));if(l){e.splice(c--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},__webpack_require__.F={},__webpack_require__.E=e=>{Object.keys(__webpack_require__.F).map((t=>{__webpack_require__.F[t](e)}))},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);__webpack_require__.r(a);var o={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,__webpack_require__.d(a,o),a},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>({8:"chunk-web-stories-template-5",69:"chunk-web-stories-template-60-metaData",274:"chunk-web-stories-template-56",341:"chunk-react-color",354:"chunk-web-stories-template-19",410:"chunk-web-stories-template-24",533:"chunk-web-stories-template-42-metaData",824:"chunk-web-stories-template-36",827:"chunk-web-stories-template-27-metaData",884:"chunk-web-stories-template-18-metaData",907:"chunk-web-stories-template-57",1049:"chunk-web-stories-template-37",1066:"chunk-web-stories-template-44-metaData",1197:"chunk-web-animations-js",1231:"chunk-web-stories-template-12",1340:"chunk-web-stories-template-30-metaData",1380:"chunk-web-stories-template-33-metaData",1403:"chunk-web-stories-template-37-metaData",1738:"chunk-web-stories-template-32",1789:"chunk-web-stories-template-43",1813:"chunk-web-stories-template-10-metaData",1847:"chunk-web-stories-template-12-metaData",1858:"chunk-web-stories-template-1",1970:"chunk-web-stories-template-22-metaData",2068:"chunk-web-stories-template-46",2167:"chunk-web-stories-template-32-metaData",2191:"chunk-web-stories-template-49-metaData",2235:"chunk-web-stories-template-51-metaData",2246:"chunk-web-stories-template-45-metaData",2319:"chunk-web-stories-template-31-metaData",2338:"chunk-web-stories-template-25",2374:"chunk-web-stories-template-2-metaData",2392:"chunk-react-calendar",2454:"chunk-web-stories-template-6",2476:"chunk-web-stories-textset-0",2558:"chunk-web-stories-template-53-metaData",2563:"chunk-web-stories-textset-4",2634:"chunk-web-stories-textset-3",2761:"chunk-web-stories-textset-7",2776:"chunk-web-stories-template-9-metaData",2830:"chunk-web-stories-template-36-metaData",2880:"chunk-web-stories-template-8",2894:"chunk-web-stories-template-34-metaData",3041:"chunk-web-stories-template-15-metaData",3182:"chunk-html-to-image",3194:"chunk-web-stories-template-29-metaData",3245:"chunk-web-stories-template-28",3289:"chunk-web-stories-template-43-metaData",3304:"chunk-web-stories-template-49",3441:"chunk-web-stories-template-45",3529:"chunk-web-stories-template-39",3710:"chunk-web-stories-template-35",3772:"chunk-web-stories-template-60",3777:"chunk-web-stories-template-34",3864:"chunk-web-stories-template-4-metaData",3871:"chunk-web-stories-textset-2",3969:"chunk-web-stories-template-9",4051:"chunk-web-stories-template-40-metaData",4142:"chunk-web-stories-template-29",4178:"chunk-web-stories-template-24-metaData",4386:"chunk-web-stories-template-41",4585:"chunk-web-stories-template-38-metaData",4874:"chunk-web-stories-template-35-metaData",5016:"chunk-web-stories-template-21-metaData",5040:"chunk-web-stories-template-16",5157:"chunk-web-stories-template-33",5312:"chunk-web-stories-template-14",5372:"chunk-web-stories-template-6-metaData",5397:"chunk-web-stories-template-8-metaData",5432:"chunk-web-stories-template-26",5535:"chunk-web-stories-template-15",5543:"chunk-web-stories-template-31",5553:"chunk-web-stories-template-20-metaData",5570:"chunk-web-stories-template-54-metaData",5573:"chunk-web-stories-template-52-metaData",5575:"chunk-resize-observer-polyfill",5748:"chunk-web-stories-template-54",5835:"chunk-web-stories-template-30",6053:"chunk-web-stories-template-16-metaData",6188:"chunk-web-stories-template-42",6204:"chunk-web-stories-template-0-metaData",6271:"chunk-web-stories-template-39-metaData",6305:"chunk-web-stories-template-5-metaData",6311:"chunk-web-stories-template-23-metaData",6353:"chunk-web-stories-template-1-metaData",6406:"chunk-web-stories-template-4",6428:"chunk-web-stories-template-13",6500:"chunk-web-stories-template-0",6517:"chunk-web-stories-template-52",6539:"chunk-web-stories-template-58-metaData",6592:"chunk-web-stories-template-51",6641:"chunk-web-stories-template-28-metaData",6766:"chunk-web-stories-template-19-metaData",6841:"chunk-web-stories-template-58",6852:"chunk-web-stories-template-27",7098:"chunk-ffmpeg",7131:"chunk-web-stories-template-20",7314:"chunk-web-stories-template-25-metaData",7343:"chunk-web-stories-template-47",7346:"chunk-web-stories-template-7",7399:"chunk-web-stories-template-38",7441:"chunk-web-stories-template-48",7498:"chunk-colorthief",7502:"chunk-web-stories-template-23",7528:"chunk-web-stories-template-14-metaData",7586:"chunk-web-stories-template-40",7588:"chunk-web-stories-template-55-metaData",7611:"chunk-web-stories-textset-6",7685:"chunk-web-stories-template-59",7798:"chunk-web-stories-template-50-metaData",7799:"chunk-web-stories-template-3",7863:"chunk-web-stories-template-47-metaData",7952:"chunk-web-stories-template-3-metaData",8022:"chunk-web-stories-template-26-metaData",8189:"chunk-web-stories-template-56-metaData",8203:"chunk-web-stories-template-44",8257:"chunk-web-stories-template-22",8344:"chunk-web-stories-template-10",8422:"chunk-web-stories-template-41-metaData",8551:"chunk-web-stories-template-18",8624:"chunk-focus-visible",8768:"chunk-web-stories-template-11-metaData",8856:"chunk-web-stories-template-48-metaData",9027:"chunk-web-stories-textset-1",9074:"chunk-web-stories-template-7-metaData",9233:"chunk-web-stories-template-53",9288:"chunk-web-stories-template-55",9302:"chunk-web-stories-template-17-metaData",9375:"chunk-web-stories-template-57-metaData",9393:"chunk-web-stories-template-59-metaData",9557:"chunk-web-stories-template-13-metaData",9591:"chunk-web-stories-template-50",9603:"chunk-web-stories-template-17",9607:"chunk-web-stories-template-2",9700:"chunk-web-stories-template-11",9738:"chunk-web-stories-template-46-metaData",9811:"chunk-web-stories-template-21",9843:"chunk-web-stories-textset-5"}[e]+".js?v="+{8:"8c2eba12fc00ec8eff42",69:"ee8bf6a37ece865f9fde",274:"80eb6946ac5d3e67fb6c",341:"93cb3c1eba915534d8e3",354:"bc331036ebf8fd973dd3",410:"a05151ec3dcfd73ba5d6",533:"7031543bbf0ac9875728",824:"017f028dcec49aa9c83b",827:"4f4dc18fab8674b3fa25",884:"d121f5f5280f132b5597",907:"a2073f095beb106d845f",1049:"f1f1757716eb52a6602a",1066:"a635c0f83fd51db6ac06",1197:"45f526a251ead370165a",1231:"025679730793a5f45ba5",1340:"658339eae27be828c9d2",1380:"2ca16dfc5daadd31e068",1403:"88b6b87bdb2c9e25e03e",1738:"ae9efc9903101c877f67",1789:"c4e1f223b2d7b653390e",1813:"38319dc6a0a3f890b221",1847:"a4057b4c746081be9263",1858:"1b46380427af33c1b1ec",1970:"78b7a2bd8812f2bf6406",2068:"e92b7342b792375665a9",2167:"63718570f9ee6fc4c997",2191:"9e9359bd105429600d80",2235:"235e98e7f0a194e663df",2246:"ad654f9224067fefa563",2319:"de459568067e6a86c7ac",2338:"6afd92ee267da96ef034",2374:"bdfd30cc435b8733776b",2392:"fe88e944141fdcaf426f",2454:"0b15fe66f0a751c3ea1d",2476:"a904058c38fb170fbe0c",2558:"dd3a56a23eef473743c2",2563:"b56b1dd86836b646c409",2634:"28d855f7a2c4c6d2d04f",2761:"935388b37ed3ff205691",2776:"2a94f2790f69801857f7",2830:"f8c41181823fb6e56a2a",2880:"1a6db2eddb5dfea78753",2894:"d72ef1b8371f0de9d4b7",3041:"acafde2d8f1a6980eb81",3182:"366847cef960fbf44a89",3194:"76e25e1bb5380222d1e6",3245:"7cb17ef0b05a8f093168",3289:"667fa6d0a0f6165df08a",3304:"191ca3f0453f941d20e6",3441:"05c1b2189d13b92ebed2",3529:"8d14b78aed3f212594b7",3710:"65acc4065c83a96e39a8",3772:"711513720437417075fe",3777:"26543bbf90ef4cbdc515",3864:"205a38118d76188f1497",3871:"8ef9a6403f60815b3f5d",3969:"4c4e29caf054f8b34c3a",4051:"a3859c6f25fb906796aa",4142:"12befd5ad7b2a8667456",4178:"1bb9fee64db965ad4c77",4386:"f5d556107fcb262669ac",4585:"934e6e9b938e8e0c0832",4874:"8d02e508eb5953a8f03e",5016:"416c3be02c2ca809fc3f",5040:"ace29bbb8a75ef7d043b",5157:"1f7c06f40e88b5aa097f",5312:"49e6fb8136768a4b610d",5372:"8cff45ed4d0f60a1881d",5397:"59ce47b435a56f9e93f6",5432:"1cab9260d218cff0a1b8",5535:"1ad1699cb19c48e9110a",5543:"38e686cd5716321ecc79",5553:"46ade91fdf2e8a4501d5",5570:"1a2bca995e7c5853b966",5573:"d11139be60f7b14c9ffc",5575:"a97a5e5ec0e812a389ed",5748:"bf92fa4c29c04ef11833",5835:"c7c12a434ea7b407d533",6053:"cd8f59acf99cb495fe77",6188:"c6a1fd787c356ffe55d6",6204:"ffa8c4d1cc9dd090d896",6271:"49df2acd6d02d6aebdb7",6305:"f8bb7423de5e3aabca11",6311:"efd3cdbbbecec5cdafa2",6353:"78c4ce9232efce7cc087",6406:"93d7514258dda348a98a",6428:"2519a7db285b730e032b",6500:"a109a3ec2d9927cc42b7",6517:"3924bf8920911fdcc368",6539:"64a365f05a34a2adf367",6592:"4a64f0bd26dbc407a918",6641:"bade12d3bb5f6781a58f",6766:"1bc7a9e7a79469a5af79",6841:"8f5735a3ff5085d4fb60",6852:"bbe22285393d918bfd57",7098:"c7dbceed752536f08148",7131:"d5cf5366ce668fdb1bdf",7314:"979d5b962e46e47de7f7",7343:"98150c228a2632e0df19",7346:"c764d45bad2e6130f0d5",7399:"b477593542d68d5f3c87",7441:"9c076c0af853804aacb1",7498:"afa32aef6dfc12d11c81",7502:"e002449e300cc9e29f4a",7528:"8d631193e3fc67f254d9",7586:"77c94df4f505a97961d9",7588:"ed34aaadc0ad2abddde5",7611:"26ce2863fce7cfb79c5f",7685:"756eeffffa191f1ba551",7798:"a03fe4c4b1d6abf8541f",7799:"0f11935f9884eec1b102",7863:"582b6c2ce8eaad76fc82",7952:"f206bee0645c91e855ef",8022:"0822bcf03c934917351e",8189:"37686cfc4a640c7e0f40",8203:"f6b572287ddc013ee752",8257:"9f28022b336c1a7ecfd1",8344:"5b75497e02859dc195ed",8422:"3f42e89ce0dd7e802975",8551:"45a3c45ddaf59da9ab83",8624:"705c5bfc48fb43676444",8768:"04036e7d0f2b8b2c1b24",8856:"7e61600bafdf93fbef22",9027:"6e1c2a132ee4bff484fc",9074:"c956f3be9f5f3f084d97",9233:"a855073040b4435c998d",9288:"9bead398acd33561078f",9302:"b0227828b5a500a82b1d",9375:"41a6095cbe70256cfb67",9393:"363f78c9382ef94434e8",9557:"39986c27dabeda720306",9591:"ab70bdf4580c74fd2769",9603:"99acdf72cd0c2d7c9174",9607:"d9f8c651fc930c9d4952",9700:"eceababea603e74de8c9",9738:"d8b00ffb3193a85920f1",9811:"bd838926dcca7396c4bf",9843:"9276d55f0044919191fc"}[e]),__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},a="web-stories-wp:",__webpack_require__.l=(e,t,n,o)=>{if(r[e])r[e].push(t);else{var l,i;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+n){l=d;break}}l||(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,__webpack_require__.nc&&l.setAttribute("nonce",__webpack_require__.nc),l.setAttribute("data-webpack",a+n),l.src=e),r[e]=[t];var u=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var a=r[e];if(delete r[e],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),i&&document.head.appendChild(l)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="",(()=>{var e={9078:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var o=__webpack_require__.p+__webpack_require__.u(t),l=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,r[1](l)}}),"chunk-"+t,t)}},__webpack_require__.F.j=t=>{if(!__webpack_require__.o(e,t)||void 0===e[t]){e[t]=null;var n=document.createElement("link");__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.rel="prefetch",n.as="script",n.href=__webpack_require__.p+__webpack_require__.u(t),document.head.appendChild(n)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,l,i]=n,s=0;if(o.some((t=>0!==e[t]))){for(r in l)__webpack_require__.o(l,r)&&(__webpack_require__.m[r]=l[r]);if(i)var c=i(__webpack_require__)}for(t&&t(n);s<o.length;s++)a=o[s],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(c)},n=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.O(0,[9078],(()=>{__webpack_require__.E(7498)}),5);var i=__webpack_require__.O(void 0,[7912,8647,8916,4548],(()=>__webpack_require__(34345)));i=__webpack_require__.O(i)})();