var quform=function(e,n,c,r){"use strict";var f,g=e.core,a=e.builder,b=g.cache;return f={editing:null,init:function(){n("#qfb-add-confirmation").on("click",function(){f.showSettings()}),b.get("#qfb-confirmations").on("click",".qfb-confirmation-action-toggle",function(){var e=n(this).closest(".qfb-confirmation"),t=f.getConfirmationById(e.data("id"));t&&1!=t.id&&(t.enabled=e.find(".qfb-confirmation-toggle").is(":checked"))}),b.get("#qfb-confirmations").on("click",".qfb-confirmation-action-settings",function(){f.showSettings(n(this).closest(".qfb-confirmation").data("id"))}),b.get("#qfb-confirmations").on("click",".qfb-confirmation-action-duplicate",function(){f.duplicate(n(this).closest(".qfb-confirmation").data("id"))}),b.get("#qfb-confirmations").on("click",".qfb-confirmation-action-remove",function(){var i=n(this).closest(".qfb-confirmation");1!=i.data("id")?confirm(c.confirmationConfirmRemove)&&i.qfbSlideHide(function(){for(var e=i.data("id"),t=a.form.confirmations.length;t--;)a.form.confirmations[t].id==e&&a.form.confirmations.splice(t,1);i.remove()}):alert(c.cannotRemoveDefaultConfirmation)}),b.get("#qfb-confirmation-settings").on("click",".qfb-popup-save-button",function(){f.saveSettings()&&f.hideSettings()}),b.get("#qfb-confirmation-settings").on("click",".qfb-popup-close-button",f.hideSettings),b.get("#qfb_confirmation_type").change(function(){var e=b.get("#qfb_confirmation_type").val();b.get("#qfb_confirmation_message").add(b.get("#qfb_confirmation_message_auto_format")).add(b.get("#qfb_confirmation_message_icon")).add(b.get("#qfb_confirmation_message_position")).add(b.get("#qfb_confirmation_message_timeout")).add(b.get("#qfb_confirmation_hide_form")).closest(g.settingWrap)["message"==e||"message-redirect-page"==e||"message-redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),b.get("#qfb_confirmation_redirect_page").closest(g.settingWrap)["message-redirect-page"==e||"redirect-page"==e?"qfbSlideShow":"qfbSlideHide"](),b.get("#qfb_confirmation_redirect_url").closest(g.settingWrap)["message-redirect-url"==e||"redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),b.get("#qfb_confirmation_redirect_query").closest(g.settingWrap)["message-redirect-page"==e||"message-redirect-url"==e||"redirect-page"==e||"redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),b.get("#qfb_confirmation_redirect_delay").closest(g.settingWrap)["message-redirect-page"==e||"message-redirect-url"==e?"qfbSlideShow":"qfbSlideHide"](),b.get("#qfb_notification_reset_form").closest(g.settingWrap)["message"==e?"qfbSlideShow":"qfbSlideHide"]()}),n("#qfb-add-confirmation-logic-rule").click(function(){b.get("#qfb-confirmation-logic").find(".qfb-no-logic-rules").remove(),b.get("#qfb-confirmation-logic").find(".qfb-logic-rules").append(a.logic.buildLogicRule(a.logic.getNewLogicRule()))}),n.fn.select2&&b.get("#qfb_confirmation_redirect_page").select2({theme:"qfb",language:{noResults:function(){return r.noResultsFound}}}),a.setupContainerTooltips(b.get("#qfb-confirmation-settings-inner"))},showSettings:function(e){var t=f.getConfirmationById(e);null===t&&(t=n.extend(!0,{},c.confirmation)),f.editing=t,f.loadSettings(),n("body").css({overflow:"hidden"}),b.get("#qfb-confirmation-settings").show(),b.get("#qfb-confirmation-settings-inner").scrollTop(0)},loadSettings:function(){var e=f.editing;if(b.get("#qfb-confirmation-settings").find(".qfb-setting").hide(),b.get("#qfb_confirmation_name").val(f.getValue(e,"name")).closest(g.settingWrap).show(),b.get("#qfb_confirmation_enabled").prop("checked",f.getValue(e,"enabled")),g.setSelectVal(b.get("#qfb_confirmation_type"),f.getValue(e,"type")).closest(g.settingWrap).show(),b.get("#qfb_confirmation_message").val(f.getValue(e,"message")),window.tinymce){var t=window.tinymce.get("qfb_confirmation_message");t&&!t.isHidden()&&(t.load(),t.iframeElement&&n(t.iframeElement).height()<100&&t.theme&&t.theme.resizeTo&&t.theme.resizeTo(null,300)),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_confirmation_message",window.getUserSetting("editor")||"tmce")}b.get("#qfb_confirmation_message_auto_format").prop("checked",f.getValue(e,"messageAutoFormat")),a.loadIconOption(b.get("#qfb_confirmation_message_icon"),f.getValue(e,"messageIcon")),g.setSelectVal(b.get("#qfb_confirmation_message_position"),f.getValue(e,"messagePosition")),b.get("#qfb_confirmation_message_timeout").val(f.getValue(e,"messageTimeout")),g.setSelectVal(b.get("#qfb_confirmation_redirect_page"),f.getValue(e,"redirectPage")).trigger("change.select2"),b.get("#qfb_confirmation_redirect_url").val(f.getValue(e,"redirectUrl")),b.get("#qfb_confirmation_redirect_query").val(f.getValue(e,"redirectQuery")),b.get("#qfb_confirmation_redirect_delay").val(f.getValue(e,"redirectDelay")),1!==e.id&&(b.get("#qfb_confirmation_enabled").closest(g.settingWrap).show(),a.logic.buildLogic([],[{text:c.useThisConfirmationIfAll,value:"all",selected:"all"==f.getValue(e,"logicMatch")},{text:c.useThisConfirmationIfAny,value:"any",selected:"any"==f.getValue(e,"logicMatch")}],f.getValue(e,"logicRules"),b.get("#qfb-confirmation-logic")),b.get("#qfb-confirmation-logic").closest(g.settingWrap).show()),b.get("#qfb_confirmation_hide_form").prop("checked",f.getValue(e,"hideForm")),g.setSelectVal(b.get("#qfb_notification_reset_form"),f.getValue(e,"resetForm")),"undefined"!=typeof e.id?b.get("#qfb-confirmation-unique-id").val(a.form.id+"_"+e.id).closest(g.settingWrap).show():b.get("#qfb-confirmation-unique-id").val(""),"message"!=e.type&&"message-redirect-page"!=e.type&&"message-redirect-url"!=e.type||b.get("#qfb_confirmation_message").add(b.get("#qfb_confirmation_message_auto_format")).add(b.get("#qfb_confirmation_message_icon")).add(b.get("#qfb_confirmation_message_position")).add(b.get("#qfb_confirmation_message_timeout")).add(b.get("#qfb_confirmation_hide_form")).closest(g.settingWrap).show(),"message-redirect-page"!=e.type&&"redirect-page"!=e.type||b.get("#qfb_confirmation_redirect_page").closest(g.settingWrap).show(),"message-redirect-url"!=e.type&&"redirect-url"!=e.type||b.get("#qfb_confirmation_redirect_url").closest(g.settingWrap).show(),"message-redirect-page"!=e.type&&"message-redirect-url"!=e.type&&"redirect-page"!=e.type&&"redirect-url"!=e.type||b.get("#qfb_confirmation_redirect_query").closest(g.settingWrap).show(),"message-redirect-page"!=e.type&&"message-redirect-url"!=e.type||b.get("#qfb_confirmation_redirect_delay").closest(g.settingWrap).show(),"message"==e.type&&b.get("#qfb_notification_reset_form").closest(g.settingWrap).show()},updateConfirmationListing:function(e,t){e.find(".qfb-confirmation-name").text(t.name),f.setConfirmationDescription(e,t),e.find(".qfb-confirmation-toggle").prop("checked",t.enabled)},setConfirmationDescription:function(e,t){var i=n('<div class="qfb-settings-row">'),o=n('<div class="qfb-settings-column">').appendTo(i);switch(t.type){case"message":o.append(n('<i class="mdi mdi-message">').attr("title",c.displayAMessage),n('<span class="qfb-confirmation-description-message">').text(n("<div>").html(t.message).text().substr(0,64)));break;case"message-redirect-page":i.addClass("qfb-settings-row-2"),o.append(n('<i class="mdi mdi-message">').attr("title",c.displayAMessage),n('<span class="qfb-confirmation-description-message">').text(n("<div>").html(t.message).text().substr(0,64))),i.append(n('<div class="qfb-settings-column">').append(n('<i class="mdi mdi-arrow_forward">').attr("title",c.redirectTo),n('<span class="qfb-confirmation-description-redirect-page">').text(f.getPostTitle(t.redirectPage))));break;case"message-redirect-url":i.addClass("qfb-settings-row-2"),o.append(n('<i class="mdi mdi-message">').attr("title",c.displayAMessage),n('<span class="qfb-confirmation-description-message">').text(n("<div>").html(t.message).text().substr(0,64))),i.append(n('<div class="qfb-settings-column">').append(n('<i class="mdi mdi-arrow_forward">').attr("title",c.redirectTo),n('<span class="qfb-confirmation-description-redirect-url">').text(t.redirectUrl)));break;case"redirect-page":o.append(n('<i class="mdi mdi-arrow_forward">').attr("title",c.redirectTo),n('<span class="qfb-confirmation-description-redirect-page">').text(f.getPostTitle(t.redirectPage)));break;case"redirect-url":o.append(n('<i class="mdi mdi-arrow_forward">').attr("title",c.redirectTo),n('<span class="qfb-confirmation-description-redirect-url">').text(t.redirectUrl));break;case"reload":o.append(n('<i class="mdi mdi-refresh">').attr("title",c.reloadThePage))}e.find(".qfb-confirmation-description").html(i)},getPostTitle:function(e){var t,i;for(t=0,i=c.posts.length;t<i;t++)if(c.posts[t].id==e)return c.posts[t].title;return""},getConfirmationMessageHtml:function(){if(window.tinymce){var e=window.tinymce.get("qfb_confirmation_message");e&&!e.isHidden()&&e.isDirty()&&e.save()}return b.get("#qfb_confirmation_message").val()},saveSettings:function(){if(!f.validateSettings())return!1;var e,t=f.editing;return t.name=b.get("#qfb_confirmation_name").val(),t.enabled=b.get("#qfb_confirmation_enabled").is(":checked"),t.type=b.get("#qfb_confirmation_type").val(),t.message=f.getConfirmationMessageHtml(),t.messageAutoFormat=b.get("#qfb_confirmation_message_auto_format").is(":checked"),t.messageIcon=b.get("#qfb_confirmation_message_icon").val(),t.messagePosition=b.get("#qfb_confirmation_message_position").val(),t.messageTimeout=b.get("#qfb_confirmation_message_timeout").val(),t.redirectPage=b.get("#qfb_confirmation_redirect_page").val(),t.redirectUrl=b.get("#qfb_confirmation_redirect_url").val(),t.redirectQuery=b.get("#qfb_confirmation_redirect_query").val(),t.redirectDelay=b.get("#qfb_confirmation_redirect_delay").val(),1!==t.id&&(t.logicAction=!0,t.logicMatch=b.get("#qfb-confirmation-logic").find(".qfb-logic-match").val(),t.logicRules=a.logic.getLogicRules(b.get("#qfb-confirmation-logic"))),t.hideForm=b.get("#qfb_confirmation_hide_form").is(":checked"),t.resetForm=b.get("#qfb_notification_reset_form").val(),"undefined"==typeof t.id?(t.id=a.form.nextConfirmationId++,a.form.confirmations.push(t),(e=n(c.confirmationHtml)).data({id:t.id}),b.get("#qfb-confirmations").append(e.hide()),e.qfbSlideShow()):e=b.get("#qfb-confirmations").find(".qfb-confirmation").filter(function(){return n(this).data("id")===t.id}),f.updateConfirmationListing(e,t),!0},hideSettings:function(){f.editing=null,n(".qtip").hide(),n("body").css({overflow:""}),b.get("#qfb-confirmation-settings-inner").find(".qfb-validation-error").remove(),b.get("#qfb-confirmation-settings").hide()},validateSettings:function(){b.get("#qfb-confirmation-settings-inner").find(".qfb-validation-error").remove();var e=f.editing,t=[];g.isNonEmptyString(b.get("#qfb_confirmation_name").val())||t.push({scrollTarget:b.get("#qfb_confirmation_name").closest(g.settingWrap),show:function(){g.addValidationError(b.get("#qfb_confirmation_name").closest(g.settingInputWrap),r.thisFieldIsRequired)}});var i=b.get("#qfb_confirmation_type").val();if("message"==i||"message-redirect-page"==i||"message-redirect-url"==i){g.isNonEmptyString(f.getConfirmationMessageHtml())||t.push({scrollTarget:b.get("#qfb_confirmation_message").closest(g.settingWrap),show:function(){g.addValidationError(b.get("#qfb_confirmation_message").closest(g.settingInputWrap),r.thisFieldIsRequired)}});var o=b.get("#qfb_confirmation_message_timeout").val();(!g.isNonEmptyString(o)||!n.isNumeric(o)||o<0)&&t.push({scrollTarget:b.get("#qfb_confirmation_message_timeout").closest(g.settingWrap),show:function(){g.addValidationError(b.get("#qfb_confirmation_message_timeout").closest(g.settingInputWrap),c.thisFieldMustBePositiveNumberOrZero)}})}if("message-redirect-page"==i||"message-redirect-url"==i){var a=b.get("#qfb_confirmation_redirect_delay").val();(!g.isNonEmptyString(a)||!n.isNumeric(a)||a<0)&&t.push({scrollTarget:b.get("#qfb_confirmation_redirect_delay").closest(g.settingWrap),show:function(){g.addValidationError(b.get("#qfb_confirmation_redirect_delay").closest(g.settingInputWrap),c.thisFieldMustBePositiveNumberOrZero)}})}"redirect-page"!=i&&"message-redirect-page"!=i||g.isNonEmptyString(b.get("#qfb_confirmation_redirect_page").val())||t.push({scrollTarget:b.get("#qfb_confirmation_redirect_page").closest(g.settingWrap),show:function(){g.addValidationError(b.get("#qfb_confirmation_redirect_page").closest(g.settingInputWrap),r.thisFieldIsRequired)}}),"redirect-url"!=i&&"message-redirect-url"!=i||g.isNonEmptyString(b.get("#qfb_confirmation_redirect_url").val())||t.push({scrollTarget:b.get("#qfb_confirmation_redirect_url").closest(g.settingWrap),show:function(){g.addValidationError(b.get("#qfb_confirmation_redirect_url").closest(g.settingInputWrap),r.thisFieldIsRequired)}}),1===e.id||b.get("#qfb-confirmation-logic").find(".qfb-logic-rule").length||t.push({scrollTarget:b.get("#qfb-confirmation-logic").closest(g.settingWrap),show:function(){g.addValidationError(b.get("#qfb-confirmation-logic").closest(g.settingInputWrap),c.atLeastOneLogicRuleRequired)}});var l=0,s=t.length;if(0<s){for(;l<s;l++)t[l].show();g.scrollTo(t[0].scrollTarget,b.get("#qfb-confirmation-settings-inner"))}return 0===s},duplicate:function(e){var t=f.getConfirmationById(e);if(null!==t){var i=n.extend(!0,{},t,{id:a.form.nextConfirmationId++});a.form.confirmations.push(i);var o=n(c.confirmationHtml);o.data({id:i.id}),f.updateConfirmationListing(o,i),b.get("#qfb-confirmations").append(o.hide()),o.qfbSlideShow()}},getConfirmationById:function(e){if(!e)return null;for(var t=0;t<a.form.confirmations.length;t++)if(e==a.form.confirmations[t].id)return a.form.confirmations[t];return null},checkInvalidLogic:function(){for(var e=0;e<a.form.confirmations.length;e++)a.form.confirmations[e].logicRules=a.logic.removeInvalidLogicRules(a.form.confirmations[e].logicRules)},getValue:function(e,t){return g.getProperty(e,t,g.getProperty(c.confirmation,t))}},e.builder.confirmations=f,e}(quform=function(e,r,f,l){"use strict";var g,b=e.core,d=e.builder,_=b.cache;return g={editing:null,attachmentSources:[],init:function(){r("#qfb-add-notification").on("click",function(){g.showSettings()}),_.get("#qfb-notifications").on("click",".qfb-notification-action-toggle",function(){var e=r(this).closest(".qfb-notification"),t=g.getNotificationById(e.data("id"));t&&(t.enabled=e.find(".qfb-notification-toggle").is(":checked"))}),_.get("#qfb-notifications").on("click",".qfb-notification-action-settings",function(){g.showSettings(r(this).closest(".qfb-notification").data("id"))}),_.get("#qfb-notifications").on("click",".qfb-notification-action-duplicate",function(){g.duplicate(r(this).closest(".qfb-notification").data("id"))}),_.get("#qfb-notifications").on("click",".qfb-notification-action-remove",function(){if(confirm(f.notificationConfirmRemove)){var i=r(this).closest(".qfb-notification");i.qfbSlideHide(function(){for(var e=i.data("id"),t=d.form.notifications.length;t--;)d.form.notifications[t].id==e&&d.form.notifications.splice(t,1);i.remove(),0===_.get("#qfb-notifications").find(".qfb-notification").length&&r("#qfb-no-notifications").qfbSlideShow()})}}),_.get("#qfb-notification-settings").on("click",".qfb-popup-save-button",function(){g.saveSettings()&&g.hideSettings()}),_.get("#qfb-notification-settings").on("click",".qfb-popup-close-button",g.hideSettings),_.get("#qfb_notification_format").change(function(){var e=_.get("#qfb_notification_format").val();_.get("#qfb_notification_html").closest(b.settingWrap)["html"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"](),_.get("#qfb_notification_auto_format").closest(b.settingWrap)["html"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"](),_.get("#qfb_notification_padding").closest(b.settingWrap)["html"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"](),_.get("#qfb_notification_rtl").closest(b.settingWrap)["html"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"](),_.get("#qfb_notification_text").closest(b.settingWrap)["text"===e||"multipart"===e?"qfbSlideShow":"qfbSlideHide"]()}),r("#qfb-add-recipient").click(function(){_.get("#qfb-notification-recipients").append(g.getRecipientHtml()).find("> .qfb-validation-error").remove()}),_.get("#qfb-notification-settings").on("click",".qfb-recipient .qfb-small-remove-button",function(){g.deleteRecipient(r(this))}),_.get("#qfb-notification-settings").on("click",".qfb-recipient .qfb-small-add-button",function(){r(this).closest(".qfb-recipient").after(g.getRecipientHtml())}),r("#qfb_notification_logic_enabled").click(function(){_.get("#qfb-notification-logic").closest(b.settingWrap)[r(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),r("#qfb-add-notification-logic-rule").click(function(){_.get("#qfb-notification-logic").find(".qfb-no-logic-rules").remove(),_.get("#qfb-notification-logic").find(".qfb-logic-rules").append(d.logic.buildLogicRule(d.logic.getNewLogicRule()))}),r("#qfb_notification_conditionals").click(function(){_.get("#qfb-notification-conditionals-wrap").closest(b.settingWrap)[r(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),r("#qfb-add-conditional").click(function(){_.get("#qfb-notification-conditionals-wrap").find(".qfb-no-conditionals").remove(),_.get("#qfb-notification-conditionals-wrap").append(g.buildConditional(g.getNewConditional()))}),_.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-duplicate",function(){g.duplicateConditional(r(this).closest(".qfb-conditional"))}),_.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-delete",function(){confirm(f.areYouSure)&&(r(this).closest(".qfb-conditional").remove(),0===_.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").length&&d.buildMessageBox(f.noConditionals,"info","qfb-no-conditionals").hide().appendTo(_.get("#qfb-notification-conditionals-wrap")).fadeIn())}),_.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-add-recipient",function(){r(this).closest(".qfb-conditional").find(".qfb-conditional-recipients").append(g.getRecipientHtml()).find("> .qfb-validation-error").remove()}),_.get("#qfb-notification-conditionals-wrap").on("click",".qfb-conditional-add-logic-rule",function(){r(this).closest(".qfb-conditional").find(".qfb-no-logic-rules").remove(),r(this).closest(".qfb-conditional").find(".qfb-logic-rules").append(d.logic.buildLogicRule(d.logic.getNewLogicRule()))}),r("#qfb-add-notification-attachment").click(function(){_.get("#qfb-notification-attachments-wrap").find(".qfb-no-attachments").remove(),g.addAttachment(g.getNewAttachment())}),_.get("#qfb-notification-attachments-wrap").on("click",".qfb-attachment-remove",function(){r(this).closest(".qfb-attachment").remove(),0===_.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").length&&d.buildMessageBox(f.noAttachments,"info","qfb-no-attachments").hide().appendTo(_.get("#qfb-notification-attachments-wrap")).fadeIn()}),_.get("#qfb-notification-attachments-wrap").on("change",".qfb-attachment-source",function(){var e=r(this),t=e.closest(".qfb-attachment"),i=t.find(".qfb-attachment-element").closest(b.subSettingWrap),o=t.find(".qfb-attachment-browse").closest(b.subSettingWrap);switch(e.val()){default:case"media":o.qfbSlideShow(),i.qfbSlideHide();break;case"element":o.qfbSlideHide(),i.qfbSlideShow()}}),_.get("#qfb-notification-attachments-wrap").on("click",".qfb-attachment-medium-remove",function(){r(this).closest(".qfb-attachment-medium").remove()}),d.setupContainerTooltips(_.get("#qfb-notification-settings-inner"))},showSettings:function(e){var t=g.getNotificationById(e);null===t&&(t=r.extend(!0,{},f.notification)),g.editing=t,g.loadSettings(),r("body").css({overflow:"hidden"}),_.get("#qfb-notification-settings").show(),_.get("#qfb-notification-settings-inner").scrollTop(0)},loadSettings:function(){var e,t,i=g.editing;if(_.get("#qfb-notification-settings").find(".qfb-setting").hide(),_.get("#qfb_notification_name").val(g.getValue(i,"name")).closest(b.settingWrap).show(),_.get("#qfb_notification_enabled").prop("checked",g.getValue(i,"enabled")).closest(b.settingWrap).show(),_.get("#qfb_notification_subject").val(g.getValue(i,"subject")).closest(b.settingWrap).show(),b.setSelectVal(_.get("#qfb_notification_format"),g.getValue(i,"format")).closest(b.settingWrap).show(),_.get("#qfb_notification_html").val(g.getValue(i,"html")),_.get("#qfb_notification_auto_format").prop("checked",g.getValue(i,"autoFormat")),_.get("#qfb_notification_padding").val(g.getValue(i,"padding")),_.get("#qfb_notification_rtl").val(g.getValue(i,"rtl")),_.get("#qfb_notification_text").val(g.getValue(i,"text")),window.tinymce){var o=window.tinymce.get("qfb_notification_html");o&&!o.isHidden()&&(o.load(),o.iframeElement&&r(o.iframeElement).height()<100&&o.theme&&o.theme.resizeTo&&o.theme.resizeTo(null,300)),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_notification_html",window.getUserSetting("editor")||"tmce")}var a=_.get("#qfb-notification-recipients").empty(),l=g.getValue(i,"recipients");for(e=0,t=l.length;e<t;e++)a.append(g.getRecipientHtml(l[e]));a.closest(b.settingWrap).show(),r("#qfb_notification_conditionals").prop("checked",g.getValue(i,"conditional")).closest(b.settingWrap).show(),_.get("#qfb-notification-conditionals-wrap").empty(),g.buildConditionals(g.getValue(i,"conditionals")),_.get("#qfb-notification-from").find(".qfb-recipient-address").val(g.getValue(i,"from.address")).closest(b.settingWrap).show(),_.get("#qfb-notification-from").find(".qfb-recipient-name").val(g.getValue(i,"from.name")),_.get("#qfb_notification_logic_enabled").prop("checked",g.getValue(i,"logicEnabled")).closest(b.settingWrap).show(),d.logic.buildLogic([{text:f.sendThisNotification,value:"1",selected:g.getValue(i,"logicAction")},{text:f.doNotSendThisNotification,value:"0",selected:!g.getValue(i,"logicAction")}],[{text:f.ifAllOfTheseRulesMatch,value:"all",selected:"all"===g.getValue(i,"logicMatch")},{text:f.ifAnyOfTheseRulesMatch,value:"any",selected:"any"===g.getValue(i,"logicMatch")}],g.getValue(i,"logicRules"),_.get("#qfb-notification-logic")),_.get("#qfb-notification-attachments-wrap").empty(),g.loadAttachments(g.getValue(i,"attachments")),_.get("#qfb-notification-attachments-wrap").closest(b.settingWrap).show(),"undefined"!=typeof i.id?r("#qfb-notification-unique-id").val(d.form.id+"_"+i.id).closest(b.settingWrap).show():r("#qfb-notification-unique-id").val("");var s=g.getValue(i,"format");"html"===s?_.get("#qfb_notification_html").add(_.get("#qfb_notification_auto_format")).add(_.get("#qfb_notification_padding")).add(_.get("#qfb_notification_rtl")).closest(b.settingWrap).show():("multipart"===s&&_.get("#qfb_notification_html").add(_.get("#qfb_notification_auto_format")).add(_.get("#qfb_notification_padding")).add(_.get("#qfb_notification_rtl")).closest(b.settingWrap).show(),_.get("#qfb_notification_text").closest(b.settingWrap).show()),g.getValue(i,"conditional")&&_.get("#qfb-notification-conditionals-wrap").closest(b.settingWrap).show(),g.getValue(i,"logicEnabled")&&_.get("#qfb-notification-logic").closest(b.settingWrap).show()},updateNotificationListing:function(e,t){e.find(".qfb-notification-name").text(t.name),e.find(".qfb-notification-subject-text").text(t.subject),e.find(".qfb-notification-toggle").prop("checked",t.enabled)},getNotificationHtml:function(){if(window.tinymce){var e=window.tinymce.get("qfb_notification_html");e&&!e.isHidden()&&e.isDirty()&&e.save()}return _.get("#qfb_notification_html").val()},saveSettings:function(){if(!g.validateSettings())return!1;var e,i=g.editing;return i.name=_.get("#qfb_notification_name").val(),i.enabled=_.get("#qfb_notification_enabled").is(":checked"),i.subject=_.get("#qfb_notification_subject").val(),i.format=_.get("#qfb_notification_format").val(),i.html=g.getNotificationHtml(),i.autoFormat=_.get("#qfb_notification_auto_format").is(":checked"),i.padding=_.get("#qfb_notification_padding").val(),i.rtl=_.get("#qfb_notification_rtl").val(),i.text=_.get("#qfb_notification_text").val(),i.recipients=[],_.get("#qfb-notification-recipients").find(".qfb-recipient").each(function(){i.recipients.push(g.getRecipientObjectFromValues(r(this)))}),i.conditional=r("#qfb_notification_conditionals").is(":checked"),i.conditionals=[],_.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").each(function(){i.conditionals.push(g.getConditionalObjectFromValues(r(this)))}),0===i.conditionals.length&&(i.conditional=!1),i.from={address:_.get("#qfb-notification-from").find(".qfb-recipient-address").val(),name:_.get("#qfb-notification-from").find(".qfb-recipient-name").val()},i.logicEnabled=_.get("#qfb_notification_logic_enabled").is(":checked"),i.logicAction="0"!==_.get("#qfb-notification-logic").find(".qfb-logic-action").val(),i.logicMatch=_.get("#qfb-notification-logic").find(".qfb-logic-match").val(),i.logicRules=d.logic.getLogicRules(_.get("#qfb-notification-logic")),i.attachments=[],_.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").each(function(){var e=r(this),t=g.getNewAttachment();t.source=e.find(".qfb-attachment-source").val(),"media"==t.source?e.find(".qfb-attachment-media .qfb-attachment-medium").each(function(){t.media.push(r(this).data("medium"))}):"element"==t.source&&(t.element=e.find(".qfb-attachment-element").val()),i.attachments.push(t)}),"undefined"==typeof i.id?(i.id=d.form.nextNotificationId++,d.form.notifications.push(i),(e=r(f.notificationHtml)).data({id:i.id}),_.get("#qfb-notifications").append(e.hide()),e.qfbSlideShow()):e=_.get("#qfb-notifications").find(".qfb-notification").filter(function(){return r(this).data("id")===i.id}),g.updateNotificationListing(e,i),!0},hideSettings:function(){0<_.get("#qfb-notifications").find(".qfb-notification").length&&r("#qfb-no-notifications").hide(),g.editing=null,r(".qtip").hide(),r("body").css({overflow:""}),_.get("#qfb-notification-settings-inner").find(".qfb-validation-error").remove(),_.get("#qfb-notification-settings").hide()},validateRecipient:function(e,t){var i=e.find(".qfb-recipient-address"),o=i.val(),a="";""===o?a=l.thisFieldIsRequired:b.isValidEmail(o)||"{"==o.charAt(0)&&"}"==o.charAt(o.length-1)?"{"==o.charAt(0)&&"}"==o.charAt(o.length-1)&&b.isValidEmail(o.slice(1,-1))&&(a=f.emailRemoveBrackets):a=l.invalidEmailAddress,a.length&&t.push({scrollTarget:i.closest(".qfb-recipient"),show:function(){b.addValidationError(i.closest(".qfb-settings-column"),a)}})},validateOneValidRecipient:function(e,t){var i=!1;e.find(".qfb-recipient").each(function(){var e=r(this).find(".qfb-recipient-type").val();"to"!=e&&"cc"!=e&&"bcc"!=e||(i=!0)}),i||t.push({scrollTarget:e,show:function(){b.addValidationError(e,f.atLeastOneToCcBccRequired)}})},validateSettings:function(){_.get("#qfb-notification-settings-inner").find(".qfb-validation-error").remove();var a=[];""===_.get("#qfb_notification_name").val()&&a.push({scrollTarget:_.get("#qfb_notification_name").closest(b.settingWrap),show:function(){b.addValidationError(_.get("#qfb_notification_name").closest(b.settingInputWrap),l.thisFieldIsRequired)}}),""===_.get("#qfb_notification_subject").val()&&a.push({scrollTarget:_.get("#qfb_notification_subject").closest(b.settingWrap),show:function(){b.addValidationError(_.get("#qfb_notification_subject").closest(b.settingInputWrap),l.thisFieldIsRequired)}}),"html"!=_.get("#qfb_notification_format").val()&&"multipart"!=_.get("#qfb_notification_format").val()||""!==g.getNotificationHtml()||a.push({scrollTarget:r("#wp-qfb_notification_html-wrap").closest(b.settingWrap),show:function(){b.addValidationError(_.get("#qfb_notification_html").closest(b.settingInputWrap),l.thisFieldIsRequired)}}),"text"!=_.get("#qfb_notification_format").val()&&"multipart"!=_.get("#qfb_notification_format").val()||""!==_.get("#qfb_notification_text").val()||a.push({scrollTarget:_.get("#qfb_notification_text").closest(b.settingWrap),show:function(){b.addValidationError(_.get("#qfb_notification_text").closest(b.settingInputWrap),l.thisFieldIsRequired)}}),_.get("#qfb-notification-recipients").find(".qfb-recipient").each(function(){g.validateRecipient(r(this),a)}),g.validateOneValidRecipient(_.get("#qfb-notification-recipients"),a),_.get("#qfb-notification-conditionals-wrap").find(".qfb-conditional").each(function(){var e=r(this);e.find(".qfb-recipient").each(function(){g.validateRecipient(r(this),a)}),g.validateOneValidRecipient(e.find(".qfb-conditional-recipients"),a)}),g.validateRecipient(_.get("#qfb-notification-from").find(".qfb-recipient"),a),_.get("#qfb-notification-attachments-wrap").find(".qfb-attachment").each(function(){var e=r(this),t=e.find(".qfb-attachment-source").val();if("media"==t){var i=e.find(".qfb-attachment-media");0===i.find(".qfb-attachment-medium").length&&a.push({scrollTarget:_.get("#qfb-notification-attachments-wrap"),show:function(){b.addValidationError(i.closest(b.subSettingInputWrap),f.selectOneFile)}})}else if("element"==t){var o=e.find(".qfb-attachment-element");""===o.val()&&a.push({scrollTarget:_.get("#qfb-notification-attachments-wrap"),show:function(){b.addValidationError(o.closest(b.subSettingInputWrap),l.thisFieldIsRequired)}})}});var e=0,t=a.length;if(0<t){for(;e<t;e++)a[e].show();b.scrollTo(a[0].scrollTarget,_.get("#qfb-notification-settings-inner"))}return 0===t},duplicate:function(e){var t=g.getNotificationById(e);if(null!==t){var i=r.extend(!0,{},t,{id:d.form.nextNotificationId++});d.form.notifications.push(i);var o=r(f.notificationHtml);o.data({id:i.id}),g.updateNotificationListing(o,i),_.get("#qfb-notifications").append(o.hide()),o.qfbSlideShow()}},getNotificationById:function(e){if(!e)return null;for(var t=0;t<d.form.notifications.length;t++)if(e==d.form.notifications[t].id)return d.form.notifications[t];return null},getRecipientHtml:function(e){void 0===e&&(e={type:"to",address:"",name:""});var t=r(f.recipientHtml),i=d.uniqid("qfb-"),o=d.uniqid("qfb-");return b.setSelectVal(t.find(".qfb-recipient-type"),e.type),t.find(".qfb-recipient-address").val(e.address).attr("id",i).siblings(".qfb-insert-variable").data("target-id",i),t.find(".qfb-recipient-name").val(e.name).attr("id",o).siblings(".qfb-insert-variable").data("target-id",o),t},deleteRecipient:function(e){e.closest(".qfb-recipient").remove()},checkInvalidLogic:function(){for(var e=0;e<d.form.notifications.length;e++){for(var t=d.form.notifications[e],i=0;i<t.conditionals.length;i++)t.conditionals[i].logicRules=d.logic.removeInvalidLogicRules(t.conditionals[i].logicRules);t.logicRules=d.logic.removeInvalidLogicRules(t.logicRules)}},buildConditionals:function(e){var t=0,i=e.length;if(0<i)for(;t<i;t++)_.get("#qfb-notification-conditionals-wrap").append(g.buildConditional(e[t]));else _.get("#qfb-notification-conditionals-wrap").html(d.buildMessageBox(f.noConditionals,"info","qfb-no-conditionals"))},buildConditional:function(e){if("object"!=typeof e)return null;var t=r('<div class="qfb-conditional qfb-box">');t.append(r('<div class="qfb-conditional-top">').append(r('<span class="qfb-mini-button qfb-button-green qfb-conditional-add-recipient">').text(f.addRecipient).prepend('<i class="mdi mdi-add_circle_outline">'),r('<span class="qfb-conditional-duplicate">').append('<i class="mdi mdi-content_copy">'),r('<span class="qfb-conditional-delete fa fa-trash">')));for(var i=r('<div class="qfb-conditional-recipients qfb-cf">'),o=0;o<e.recipients.length;o++)i.append(g.getRecipientHtml(e.recipients[o]));t.append(i);var a=r('<div class="qfb-logic qfb-cf">');if(t.append(a),0<d.logic.sources.length){var l=r('<div class="qfb-logic-top qfb-cf">'),s=r('<select class="qfb-logic-match">');s.append(r("<option>",{text:f.sendToTheseRecipientsIfAll,value:"all"})),s.append(r("<option>",{text:f.sendToTheseRecipientsIfAny,value:"any"})),l.append(s,r('<span class="qfb-button-green qfb-conditional-add-logic-rule">').text(f.addLogicRule).prepend('<i class="mdi mdi-add_circle_outline">')),a.append(l),b.setSelectVal(s,e.logicMatch);var n=r('<div class="qfb-logic-rules qfb-cf">');if(e.logicRules.length)for(var c=0;c<e.logicRules.length;c++)n.append(d.logic.buildLogicRule(e.logicRules[c]));else n.append(d.logic.getNoLogicRulesMessage());a.append(n)}else a.html(d.buildMessageBox(f.noLogicElements,"warning"));return t},getNewConditional:function(){return{recipients:[{type:"to",address:"",name:""}],logicAction:!0,logicMatch:"all",logicRules:[]}},getConditionalObjectFromValues:function(e){var t={recipients:[]};return e.find(".qfb-conditional-recipients").find(".qfb-recipient").each(function(){t.recipients.push(g.getRecipientObjectFromValues(r(this)))}),t.logicAction=!0,t.logicMatch=e.find(".qfb-logic-match").val(),t.logicRules=[],e.find(".qfb-logic-rule").each(function(){t.logicRules.push(d.logic.getLogicRuleObjectFromValues(r(this)))}),t},getRecipientObjectFromValues:function(e){return{type:e.find(".qfb-recipient-type").val(),address:e.find(".qfb-recipient-address").val(),name:e.find(".qfb-recipient-name").val()}},duplicateConditional:function(e){e.after(g.buildConditional(g.getConditionalObjectFromValues(e)))},getNewAttachment:function(){return{source:"media",element:"",media:[]}},getAttachmentMediumHtml:function(e){var t=r('<div class="qfb-attachment-medium qfb-box">').data("medium",e);return e.icon&&t.append(r('<span class="qfb-attachment-medium-icon">').append(r("<img>").attr("src",e.icon))),t.append(r('<span class="qfb-attachment-medium-name">').text(e.filename)),t.append(r('<span class="qfb-attachment-medium-filesize">').text(e.filesizeHumanReadable)),t.append(r('<span class="qfb-attachment-medium-remove fa fa-trash"></span>').attr("title",f.remove)),t},addAttachment:function(e){var t=r(f.attachmentHtml),i=t.find(".qfb-attachment-source"),o=t.find(".qfb-attachment-browse").closest(b.subSettingWrap),a=t.find(".qfb-attachment-element"),l=a.closest(b.subSettingWrap),s=t.find(".qfb-attachment-media");if(a.append(r("<option>",{text:f.selectElement,value:""})),g.attachmentSources.length)for(var n=0,c=g.attachmentSources.length;n<c;n++)a.append(r("<option>",{text:d.elements.getShortenedAdminLabel(g.attachmentSources[n]),value:g.attachmentSources[n].id}));else a.append(r("<option>",{text:f.noAttachmentSourcesFound,value:"",disabled:!0}));switch(r.each(e.media,function(e,t){s.append(g.getAttachmentMediumHtml(t))}),e.source){default:case"media":o.show(),l.hide();break;case"element":o.hide(),l.show()}b.setSelectVal(i,e.source),b.setSelectVal(a,e.element),t.find(".qfb-attachment-browse").qfbMediaBrowser({mediaOptions:{title:f.selectFiles,multiple:!0},callback:function(e){var t=e.toJSON(),o=[];r.each(t,function(e,t){var i={id:t.id,filename:t.filename,filesizeHumanReadable:t.filesizeHumanReadable,icon:t.icon};o.push(g.getAttachmentMediumHtml(i))}),o.length&&s.append(o)}}),_.get("#qfb-notification-attachments-wrap").append(t)},addAttachmentSource:function(e){-1!==r.inArray(e.type,f.attachmentSourceTypes)&&g.attachmentSources.push(e)},removeAttachmentSource:function(e){for(var t=g.attachmentSources.length;t--;)g.attachmentSources[t].id==e.id&&g.attachmentSources.splice(t,1)},loadAttachments:function(e){var t=0,i=e.length;if(0<i)for(;t<i;t++)g.addAttachment(e[t]);else _.get("#qfb-notification-attachments-wrap").html(d.buildMessageBox(f.noAttachments,"info","qfb-no-attachments"))},checkInvalidAttachments:function(){for(var e=0;e<d.form.notifications.length;e++)for(var t=d.form.notifications[e].attachments,i=t.length;i--;){var o=t[i];if("element"==o.source)null===d.elements.getElementById(o.element)&&t.splice(i,1)}},getValue:function(e,t){return b.getProperty(e,t,b.getProperty(f.notification,t))}},e.builder.notifications=g,e}(quform=function(e,s,n,t){"use strict";var c,r=e.core,f=e.builder,g=r.cache;return c={onWindowLoad:function(){g.get("#qfb-add-style").click(function(){c.addStyle({type:"",css:""})}),g.get("#qfb-styles").on("click",".qfb-style-action-settings",function(){var e=s(this).closest(".qfb-style"),t=g.get("#qfb-style-settings").closest(".qfb-style");t.length?t[0]===e[0]?(c.saveStyleSettings(e),c.hideStyleSettings(e)):(c.saveStyleSettings(t),c.hideStyleSettings(t,!0,function(){c.showStyleSettings(e)})):c.showStyleSettings(e)}),g.get("#qfb-styles").on("click",".qfb-style-action-remove",function(){var e=s(this).closest(".qfb-style");g.get("#qfb-style-settings").closest(".qfb-style")[0]===e[0]?c.hideStyleSettings(e,!0,function(){c.removeStyle(e)}):c.removeStyle(e)}),g.get("#qfb_style_type").on("change",function(){var e="",t=g.get("#qfb_style_type").val();r.isNonEmptyString(t)&&n.styles[t]&&(e=n.styles[t].name),g.get("#qfb_style_type").closest(".qfb-style").find(".qfb-style-title").text(e)}),g.get("#qfb-add-global-style").click(function(){c.addGlobalStyle({type:"",css:""})}),g.get("#qfb-global-styles").on("click",".qfb-global-style-action-settings",function(){var e=s(this).closest(".qfb-global-style"),t=g.get("#qfb-global-style-settings").closest(".qfb-global-style");t.length?t[0]===e[0]?(c.saveGlobalStyleSettings(e),c.hideGlobalStyleSettings(e)):(c.saveGlobalStyleSettings(t),c.hideGlobalStyleSettings(t,function(){c.showGlobalStyleSettings(e)})):c.showGlobalStyleSettings(e)}),g.get("#qfb-global-styles").on("click",".qfb-global-style-action-remove",function(){var e=s(this).closest(".qfb-global-style");g.get("#qfb-global-style-settings").closest(".qfb-global-style")[0]===e[0]?c.hideGlobalStyleSettings(e,function(){c.removeGlobalStyle(e)}):c.removeGlobalStyle(e)}),g.get("#qfb_global_style_type").on("change",function(){var e="",t=g.get("#qfb_global_style_type").val();r.isNonEmptyString(t)&&n.globalStyles[t]&&(e=n.globalStyles[t].name),g.get("#qfb_global_style_type").closest(".qfb-global-style").find(".qfb-global-style-title").text(e)}),s.fn.select2&&g.get("#qfb_style_type").add(g.get("#qfb_global_style_type")).select2({theme:"qfb",language:{noResults:function(){return t.noResultsFound}}}),g.get(".qfb-css-helper").click(function(){var e=s(this),t=e.closest(r.settingWrap).find("textarea"),i=e.data("css");t.length&&r.isNonEmptyString(i)&&(r.isNonEmptyString(t.val())&&(i="\n"+i),f.insertAtCursor(t[0],i))})},getStyleHtml:function(e){var t=s(n.styleHtml);return t.data("style",e),r.isNonEmptyString(e.type)&&n.styles[e.type]&&t.find(".qfb-style-title").text(n.styles[e.type].name),t},loadStyles:function(){var e=f.elements.editing,t=0,i=(e.styles||[]).length,o=n.visibleStyles[e.type]||[];if(g.get("#qfb-styles").empty(),0===i)g.get("#qfb-styles-empty").show();else{g.get("#qfb-styles-empty").hide();for(var a=[];t<i;t++)a.push(c.getStyleHtml(e.styles[t]));g.get("#qfb-styles").append(a)}var l=[s("<option>",{value:"",text:n.pleaseSelect})];_.each(n.styles,function(e,t){-1!==s.inArray(t,o)&&l.push(s("<option>",{value:t,text:e.name}))}),g.get("#qfb_style_type").html(l).trigger("change.select2"),l.length&&g.get("#qfb-styles").add("#qfb_style_type").add("#qfb_style_css").closest(r.settingWrap).show()},addStyle:function(e){var t=c.getStyleHtml(e);g.get("#qfb-styles-empty").qfbSlideHide(function(){var e=g.get("#qfb-style-settings").closest(".qfb-style");e.length?(c.saveStyleSettings(e),c.hideStyleSettings(e,!0,function(){t.hide().appendTo(g.get("#qfb-styles")).qfbSlideShow(function(){c.showStyleSettings(t)})})):t.hide().appendTo(g.get("#qfb-styles")).qfbSlideShow(function(){c.showStyleSettings(t)})})},showStyleSettings:function(e){e.append(g.get("#qfb-style-settings").hide()),c.loadStyleSettings(e),g.get("#qfb-style-settings").qfbSlideShow()},hideStyleSettings:function(e,t,i){var o=function(){c.resetStyleSettings(),s.isFunction(i)&&i()};!1===t?o():g.get("#qfb-style-settings").qfbSlideHide(o)},loadStyleSettings:function(e){var t=e.data("style");r.setSelectVal(g.get("#qfb_style_type"),r.getProperty(t,"type","")).trigger("change.select2"),g.get("#qfb_style_css").val(r.getProperty(t,"css","")),r.doAction("loadStyleSettings",t,e)},saveStyleSettings:function(e){var t=e.data("style");t.type=g.get("#qfb_style_type").val(),t.css=g.get("#qfb_style_css").val(),r.doAction("saveStyleSettings",t,e)},removeStyle:function(e){e.qfbSlideHide(function(){e.remove(),0===g.get("#qfb-styles").find(".qfb-style").length&&g.get("#qfb-styles-empty").qfbSlideShow()})},saveStyles:function(){var e=f.elements.editing,t=g.get("#qfb-style-settings").closest(".qfb-style");t.length&&(c.saveStyleSettings(t),c.hideStyleSettings(t,!1)),e.styles=[],g.get("#qfb-styles").find(".qfb-style").each(function(){e.styles.push(s(this).data("style"))})},resetStyleSettings:function(){g.get("#qfb-style-settings").hide().prependTo(g.get("#qfb-styles").parent())},getGlobalStyleHtml:function(e){var t=s(n.globalStyleHtml);return t.data("style",e),r.isNonEmptyString(e.type)&&n.globalStyles[e.type]&&t.find(".qfb-global-style-title").text(n.globalStyles[e.type].name),t},addGlobalStyle:function(e){var t=c.getGlobalStyleHtml(e);g.get("#qfb-global-styles-empty").qfbSlideHide(function(){var e=g.get("#qfb-global-style-settings").closest(".qfb-global-style");e.length?(c.saveGlobalStyleSettings(e),c.hideGlobalStyleSettings(e,function(){t.hide().appendTo(g.get("#qfb-global-styles")).qfbSlideShow(function(){c.showGlobalStyleSettings(t)})})):t.hide().appendTo(g.get("#qfb-global-styles")).qfbSlideShow(function(){c.showGlobalStyleSettings(t)})})},showGlobalStyleSettings:function(e){e.append(g.get("#qfb-global-style-settings").hide()),c.loadGlobalStyleSettings(e),g.get("#qfb-global-style-settings").qfbSlideShow()},hideGlobalStyleSettings:function(e,t){g.get("#qfb-global-style-settings").qfbSlideHide(function(){g.get("#qfb-global-style-settings").hide().prependTo(g.get("#qfb-global-styles").parent()),s.isFunction(t)&&t()})},loadGlobalStyleSettings:function(e){var t=e.data("style");r.setSelectVal(g.get("#qfb_global_style_type"),r.getProperty(t,"type","")).trigger("change.select2"),g.get("#qfb_global_style_css").val(r.getProperty(t,"css","")),r.doAction("loadGlobalStyleSettings",t,e)},saveGlobalStyleSettings:function(e){var t=e.data("style");t.type=g.get("#qfb_global_style_type").val(),t.css=g.get("#qfb_global_style_css").val(),r.doAction("saveGlobalStyleSettings",t,e)},removeGlobalStyle:function(e){e.qfbSlideHide(function(){e.remove(),0===g.get("#qfb-global-styles").find(".qfb-global-style").length&&g.get("#qfb-global-styles-empty").qfbSlideShow()})},updateGlobalStyles:function(){var e=g.get("#qfb-global-style-settings").closest(".qfb-global-style");e.length&&c.saveGlobalStyleSettings(e),f.form.styles=[],g.get("#qfb-global-styles").find(".qfb-global-style").each(function(){f.form.styles.push(s(this).data("style"))})}},e.builder.styles=c,e}(quform=function(e,l,s){"use strict";var n,c=e.core,r=e.builder,f=c.cache;return n={init:function(){f.get("#qfb-validators").on("click",".qfb-validator-action-settings",function(){var e=l(this).closest(".qfb-validator"),t=f.get("#qfb-validator-settings").closest(".qfb-validator");t.length?t[0]===e[0]?(n.saveValidatorSettings(e),n.hideValidatorSettings(e)):(n.saveValidatorSettings(t),n.hideValidatorSettings(t,!0,function(){n.showValidatorSettings(e)})):n.showValidatorSettings(e)}),f.get("#qfb-validators").on("click",".qfb-validator-action-remove",function(){var e=l(this).closest(".qfb-validator");f.get("#qfb-validator-settings").closest(".qfb-validator")[0]===e[0]?n.hideValidatorSettings(e,!0,function(){n.removeValidator(e)}):n.removeValidator(e)}),f.get(".qfb-add-validator").click(function(){var e=l(this).data("type");c.isNonEmptyString(e)&&s.validators[e]&&s.validators[e].config&&(l(".qtip").hide(),n.addValidator(l.extend(!0,{},s.validators[e].config)))})},getValidatorHtml:function(e){var t=l(s.validatorHtml);return t.data("validator",e).find(".qfb-validator-title").text(s.validators[e.type].name),t},loadValidators:function(){var e=r.elements.editing,t=0,i=(r.elements.getValue(e,"validators")||[]).length,o=s.visibleValidators[e.type]||[];if(f.get(".qfb-add-validator").hide(),f.get("#qfb-validators").empty(),0===i)f.get("#qfb-validators-empty").show();else{f.get("#qfb-validators-empty").hide();for(var a=[];t<i;t++)a.push(n.getValidatorHtml(e.validators[t]));f.get("#qfb-validators").append(a)}0<f.get(".qfb-add-validator").filter(function(){return-1!==l.inArray(l(this).data("type"),o)}).show().length?f.get("#qfb-validators").closest(c.settingWrap).show():f.get("#qfb-validators").closest(c.settingWrap).hide()},addValidator:function(e){var t=n.getValidatorHtml(e);f.get("#qfb-validators-empty").qfbSlideHide(function(){t.hide().appendTo(f.get("#qfb-validators")).qfbSlideShow()})},showValidatorSettings:function(e){e.append(f.get("#qfb-validator-settings").hide()),n.loadValidatorSettings(e),f.get("#qfb-validator-settings").qfbSlideShow()},hideValidatorSettings:function(e,t,i){var o=function(){f.get("#qfb-validator-settings").prependTo(f.get("#qfb-validators").parent()),l.isFunction(i)&&i()};!1===t?(f.get("#qfb-validator-settings").hide(),o()):f.get("#qfb-validator-settings").qfbSlideHide(o)},loadValidatorSettings:function(e){var t=e.data("validator");switch(f.get("#qfb-validator-settings").find(".qfb-setting").hide(),t.type){case"alpha":l("#qfb_v_allow_white_space").prop("checked",n.getValue(t,"allowWhiteSpace")).closest(c.settingWrap).show(),l("#qfb_v_message_notAlpha").val(n.getValue(t,"messages.notAlpha")).closest(c.settingWrap).show();break;case"alphaNumeric":l("#qfb_v_allow_white_space").prop("checked",n.getValue(t,"allowWhiteSpace")).closest(c.settingWrap).show(),l("#qfb_v_message_notAlphaNumeric").val(n.getValue(t,"messages.notAlphaNumeric")).closest(c.settingWrap).show();break;case"digits":l("#qfb_v_allow_white_space").prop("checked",n.getValue(t,"allowWhiteSpace")).closest(c.settingWrap).show(),l("#qfb_v_message_notDigits").val(n.getValue(t,"messages.notDigits")).closest(c.settingWrap).show();break;case"duplicate":l("#qfb_v_message_isDuplicate").val(n.getValue(t,"messages.isDuplicate")).closest(c.settingWrap).show();break;case"email":l("#qfb_v_message_emailAddressInvalidFormat").val(n.getValue(t,"messages.emailAddressInvalidFormat")).closest(c.settingWrap).show();break;case"greaterThan":l("#qfb_v_greater_than_min").val(n.getValue(t,"min")).closest(c.settingWrap).show(),l("#qfb_v_greater_than_inclusive").prop("checked",n.getValue(t,"inclusive")).closest(c.settingWrap).show(),l("#qfb_v_message_notGreaterThan").val(n.getValue(t,"messages.notGreaterThan")).closest(c.settingWrap).show(),l("#qfb_v_message_notGreaterThanInclusive").val(n.getValue(t,"messages.notGreaterThanInclusive")).closest(c.settingWrap).show();break;case"identical":l("#qfb_v_token").val(n.getValue(t,"token")).closest(c.settingWrap).show(),l("#qfb_v_message_notSame").val(n.getValue(t,"messages.notSame")).closest(c.settingWrap).show();break;case"inArray":l("#qfb_v_haystack").val(n.getValue(t,"haystack").join("\n")).closest(c.settingWrap).show(),l("#qfb_v_in_array_invert").prop("checked",n.getValue(t,"invert")).closest(c.settingWrap).show(),l("#qfb_v_message_notInArray").val(n.getValue(t,"messages.notInArray")).closest(c.settingWrap).show();break;case"length":l("#qfb_v_length_min").val(n.getValue(t,"min")).closest(c.settingWrap).show(),l("#qfb_v_length_max").val(n.getValue(t,"max")).closest(c.settingWrap).show(),l("#qfb_v_message_lengthTooShort").val(n.getValue(t,"messages.lengthTooShort")).closest(c.settingWrap).show(),l("#qfb_v_message_lengthTooLong").val(n.getValue(t,"messages.lengthTooLong")).closest(c.settingWrap).show();break;case"lessThan":l("#qfb_v_less_than_max").val(n.getValue(t,"max")).closest(c.settingWrap).show(),l("#qfb_v_less_than_inclusive").prop("checked",n.getValue(t,"inclusive")).closest(c.settingWrap).show(),l("#qfb_v_message_notLessThan").val(n.getValue(t,"messages.notLessThan")).closest(c.settingWrap).show(),l("#qfb_v_message_notLessThanInclusive").val(n.getValue(t,"messages.notLessThanInclusive")).closest(c.settingWrap).show();break;case"regex":l("#qfb_v_pattern").val(n.getValue(t,"pattern")).closest(c.settingWrap).show(),l("#qfb_v_invert").prop("checked",n.getValue(t,"invert")).closest(c.settingWrap).show(),l("#qfb_v_message_regexNotMatch").val(n.getValue(t,"messages.regexNotMatch")).closest(c.settingWrap).show()}l("#qfb-v-error-message-headings").show(),c.doAction("loadValidatorSettings",t,e)},saveValidatorSettings:function(e){var t=e.data("validator");switch(t.type){case"alpha":t.allowWhiteSpace=l("#qfb_v_allow_white_space").is(":checked"),t.messages={notAlpha:l("#qfb_v_message_notAlpha").val()};break;case"alphaNumeric":t.allowWhiteSpace=l("#qfb_v_allow_white_space").is(":checked"),t.messages={notAlphaNumeric:l("#qfb_v_message_notAlphaNumeric").val()};break;case"digits":t.allowWhiteSpace=l("#qfb_v_allow_white_space").is(":checked"),t.messages={notDigits:l("#qfb_v_message_notDigits").val()};break;case"duplicate":t.messages={isDuplicate:l("#qfb_v_message_isDuplicate").val()};break;case"email":t.messages={emailAddressInvalidFormat:l("#qfb_v_message_emailAddressInvalidFormat").val()};break;case"greaterThan":t.min=l("#qfb_v_greater_than_min").val(),t.inclusive=l("#qfb_v_greater_than_inclusive").is(":checked"),t.messages={notGreaterThan:l("#qfb_v_message_notGreaterThan").val(),notGreaterThanInclusive:l("#qfb_v_message_notGreaterThanInclusive").val()};break;case"identical":t.token=l("#qfb_v_token").val(),t.messages={notSame:l("#qfb_v_message_notSame").val()};break;case"inArray":t.haystack=l("#qfb_v_haystack").val().split("\n"),t.invert=l("#qfb_v_in_array_invert").is(":checked"),t.messages={notInArray:l("#qfb_v_message_notInArray").val()};break;case"length":t.min=l("#qfb_v_length_min").val(),t.max=l("#qfb_v_length_max").val(),t.messages={lengthTooShort:l("#qfb_v_message_lengthTooShort").val(),lengthTooLong:l("#qfb_v_message_lengthTooLong").val()};break;case"lessThan":t.max=l("#qfb_v_less_than_max").val(),t.inclusive=l("#qfb_v_less_than_inclusive").is(":checked"),t.messages={notLessThan:l("#qfb_v_message_notLessThan").val(),notLessThanInclusive:l("#qfb_v_message_notLessThanInclusive").val()};break;case"regex":t.pattern=l("#qfb_v_pattern").val(),t.invert=l("#qfb_v_invert").is(":checked"),t.messages={regexNotMatch:l("#qfb_v_message_regexNotMatch").val()}}c.doAction("saveValidatorSettings",t,e)},removeValidator:function(e){e.qfbSlideHide(function(){e.remove(),0===f.get("#qfb-validators").find(".qfb-validator").length&&f.get("#qfb-validators-empty").qfbSlideShow()})},saveValidators:function(){var e=r.elements.editing,t=f.get("#qfb-validator-settings").closest(".qfb-validator");t.length&&(n.saveValidatorSettings(t),n.hideValidatorSettings(t,!1)),e.validators=[],f.get("#qfb-validators").find(".qfb-validator").each(function(){e.validators.push(l(this).data("validator"))})},resetValidatorSettings:function(){f.get("#qfb-validator-settings").hide().prependTo(f.get("#qfb-validators").parent())},getValue:function(e,t){return c.getProperty(e,t,c.getProperty(s.validators[e.type].config,t))}},e.builder.validators=n,e}(quform=function(e,l,s){"use strict";var n,c=e.core,r=e.builder,f=c.cache;return n={init:function(){f.get("#qfb-filters").on("click",".qfb-filter-action-settings",function(){var e=l(this).closest(".qfb-filter"),t=f.get("#qfb-filter-settings").closest(".qfb-filter");t.length?t[0]===e[0]?(n.saveFilterSettings(e),n.hideFilterSettings(e)):(n.saveFilterSettings(t),n.hideFilterSettings(t,!0,function(){n.showFilterSettings(e)})):n.showFilterSettings(e)}),f.get("#qfb-filters").on("click",".qfb-filter-action-remove",function(){var e=l(this).closest(".qfb-filter");f.get("#qfb-filter-settings").closest(".qfb-filter")[0]===e[0]?n.hideFilterSettings(e,!0,function(){n.removeFilter(e)}):n.removeFilter(e)}),f.get(".qfb-add-filter").click(function(){var e=l(this).data("type");c.isNonEmptyString(e)&&s.filters[e]&&s.filters[e].config&&(l(".qtip").hide(),n.addFilter(l.extend(!0,{},s.filters[e].config)))})},getFilterHtml:function(e){var t=l(s.filterHtml);return t.data("filter",e).find(".qfb-filter-title").text(s.filters[e.type].name),"trim"==e.type&&t.find(".qfb-filter-action-settings").hide(),t},loadFilters:function(){var e=r.elements.editing,t=0,i=(r.elements.getValue(e,"filters")||[]).length,o=s.visibleFilters[e.type]||[];if(f.get(".qfb-add-filter").hide(),f.get("#qfb-filters").empty(),0===i)f.get("#qfb-filters-empty").show();else{f.get("#qfb-filters-empty").hide();for(var a=[];t<i;t++)a.push(n.getFilterHtml(e.filters[t]));f.get("#qfb-filters").append(a)}0<f.get(".qfb-add-filter").filter(function(){return-1!==l.inArray(l(this).data("type"),o)}).show().length?f.get("#qfb-filters").closest(c.settingWrap).show():f.get("#qfb-filters").closest(c.settingWrap).hide()},addFilter:function(e){var t=n.getFilterHtml(e);f.get("#qfb-filters-empty").qfbSlideHide(function(){t.hide().appendTo(f.get("#qfb-filters")).qfbSlideShow()})},showFilterSettings:function(e){e.append(f.get("#qfb-filter-settings").hide()),n.loadFilterSettings(e),f.get("#qfb-filter-settings").qfbSlideShow()},hideFilterSettings:function(e,t,i){var o=function(){f.get("#qfb-filter-settings").prependTo(f.get("#qfb-filters").parent()),l.isFunction(i)&&i()};!1===t?(f.get("#qfb-filter-settings").hide(),o()):f.get("#qfb-filter-settings").qfbSlideHide(o)},loadFilterSettings:function(e){var t=e.data("filter");switch(f.get("#qfb-filter-settings").find(".qfb-setting").hide(),t.type){case"alpha":case"alphaNumeric":case"digits":l("#qfb_f_allow_white_space").prop("checked",n.getValue(t,"allowWhiteSpace")).closest(c.settingWrap).show();break;case"stripTags":l("#qfb_f_allowable_tags").val(n.getValue(t,"allowableTags")).closest(c.settingWrap).show();break;case"regex":l("#qfb_f_pattern").val(n.getValue(t,"pattern")).closest(c.settingWrap).show()}c.doAction("loadFilterSettings",t,e)},saveFilterSettings:function(e){var t=e.data("filter");switch(t.type){case"alpha":case"alphaNumeric":case"digits":t.allowWhiteSpace=l("#qfb_f_allow_white_space").is(":checked");break;case"stripTags":t.allowableTags=l("#qfb_f_allowable_tags").val();break;case"regex":t.pattern=l("#qfb_f_pattern").val()}c.doAction("saveFilterSettings",t,e)},removeFilter:function(e){e.qfbSlideHide(function(){e.remove(),0===f.get("#qfb-filters").find(".qfb-filter").length&&f.get("#qfb-filters-empty").qfbSlideShow()})},saveFilters:function(){var e=r.elements.editing,t=f.get("#qfb-filter-settings").closest(".qfb-filter");t.length&&(n.saveFilterSettings(t),n.hideFilterSettings(t,!1)),e.filters=[],f.get("#qfb-filters").find(".qfb-filter").each(function(){e.filters.push(l(this).data("filter"))})},resetFilterSettings:function(){f.get("#qfb-filter-settings").hide().prependTo(f.get("#qfb-filters").parent())},getValue:function(e,t){return c.getProperty(e,t,c.getProperty(s.filters[e.type].config,t))}},e.builder.filters=n,e}(quform=function(e,b,d){"use strict";var _,n=e.core,p=e.builder;return _={sources:[],addSource:function(e){-1!==b.inArray(e.type,d.logicSourceTypes)&&_.sources.push(e)},removeSource:function(e){for(var t=_.sources.length;t--;)_.sources[t].id==e.id&&_.sources.splice(t,1)},buildLogic:function(e,t,i,o){if(0===p.logic.sources.length||1===p.logic.sources.length&&null!==p.elements.editing&&p.logic.sources[0].id==p.elements.editing.id)o.html(p.buildMessageBox(d.noLogicElements,"warning"));else{o.empty();var a=b('<div class="qfb-logic-top qfb-settings-row">'),l=b('<div class="qfb-settings-column">'),s=b('<div class="qfb-settings-column">');if(e.length){a.addClass("qfb-settings-row-2");for(var n=b('<select class="qfb-logic-action">'),c=0;c<e.length;c++)n.append(b("<option>",e[c]));a.append(l.append(n))}var r=b('<select class="qfb-logic-match">');for(c=0;c<t.length;c++)r.append(b("<option>",t[c]));a.append(s.append(r)),o.append(a);var f=b('<div class="qfb-logic-rules qfb-cf">');if(i.length)for(var g=0;g<i.length;g++)f.append(_.buildLogicRule(i[g]));else f.append(_.getNoLogicRulesMessage());o.append(f)}},buildLogicRule:function(e){if(0===p.logic.sources.length||"object"!=typeof e||null!==p.elements.editing&&1===p.logic.sources.length&&p.logic.sources[0].id==p.elements.editing.id)return null;for(var t=b(d.logicRuleHtml).data("rule",e),i=b('<select class="qfb-logic-rule-element">'),o=0;o<p.logic.sources.length;o++)null!==p.elements.editing&&p.logic.sources[o].id==p.elements.editing.id||i.append(b("<option>",{text:p.elements.getShortenedAdminLabel(p.logic.sources[o]),value:p.logic.sources[o].id}));n.setSelectVal(i,e.elementId),t.find(".qfb-logic-rule-column-element").html(i);var a=b('<select class="qfb-logic-rule-operator">');return a.append(b("<option>",{text:d.is,value:"eq"})),a.append(b("<option>",{text:d.isNot,value:"neq"})),a.append(b("<option>",{text:d.isEmpty,value:"empty"})),a.append(b("<option>",{text:d.isNotEmpty,value:"not_empty"})),a.append(b("<option>",{text:d.greaterThan,value:"gt"})),a.append(b("<option>",{text:d.lessThan,value:"lt"})),a.append(b("<option>",{text:d.contains,value:"contains"})),a.append(b("<option>",{text:d.startsWith,value:"starts_with"})),a.append(b("<option>",{text:d.endsWith,value:"ends_with"})),n.setSelectVal(a,e.operator),t.find(".qfb-logic-rule-column-operator").html(a),t.find(".qfb-logic-rule-column-value").html(_.buildLogicRuleValues(i.val(),e)),t.on("change",".qfb-logic-rule-element, .qfb-logic-rule-operator",function(){var e={elementId:t.find(".qfb-logic-rule-element").val(),operator:t.find(".qfb-logic-rule-operator").val(),value:"",optionId:null};t.find(".qfb-logic-rule-column-value").html(_.buildLogicRuleValues(i.val(),e))}),t.find(".qfb-small-add-button").click(function(){b(this).closest(".qfb-logic-rule").after(_.buildLogicRule(_.getNewLogicRule()))}),t.find(".qfb-small-remove-button").click(function(){var e=b(this).closest(".qfb-logic-rules");b(this).closest(".qfb-logic-rule").remove(),0===e.find(".qfb-logic-rule").length&&_.getNoLogicRulesMessage().hide().appendTo(e).fadeIn()}),t},buildLogicRuleValues:function(e,t){var i,o=p.elements.getElementById(e);if("empty"===t.operator||"not_empty"===t.operator)i=b('<input class="qfb-logic-rule-value" type="hidden">');else if("select"!==o.type&&"radio"!==o.type&&"checkbox"!==o.type&&"multiselect"!==o.type||"eq"!==t.operator&&"neq"!==t.operator)i=b('<input class="qfb-logic-rule-value" type="text">').attr("placeholder",d.enterValue).val(t.value);else{var a=0;for(i=b('<select class="qfb-logic-rule-value">');a<o.options.length;a++)if("select"!==o.type&&"multiselect"!==o.type||"undefined"==typeof o.options[a].options)i.append(b("<option>",{text:_.getShortenedOptionLabel(o.options[a]),value:o.options[a].id}));else{for(var l=b("<optgroup>",{label:p.shorten(o.options[a].label)}),s=0;s<o.options[a].options.length;s++)l.append(b("<option>",{text:_.getShortenedOptionLabel(o.options[a].options[s]),value:o.options[a].options[s].id}));i.append(l)}n.setSelectVal(i,t.optionId)}return i},getShortenedOptionLabel:function(e){return 0<e.label.length?p.shorten(e.label):p.shorten(e.value)},getLogicRules:function(e){var t=[];return e.find(".qfb-logic-rule").each(function(){t.push(_.getLogicRuleObjectFromValues(b(this)))}),t},getLogicRuleObjectFromValues:function(e){var t=e.find(".qfb-logic-rule-value"),i=e.find(".qfb-logic-rule-element").val(),o=t.val(),a=null;if(t.is("select")){var l=p.elements.getElementById(i);if(l){var s=p.options.getElementOptionById(l,o);s&&(a=o,o=s.value)}}return{elementId:i,operator:e.find(".qfb-logic-rule-operator").val(),optionId:a,value:o}},getNewLogicRule:function(){return{elementId:"",operator:"eq",value:"",optionId:null}},getNoLogicRulesMessage:function(){return p.buildMessageBox(d.noLogicRules,"info","qfb-no-logic-rules")},checkInvalidLogic:function(){p.elements.checkInvalidLogic(),p.notifications.checkInvalidLogic(),p.confirmations.checkInvalidLogic()},removeInvalidLogicRules:function(e){for(var t=e.length;t--;){var i=p.elements.getElementById(e[t].elementId);if(null!==i){if(("eq"==e[t].operator||"neq"==e[t].operator)&&e[t].optionId){var o=p.options.getElementOptionById(i,e[t].optionId);null!==o?e[t].value!=o.value&&(e[t].value=o.value):e.splice(t,1)}}else e.splice(t,1)}return e}},e.builder.logic=_,e}(quform=function(e,b,n){"use strict";var d,a=e.core,_=e.builder,p=a.cache;return d={editing:null,nextOptionId:0,onWindowLoad:function(){p.get("#qfb-options").sortable({items:"> .qfb-option, > .qfb-optgroup",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move, > .qfb-optgroup-top > .qfb-optgroup-right > .qfb-optgroup-actions > .qfb-optgroup-action-move",placeholder:"qfb-sortable-option-placeholder",connectWith:".qfb-optgroup-options"}),b("#qfb-add-option-button").on("click",function(){p.get("#qfb-options").append(d.getOptionHtml(d.createOption())),d.checkOptionsEmpty()}),p.get("#qfb-options").on("click",".qfb-option-action-set-default",function(){var e=_.elements.editing,t=b(this).closest(".qfb-option");"checkbox"==e.type||"multiselect"==e.type?t.toggleClass("qfb-option-default"):t.hasClass("qfb-option-default")?t.removeClass("qfb-option-default"):(t.closest(".qfb-options-list").find(".qfb-option-default").removeClass("qfb-option-default"),t.addClass("qfb-option-default"))}),p.get("#qfb_customise_values").click(d.customiseOptionValues),p.get("#qfb-options").on("keyup blur",".qfb-option-label",function(){var e=b(this),t=e.val(),i=e.closest(".qfb-option"),o=i.data("option");o.label=t,p.get("#qfb_customise_values").is(":checked")||(i.find(".qfb-option-value").val(t),o.value=t)}),p.get("#qfb-options").on("keyup blur",".qfb-option-value",function(){if(p.get("#qfb_customise_values").is(":checked")){var e=b(this),t=e.val(),i=e.closest(".qfb-option"),o=i.data("option");i.find(".qfb-option-value").val(t),o.value=t}}),p.get("#qfb-options").on("click",".qfb-option-action-add",function(){b(this).closest(".qfb-option").after(d.getOptionHtml(d.createOption())),d.checkOptionsEmpty()}),p.get("#qfb-options").on("click",".qfb-option-action-duplicate",function(){var e=b(this).closest(".qfb-option"),t=e.data("option"),i=b.extend(!0,{},t,{id:d.nextOptionId++});e.after(d.getOptionHtml(i))}),p.get("#qfb-options").on("click",".qfb-option-action-remove",function(){b(this).closest(".qfb-option").remove(),d.checkOptionsEmpty()}),p.get("#qfb-add-optgroup-button").on("click",function(){"select"!=_.elements.editing.type&&"multiselect"!=_.elements.editing.type||(p.get("#qfb-options").append(d.getOptgroupHtml(d.createOptgroup())),d.checkOptionsEmpty())}),p.get("#qfb-options").on("click",".qfb-optgroup-action-remove",function(){var e=b(this).closest(".qfb-optgroup");e.find(".qfb-optgroup-options > .qfb-option").length?confirm(n.confirmRemoveOptgroup)&&(e.remove(),d.checkOptionsEmpty()):(e.remove(),d.checkOptionsEmpty())}),p.get("#qfb-options").on("click",".qfb-optgroup-action-add",function(){b(this).closest(".qfb-optgroup").find(".qfb-optgroup-options").append(d.getOptionHtml(d.createOption()))}),p.get("#qfb-options").on("click",".qfb-option-action-settings",function(){d.showSettings(b(this).closest(".qfb-option").data("option"))}),p.get("#qfb-option-settings").find(".qfb-popup-save-button").click(function(){d.saveSettings(),d.hideSettings()}),p.get("#qfb-option-settings").find(".qfb-popup-close-button").click(function(){d.hideSettings()}),b.each(["#qfb_option_image","#qfb_option_image_selected"],function(e,i){p.get(i+"_browse").qfbMediaBrowser({callback:function(e){try{p.get(i).val(e.first().toJSON().url)}catch(t){}}})}),p.get("#qfb-name-prefix-options").sortable({axis:"y",items:"> .qfb-option",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move",placeholder:"qfb-sortable-option-placeholder"}),p.get("#qfb_customise_name_prefix_values").click(d.customiseNamePrefixOptionValues),p.get("#qfb-name-prefix-options").on("keyup blur",".qfb-option-label",function(){var e=b(this);p.get("#qfb_customise_name_prefix_values").is(":checked")||e.closest(".qfb-option").find(".qfb-option-value").val(e.val())}),b("#qfb-add-name-prefix-option-button").click(function(){p.get("#qfb-name-prefix-options").append(d.getNamePrefixOptionHtml(d.createNamePrefixOption())),d.checkNamePrefixOptionsEmpty()}),p.get("#qfb-name-prefix-options").on("click",".qfb-option-action-add",function(){b(this).closest(".qfb-option").after(d.getNamePrefixOptionHtml(d.createNamePrefixOption()))}),p.get("#qfb-name-prefix-options").on("click",".qfb-option-action-set-default",function(){var e=b(this).closest(".qfb-option");e.hasClass("qfb-option-default")?e.removeClass("qfb-option-default"):(p.get("#qfb-name-prefix-options").find(".qfb-option-default").removeClass("qfb-option-default"),e.addClass("qfb-option-default"))}),p.get("#qfb-name-prefix-options").on("click",".qfb-option-action-remove",function(){b(this).closest(".qfb-option").remove(),d.checkNamePrefixOptionsEmpty()}),p.get("#qfb-add-bulk-options-button").click(d.showBulkOptions),p.get("#qfb-insert-bulk-options").click(d.insertBulkOptions),p.get("#qfb-close-bulk-options").click(d.closeBulkOptions),p.get(".qfb-add-bulk-option-button").click(d.loadBulkOptions),_.setupContainerTooltips(p.get("#qfb-bulk-options").find("> .qfb-popup-content"))},loadOptions:function(){var e,t=_.elements.editing,i=0,o=[];for(d.nextOptionId=t.nextOptionId,b.isArray(t.options)||(t.options=[]),e=t.options.length;i<e;i++)"undefined"==typeof t.options[i].options?o.push(d.getOptionHtml(b.extend({},t.options[i],!0))):o.push(d.getOptgroupHtml(b.extend({},t.options[i],!0)));p.get("#qfb-options").html(o),d.setDefaultOption(),d.checkOptionsEmpty(),p.get("#qfb-add-optgroup-button")["select"==t.type||"multiselect"==t.type?"show":"hide"](),p.get("#qfb_customise_values").prop("checked",t.customiseValues),d.customiseOptionValues(p.get("#qfb-options")),p.get("#qfb-options").closest(a.settingWrap).show()},saveOptions:function(){var e=_.elements.editing,c=p.get("#qfb_customise_values").is(":checked"),r="checkbox"==e.type||"multiselect"==e.type,f=r?[]:"",g=[];p.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").each(function(){var e=b(this);if(e.hasClass("qfb-optgroup")){var t=e,i=t.data("optgroup"),a=[];t.find(".qfb-optgroup-options").find("> .qfb-option").each(function(){var e=b(this),t=e.data("option"),i=e.find(".qfb-option-label").val(),o=c?e.find(".qfb-option-value").val():i;t.label=i,t.value=o,a.push(t),e.hasClass("qfb-option-default")&&(r?f.push(o):f=o)}),i.label=t.find(".qfb-optgroup-label").val(),i.options=a,g.push(i)}else{var o=e,l=o.data("option"),s=o.find(".qfb-option-label").val(),n=c?o.find(".qfb-option-value").val():s;l.label=s,l.value=n,g.push(l),o.hasClass("qfb-option-default")&&(r?f.push(n):f=n)}}),e.options=g,e.nextOptionId=d.nextOptionId,e.defaultValue=f,e.customiseValues=c,_.logic.checkInvalidLogic()},getElementOptionById:function(e,t){for(var i=0;i<e.options.length;i++)if("undefined"==typeof e.options[i].options){if(e.options[i].id==t)return e.options[i]}else for(var o=0;o<e.options[i].options.length;o++)if(e.options[i].options[o].id==t)return e.options[i].options[o];return null},createOption:function(){var e=_.elements.editing;return b.extend(!0,{id:d.nextOptionId++},n.defaultOptions[e.type])},getOptionHtml:function(e){var t=_.elements.editing,i=b(n[t.type+"OptionHtml"]),o=i.find(".qfb-option-value");return i.find(".qfb-option-label").val(d.getOptionValue(e,"label")),o.val(d.getOptionValue(e,"value")),p.get("#qfb_customise_values").is(":checked")||o.prop({readOnly:!0,tabIndex:-1}).attr("title",n.enableCustomizeValuesToChange),i.data("option",e),i},createOptgroup:function(){var e=_.elements.editing;return b.extend(!0,{id:d.nextOptionId++},n.defaultOptgroups[e.type])},getOptgroupHtml:function(e){var t=b(n.optgroupHtml),i=b('<div class="qfb-optgroup-options">'),o=d.getOptgroupValue(e,"options"),a=[];t.find(".qfb-optgroup-label").val(d.getOptgroupValue(e,"label"));for(var l=0,s=o.length;l<s;l++)a.push(d.getOptionHtml(o[l]));return t.append(i.html(a)),i.sortable({items:"> .qfb-option",handle:"> .qfb-option-right > .qfb-option-actions > .qfb-option-action-move",placeholder:"qfb-sortable-option-placeholder",connectWith:"#qfb-options, .qfb-optgroup-options",receive:function(e,t){b(t.item).hasClass("qfb-optgroup")&&(b(t.sender).sortable("cancel"),alert(n.nestingOptgroupError))}}),t.data("optgroup",e),t},customiseOptionValues:function(){p.get("#qfb_customise_values").is(":checked")?p.get("#qfb-options").find(".qfb-option-value").prop({readOnly:!1,tabIndex:0}).removeAttr("title"):p.get("#qfb-options").find(".qfb-option").each(function(){var e=b(this);e.find(".qfb-option-value").val(e.find(".qfb-option-label").val()).prop({readOnly:!0,tabIndex:-1}).attr("title",n.enableCustomizeValuesToChange)})},checkOptionsEmpty:function(){var e=p.get("#qfb-options").closest(a.settingWrap);p.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").length?(e.find(".qfb-options-empty").hide(),e.find(".qfb-options-inner").fadeIn()):(e.find(".qfb-options-inner").hide(),e.find(".qfb-options-empty").fadeIn())},setDefaultOption:function(){var i=_.elements.editing;if("checkbox"==i.type||"multiselect"==i.type)p.get("#qfb-options").find(".qfb-option").each(function(){var e=b(this),t=e.data("option");-1!==b.inArray(t.value,i.defaultValue)&&e.addClass("qfb-option-default")});else{var t=b();p.get("#qfb-options").find(".qfb-option").each(function(){var e=b(this);e.data("option").value==i.defaultValue&&(t=t.add(e))}),t.last().addClass("qfb-option-default")}},loadNamePrefixOptions:function(){var e,t=_.elements.editing,i=_.elements.getValue(t,"prefixOptions"),o=_.elements.getValue(t,"prefixCustomiseValues"),a=[],l=0;for(d.nextOptionId=_.elements.getValue(t,"prefixNextOptionId"),b.isArray(i)||(i=[]),e=i.length;l<e;l++)a.push(d.getNamePrefixOptionHtml(b.extend({},i[l],!0)));p.get("#qfb-name-prefix-options").html(a),d.setDefaultNamePrefixOption(),d.checkNamePrefixOptionsEmpty(),p.get("#qfb_customise_name_prefix_values").prop("checked",o),d.customiseNamePrefixOptionValues()},saveNamePrefixOptions:function(){var e=_.elements.editing,a=p.get("#qfb_customise_name_prefix_values").is(":checked"),l="",s=[];p.get("#qfb-name-prefix-options").find("> .qfb-option").each(function(){var e=b(this),t=e.data("option"),i=e.find(".qfb-option-label").val(),o=a?e.find(".qfb-option-value").val():i;t.label=i,t.value=o,s.push(t),e.hasClass("qfb-option-default")&&(l=o)}),e.prefixOptions=s,e.prefixNextOptionId=d.nextOptionId,e.prefixDefaultValue=l,e.prefixCustomiseValues=a},createNamePrefixOption:function(){return b.extend(!0,{id:d.nextOptionId++},n.defaultOptions.select)},getNamePrefixOptionHtml:function(e){var t=b(n.selectOptionHtml),i=t.find(".qfb-option-value");return t.find(".qfb-option-label").val(d.getNamePrefixOptionValue(e,"label")),i.val(d.getNamePrefixOptionValue(e,"value")),p.get("#qfb_customise_name_prefix_values").is(":checked")||i.prop({readOnly:!0,tabIndex:-1}).attr("title",n.enableCustomizeValuesToChange),t.data("option",e),t},setDefaultNamePrefixOption:function(){var t=_.elements.editing,i=b();p.get("#qfb-name-prefix-options").find(".qfb-option").each(function(){var e=b(this);e.data("option").value==t.defaultValue&&(i=i.add(e))}),i.last().addClass("qfb-option-default")},checkNamePrefixOptionsEmpty:function(){var e=p.get("#qfb-name-prefix-options").closest(a.subSettingWrap);p.get("#qfb-name-prefix-options").find("> .qfb-option").length?(e.find(".qfb-options-empty").hide(),e.find(".qfb-options-inner").fadeIn()):(e.find(".qfb-options-inner").hide(),e.find(".qfb-options-empty").fadeIn())},customiseNamePrefixOptionValues:function(){p.get("#qfb_customise_name_prefix_values").is(":checked")?p.get("#qfb-name-prefix-options").find(".qfb-option-value").prop({readOnly:!1,tabIndex:0}).removeAttr("title"):p.get("#qfb-name-prefix-options").find(".qfb-option").each(function(){var e=b(this);e.find(".qfb-option-value").val(e.find(".qfb-option-label").val()).prop({readOnly:!0,tabIndex:-1}).attr("title",n.enableCustomizeValuesToChange)})},showBulkOptions:function(){p.get("#qfb-bulk-options").show()},closeBulkOptions:function(){p.get("#qfb_bulk_options_textarea").val(""),b("#qfb_bulk_options_clear").prop("checked",!1),p.get("#qfb-bulk-options").hide()},loadBulkOptions:function(){var e=b(this).data("key");if(e)if("existing"==e){var i=[],o=p.get("#qfb_customise_values").is(":checked");p.get("#qfb-options").find("> .qfb-option, > .qfb-optgroup").each(function(){var e=b(this);if(e.hasClass("qfb-optgroup"))i.push('[optgroup label="'+e.find(".qfb-optgroup-label").val()+'"]'),e.find(".qfb-optgroup-options > .qfb-option").each(function(){var e=b(this),t=e.find(".qfb-option-label").val();o&&(t+="|"+e.find(".qfb-option-value").val()),i.push(t)}),i.push("[/optgroup]");else{var t=e.find(".qfb-option-label").val();o&&(t+="|"+e.find(".qfb-option-value").val()),i.push(t)}}),p.get("#qfb_bulk_options_textarea").val(i.join("\n"))}else"object"==typeof n.bulkOptions[e]&&p.get("#qfb_bulk_options_textarea").val(n.bulkOptions[e].options.join("\n"))},insertBulkOptions:function(){var e=p.get("#qfb_bulk_options_textarea").val();if(e.length){b("#qfb_bulk_options_clear").is(":checked")&&p.get("#qfb-options").empty(),e=e.split("\n");for(var t=p.get("#qfb-options"),i=!1,o=0;o<e.length;o++){var a=e[o],l=new RegExp('^\\[optgroup label="(.*)"\\]$').exec(a),s="[/optgroup]"==a;if(null!==l){var n=d.getOptgroupHtml({label:l[1]});p.get("#qfb-options").append(n),t=n.find(".qfb-optgroup-options")}else if(s)t=p.get("#qfb-options");else{var c,r,f=d.createOption();if(-1<a.indexOf("|")){var g=a.split("|");c=g[0],r=g[1],i=!0}else c=r=a;f.label=c,f.value=r,t.append(d.getOptionHtml(f))}}i&&(p.get("#qfb_customise_values").prop("checked",!0),d.customiseOptionValues())}d.checkOptionsEmpty(),d.closeBulkOptions()},showSettings:function(e){d.editing=e,d.loadSettings(e),p.get("body").css({overflow:"hidden"}),p.get("#qfb-option-settings").show(),p.get("#qfb-option-settings").find(".qfb-popup-content").scrollTop(0)},loadSettings:function(e){p.get("#qfb_option_label").val(d.getOptionValue(e,"label")),p.get("#qfb_option_value").val(d.getOptionValue(e,"value")).closest(a.settingWrap)[p.get("#qfb_customise_values").is(":checked")?"show":"hide"](),p.get("#qfb_option_image").val(d.getOptionValue(e,"image")),p.get("#qfb_option_image_selected").val(d.getOptionValue(e,"imageSelected")),p.get("#qfb_option_width").val(d.getOptionValue(e,"width")),p.get("#qfb_option_height").val(d.getOptionValue(e,"height")),_.loadIconOption(p.get("#qfb_option_icon"),d.getOptionValue(e,"icon")),_.loadIconOption(p.get("#qfb_option_icon_selected"),d.getOptionValue(e,"iconSelected"))},saveSettings:function(){var e=d.editing;e.label=p.get("#qfb_option_label").val(),e.value=p.get("#qfb_option_value").val(),e.image=p.get("#qfb_option_image").val(),e.imageSelected=p.get("#qfb_option_image_selected").val(),e.width=p.get("#qfb_option_width").val(),e.height=p.get("#qfb_option_height").val(),e.icon=p.get("#qfb_option_icon").val(),e.iconSelected=p.get("#qfb_option_icon_selected").val();var t=p.get("#qfb-options").find(".qfb-option").filter(function(){return e.id==b(this).data("option").id});t.find(".qfb-option-label").val(e.label),t.find(".qfb-option-value").val(p.get("#qfb_customise_values").is(":checked")?e.value:e.label)},hideSettings:function(){d.editing=null,b(".qtip").hide(),p.get("body").css({overflow:""}),p.get("#qfb-option-settings").hide()},getOptionValue:function(e,t){return a.getProperty(e,t,a.getProperty(n.defaultOptions[_.elements.editing.type],t))},getNamePrefixOptionValue:function(e,t){return a.getProperty(e,t,a.getProperty(n.defaultOptions.select,t))},getOptgroupValue:function(e,t){return a.getProperty(e,t,a.getProperty(n.defaultOptgroups[_.elements.editing.type],t))}},e.builder.options=d,e}(quform=function(e,p,f,t){"use strict";var u,g=e.core,b=e.builder,d=g.cache,i=p(window),o=["#qfb-element-settings-tabs","#qfb-description-tabs","#qfb-name-tabs","#qfb-sub-label-tabs","#qfb-name-prefix-sub-label-tabs","#qfb-name-first-sub-label-tabs","#qfb-name-middle-sub-label-tabs","#qfb-name-last-sub-label-tabs","#qfb-name-suffix-sub-label-tabs"].join(","),s=!1,a={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:q,stop:h,appendTo:"#qfb-edit-form",helper:m,tolerance:"pointer",cursorAt:{top:-5,left:-5}},n={items:"> .qfb-element-column",handle:"> .qfb-column-actions > .qfb-column-action-move > i",placeholder:"qfb-sortable-column-placeholder",start:function(){p(this).sortable("instance").cancelHelperRemoval=!1},containment:"parent",stop:h,helper:m,tolerance:"pointer",cursorAt:{top:-5,left:-5}},c={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:q,stop:h,appendTo:"#qfb-edit-form",helper:m,tolerance:"pointer",cursorAt:{top:-5,left:-5}},l={items:"> .qfb-element",handle:"> .qfb-element-inner > .qfb-element-type-icon, > .qfb-row-actions > .qfb-row-action-move",placeholder:"qfb-sortable-placeholder",connectWith:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",start:q,stop:h,appendTo:"#qfb-edit-form",helper:m,tolerance:"pointer",cursorAt:{top:-5,left:-5}};function r(e){var t=e.data("id");p(".qfb-current-page").removeClass("qfb-current-page k-state-active"),e.addClass("qfb-current-page k-state-active"),p(".qfb-element-page").hide().filter(function(){return p(this).data("id")===t}).show()}function m(e,t){var i=t.data("type"),o=u.getElementById(t.data("id")),a=p('<div class="qfb-sortable-helper">'),l=p('<div class="qfb-sortable-helper-inner qfb-cf">').appendTo(a),s="";return g.isNonEmptyString(i)&&f.elements[i]&&(g.isNonEmptyString(f.elements[i].icon)&&l.append(p('<div class="qfb-sortable-helper-icon">').append(f.elements[i].icon)),g.isNonEmptyString(f.elements[i].name)&&(s=f.elements[i].name)),o&&g.isNonEmptyString(g.getProperty(o,"label"))&&(s=g.getProperty(o,"label")),l.append(p('<div class="qfb-sortable-helper-label">').text(s)),a.css({width:"auto",height:"auto"}),a}function q(){s=!0,p(this).sortable("instance").cancelHelperRemoval=!1}function h(e,t){s=!1;var i=t.item;if(i.hasClass("qfb-sortable-add-helper")){var o=i.data("type"),a=i.index(),l=u.getElementById(i.closest(".qfb-element").data("id"));p(".qtip").hide(),i.remove(),o&&f.elements.hasOwnProperty(o)&&l&&u.addElement(o,l,a)}u.sortElements(),b.refreshPreview()}function v(e){for(var t,i=0,o=e.elements.length;i<o;i++)(t=e.elements[i]).id=b.form.nextElementId++,u.insertElement(t,e,t.position,!0),"group"!=t.type&&"row"!=t.type&&"column"!=t.type||v(t)}function y(e){var t=e?"qfbSlideShow":"show",i=e?"qfbSlideHide":"hide";d.get("#qfb_enhanced_upload_enabled").is(":checked")?(d.get("#qfb_enhanced_upload_style").add(d.get("#qfb_button_icon")).add(d.get("#qfb_button_icon_position")).add(d.get("#qfb_upload_list_layout")).add(d.get("#qfb_upload_list_size")).closest(g.settingWrap)[t](),"dropzone"==d.get("#qfb_enhanced_upload_style").val()?(d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.dropzoneIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.dropzoneIconPosition),d.get("#qfb_button_style").add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).add(d.get("#qfb_button_width_custom")).closest(g.settingWrap)[i]()):(d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.buttonIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.buttonIconPosition),d.get("#qfb_button_style").add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).closest(g.settingWrap)[t](),"custom"==d.get("#qfb_button_width").val()&&d.get("#qfb_button_width_custom").closest(g.settingWrap)[t]())):d.get("#qfb_enhanced_upload_style").add(d.get("#qfb_button_style")).add(d.get("#qfb_button_size")).add(d.get("#qfb_button_width")).add(d.get("#qfb_button_width_custom")).add(d.get("#qfb_button_icon")).add(d.get("#qfb_button_icon_position")).add(d.get("#qfb_upload_list_layout")).add(d.get("#qfb_upload_list_size")).closest(g.settingWrap)[i]()}function w(e){var t=e?"qfbSlideShow":"show",i=e?"qfbSlideHide":"hide";"v3"===d.get("#qfb_recaptcha_version").val()?(d.get("#qfb_recaptcha_size").add(d.get("#qfb_recaptcha_type")).add(d.get("#qfb_recaptcha_lang")).closest(g.settingWrap)[i](),d.get("#qfb_recaptcha_threshold").add(d.get("#qfb_recaptcha_badge")).closest(g.settingWrap)[t]()):(d.get("#qfb_recaptcha_size").add(d.get("#qfb_recaptcha_type")).add(d.get("#qfb_recaptcha_lang")).closest(g.settingWrap)[t](),d.get("#qfb_recaptcha_threshold").closest(g.settingWrap)[i](),"invisible"===d.get("#qfb_recaptcha_size").val()?d.get("#qfb_recaptcha_badge").closest(g.settingWrap)[t]():d.get("#qfb_recaptcha_badge").closest(g.settingWrap)[i]())}return u={cache:[],datepickers:{},timepickers:{},enhancedUploaders:{},enhancedSelects:{},recaptchas:[],editing:null,columnWidths:{1:100,2:50,3:33.33333333,4:25,5:20,6:16.66666666,7:14.28571428,8:12.5,9:11.11111111,10:10,11:9.09090909,12:8.333333333,13:7.692307692,14:7.142857142,15:6.666666666,16:6.25,17:5.882352941,18:5.555555555,19:5.263157894,20:5},init:function(){d.get("#qfb-page-tabs-nav-wrap").kendoTabStrip(),d.get("#qfb-add-elements-list").kendoTabStrip(),i.on("resize.quform",_.debounce(function(){d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0),d.get("#qfb-add-elements-list").data("kendoTabStrip").resize(!0)},250)),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-tab-nav",function(){this!==p(".qfb-current-page")[0]&&(r(p(this)),b.refreshPreview())}),d.get("#qfb-page-tabs-nav").sortable({items:"> .qfb-page-tab-nav",delay:150,axis:"x",stop:function(){u.updatePageTabNavLabels(),u.sortElements(),b.refreshPreview()}}),d.get("#qfb-page-tabs-nav").on("hover",".qfb-page-tab-nav",function(){s&&this!==p(".qfb-current-page")[0]&&(r(p(this)),b.refreshPreview())}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-settings",function(e){e.stopPropagation(),u.showSettings(p(this).closest(".qfb-page-tab-nav").data("id"))}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-duplicate",function(e){e.stopPropagation(),u.duplicatePage(p(this).closest(".qfb-page-tab-nav").data("id"))}),d.get("#qfb-page-tabs-nav").on("click",".qfb-page-action-remove",function(e){e.stopPropagation(),p(".qtip").hide();var t=u.getElementById(p(this).closest(".qfb-page-tab-nav").data("id"));t&&u.removePage(t)}),p(".qfb-element-page > .qfb-child-elements").sortable(a),p(".qfb-element-row > .qfb-child-elements").sortable(n),p(".qfb-element-column > .qfb-child-elements").sortable(c),p(".qfb-element-group > .qfb-child-elements").sortable(l),p(o).tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),p("#qfb-add-page").click(function(){var e=u.addElement("page");return u.addElement("submit",e,0),u.sortElements(),b.refreshPreview(),!1}),d.get(".qfb-add-element-button").click(function(){u.addElement(p(this).data("type")),u.sortElements(),b.refreshPreview()}),d.get(".qfb-add-element-button").draggable({connectToSortable:".qfb-element-page > .qfb-child-elements, .qfb-element-group > .qfb-child-elements, .qfb-element-column > .qfb-child-elements",helper:function(){var e=p(this).data("type"),t=p("<div>").addClass("qfb-sortable-add-helper");return g.isNonEmptyString(e)&&f.elements[e]&&(g.isNonEmptyString(f.elements[e].icon)&&t.append(f.elements[e].icon),g.isNonEmptyString(f.elements[e].name)&&t.append(p("<span>").text(f.elements[e].name)),t.data("type",e)),t},delay:100,scroll:!1,start:function(){s=!1,"object"==typeof document.selection&&document.selection.empty();var e=p(".qfb-child-elements").sortable("option","scroll",!1);setTimeout(function(){e.sortable("option","scroll",!0)},1e3)},appendTo:p("#qfb-edit-form"),cursorAt:{top:-5,left:-5},stop:function(){s=!1}}).disableSelection().on("mousedown",function(){b.activateTabs(0)}),d.get("#qfb-elements").on("click",".qfb-element-action-settings",function(e){e.stopPropagation(),u.showSettings(p(this).closest(".qfb-element").data("id"))}),d.get("#qfb-element-settings").on("click",".qfb-popup-save-button",function(e){e.stopPropagation(),u.saveSettings()&&u.hideSettings(!0)}),d.get("#qfb-element-settings").on("click",".qfb-popup-close-button",function(e){e.stopPropagation(),u.hideSettings()}),d.get("#qfb-elements").on("click",".qfb-row-action-settings",function(e){e.stopPropagation(),u.showSettings(p(this).closest(".qfb-element-row").data("id"))}),d.get("#qfb_row_column_count").add(d.get("#qfb_row_column_size")).change(function(){8<d.get("#qfb_row_column_count").val()?d.get("#qfb-row-column-customise").closest(g.settingWrap).qfbSlideHide(function(){u.populateColumnWidthCustomise()}):(u.populateColumnWidthCustomise(),d.get("#qfb-row-column-customise").closest(g.settingWrap).qfbSlideShow())}),d.get("#qfb-elements").on("click",".qfb-row-action-add-column",function(){var e=u.getElementById(p(this).closest(".qfb-element-row").data("id"));if(e){var t=u.getRowLayout(e);t.length<20&&(t.push(""),u.setRowLayout(e,t),u.sortElements(),b.refreshPreview())}}),d.get("#qfb-elements").on("click",".qfb-row-action-remove-column",function(){var e=u.getElementById(p(this).closest(".qfb-element-row").data("id"));if(e){var t=u.getRowLayout(e);1<t.length&&(t.pop(),u.setRowLayout(e,t),u.sortElements(),b.refreshPreview())}}),d.get("#qfb-elements").on("click",".qfb-row-action-remove",function(){var e=u.getElementById(p(this).closest(".qfb-element-row").data("id"));e&&confirm(f.confirmRemoveRow)&&u.removeElement(e)}),d.get("#qfb-elements").on("click",".qfb-row-action-duplicate",function(){u.duplicateElement(u.getElementById(p(this).closest(".qfb-element-row").data("id")))}),d.get("#qfb-elements").on("click",".qfb-column-action-remove",function(){var e=p(this),t=u.getElementById(e.closest(".qfb-element-column").data("id")),i=u.getElementById(e.closest(".qfb-element-row").data("id"));t&&i&&u.removeColumn(t,i)}),d.get("#qfb-elements").on("click",".qfb-column-action-duplicate",function(){u.duplicateElement(u.getElementById(p(this).closest(".qfb-element-column").data("id")))}),d.get("#qfb-elements").on("click",".qfb-element-group-empty-add-row",function(){u.addElement("row",u.getElementById(p(this).closest(".qfb-element-group").data("id"))),u.sortElements(),b.refreshPreview()}),p("#qfb-element-settings-prev").click(function(){u.jumpSettings(-1)})[0].onselectstart=function(){return!1},p("#qfb-element-settings-next").click(function(){u.jumpSettings(1)})[0].onselectstart=function(){return!1},d.get("#qfb_label").on("keyup blur",function(){var e=u.editing;e&&(u.setElementSettingsLabel(e),"page"!=e.type&&"group"!=e.type||d.get("#qfb_show_label_in_email").add(d.get("#qfb_show_label_in_entry")).closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_label").val())?"show":"hide"]())}),d.get("#qfb_required").click(function(){d.get("#qfb_message_required").closest(g.settingWrap)[p(this).is(":checked")?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_admin_label").on("keyup blur",function(){var e=u.editing;e&&u.setElementSettingsLabel(e)}),d.get("#qfb_label_position").change(function(){d.get("#qfb_label_width").closest(g.settingWrap)["left"==p(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_tooltip").on("keyup blur",function(){d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap)[p(this).val().length?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_layout").add(d.get("#qfb_options_layout_responsive_columns")).change(function(){d.get("#qfb_options_layout_responsive_columns").closest(g.settingWrap)[p.isNumeric(d.get("#qfb_options_layout").val())?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_options_layout_responsive_columns_custom").closest(g.settingWrap)[p.isNumeric(d.get("#qfb_options_layout").val())&&"custom"==d.get("#qfb_options_layout_responsive_columns").val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_style").change(function(){d.get("#qfb_options_button_style").add(d.get("#qfb_options_button_size")).add(d.get("#qfb_options_button_width")).add(d.get("#qfb_options_button_icon_position")).closest(g.settingWrap)["button"==d.get("#qfb_options_style").val()?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_options_button_width_custom").closest(g.settingWrap)["custom"==d.get("#qfb_options_button_width").val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_options_button_width").change(function(){d.get("#qfb_options_button_width_custom").closest(g.settingWrap)["custom"==p(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_responsive_columns").change(function(){d.get("#qfb_responsive_columns_custom").closest(g.settingWrap)["custom"==p(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_name_responsive_columns").change(function(){d.get("#qfb_name_responsive_columns_custom").closest(g.settingWrap)["custom"==p(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_enhanced_upload_enabled").add(d.get("#qfb_enhanced_upload_style")).change(function(){y(!0)}),d.get("#qfb_recaptcha_version").add(d.get("#qfb_recaptcha_size")).change(function(){w(!0)}),d.get("#qfb_field_width").add(d.get("#qfb_group_field_width")).add(d.get("#qfb_page_field_width")).change(function(){d.get("#qfb_field_width_custom").closest(g.settingWrap)["custom"==p(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_button_width").change(function(){d.get("#qfb_button_width_custom").closest(g.settingWrap)["custom"==p(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_enhanced_select_enabled").click(function(){"select"===u.editing.type?(d.get("#qfb_enhanced_select_search").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")&&d.get("#qfb_enhanced_select_search").is(":checked")?"show":"hide"]()):"multiselect"===u.editing.type&&d.get("#qfb_enhanced_select_placeholder").add(d.get("#qfb_enhanced_select_no_results_found")).closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_enhanced_select_search").change(function(){"select"==u.editing.type&&(d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap)[d.get("#qfb_enhanced_select_enabled").is(":checked")&&d.get("#qfb_enhanced_select_search").is(":checked")?"show":"hide"](),u.checkTranslationTabVisibility())}),d.get("#qfb_none_option").click(function(){d.get("#qfb_none_option_text").closest(g.settingWrap)[p(this).is(":checked")?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_date_min").on("keyup blur",function(){d.get("#qfb_message_dateTooEarly").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_date_min").val())?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_date_max").on("keyup blur",function(){d.get("#qfb_message_dateTooLate").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_date_max").val())?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_time_min").on("keyup blur",function(){d.get("#qfb_message_timeTooEarly").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_time_min").val())?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_time_max").on("keyup blur",function(){d.get("#qfb_message_timeTooLate").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_time_max").val())?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_name_prefix_enabled").add(d.get("#qfb_name_prefix_required")).add(d.get("#qfb_name_prefix_none_option")).add(d.get("#qfb_name_first_enabled")).add(d.get("#qfb_name_first_required")).add(d.get("#qfb_name_middle_enabled")).add(d.get("#qfb_name_middle_required")).add(d.get("#qfb_name_last_enabled")).add(d.get("#qfb_name_last_required")).add(d.get("#qfb_name_suffix_enabled")).add(d.get("#qfb_name_suffix_required")).click(function(){d.get("#qfb_name_prefix_enabled").is(":checked")&&d.get("#qfb_name_prefix_required").is(":checked")||d.get("#qfb_name_first_enabled").is(":checked")&&d.get("#qfb_name_first_required").is(":checked")||d.get("#qfb_name_middle_enabled").is(":checked")&&d.get("#qfb_name_middle_required").is(":checked")||d.get("#qfb_name_last_enabled").is(":checked")&&d.get("#qfb_name_last_required").is(":checked")||d.get("#qfb_name_suffix_enabled").is(":checked")&&d.get("#qfb_name_suffix_required").is(":checked")?d.get("#qfb_message_required").closest(g.settingWrap).show():d.get("#qfb_message_required").closest(g.settingWrap).hide(),d.get("#qfb_name_prefix_none_option_text").closest(g.settingWrap)[d.get("#qfb_name_prefix_none_option").is(":checked")&&d.get("#qfb_name_prefix_enabled").is(":checked")?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_dynamic_default_value").click(function(){d.get("#qfb_dynamic_key").closest(g.settingWrap)[p(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_max_length").on("keyup blur",function(){d.get("#qfb_message_lengthTooLong").closest(g.settingWrap)[g.isNonEmptyString(d.get("#qfb_max_length").val())?"show":"hide"](),u.checkTranslationTabVisibility()}),d.get("#qfb_show_in_email").click(function(){d.get("#qfb_plain_text_content").closest(g.settingWrap)[p(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_group_style").change(function(){p("#qfb_border_color, #qfb_background_color").closest(g.settingWrap)["bordered"===p(this).val()?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_upload_minimum_files").on("keyup blur",function(){var e=p(this).val();p.isNumeric(e)&&0<e&&d.get("#qfb_required").prop("checked",!0)}),d.get("#qfb_save_to_server").click(function(){d.get("#qfb_save_path").add(d.get("#qfb_add_to_media_library")).closest(g.settingWrap)[p(this).is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_logic_enabled").click(function(){d.get("#qfb-logic").closest(g.settingWrap)[d.get("#qfb_logic_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),p("#qfb-add-logic-rule").click(function(){d.get("#qfb-logic").find(".qfb-logic-rules").append(b.logic.buildLogicRule(b.logic.getNewLogicRule())),d.get("#qfb-logic").find(".qfb-no-logic-rules").remove()}),d.get("#qfb_submit_button_type").change(function(){var e=p(this).val();d.get("#qfb_submit_button_text").add(d.get("#qfb_submit_button_icon")).add(d.get("#qfb_submit_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_submit_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_submit_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_next_button_type").change(function(){var e=p(this).val();d.get("#qfb_next_button_text").add(d.get("#qfb_next_button_icon")).add(d.get("#qfb_next_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_next_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_next_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),d.get("#qfb_back_button_type").change(function(){var e=p(this).val();d.get("#qfb_back_button_text").add(d.get("#qfb_back_button_icon")).add(d.get("#qfb_back_button_icon_position")).closest(g.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_back_button_image").closest(g.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),d.get("#qfb_back_button_html").closest(g.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),p.each(["#qfb_submit_button_image","#qfb_next_button_image","#qfb_back_button_image"],function(e,i){d.get(i+"_browse").qfbMediaBrowser({callback:function(e){try{d.get(i).val(e.first().toJSON().url)}catch(t){}}})}),d.get("#qfb-elements").on("click",".qfb-element-action-collapse",function(){return u.collapseGroup(p(this).closest(".qfb-element"),p(this)),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-duplicate",function(){return u.duplicateElement(u.getElementById(p(this).closest(".qfb-element").data("id"))),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-remove",function(){var e=u.getElementById(p(this).closest(".qfb-element").data("id")),t="confirmRemoveElement";if("group"==e.type?t="confirmRemoveGroup":"submit"==e.type&&(t="confirmRemoveSubmit"),e&&confirm(f[t]))return u.removeElement(e),!1}),d.get("#qfb-elements").on("click",".qfb-element-action-required",function(){var e=p(this).closest(".qfb-element"),t=u.getElementById(e.data("id"));return t.required=!t.required,u.setRequiredClass(e,t),b.refreshPreview(),!1}),p.fn.select2&&d.get("#qfb_date_locale").add(d.get("#qfb_time_locale")).select2({theme:"qfb",language:{noResults:function(){return t.noResultsFound}}}),b.setupContainerTooltips(d.get("#qfb-element-settings-tabs")),u.buildCache(),u.initElements(),u.checkEmptyGroups(),p(".qfb-preview-label-content").editable(function(e){return u.savePreviewLabel(e,u.getElementById(p(this).closest(".qfb-element").data("id"))),this.editing=!1},{event:"click.editable",onblur:"submit",onreset:function(e,t){t.revert=g.htmlEntities(t.revert)},placeholder:"",select:!0})},initElements:function(){var a=function(e){for(var t=0,i=e.length;t<i;t++){var o=e[t];u.addToFeatureCaches(o),b.addInsertVariableElement(o),b.logic.addSource(o),b.notifications.addAttachmentSource(o),"group"!=o.type&&"page"!=o.type&&"row"!=o.type&&"column"!=o.type||a(o.elements)}};a(b.form.elements)},insertPage:function(e){b.activateTabs(0);var t=p(f.pageHtml),i=t.find("> .qfb-child-elements");i.attr("id","qfb-child-elements-"+e.id),t.attr("id","qfb-element-"+e.id).data("id",e.id).data("type",e.type).hide(),b.form.elements.push(e),u.cache.push(e);var o=p(f.pageTabNavHtml);o.data("id",e.id),d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").insertBefore(o,d.get("#qfb-add-page-tab")),u.updatePageTabNavLabel(e),d.get("#qfb-elements").append(t),i.sortable(a),b.checkPageButtonSettings(),r(o)},createElement:function(e){var t=null;return e&&f.elements[e]&&f.elements[e].config&&(t=p.extend(!0,{id:b.form.nextElementId++},f.elements[e].config)),t},addElement:function(e,t,i){var o=u.createElement(e);return o?(t||(t=u.getElementById(p(".qfb-current-page").data("id"))),p.isNumeric(i)||(i=function a(e){var t=e.elements.length,i=t-1,o=t;return"page"==e.type&&0<t&&"submit"==e.elements[i].type&&(o=i),o}(t)),u.insertElement(o,t,i),o):null},insertElement:function(e,t,i,o){switch(e.type){case"page":u.insertPage(e);break;case"row":u.insertRow(e,t,i,o);break;case"column":u.insertColumn(e,t,i,o);break;case"group":u.insertGroup(e,t,i,o);break;default:u.insertField(e,t,i,o)}},insertField:function(t,e,i,o){b.activateTabs(0);var a=p(f.elementHtml);return a.attr("id","qfb-element-"+t.id).data("id",t.id).data("type",t.type).removeClass("qfb-element-text").addClass("qfb-element-"+t.type).find(".qfb-preview-label-content").attr("id","qfb-plc-"+t.id).text(t.label).end().find(".qfb-element-type-icon").html(f.elements[t.type].icon).end().hide(),u.setRequiredClass(a,t),u.insertChild(a,e,i),!0===o?a.show():(a.fadeIn(50),e.elements.splice(i,0,t)),u.cache.push(t),p("#qfb-plc-"+t.id).editable(function(e){return u.savePreviewLabel(e,t),this.editing=!1},{event:"click.editable",onblur:"submit",onreset:function(e,t){t.revert=g.htmlEntities(t.revert)},placeholder:"",select:!0}),u.addToFeatureCaches(t),b.addInsertVariableElement(t),b.logic.addSource(t),b.notifications.addAttachmentSource(t),t},insertGroup:function(t,e,i,o){b.activateTabs(0);var a=p(f.groupHtml);a.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+t.id),a.attr("id","qfb-element-"+t.id).data("id",t.id).data("type","group").removeClass("qfb-element-text").addClass("qfb-element-group").find(".qfb-preview-label-content").attr("id","qfb-plc-"+t.id).text(t.label).end().hide(),u.insertChild(a,e,i),p("#qfb-child-elements-"+t.id).sortable(l),!0===o?a.show():(a.fadeIn(50),e.elements.splice(i,0,t)),u.cache.push(t),p("#qfb-plc-"+t.id).editable(function(e){return u.savePreviewLabel(e,t),this.editing=!1},{event:"click.editable",onblur:"submit",onreset:function(e,t){t.revert=g.htmlEntities(t.revert)},placeholder:"",select:!0})},insertRow:function(e,t,i,o){var a=p(f.rowHtml),l=a.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+e.id);return a.attr("id","qfb-element-"+e.id).data("id",e.id),u.insertChild(a,t,i),o||t.elements.splice(i,0,e),u.cache.push(e),l.sortable(n),0===e.elements.length&&(u.addElement("column",e),u.addElement("column",e)),u.setRowColumnClass(e),e},insertColumn:function(e,t,i,o){var a=p(f.columnHtml),l=a.find("> .qfb-child-elements").attr("id","qfb-child-elements-"+e.id);return a.attr("id","qfb-element-"+e.id).data("id",e.id),u.insertChild(a,t,i),o||t.elements.splice(i,0,e),u.cache.push(e),l.sortable(c),e},insertChild:function(e,t,i){var o=p("#qfb-child-elements-"+t.id);0<i&&i<t.elements.length?o.find("> .qfb-element:nth-child("+i+")").after(e):0===i?o.prepend(e):o.append(e),e.addClass("qfb-element-highlight"),setTimeout(function(){e.removeClass("qfb-element-highlight")},1400)},removeElement:function(i,o){(i.parentId?u.getElementById(i.parentId).elements:b.form.elements).splice(i.position,1),p("#qfb-element-"+i.id).qfbSlideHide(function(){p(this).remove();var e=[i];"group"!=i.type&&"page"!=i.type&&"row"!=i.type&&"column"!=i.type||(e=e.concat(u.getElementChildren(i)));for(var t=0;t<e.length;t++)u.removeFromFeatureCaches(e[t]),b.removeInsertVariableElement(e[t]),b.logic.removeSource(e[t]),b.notifications.removeAttachmentSource(e[t]),u.removeFromCache(e[t]);b.checkPageButtonSettings(),b.logic.checkInvalidLogic(),b.notifications.checkInvalidAttachments(),"function"==typeof o&&o(),u.sortElements(),b.refreshPreview()})},removePage:function(e){if(1!=b.form.elements.length){if(confirm(f.confirmRemovePage)){var t=p(".qfb-page-tab-nav"),i=t.filter(function(){return p(this).data("id")===e.id}),o=t.index(i);r(o==t.length-1?t.eq(o-1):t.eq(o+1)),i.remove(),u.updatePageTabNavLabels(),u.removeElement(e)}}else alert(f.atLeastOnePage)},removeColumn:function(e,t){confirm(f.confirmRemoveColumn)&&(1===t.elements.length?u.removeElement(t):u.removeElement(e,function(){u.setRowLayout(t,u.getRowLayout(t))}))},getElementChildren:function(e){var l=function(e){var t=[];if("group"==e.type||"page"==e.type||"row"==e.type||"column"==e.type)for(var i=0,o=e.elements.length;i<o;i++)if(e.elements[i].parentId==e.id&&(t.push(e.elements[i]),"group"==e.elements[i].type||"page"==e.elements[i].type||"row"==e.elements[i].type||"column"==e.elements[i].type)){var a=l(e.elements[i]);a.length&&(t=t.concat(a))}return t};return l(e)},checkInvalidLogic:function(){var o=function(e){for(var t=0,i=e.length;t<i;t++)"object"==typeof e[t].logicRules&&(e[t].logicRules=b.logic.removeInvalidLogicRules(e[t].logicRules)),"group"!=e[t].type&&"page"!=e[t].type&&"row"!=e[t].type&&"column"!=e[t].type||o(e[t].elements)};o(b.form.elements)},duplicatePage:function(e){var t=u.getElementById(e);if(t){var i=p.extend(!0,{},t);i.id=b.form.nextElementId++,u.insertPage(i),v(i)}u.sortElements(),b.refreshPreview()},duplicateElement:function(e){if(e){var t=p.extend(!0,{},e),i=u.getElementById(e.parentId);switch(t.id=b.form.nextElementId++,t.position++,e.type){case"row":u.insertRow(t,i,t.position),v(t);break;case"column":u.insertColumn(t,i,t.position),u.setRowColumnClass(i),v(t);break;case"group":u.insertGroup(t,i,t.position),v(t);break;default:u.insertField(t,i,t.position)}u.sortElements(),b.refreshPreview()}},showSettings:function(e){var t=u.getElementById(e);u.editing=t,u.loadSettings(t),p(o).each(function(){p(this).data("tabs").click(0)});var i=f.elementSettings;"page"==t.type?i=f.pageSettings:"group"==t.type?i=f.groupSettings:"row"==t.type&&(i=f.rowSettings),d.get("#qfb-element-settings-title").text(i),d.get("#qfb-element-settings-element-icon").html(f.elements[t.type].icon),d.get("#qfb-element-settings-element-label").text(u.getAdminLabel(t)),p(".qfb-element-highlight").removeClass("qfb-element-highlight"),d.get("#qfb-element-"+t.id).addClass("qfb-element-highlight"),d.get("body").css({overflow:"hidden"}),d.get("#qfb-element-settings").show(),d.get("#qfb-element-settings-tabs").scrollTop(0)},jumpSettings:function(e){for(var t=0,i=u.cache.length;t<i&&u.editing.id!==u.cache[t].id;t++);var o=t+e;if(o<0?o=i-1:i-1<o&&(o=0),"column"==u.cache[o].type)return e=e<0?e-1:e+1,void u.jumpSettings(e);u.saveSettings()&&u.showSettings(u.cache[o].id)},hideSettings:function(e){!0===e&&b.refreshPreview(),p(".qfb-element-highlight").addClass("qfb-element-highlight-last"),setTimeout(function(){p(".qfb-element-highlight").removeClass("qfb-element-highlight qfb-element-highlight-last")},1400),b.styles.resetStyleSettings(),b.filters.resetFilterSettings(),b.validators.resetValidatorSettings(),u.editing=null,p(".qtip").hide(),d.get("body").css({overflow:""}),d.get("#qfb-element-settings").hide()},loadSettings:function(e){d.get("#qfb-element-settings").find(".qfb-setting").hide(),d.get("#qfb-file-field-width-description").add(d.get("#qfb-button-label-hint")).hide(),d.get("#qfb_button_icon").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.buttonIcon),d.get("#qfb_button_icon_position").closest(g.settingWrap).find(".qfb-setting-label > label").text(f.buttonIconPosition);var t=[];switch(e.type){case"text":case"textarea":case"email":case"date":case"time":case"password":case"captcha":case"group":case"page":t.push(new Option(f.inherit,"inherit")),t.push(new Option(f.field,"field"))}t.push(new Option(f.icon,"icon")),d.get("#qfb_tooltip_type").html(t);var i=[];switch(i.push(new Option(f.inherit,"inherit")),i.push(new Option(f.above,"")),i.push(new Option(f.left,"left")),e.type){case"text":case"textarea":case"email":case"date":case"time":case"password":case"captcha":case"group":case"page":i.push(new Option(f.inside,"inside"))}d.get("#qfb_label_position").html(i);var o=[new Option(f.everyone,"")];switch("captcha"!=e.type&&"recaptcha"!=e.type&&(o.push(new Option(f.adminOnly,"admin-only")),o.push(new Option(f.loggedInUsersOnly,"logged-in-only"))),o.push(new Option(f.loggedOutUsersOnly,"logged-out-only")),d.get("#qfb_visibility").html(o),p("#qfb-element-settings-tabs").find("> ul > li").show(),e.type){case"text":case"textarea":case"email":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",u.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),u.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),u.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),"textarea"===e.type&&d.get("#qfb_enable_editor").prop("checked",u.getValue(e,"enableEditor")).closest(g.settingWrap).show(),d.get("#qfb_custom_class").val(u.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(u.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(u.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),"textarea"===e.type?d.get("#qfb_default_value_textarea").val(u.getValue(e,"defaultValue")).closest(g.settingWrap).show():d.get("#qfb_default_value").val(u.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",u.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(u.getValue(e,"dynamicKey")),d.get("#qfb_max_length").val(u.getValue(e,"maxLength")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",u.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",u.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),b.filters.loadFilters(),b.validators.loadValidators(),d.get("#qfb_message_required").val(u.getValue(e,"messageRequired")),"email"==e.type&&d.get("#qfb_message_emailAddressInvalidFormat").val(u.getValue(e,"messageEmailAddressInvalidFormat")).closest(g.settingWrap).show(),d.get("#qfb_message_lengthTooLong").val(u.getValue(e,"messageLengthTooLong")),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),u.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),u.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"maxLength"))&&d.get("#qfb_message_lengthTooLong").closest(g.settingWrap).show();break;case"select":case"checkbox":case"radio":case"multiselect":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),b.options.loadOptions(),"select"==e.type&&d.get("#qfb_none_option").prop("checked",u.getValue(e,"noneOption")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",u.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),"select"!=e.type&&"multiselect"!=e.type||(d.get("#qfb_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),d.get("#qfb_enhanced_select_enabled").prop("checked",u.getValue(e,"enhancedSelectEnabled")).closest(g.settingWrap).show(),"select"==e.type&&d.get("#qfb_enhanced_select_search").prop("checked",u.getValue(e,"enhancedSelectSearch"))),"radio"!=e.type&&"checkbox"!=e.type||(g.setSelectVal(d.get("#qfb_options_layout"),u.getValue(e,"optionsLayout")).closest(g.settingWrap).show(),d.get("#qfb_options_layout_responsive_columns").val(u.getValue(e,"optionsLayoutResponsiveColumns")),d.get("#qfb_options_layout_responsive_columns_custom").val(u.getValue(e,"optionsLayoutResponsiveColumnsCustom")),g.setSelectVal(d.get("#qfb_options_style"),u.getValue(e,"optionsStyle")).closest(g.settingWrap).show(),d.get("#qfb_options_button_style").val(u.getValue(e,"optionsButtonStyle")),d.get("#qfb_options_button_size").val(u.getValue(e,"optionsButtonSize")),d.get("#qfb_options_button_width").val(u.getValue(e,"optionsButtonWidth")),d.get("#qfb_options_button_width_custom").val(u.getValue(e,"optionsButtonWidthCustom")),d.get("#qfb_options_button_icon_position").val(u.getValue(e,"optionsButtonIconPosition"))),d.get("#qfb_custom_class").val(u.getValue(e,"customClass")).closest(g.settingWrap).show(),"multiselect"===e.type&&d.get("#qfb_size_attribute").val(u.getValue(e,"sizeAttribute")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(u.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),d.get("#qfb_in_array_validator").prop("checked",u.getValue(e,"inArrayValidator")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",u.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(u.getValue(e,"dynamicKey")),"select"!=e.type&&"radio"!=e.type||d.get("#qfb_submit_on_choice").prop("checked",u.getValue(e,"submitOnChoice")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",u.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(u.getValue(e,"messageRequired")),"select"==e.type&&d.get("#qfb_none_option_text").val(u.getValue(e,"noneOptionText")),"select"!=e.type&&"multiselect"!=e.type||("multiselect"==e.type&&d.get("#qfb_enhanced_select_placeholder").val(u.getValue(e,"enhancedSelectPlaceholder")),d.get("#qfb_enhanced_select_no_results_found").val(u.getValue(e,"enhancedSelectNoResultsFound"))),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"radio"!=e.type&&"checkbox"!=e.type||(p.isNumeric(u.getValue(e,"optionsLayout"))&&(d.get("#qfb_options_layout_responsive_columns").closest(g.settingWrap).show(),"custom"==u.getValue(e,"optionsLayoutResponsiveColumns")&&d.get("#qfb_options_layout_responsive_columns_custom").closest(g.settingWrap).show()),"button"==u.getValue(e,"optionsStyle")&&(d.get("#qfb_options_button_style").add(d.get("#qfb_options_button_size")).add(d.get("#qfb_options_button_width")).add(d.get("#qfb_options_button_icon_position")).closest(g.settingWrap).show(),"custom"==u.getValue(e,"optionsButtonWidth")&&d.get("#qfb_options_button_width_custom").closest(g.settingWrap).show())),"select"==e.type&&u.getValue(e,"enhancedSelectEnabled")&&d.get("#qfb_enhanced_select_search").closest(g.settingWrap).show(),"select"===e.type?u.getValue(e,"enhancedSelectEnabled")&&u.getValue(e,"enhancedSelectSearch")&&d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap).show():"multiselect"===e.type&&u.getValue(e,"enhancedSelectEnabled")&&(d.get("#qfb_enhanced_select_placeholder").closest(g.settingWrap).show(),d.get("#qfb_enhanced_select_no_results_found").closest(g.settingWrap).show()),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),u.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),u.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),"select"==e.type&&u.getValue(e,"noneOption")&&d.get("#qfb_none_option_text").closest(g.settingWrap).show();break;case"file":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",u.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),d.get("#qfb_enhanced_upload_enabled").prop("checked",u.getValue(e,"enhancedUploadEnabled")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_enhanced_upload_style"),u.getValue(e,"enhancedUploadStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_style").val(u.getValue(e,"buttonStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_size").val(u.getValue(e,"buttonSize")).closest(g.settingWrap).show(),d.get("#qfb_button_width").val(u.getValue(e,"buttonWidth")).closest(g.settingWrap).show(),d.get("#qfb_button_width_custom").val(u.getValue(e,"buttonWidthCustom")),b.loadIconOption(d.get("#qfb_button_icon"),u.getValue(e,"buttonIcon")).closest(g.settingWrap).show(),d.get("#qfb_button_icon_position").val(u.getValue(e,"buttonIconPosition")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_upload_list_layout"),u.getValue(e,"uploadListLayout")).closest(g.settingWrap).show(),d.get("#qfb_upload_list_size").val(u.getValue(e,"uploadListSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb-file-field-width-description").show(),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),b.styles.loadStyles(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(u.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),d.get("#qfb_upload_minimum_files").val(u.getValue(e,"minimumNumberOfFiles")).closest(g.settingWrap).show(),d.get("#qfb_upload_maximum_files").val(u.getValue(e,"maximumNumberOfFiles")).closest(g.settingWrap).show(),d.get("#qfb_upload_allowed_extensions").val(u.getValue(e,"allowedExtensions")).closest(g.settingWrap).show(),d.get("#qfb_upload_maximum_size").val(u.getValue(e,"maximumFileSize")).closest(g.settingWrap).show(),d.get("#qfb_save_to_server").prop("checked",u.getValue(e,"saveToServer")).closest(g.settingWrap).show(),d.get("#qfb_save_path").val(u.getValue(e,"savePath")),d.get("#qfb_add_to_media_library").prop("checked",u.getValue(e,"addToMediaLibrary")),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",u.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_browse_text").val(u.getValue(e,"browseText")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(u.getValue(e,"messageFileUploadRequired")),d.get("#qfb_message_fileNumRequired").val(u.getValue(e,"messageFileNumRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooMany").val(u.getValue(e,"messageFileTooMany")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooBigFilename").val(u.getValue(e,"messageFileTooBigFilename")).closest(g.settingWrap).show(),d.get("#qfb_message_fileTooBig").val(u.getValue(e,"messageFileTooBig")).closest(g.settingWrap).show(),d.get("#qfb_message_fileNotAllowedTypeFilename").val(u.getValue(e,"messageNotAllowedTypeFilename")).closest(g.settingWrap).show(),d.get("#qfb_message_fileNotAllowedType").val(u.getValue(e,"messageNotAllowedType")).closest(g.settingWrap).show(),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),y(),"custom"==u.getValue(e,"buttonWidth")&&d.get("#qfb_button_width_custom").closest(g.settingWrap).show(),u.getValue(e,"saveToServer")&&d.get("#qfb_save_path").add(d.get("#qfb_add_to_media_library")).closest(g.settingWrap).show(),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),u.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show();break;case"captcha":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),u.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),u.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),d.get("#qfb_captcha_length").val(u.getValue(e,"captchaLength")).closest(g.settingWrap).show(),d.get("#qfb_captcha_width").val(u.getValue(e,"captchaWidth")).closest(g.settingWrap).show(),d.get("#qfb_captcha_height").val(u.getValue(e,"captchaHeight")).closest(g.settingWrap).show(),d.get("#qfb_captcha_bg_color").val(u.getValue(e,"captchaBgColor")).blur().closest(g.settingWrap).show(),d.get("#qfb_captcha_text_color").val(u.getValue(e,"captchaTextColor")).blur().closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_captcha_font"),u.getValue(e,"captchaFont")).closest(g.settingWrap).show(),d.get("#qfb_captcha_min_font_size").val(u.getValue(e,"captchaMinFontSize")).closest(g.settingWrap).show(),d.get("#qfb_captcha_max_font_size").val(u.getValue(e,"captchaMaxFontSize")).closest(g.settingWrap).show(),d.get("#qfb_captcha_min_angle").val(u.getValue(e,"captchaMinAngle")).closest(g.settingWrap).show(),d.get("#qfb_captcha_max_angle").val(u.getValue(e,"captchaMaxAngle")).closest(g.settingWrap).show(),d.get("#qfb_captcha_retina").prop("checked",u.getValue(e,"captchaRetina")).closest(g.settingWrap).show(),d.get("#qfb_custom_class").val(u.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(u.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(u.getValue(e,"messageRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_captchaNotMatch").val(u.getValue(e,"messageCaptchaNotMatch")).closest(g.settingWrap).show(),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show();break;case"recaptcha":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),g.setSelectVal(d.get("#qfb_recaptcha_version"),u.getValue(e,"recaptchaVersion")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_size"),u.getValue(e,"recaptchaSize")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_type"),u.getValue(e,"recaptchaType")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_theme"),u.getValue(e,"recaptchaTheme")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_badge"),u.getValue(e,"recaptchaBadge")),g.setSelectVal(d.get("#qfb_recaptcha_lang"),u.getValue(e,"recaptchaLang")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_recaptcha_threshold"),u.getValue(e,"recaptchaThreshold")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),d.get("#qfb_message_required").val(u.getValue(e,"messageRequired")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaMissingInputSecret").val(u.getValue(e,"messageRecaptchaMissingInputSecret")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaInvalidInputSecret").val(u.getValue(e,"messageRecaptchaInvalidInputSecret")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaMissingInputResponse").val(u.getValue(e,"messageRecaptchaMissingInputResponse")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaInvalidInputResponse").val(u.getValue(e,"messageRecaptchaInvalidInputResponse")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaError").val(u.getValue(e,"messageRecaptchaError")).closest(g.settingWrap).show(),d.get("#qfb_message_recaptchaScoreTooLow").val(u.getValue(e,"messageRecaptchaScoreTooLow")).closest(g.settingWrap).show(),w();break;case"html":if(d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_html_content").val(u.getValue(e,"content")).closest(g.settingWrap).show(),d.get("#qfb_html_auto_format").prop("checked",u.getValue(e,"autoFormat")).closest(g.settingWrap).show(),window.tinymce){var a=window.tinymce.get("qfb_html_content");a&&!a.isHidden()&&(a.load(),a.iframeElement&&p(a.iframeElement).height()<100&&a.theme&&a.theme.resizeTo&&a.theme.resizeTo(null,300)),window.switchEditors&&window.getUserSetting&&window.switchEditors.go("qfb_html_content",window.getUserSetting("editor")||"tmce")}b.styles.loadStyles(),u.loadLogic(),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_plain_text_content").val(u.getValue(e,"plainTextContent")),d.get("#qfb_show_in_entry").prop("checked",u.getValue(e,"showInEntry")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),u.getValue(e,"showInEmail")&&d.get("#qfb_plain_text_content").closest(g.settingWrap).show();break;case"date":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",u.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),u.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),u.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(u.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(u.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(u.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),d.get("#qfb_default_value_date").val(u.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",u.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(u.getValue(e,"dynamicKey")),d.get("#qfb_date_min").val(u.getValue(e,"dateMin")).closest(g.settingWrap).show(),d.get("#qfb_date_max").val(u.getValue(e,"dateMax")),g.setSelectVal(d.get("#qfb_date_view_start"),u.getValue(e,"dateViewStart")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_date_view_depth"),u.getValue(e,"dateViewDepth")).closest(g.settingWrap).show(),d.get("#qfb_date_show_footer").prop("checked",u.getValue(e,"dateShowFooter")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_date_locale"),u.getValue(e,"dateLocale")).trigger("change.select2").closest(g.settingWrap).show(),d.get("#qfb_date_format_js").val(u.getValue(e,"dateFormatJs")).closest(g.settingWrap).show(),d.get("#qfb_date_format").val(u.getValue(e,"dateFormat")).closest(g.settingWrap).show(),d.get("#qfb_date_auto_open").prop("checked",u.getValue(e,"dateAutoOpen")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",u.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",u.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(u.getValue(e,"messageRequired")),d.get("#qfb_message_dateInvalidDate").val(u.getValue(e,"messageDateInvalidDate")).closest(g.settingWrap).show(),d.get("#qfb_message_dateTooEarly").val(u.getValue(e,"messageDateTooEarly")),d.get("#qfb_message_dateTooLate").val(u.getValue(e,"messageDateTooLate")),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),u.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),u.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"dateMin"))&&d.get("#qfb_message_dateTooEarly").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"dateMax"))&&d.get("#qfb_message_dateTooLate").closest(g.settingWrap).show();break;case"time":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",u.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),u.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),u.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(u.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(u.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(u.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),d.get("#qfb_default_value_time").val(u.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",u.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(u.getValue(e,"dynamicKey")),d.get("#qfb_time_min").val(u.getValue(e,"timeMin")).closest(g.settingWrap).show(),d.get("#qfb_time_max").val(u.getValue(e,"timeMax")).closest(g.settingWrap).show(),d.get("#qfb_time_interval").val(u.getValue(e,"timeInterval")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_time_locale"),u.getValue(e,"timeLocale")).trigger("change.select2").closest(g.settingWrap).show(),d.get("#qfb_time_format_js").val(u.getValue(e,"timeFormatJs")).closest(g.settingWrap).show(),d.get("#qfb_time_format").val(u.getValue(e,"timeFormat")).closest(g.settingWrap).show(),d.get("#qfb_time_auto_open").prop("checked",u.getValue(e,"timeAutoOpen")).closest(g.settingWrap).show(),d.get("#qfb_read_only").prop("checked",u.getValue(e,"readOnly")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",u.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(u.getValue(e,"messageRequired")),d.get("#qfb_message_timeInvalidTime").val(u.getValue(e,"messageTimeInvalidTime")).closest(g.settingWrap).show(),d.get("#qfb_message_timeTooEarly").val(u.getValue(e,"messageTimeTooEarly")),d.get("#qfb_message_timeTooLate").val(u.getValue(e,"messageTimeTooLate")),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),u.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),u.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"timeMin"))&&d.get("#qfb_message_timeTooEarly").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"timeMax"))&&d.get("#qfb_message_timeTooLate").closest(g.settingWrap).show();break;case"password":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),d.get("#qfb_required").prop("checked",u.getValue(e,"required")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_left"),u.getValue(e,"fieldIconLeft")).closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_field_icon_right"),u.getValue(e,"fieldIconRight")),d.get("#qfb_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),d.get("#qfb_custom_class").val(u.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_placeholder").val(u.getValue(e,"placeholder")).closest(g.settingWrap).show(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(u.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),d.get("#qfb_max_length").val(u.getValue(e,"maxLength")).closest(g.settingWrap).show(),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",u.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(u.getValue(e,"messageRequired")),d.get("#qfb_message_lengthTooLong").val(u.getValue(e,"messageLengthTooLong")),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),u.getValue(e,"required")&&d.get("#qfb_message_required").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"maxLength"))&&d.get("#qfb_message_lengthTooLong").closest(g.settingWrap).show();break;case"hidden":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_default_value").val(u.getValue(e,"defaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_default_value").prop("checked",u.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(u.getValue(e,"dynamicKey")),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",u.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),u.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show();break;case"name":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb_description").val(u.getValue(e,"description")).closest(g.settingWrap).show(),d.get("#qfb_description_above").val(u.getValue(e,"descriptionAbove")),d.get("#qfb_name_prefix_enabled").prop("checked",u.getValue(e,"prefixEnabled")),d.get("#qfb_name_prefix_required").prop("checked",u.getValue(e,"prefixRequired")),b.options.loadNamePrefixOptions(),d.get("#qfb_name_prefix_none_option").prop("checked",u.getValue(e,"prefixNoneOption")),d.get("#qfb_name_prefix_none_option_text").val(u.getValue(e,"prefixNoneOptionText")),d.get("#qfb_name_prefix_sub_label").val(u.getValue(e,"prefixSubLabel")),d.get("#qfb_name_prefix_sub_label_above").val(u.getValue(e,"prefixSubLabelAbove")),d.get("#qfb_name_first_enabled").prop("checked",u.getValue(e,"firstEnabled")),d.get("#qfb_name_first_required").prop("checked",u.getValue(e,"firstRequired")),d.get("#qfb_name_first_placeholder").val(u.getValue(e,"firstPlaceholder")),d.get("#qfb_name_first_sub_label").val(u.getValue(e,"firstSubLabel")),d.get("#qfb_name_first_sub_label_above").val(u.getValue(e,"firstSubLabelAbove")),d.get("#qfb_name_first_default_value").val(u.getValue(e,"firstDefaultValue")),d.get("#qfb_name_middle_enabled").prop("checked",u.getValue(e,"middleEnabled")),d.get("#qfb_name_middle_required").prop("checked",u.getValue(e,"middleRequired")),d.get("#qfb_name_middle_placeholder").val(u.getValue(e,"middlePlaceholder")),d.get("#qfb_name_middle_sub_label").val(u.getValue(e,"middleSubLabel")),d.get("#qfb_name_middle_sub_label_above").val(u.getValue(e,"middleSubLabelAbove")),d.get("#qfb_name_middle_default_value").val(u.getValue(e,"middleDefaultValue")),d.get("#qfb_name_last_enabled").prop("checked",u.getValue(e,"lastEnabled")),d.get("#qfb_name_last_required").prop("checked",u.getValue(e,"lastRequired")),d.get("#qfb_name_last_placeholder").val(u.getValue(e,"lastPlaceholder")),d.get("#qfb_name_last_sub_label").val(u.getValue(e,"lastSubLabel")),d.get("#qfb_name_last_sub_label_above").val(u.getValue(e,"lastSubLabelAbove")),d.get("#qfb_name_last_default_value").val(u.getValue(e,"lastDefaultValue")),d.get("#qfb_name_suffix_enabled").prop("checked",u.getValue(e,"suffixEnabled")),d.get("#qfb_name_suffix_required").prop("checked",u.getValue(e,"suffixRequired")),d.get("#qfb_name_suffix_placeholder").val(u.getValue(e,"suffixPlaceholder")),d.get("#qfb_name_suffix_sub_label").val(u.getValue(e,"suffixSubLabel")),d.get("#qfb_name_suffix_sub_label_above").val(u.getValue(e,"suffixSubLabelAbove")),d.get("#qfb_name_suffix_default_value").val(u.getValue(e,"suffixDefaultValue")),d.get("#qfb-name-tabs").closest(g.settingWrap).show(),b.loadIconOption(d.get("#qfb_label_icon"),u.getValue(e,"labelIcon")).closest(g.settingWrap).show(),d.get("#qfb_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show(),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),d.get("#qfb_name_responsive_columns").val(u.getValue(e,"responsiveColumns")).closest(g.settingWrap).show(),d.get("#qfb_name_responsive_columns_custom").val(u.getValue(e,"responsiveColumnsCustom")),d.get("#qfb_custom_class").val(u.getValue(e,"customClass")).closest(g.settingWrap).show(),b.styles.loadStyles(),d.get("#qfb_sub_label").val(u.getValue(e,"subLabel")).closest(g.settingWrap).show(),d.get("#qfb_sub_label_above").val(u.getValue(e,"subLabelAbove")),d.get("#qfb_admin_label").val(u.getValue(e,"adminLabel")).closest(g.settingWrap).show(),d.get("#qfb_tooltip").val(u.getValue(e,"tooltip")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),u.loadLogic(),d.get("#qfb_dynamic_default_value").prop("checked",u.getValue(e,"dynamicDefaultValue")).closest(g.settingWrap).show(),d.get("#qfb_dynamic_key").val(u.getValue(e,"dynamicKey")),d.get("#qfb_show_in_email").prop("checked",u.getValue(e,"showInEmail")).closest(g.settingWrap).show(),d.get("#qfb_save_to_database").prop("checked",u.getValue(e,"saveToDatabase")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),b.validators.loadValidators(),d.get("#qfb_message_required").val(u.getValue(e,"messageRequired")),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"custom"===u.getValue(e,"responsiveColumns")&&d.get("#qfb_name_responsive_columns_custom").closest(g.settingWrap).show(),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show(),g.isNonEmptyString(u.getValue(e,"tooltip"))&&d.get("#qfb_tooltip_type").add(d.get("#qfb_tooltip_event")).closest(g.settingWrap).show(),u.getValue(e,"dynamicDefaultValue")&&d.get("#qfb_dynamic_key").closest(g.settingWrap).show(),u.getValue(e,"prefixEnabled")&&u.getValue(e,"prefixNoneOption")&&d.get("#qfb_name_prefix_none_option_text").closest(g.settingWrap).show(),(d.get("#qfb_name_prefix_enabled").is(":checked")&&d.get("#qfb_name_prefix_required").is(":checked")||d.get("#qfb_name_first_enabled").is(":checked")&&d.get("#qfb_name_first_required").is(":checked")||d.get("#qfb_name_middle_enabled").is(":checked")&&d.get("#qfb_name_middle_required").is(":checked")||d.get("#qfb_name_last_enabled").is(":checked")&&d.get("#qfb_name_last_required").is(":checked")||d.get("#qfb_name_suffix_enabled").is(":checked")&&d.get("#qfb_name_suffix_required").is(":checked"))&&d.get("#qfb_message_required").closest(g.settingWrap).show();break;case"group":case"page":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),"group"==e.type&&(d.get("#qfb_group_title").val(u.getValue(e,"title")).closest(g.settingWrap).show(),d.get("#qfb_group_title_tag").val(u.getValue(e,"titleTag")),d.get("#qfb_group_description").val(u.getValue(e,"description")).closest(g.settingWrap).show()),"page"==e.type&&(d.get("#qfb_page_title").val(u.getValue(e,"title")).closest(g.settingWrap).show(),d.get("#qfb_page_title_tag").val(u.getValue(e,"titleTag")),d.get("#qfb_page_description").val(u.getValue(e,"description")).closest(g.settingWrap).show()),"group"==e.type&&(d.get("#qfb_group_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_group_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show()),"page"==e.type&&(d.get("#qfb_page_field_size").val(u.getValue(e,"fieldSize")).closest(g.settingWrap).show(),d.get("#qfb_page_field_width").val(u.getValue(e,"fieldWidth")).closest(g.settingWrap).show()),d.get("#qfb_field_width_custom").val(u.getValue(e,"fieldWidthCustom")),g.setSelectVal(d.get("#qfb_group_style"),u.getValue(e,"groupStyle")).closest(g.settingWrap).show(),d.get("#qfb_border_color").val(u.getValue(e,"borderColor")).blur(),d.get("#qfb_background_color").val(u.getValue(e,"backgroundColor")).blur(),b.styles.loadStyles(),g.setSelectVal(d.get("#qfb_tooltip_type"),u.getValue(e,"tooltipType")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_tooltip_event"),u.getValue(e,"tooltipEvent")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_label_position"),u.getValue(e,"labelPosition")).closest(g.settingWrap).show(),d.get("#qfb_label_width").val(u.getValue(e,"labelWidth")),d.get("#qfb_show_label_in_email").prop("checked",u.getValue(e,"showLabelInEmail")).closest(g.settingWrap).show(),d.get("#qfb_show_label_in_entry").prop("checked",u.getValue(e,"showLabelInEntry")).closest(g.settingWrap).show();var l="group"==e.type?"showThisGroup":"showThisPage",s="group"==e.type?"hideThisGroup":"hideThisPage";u.loadLogic(f[l],f[s]),"group"===e.type&&g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show(),"custom"==u.getValue(e,"fieldWidth")&&d.get("#qfb_field_width_custom").closest(g.settingWrap).show(),"bordered"===u.getValue(e,"groupStyle")&&(d.get("#qfb_border_color").closest(g.settingWrap).show(),d.get("#qfb_background_color").closest(g.settingWrap).show()),"left"==u.getValue(e,"labelPosition")&&d.get("#qfb_label_width").closest(g.settingWrap).show();break;case"submit":d.get("#qfb_label").val(u.getValue(e,"label")).closest(g.settingWrap).show(),d.get("#qfb-button-label-hint").show(),g.setSelectVal(d.get("#qfb_submit_button_type"),u.getValue(e,"submitType")),d.get("#qfb_submit_button_text").val(u.getValue(e,"submitText")),b.loadIconOption(d.get("#qfb_submit_button_icon"),u.getValue(e,"submitIcon")),d.get("#qfb_submit_button_icon_position").val(u.getValue(e,"submitIconPosition")),d.get("#qfb_submit_button_image").val(u.getValue(e,"submitImage")),d.get("#qfb_submit_button_html").val(u.getValue(e,"submitHtml")),g.setSelectVal(d.get("#qfb_next_button_type"),u.getValue(e,"nextType")),d.get("#qfb_next_button_text").val(u.getValue(e,"nextText")),b.loadIconOption(d.get("#qfb_next_button_icon"),u.getValue(e,"nextIcon")),d.get("#qfb_next_button_icon_position").val(u.getValue(e,"nextIconPosition")),d.get("#qfb_next_button_image").val(u.getValue(e,"nextImage")),d.get("#qfb_next_button_html").val(u.getValue(e,"nextHtml")),g.setSelectVal(d.get("#qfb_back_button_type"),u.getValue(e,"backType")),b.loadIconOption(d.get("#qfb_back_button_icon"),u.getValue(e,"backIcon")),d.get("#qfb_back_button_icon_position").val(u.getValue(e,"backIconPosition")),d.get("#qfb_back_button_text").val(u.getValue(e,"backText")),d.get("#qfb_back_button_image").val(u.getValue(e,"backImage")),d.get("#qfb_back_button_html").val(u.getValue(e,"backHtml")),d.get("#qfb_button_style").val(u.getValue(e,"buttonStyle")).closest(g.settingWrap).show(),d.get("#qfb_button_size").val(u.getValue(e,"buttonSize")).closest(g.settingWrap).show(),d.get("#qfb_button_width").val(u.getValue(e,"buttonWidth")).closest(g.settingWrap).show(),d.get("#qfb_button_width_custom").val(u.getValue(e,"buttonWidthCustom")),b.styles.loadStyles(),u.loadLogic(),g.setSelectVal(d.get("#qfb_visibility"),u.getValue(e,"visibility")).closest(g.settingWrap).show();var n=b.isMultiPageForm(),c=u.isOnLastPage(e);n&&!c||(d.get("#qfb_submit_button_type").closest(g.settingWrap).show(),"default"===u.getValue(e,"submitType")?d.get("#qfb_submit_button_text").add(d.get("#qfb_submit_button_icon")).add(d.get("#qfb_submit_button_icon_position")).closest(g.settingWrap).show():"image"===u.getValue(e,"submitType")?d.get("#qfb_submit_button_image").closest(g.settingWrap).show():"html"===u.getValue(e,"submitType")&&d.get("#qfb_submit_button_html").closest(g.settingWrap).show()),n&&!c&&(d.get("#qfb_next_button_type").closest(g.settingWrap).show(),"default"===u.getValue(e,"nextType")?d.get("#qfb_next_button_text").add(d.get("#qfb_next_button_icon")).add(d.get("#qfb_next_button_icon_position")).closest(g.settingWrap).show():"image"===u.getValue(e,"nextType")?d.get("#qfb_next_button_image").closest(g.settingWrap).show():"html"===u.getValue(e,"nextType")&&d.get("#qfb_next_button_html").closest(g.settingWrap).show()),n&&!u.isOnFirstPage(e)&&(d.get("#qfb_back_button_type").closest(g.settingWrap).show(),"default"===u.getValue(e,"backType")?d.get("#qfb_back_button_text").add(d.get("#qfb_back_button_icon")).add(d.get("#qfb_back_button_icon_position")).closest(g.settingWrap).show():"image"===u.getValue(e,"backType")?d.get("#qfb_back_button_image").closest(g.settingWrap).show():"html"===u.getValue(e,"backType")&&d.get("#qfb_back_button_html").closest(g.settingWrap).show()),"custom"==u.getValue(e,"buttonWidth")&&d.get("#qfb_button_width_custom").closest(g.settingWrap).show();break;case"row":g.setSelectVal(d.get("#qfb_row_column_size"),u.getValue(e,"columnSize")).closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_row_column_count"),e.elements.length).closest(g.settingWrap).show(),u.populateColumnWidthCustomise(),e.elements.length<=8&&d.get("#qfb-row-column-customise").closest(g.settingWrap).show(),g.setSelectVal(d.get("#qfb_responsive_columns"),u.getValue(e,"responsiveColumns")).closest(g.settingWrap).show(),d.get("#qfb_responsive_columns_custom").val(u.getValue(e,"responsiveColumnsCustom")),"custom"==u.getValue(e,"responsiveColumns")&&d.get("#qfb_responsive_columns_custom").closest(g.settingWrap).show()}d.get("#qfb-element-unique-id").val(b.form.id+"_"+e.id).closest(g.settingWrap).show();var r=d.get("#qfb-element-settings-tabs-nav").find("> li");d.get("#qfb-element-settings-tabs").find("> .qfb-tabs-panel").each(function(e){var t=p(this).find("> .qfb-element-settings-inner > .qfb-settings > .qfb-setting"),i=!1;t.each(function(){if("block"==p(this).css("display"))return!(i=!0)}),i||r.eq(e).hide()})},saveSettings:function(){var e=u.editing;switch(d.get("#qfb-element-settings").find(".qfb-validation-error").remove(),d.get("#qfb-element-settings").find(".qfb-field-error").removeClass("qfb-field-error"),e.type){case"text":case"textarea":case"email":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),"textarea"===e.type&&(e.enableEditor=d.get("#qfb_enable_editor").is(":checked")),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),"textarea"===e.type?e.defaultValue=d.get("#qfb_default_value_textarea").val():e.defaultValue=d.get("#qfb_default_value").val(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.maxLength=d.get("#qfb_max_length").val(),e.readOnly=d.get("#qfb_read_only").is(":checked"),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.filters.saveFilters(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageLengthTooLong=d.get("#qfb_message_lengthTooLong").val(),"email"==e.type&&(e.messageEmailAddressInvalidFormat=d.get("#qfb_message_emailAddressInvalidFormat").val());break;case"select":case"checkbox":case"radio":case"multiselect":e.label=d.get("#qfb_label").val(),b.options.saveOptions(),"select"==e.type&&(e.noneOption=d.get("#qfb_none_option").is(":checked")),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),"select"!=e.type&&"multiselect"!=e.type||(e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.enhancedSelectEnabled=d.get("#qfb_enhanced_select_enabled").is(":checked"),"select"==e.type&&(e.enhancedSelectSearch=d.get("#qfb_enhanced_select_search").is(":checked")),d.get("#qfb_enhanced_select_enabled").is(":checked")?u.enhancedSelects[e.id]=!0:delete u.enhancedSelects[e.id]),"radio"!=e.type&&"checkbox"!=e.type||(e.optionsLayout=d.get("#qfb_options_layout").val(),e.optionsLayoutResponsiveColumns=d.get("#qfb_options_layout_responsive_columns").val(),e.optionsLayoutResponsiveColumnsCustom=d.get("#qfb_options_layout_responsive_columns_custom").val(),e.optionsStyle=d.get("#qfb_options_style").val(),e.optionsButtonStyle=d.get("#qfb_options_button_style").val(),e.optionsButtonSize=d.get("#qfb_options_button_size").val(),e.optionsButtonWidth=d.get("#qfb_options_button_width").val(),e.optionsButtonWidthCustom=d.get("#qfb_options_button_width_custom").val(),e.optionsButtonIconPosition=d.get("#qfb_options_button_icon_position").val()),e.customClass=d.get("#qfb_custom_class").val(),"multiselect"===e.type&&(e.sizeAttribute=d.get("#qfb_size_attribute").val()),b.styles.saveStyles(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),e.inArrayValidator=d.get("#qfb_in_array_validator").is(":checked"),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),"select"!=e.type&&"radio"!=e.type||(e.submitOnChoice=d.get("#qfb_submit_on_choice").is(":checked")),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),"select"==e.type&&(e.noneOptionText=d.get("#qfb_none_option_text").val()),"select"!=e.type&&"multiselect"!=e.type||("multiselect"==e.type&&(e.enhancedSelectPlaceholder=d.get("#qfb_enhanced_select_placeholder").val()),e.enhancedSelectNoResultsFound=d.get("#qfb_enhanced_select_no_results_found").val());break;case"file":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.enhancedUploadEnabled=d.get("#qfb_enhanced_upload_enabled").is(":checked"),e.enhancedUploadEnabled?u.enhancedUploaders[e.id]=!0:delete u.enhancedUploaders[e.id],e.enhancedUploadStyle=d.get("#qfb_enhanced_upload_style").val(),e.buttonStyle=d.get("#qfb_button_style").val(),e.buttonSize=d.get("#qfb_button_size").val(),e.buttonWidth=d.get("#qfb_button_width").val(),e.buttonWidthCustom=d.get("#qfb_button_width_custom").val(),e.buttonIcon=d.get("#qfb_button_icon").val(),e.buttonIconPosition=d.get("#qfb_button_icon_position").val(),e.uploadListLayout=d.get("#qfb_upload_list_layout").val(),e.uploadListSize=d.get("#qfb_upload_list_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),b.styles.saveStyles(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),e.minimumNumberOfFiles=d.get("#qfb_upload_minimum_files").val(),e.maximumNumberOfFiles=d.get("#qfb_upload_maximum_files").val(),e.allowedExtensions=d.get("#qfb_upload_allowed_extensions").val(),e.maximumFileSize=d.get("#qfb_upload_maximum_size").val(),e.saveToServer=d.get("#qfb_save_to_server").is(":checked"),e.savePath=d.get("#qfb_save_path").val(),e.addToMediaLibrary=d.get("#qfb_add_to_media_library").is(":checked"),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),e.browseText=d.get("#qfb_browse_text").val(),e.messageFileUploadRequired=d.get("#qfb_message_required").val(),e.messageFileNumRequired=d.get("#qfb_message_fileNumRequired").val(),e.messageFileTooMany=d.get("#qfb_message_fileTooMany").val(),e.messageFileTooBigFilename=d.get("#qfb_message_fileTooBigFilename").val(),e.messageFileTooBig=d.get("#qfb_message_fileTooBig").val(),e.messageNotAllowedTypeFilename=d.get("#qfb_message_fileNotAllowedTypeFilename").val(),e.messageNotAllowedType=d.get("#qfb_message_fileNotAllowedType").val();break;case"captcha":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.captchaLength=d.get("#qfb_captcha_length").val(),e.captchaWidth=d.get("#qfb_captcha_width").val(),e.captchaHeight=d.get("#qfb_captcha_height").val(),e.captchaBgColor=d.get("#qfb_captcha_bg_color").val(),e.captchaBgColorRgba=tinycolor(e.captchaBgColor).toRgb(),e.captchaTextColor=d.get("#qfb_captcha_text_color").val(),e.captchaTextColorRgba=tinycolor(e.captchaTextColor).toRgb(),e.captchaFont=d.get("#qfb_captcha_font").val(),e.captchaMinFontSize=d.get("#qfb_captcha_min_font_size").val(),e.captchaMaxFontSize=d.get("#qfb_captcha_max_font_size").val(),e.captchaMinAngle=d.get("#qfb_captcha_min_angle").val(),e.captchaMaxAngle=d.get("#qfb_captcha_max_angle").val(),e.captchaRetina=d.get("#qfb_captcha_retina").is(":checked"),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),e.visibility=d.get("#qfb_visibility").val(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageCaptchaNotMatch=d.get("#qfb_message_captchaNotMatch").val();break;case"recaptcha":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.recaptchaVersion=d.get("#qfb_recaptcha_version").val(),e.recaptchaSize=d.get("#qfb_recaptcha_size").val(),e.recaptchaType=d.get("#qfb_recaptcha_type").val(),e.recaptchaTheme=d.get("#qfb_recaptcha_theme").val(),e.recaptchaBadge=d.get("#qfb_recaptcha_badge").val(),e.recaptchaLang=d.get("#qfb_recaptcha_lang").val(),e.recaptchaThreshold=d.get("#qfb_recaptcha_threshold").val(),e.labelIcon=d.get("#qfb_label_icon").val(),b.styles.saveStyles(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),e.visibility=d.get("#qfb_visibility").val(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageRecaptchaMissingInputSecret=d.get("#qfb_message_recaptchaMissingInputSecret").val(),e.messageRecaptchaInvalidInputSecret=d.get("#qfb_message_recaptchaInvalidInputSecret").val(),e.messageRecaptchaMissingInputResponse=d.get("#qfb_message_recaptchaMissingInputResponse").val(),e.messageRecaptchaInvalidInputResponse=d.get("#qfb_message_recaptchaInvalidInputResponse").val(),e.messageRecaptchaError=d.get("#qfb_message_recaptchaError").val(),e.messageRecaptchaScoreTooLow=d.get("#qfb_message_recaptchaScoreTooLow").val();break;case"html":if(e.label=d.get("#qfb_label").val(),window.tinymce){var t=window.tinymce.get("qfb_html_content");t&&!t.isHidden()&&t.isDirty()&&t.save()}e.content=d.get("#qfb_html_content").val(),e.autoFormat=d.get("#qfb_html_auto_format").is(":checked"),b.styles.saveStyles(),u.saveLogic(),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.plainTextContent=d.get("#qfb_plain_text_content").val(),e.showInEntry=d.get("#qfb_show_in_entry").is(":checked"),e.visibility=d.get("#qfb_visibility").val();break;case"date":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),e.defaultValue=d.get("#qfb_default_value_date").val(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.dateMin=d.get("#qfb_date_min").val(),e.dateMax=d.get("#qfb_date_max").val(),e.dateViewStart=d.get("#qfb_date_view_start").val(),e.dateViewDepth=d.get("#qfb_date_view_depth").val(),e.dateShowFooter=d.get("#qfb_date_show_footer").is(":checked"),e.dateLocale=d.get("#qfb_date_locale").val(),u.datepickers[e.id]=e.dateLocale,e.dateFormatJs=d.get("#qfb_date_format_js").val(),e.dateFormat=d.get("#qfb_date_format").val(),e.dateAutoOpen=d.get("#qfb_date_auto_open").is(":checked"),e.readOnly=d.get("#qfb_read_only").is(":checked"),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageDateInvalidDate=d.get("#qfb_message_dateInvalidDate").val(),e.messageDateTooEarly=d.get("#qfb_message_dateTooEarly").val(),e.messageDateTooLate=d.get("#qfb_message_dateTooLate").val(),e.dateLocale&&-1===p.inArray(e.dateLocale,f.loadedPreviewLocales)&&b.loadPreviewLocale(e.dateLocale,function(){f.loadedPreviewLocales.push(e.dateLocale)});break;case"time":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),e.defaultValue=d.get("#qfb_default_value_time").val(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.timeMin=d.get("#qfb_time_min").val(),e.timeMax=d.get("#qfb_time_max").val(),e.timeInterval=d.get("#qfb_time_interval").val(),e.timeLocale=d.get("#qfb_time_locale").val(),u.timepickers[e.id]=e.timeLocale,e.timeFormatJs=d.get("#qfb_time_format_js").val(),e.timeFormat=d.get("#qfb_time_format").val(),e.timeAutoOpen=d.get("#qfb_time_auto_open").is(":checked"),e.readOnly=d.get("#qfb_read_only").is(":checked"),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageTimeInvalidTime=d.get("#qfb_message_timeInvalidTime").val(),e.messageTimeTooEarly=d.get("#qfb_message_timeTooEarly").val(),e.messageTimeTooLate=d.get("#qfb_message_timeTooLate").val(),e.timeLocale&&-1===p.inArray(e.timeLocale,f.loadedPreviewLocales)&&b.loadPreviewLocale(e.timeLocale,function(){f.loadedPreviewLocales.push(e.timeLocale)});break;case"password":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.required=d.get("#qfb_required").is(":checked"),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldIconLeft=d.get("#qfb_field_icon_left").val(),e.fieldIconRight=d.get("#qfb_field_icon_right").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.placeholder=d.get("#qfb_placeholder").val(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),e.maxLength=d.get("#qfb_max_length").val(),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.messageRequired=d.get("#qfb_message_required").val(),e.messageLengthTooLong=d.get("#qfb_message_lengthTooLong").val();break;case"hidden":e.label=d.get("#qfb_label").val(),e.defaultValue=d.get("#qfb_default_value").val(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val();break;case"name":e.label=d.get("#qfb_label").val(),e.description=d.get("#qfb_description").val(),e.descriptionAbove=d.get("#qfb_description_above").val(),e.prefixEnabled=d.get("#qfb_name_prefix_enabled").is(":checked"),e.prefixRequired=d.get("#qfb_name_prefix_required").is(":checked"),b.options.saveNamePrefixOptions(),e.prefixNoneOption=d.get("#qfb_name_prefix_none_option").is(":checked"),e.prefixSubLabel=d.get("#qfb_name_prefix_sub_label").val(),e.prefixSubLabelAbove=d.get("#qfb_name_prefix_sub_label_above").val(),e.firstEnabled=d.get("#qfb_name_first_enabled").is(":checked"),e.firstRequired=d.get("#qfb_name_first_required").is(":checked"),e.firstPlaceholder=d.get("#qfb_name_first_placeholder").val(),e.firstSubLabel=d.get("#qfb_name_first_sub_label").val(),e.firstSubLabelAbove=d.get("#qfb_name_first_sub_label_above").val(),e.firstDefaultValue=d.get("#qfb_name_first_default_value").val(),e.middleEnabled=d.get("#qfb_name_middle_enabled").is(":checked"),e.middleRequired=d.get("#qfb_name_middle_required").is(":checked"),e.middlePlaceholder=d.get("#qfb_name_middle_placeholder").val(),e.middleSubLabel=d.get("#qfb_name_middle_sub_label").val(),e.middleSubLabelAbove=d.get("#qfb_name_middle_sub_label_above").val(),e.middleDefaultValue=d.get("#qfb_name_middle_default_value").val(),e.lastEnabled=d.get("#qfb_name_last_enabled").is(":checked"),e.lastRequired=d.get("#qfb_name_last_required").is(":checked"),e.lastPlaceholder=d.get("#qfb_name_last_placeholder").val(),e.lastSubLabel=d.get("#qfb_name_last_sub_label").val(),e.lastSubLabelAbove=d.get("#qfb_name_last_sub_label_above").val(),e.lastDefaultValue=d.get("#qfb_name_last_default_value").val(),e.suffixEnabled=d.get("#qfb_name_suffix_enabled").is(":checked"),e.suffixRequired=d.get("#qfb_name_suffix_required").is(":checked"),e.suffixPlaceholder=d.get("#qfb_name_suffix_placeholder").val(),e.suffixSubLabel=d.get("#qfb_name_suffix_sub_label").val(),e.suffixSubLabelAbove=d.get("#qfb_name_suffix_sub_label_above").val(),e.suffixDefaultValue=d.get("#qfb_name_suffix_default_value").val(),e.labelIcon=d.get("#qfb_label_icon").val(),e.fieldSize=d.get("#qfb_field_size").val(),e.fieldWidth=d.get("#qfb_field_width").val(),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.responsiveColumns=d.get("#qfb_name_responsive_columns").val(),e.responsiveColumnsCustom=d.get("#qfb_name_responsive_columns_custom").val(),e.customClass=d.get("#qfb_custom_class").val(),b.styles.saveStyles(),e.subLabel=d.get("#qfb_sub_label").val(),e.subLabelAbove=d.get("#qfb_sub_label_above").val(),e.adminLabel=d.get("#qfb_admin_label").val(),e.tooltip=d.get("#qfb_tooltip").val(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),u.saveLogic(),e.dynamicDefaultValue=d.get("#qfb_dynamic_default_value").is(":checked"),e.dynamicKey=d.get("#qfb_dynamic_key").val(),e.showInEmail=d.get("#qfb_show_in_email").is(":checked"),e.saveToDatabase=d.get("#qfb_save_to_database").is(":checked"),e.visibility=d.get("#qfb_visibility").val(),b.validators.saveValidators(),e.prefixNoneOptionText=d.get("#qfb_name_prefix_none_option_text").val(),e.messageRequired=d.get("#qfb_message_required").val();break;case"group":case"page":e.label=d.get("#qfb_label").val(),"page"==e.type&&u.updatePageTabNavLabel(e),"group"==e.type&&(e.title=d.get("#qfb_group_title").val(),e.titleTag=d.get("#qfb_group_title_tag").val(),e.description=d.get("#qfb_group_description").val()),"page"==e.type&&(e.title=d.get("#qfb_page_title").val(),e.titleTag=d.get("#qfb_page_title_tag").val(),e.description=d.get("#qfb_page_description").val()),"group"==e.type&&(e.fieldSize=d.get("#qfb_group_field_size").val(),e.fieldWidth=d.get("#qfb_group_field_width").val()),"page"==e.type&&(e.fieldSize=d.get("#qfb_page_field_size").val(),e.fieldWidth=d.get("#qfb_page_field_width").val()),e.fieldWidthCustom=d.get("#qfb_field_width_custom").val(),e.groupStyle=d.get("#qfb_group_style").val(),e.borderColor=d.get("#qfb_border_color").val(),e.backgroundColor=d.get("#qfb_background_color").val(),b.styles.saveStyles(),e.tooltipType=d.get("#qfb_tooltip_type").val(),e.tooltipEvent=d.get("#qfb_tooltip_event").val(),e.labelPosition=d.get("#qfb_label_position").val(),e.labelWidth=d.get("#qfb_label_width").val(),e.showLabelInEmail=d.get("#qfb_show_label_in_email").is(":checked"),e.showLabelInEntry=d.get("#qfb_show_label_in_entry").is(":checked"),u.saveLogic(),"group"===e.type&&(e.visibility=d.get("#qfb_visibility").val());break;case"submit":e.label=d.get("#qfb_label").val(),b.isMultiPageForm()&&!u.isOnLastPage(e)?(e.submitType=d.get("#qfb_next_button_type").val(),e.submitText=d.get("#qfb_next_button_text").val(),e.submitIcon=d.get("#qfb_next_button_icon").val(),e.submitIconPosition=d.get("#qfb_next_button_icon_position").val(),e.submitImage=d.get("#qfb_next_button_image").val(),e.submitHtml=d.get("#qfb_next_button_html").val(),e.nextType=d.get("#qfb_next_button_type").val(),e.nextText=d.get("#qfb_next_button_text").val(),e.nextIcon=d.get("#qfb_next_button_icon").val(),e.nextIconPosition=d.get("#qfb_next_button_icon_position").val(),e.nextImage=d.get("#qfb_next_button_image").val(),e.nextHtml=d.get("#qfb_next_button_html").val()):(e.submitType=d.get("#qfb_submit_button_type").val(),e.submitText=d.get("#qfb_submit_button_text").val(),e.submitIcon=d.get("#qfb_submit_button_icon").val(),e.submitIconPosition=d.get("#qfb_submit_button_icon_position").val(),e.submitImage=d.get("#qfb_submit_button_image").val(),e.submitHtml=d.get("#qfb_submit_button_html").val(),e.nextType=d.get("#qfb_submit_button_type").val(),e.nextText=d.get("#qfb_submit_button_text").val(),e.nextIcon=d.get("#qfb_submit_button_icon").val(),e.nextIconPosition=d.get("#qfb_submit_button_icon_position").val(),e.nextImage=d.get("#qfb_submit_button_image").val(),e.nextHtml=d.get("#qfb_submit_button_html").val()),e.backType=d.get("#qfb_back_button_type").val(),e.backText=d.get("#qfb_back_button_text").val(),e.backIcon=d.get("#qfb_back_button_icon").val(),e.backIconPosition=d.get("#qfb_back_button_icon_position").val(),e.backImage=d.get("#qfb_back_button_image").val(),e.backHtml=d.get("#qfb_back_button_html").val(),e.buttonStyle=d.get("#qfb_button_style").val(),e.buttonSize=d.get("#qfb_button_size").val(),e.buttonWidth=d.get("#qfb_button_width").val(),e.buttonWidthCustom=d.get("#qfb_button_width_custom").val(),b.styles.saveStyles(),u.saveLogic(),e.visibility=d.get("#qfb_visibility").val();break;case"row":if(!u.saveRowSettings())return!1}return u.updateElementLabel(e),u.setRequiredClass(p("#qfb-element-"+e.id),e),!0},loadLogic:function(e,t){e=e||f.showThisField,t=t||f.hideThisField;var i=u.editing;b.logic.buildLogic([{text:e,value:"1",selected:u.getValue(i,"logicAction")},{text:t,value:"0",selected:!u.getValue(i,"logicAction")}],[{text:f.ifAllOfTheseRulesMatch,value:"all",selected:"all"==u.getValue(i,"logicMatch")},{text:f.ifAnyOfTheseRulesMatch,value:"any",selected:"any"==u.getValue(i,"logicMatch")}],u.getValue(i,"logicRules"),d.get("#qfb-logic")),d.get("#qfb_logic_enabled").prop("checked",u.getValue(i,"logicEnabled")).closest(g.settingWrap).show(),u.getValue(i,"logicEnabled")&&d.get("#qfb-logic").closest(g.settingWrap).show()},saveLogic:function(){var e=u.editing;e.logicEnabled=d.get("#qfb_logic_enabled").is(":checked"),e.logicAction="0"!==d.get("#qfb-logic").find(".qfb-logic-action").val(),e.logicMatch=d.get("#qfb-logic").find(".qfb-logic-match").val(),e.logicRules=b.logic.getLogicRules(d.get("#qfb-logic"))},saveRowSettings:function(){var t,e=u.editing,i=p("#qfb_row_column_count").val(),o=p.isNumeric(i)?parseInt(i,10):1,a=[],l=0,s=!1;return o=g.clamp(o,1,20),t=u.columnWidths[o],p(".qfb-row-column-width").each(function(){var e=p(this).val();g.isNonEmptyString(e)?p.isNumeric(e)?(e=parseFloat(e),l+=e,a.push(g.toString(e))):(s=!0,p(this).addClass("qfb-field-error")):(l+=t,a.push(""))}),s?(g.addValidationError(d.get("#qfb-row-column-customise").closest(g.settingInputWrap),f.columnWidthMustBeNumeric),!1):100<l?(g.addValidationError(d.get("#qfb-row-column-customise").closest(g.settingInputWrap),f.columnWidthTotalTooHigh),!1):(e.columnSize=d.get("#qfb_row_column_size").val(),e.responsiveColumns=d.get("#qfb_responsive_columns").val(),e.responsiveColumnsCustom=d.get("#qfb_responsive_columns_custom").val(),u.setRowLayout(e,a),!0)},getRowLayout:function(e){for(var t=[],i=0;i<e.elements.length;i++)t.push(e.elements[i].width);return t},setRowLayout:function(e,t){var i=t.length,o=p("#qfb-child-elements-"+e.id).find("> .qfb-element-column").length;if(o<i)for(var a=0;a<i;a++)o-1<a&&u.addElement("column",e);else if(i<o){for(var l=[],s=p(),n=0;n<e.elements.length;n++)if(i-1<n){var c=e.elements[n];if(c.elements.length)for(var r=0;r<c.elements.length;r++)l.push(c.elements[r]),s=s.add(p("#qfb-element-"+c.elements[r].id).detach());p("#qfb-element-"+c.id).remove()}e.elements.splice(i,o-i);for(var f=e.elements[e.elements.length-1],g=p("#qfb-child-elements-"+f.id),b=0;b<l.length;b++)f.elements.push(l[b]);g.append(s)}u.setRowColumnClass(e);for(var d=0;d<t.length;d++)e.elements[d].width=t[d]},setRowColumnClass:function(e){p("#qfb-child-elements-"+e.id).removeClass("qfb-0-columns qfb-1-columns qfb-2-columns qfb-3-columns qfb-4-columns qfb-5-columns qfb-6-columns qfb-7-columns qfb-8-columns qfb-9-columns qfb-10-columns qfb-11-columns qfb-12-columns qfb-13-columns qfb-14-columns qfb-15-columns qfb-16-columns qfb-17-columns qfb-18-columns qfb-19-columns qfb-20-columns").addClass("qfb-"+e.elements.length+"-columns")},populateColumnWidthCustomise:function(){var e,t=u.editing,i=p("#qfb_row_column_count").val(),o=[];i=p.isNumeric(i)?parseInt(i,10):1,i=g.clamp(i,1,20),e=u.columnWidths[i];for(var a=0;a<i;a++){var l=p("<input>",{type:"text","class":"qfb-row-column-width",title:f.columnNumber.replace("%d",g.toString(a+1)),placeholder:e,inputmode:"numeric"});if(t&&"object"==typeof t.elements[a]){var s=g.toString(t.elements[a].width);g.isNonEmptyString(s)&&i<=8?l.val(s):l.val("")}o.push(l)}d.get("#qfb-row-column-customise").html(o)},savePreviewLabel:function(e,t){t.label=e,u.updateElementLabel(t),b.refreshPreview()},updateElementLabel:function(e){p("#qfb-plc-"+e.id).text(e.label),b.updateInsertVariableElement(e)},getAdminLabel:function(e){return"string"==typeof e.adminLabel&&0<e.adminLabel.length?e.adminLabel:"string"==typeof e.label&&0<e.label.length?e.label:""},getShortenedAdminLabel:function(e){var t=b.shorten(u.getAdminLabel(e)),i=b.form.id+"_"+e.id;return f.adminLabelElementId.replace("%1$s",t).replace("%2$s",i)},setElementSettingsLabel:function(e){var t;if(-1<p.inArray(e.type,["text","textarea","email","select","checkbox","radio","multiselect","file","date","time","password","name"])){var i=d.get("#qfb_admin_label").val();t=g.isNonEmptyString(i)?i:d.get("#qfb_label").val()}else t=d.get("#qfb_label").val();d.get("#qfb-element-settings-element-label").text(t)},updatePageTabNavLabel:function(o){p(".qfb-page-tab-nav").each(function(e){var t=p(this);if(o.id===t.data("id")){var i=g.isNonEmptyString(o.label)?o.label:f.pageTabNavText.replace("%s",e+1);t.find(".qfb-page-tab-nav-label").text(i)}}),d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0)},updatePageTabNavLabels:function(){p(".qfb-page-tab-nav").each(function(e){var t=p(this),i=u.getElementById(t.data("id")),o=i&&g.isNonEmptyString(i.label)?i.label:f.pageTabNavText.replace("%s",e+1);t.find(".qfb-page-tab-nav-label").text(o)}),d.get("#qfb-page-tabs-nav-wrap").data("kendoTabStrip").resize(!0)},sortElements:function(){var l=function(e,o){o=o||0;var a=[];return e.each(function(e){var t=p(this).data("id");if(t){var i=u.getElementById(t);i&&(i.position=e,i.parentId=o,"group"!=i.type&&"page"!=i.type&&"row"!=i.type&&"column"!=i.type||(i.elements=l(p("#qfb-child-elements-"+i.id).find("> .qfb-element"),i.id)),a.push(i))}}),a};b.form.elements=l(p(".qfb-page-tab-nav")),u.buildCache(),u.checkEmptyGroups(),u.squeezeElements()},buildCache:function(){var o=function(e){for(var t=0,i=e.length;t<i;t++)u.cache.push(e[t]),"group"!=e[t].type&&"page"!=e[t].type&&"row"!=e[t].type&&"column"!=e[t].type||o(e[t].elements)};u.cache=[],o(b.form.elements)},removeFromCache:function(e){for(var t=u.cache.length;t--;)if(u.cache[t].id==e.id){u.cache.splice(t,1);break}},addToFeatureCaches:function(e){switch(e.type){case"date":u.datepickers[e.id]=u.getValue(e,"dateLocale");break;case"time":u.timepickers[e.id]=u.getValue(e,"timeLocale");break;case"file":u.getValue(e,"enhancedUploadEnabled")&&(u.enhancedUploaders[e.id]=!0);break;case"recaptcha":u.recaptchas.push(e.id);break;case"select":case"multiselect":u.getValue(e,"enhancedSelectEnabled")&&(u.enhancedSelects[e.id]=!0)}},removeFromFeatureCaches:function(e){delete u.datepickers[e.id],delete u.timepickers[e.id],delete u.enhancedUploaders[e.id],delete u.enhancedSelects[e.id];for(var t=u.recaptchas.length;t--;)u.recaptchas[t]==e.id&&u.recaptchas.splice(t,1)},getElementById:function(e){for(var t=0,i=u.cache.length;t<i;t++)if(u.cache[t].id==e)return u.cache[t];return null},isOnFirstPage:function(e){if(b.form.elements.length)for(var t,i=e.parentId;i;){if((t=u.getElementById(i))&&t.id==b.form.elements[0].id)return!0;i=t.parentId}return!1},isOnLastPage:function(e){if(b.form.elements.length)for(var t,i=e.parentId;i;){if((t=u.getElementById(i))&&t.id==b.form.elements[b.form.elements.length-1].id)return!0;i=t.parentId}return!1},checkEmptyGroups:function(){p(".qfb-element-group").each(function(){var e=p(this);e.toggleClass("qfb-element-group-empty",0===e.find(".qfb-child-elements").children().length)})},squeezeElements:function(){p(".qfb-element").not(".qfb-element-page, .qfb-element-row, .qfb-element-column").each(function(){var e=p(this),t=e.width();e.is(":visible")&&0<t&&(t<300?e.addClass("qfb-pre-squeeze"):e.removeClass("qfb-pre-squeeze"),t<220?e.addClass("qfb-squeeze"):e.removeClass("qfb-squeeze"),t<75?e.addClass("qfb-squeeze-panic"):e.removeClass("qfb-squeeze-panic"))})},collapseGroup:function(e,t){var i=e.find("> .qfb-child-elements"),o=t.find("> i");e.hasClass("qfb-collapsed")?(o.removeClass().addClass("mdi mdi-remove_circle_outline"),t.attr("title",f.collapse),i.qfbSlideShow(function(){e.removeClass("qfb-collapsed"),i.sortable("enable")},{minHeight:40})):(e.addClass("qfb-collapsed"),i.sortable("disable").qfbSlideHide(p.noop,{minHeight:0}),t.attr("title",f.expand),o.removeClass().addClass("mdi mdi-add_circle_outline"))},setRequiredClass:function(e,t){t.required?e.addClass("qfb-element-required"):e.removeClass("qfb-element-required")},checkTranslationTabVisibility:function(){var e=!1;d.get(".qfb-translations").find("> .qfb-setting").each(function(){if("block"==p(this).css("display"))return!(e=!0)}),d.get("#qfb-element-settings-tab-translations")[e?"fadeIn":"fadeOut"]()},getValue:function(e,t){return g.getProperty(e,t,g.getProperty(f.elements[e.type].config,t))}},e.builder.elements=u,e}(quform=function(e,n,s,c){"use strict";var r,f=e.core,g=f.cache,b=n(window),d=n(document),t=!1,i=!1,o=null,p=null,u=!1,l=[];function a(){f.isNonEmptyString(g.get("#qfb_form_loading_type").val())?(g.get("#qfb_form_loading_position").add(g.get("#qfb_form_loading_color")).closest(f.settingWrap).qfbSlideShow(),"custom"==g.get("#qfb_form_loading_type").val()?g.get("#qfb_form_loading_custom").closest(f.settingWrap).qfbSlideShow():g.get("#qfb_form_loading_custom").closest(f.settingWrap).qfbSlideHide(),0<=g.get("#qfb_form_loading_position").val().indexOf("over")?(g.get("#qfb_form_loading_overlay").closest(f.settingWrap).qfbSlideShow(),g.get("#qfb_form_loading_overlay").is(":checked")?g.get("#qfb_form_loading_overlay_color").closest(f.settingWrap).qfbSlideShow():g.get("#qfb_form_loading_overlay_color").closest(f.settingWrap).qfbSlideHide()):g.get("#qfb_form_loading_overlay").add(g.get("#qfb_form_loading_overlay_color")).closest(f.settingWrap).qfbSlideHide()):g.get("#qfb_form_loading_custom").add(g.get("#qfb_form_loading_position")).add(g.get("#qfb_form_loading_color")).add(g.get("#qfb_form_loading_overlay")).add(g.get("#qfb_form_loading_overlay_color")).closest(f.settingWrap).qfbSlideHide()}function m(e){e=!!e;var t=g.get("#qfb_form_theme").val(),i=e?"qfbSlideHide":"hide",o=e?"qfbSlideShow":"show";""===t||"minimal"===t?g.get("#qfb-form-theme-primary-color-tabs").closest(f.settingWrap)[i]():"shine-gradient"===t||"blend-gradient"===t?(g.get("#qfb-form-theme-bootstrap-tip").hide(),g.get("#qfb-form-theme-primary-color-tabs").closest(f.settingWrap)[o](),g.get("#qfb-form-theme-secondary-color-tabs")[o](),g.get("#qfb-form-theme-secondary-color-tab")[i](),g.get("#qfb-form-theme-secondary-color-tab-foreground").click()):"storm"===t||"hollow"===t?(g.get("#qfb-form-theme-bootstrap-tip").hide(),g.get("#qfb-form-theme-primary-color-tabs").closest(f.settingWrap)[o](),g.get("#qfb-form-theme-secondary-color-tab")[i](),g.get("#qfb-form-theme-secondary-color-tabs")[i]()):("bootstrap"===t?g.get("#qfb-form-theme-bootstrap-tip").show():g.get("#qfb-form-theme-bootstrap-tip").hide(),g.get("#qfb-form-theme-primary-color-tabs").closest(f.settingWrap)[o](),g.get("#qfb-form-theme-secondary-color-tabs")[o](),g.get("#qfb-form-theme-secondary-color-tab")[o]())}return r={form:{},savedFormJson:"",init:function(e){r.form=e,"function"==typeof Array.prototype.toJSON&&delete Array.prototype.toJSON,r.refreshPreview(),n("#qfb-form").submit(function(){return!1}),n("#qfb-panels").kendoSplitter({panes:[{collapsible:!0},{collapsible:!0,size:"50%"}],resize:function(){r.elements.squeezeElements()}}),b.on("resize.quform",_.debounce(function(){r.resizeSplitter()},250)),d.on("wp-collapse-menu",function(){r.resizeSplitter()}),g.get("#qfb-tabs").tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),g.get("#qfb-tabs-icon-form").click(function(){r.activateTabs(0)}),g.get("#qfb-tabs-icon-settings").click(function(){r.activateTabs(1)}),g.get("#qfb-save-form").click(function(){r.save()}),r.elements.init(),r.filters.init(),r.validators.init(),r.notifications.init(),r.confirmations.init(),r.resizeSplitter(),r.savedFormJson=JSON.stringify(r.form),window.onbeforeunload=function(){if(r.update(),r.savedFormJson!==JSON.stringify(r.form))return s.unsavedChanges},g.get("#qfb-top").css({opacity:1}),d.one("tinymce-editor-setup",function(){window.tinymce&&window.tinymce.ui&&window.tinymce.ui.FloatPanel&&(window.tinymce.ui.FloatPanel.zIndex=100007)}),t=!0},onWindowLoad:function(){g.get("#qfb-preview-refresh").click(r.refreshPreview),g.get("#qfb-form-settings-tabs").add(g.get("#qfb-form-style-tabs")).add(g.get("#qfb-form-theme-primary-color-tabs")).add(g.get("#qfb-form-theme-secondary-color-tabs")).add(g.get("#qfb-field-background-color-tabs")).add(g.get("#qfb-field-border-color-tabs")).add(g.get("#qfb-field-text-color-tabs")).add(g.get("#qfb-button-background-color-tabs")).add(g.get("#qfb-button-border-color-tabs")).add(g.get("#qfb-button-text-color-tabs")).add(g.get("#qfb-button-icon-color-tabs")).tctabs(".qfb-tabs-panel",{tabs:"> .qfb-tabs-nav > li",current:"qfb-current-tab"}),g.get("#qfb-wrap-outer").on("click",".qfb-insert-variable",r.openInsertVariableMenu),g.get("#qfb-add-to-website").click(function(){g.get("body").css({overflow:"hidden"}),g.get("#qfb-add-to-website-popup").show(),g.get("#qfb-add-to-website-popup").find(".qfb-popup-content").scrollTop(0)}),g.get("#qfb-add-to-website-popup").find(".qfb-popup-close-button").add(g.get("#qfb-add-to-website-popup").find(".qfb-popup-overlay")).click(function(){g.get("#qfb-add-to-website-popup").hide(),g.get("body").css({overflow:""})}),g.get("#qfb_form_name").on("keyup blur",function(){var e=g.get("#qfb_form_name").val(),t=f.isNonEmptyString(e);g.get("#qfb-nav-form-name").text(t?e:"")[t?"fadeIn":"hide"]();var i='[quform id="'+r.form.id+'"'+(t?' name="'+e+'"':"")+"]",o='[quform_popup id="'+r.form.id+'"'+(t?' name="'+e+'"':"")+"]"+s.popupTriggerText+"[/quform_popup]";g.get("#qfb-nav-form-shortcode").val(i).prop("size",i.length),g.get("#qfb-add-shortcode-form").val(i),g.get("#qfb-add-shortcode-popup").val(o),g.get("#qfb-add-php-form").val("<?php echo do_shortcode('"+i+"'); ?>"),g.get("#qfb-add-php-popup").val("<?php echo do_shortcode('"+o+"'); ?>")}),g.get("#qfb-nav-form-shortcode").add(n(".qfb-code-input")).on("click",function(){n(this).focus().select()}),n.fn.select2&&g.get("#qfb_form_locale").select2({theme:"qfb",language:{noResults:function(){return c.noResultsFound}}}),g.get("#qfb_form_locale").change(function(){var e=g.get("#qfb_form_locale").val();f.isNonEmptyString(e)?-1===n.inArray(e,s.loadedPreviewLocales)&&r.loadPreviewLocale(e,function(){s.loadedPreviewLocales.push(e),r.refreshPreview()}):r.refreshPreview()}),g.get("#qfb_form_active").click(function(){g.get("#qfb_form_inactive_message").closest(f.settingWrap)[n(this).is(":checked")?"qfbSlideHide":"qfbSlideShow"]()}),g.get("#qfb_form_error_enabled").click(function(){g.get("#qfb_form_error_title").add(g.get("#qfb_form_error_content")).closest(f.settingWrap)[g.get("#qfb_form_error_enabled").is(":checked")?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_theme").add(g.get("#qfb_form_field_size")).add(g.get("#qfb_form_field_width")).add(g.get("#qfb_form_button_style")).add(g.get("#qfb_form_button_size")).add(g.get("#qfb_form_button_width")).add(g.get("#qfb_form_page_progress_type")).change(function(){r.refreshPreview()}),m(),g.get("#qfb_form_theme").change(function(){m(!0)}),g.get("#qfb_form_responsive_elements").change(function(){g.get("#qfb_form_responsive_elements_custom").closest(f.settingWrap)["custom"==g.get("#qfb_form_responsive_elements").val()?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_responsive_columns").change(function(){g.get("#qfb_form_responsive_columns_custom").closest(f.settingWrap)["custom"==g.get("#qfb_form_responsive_columns").val()?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_width").on("keyup blur",function(){g.get("#qfb_form_position").closest(f.settingWrap)[f.isNonEmptyString(g.get("#qfb_form_width").val())?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_label_position").change(function(){g.get("#qfb_form_label_width").closest(f.settingWrap)["left"==g.get("#qfb_form_label_position").val()?"qfbSlideShow":"qfbSlideHide"](),r.refreshPreview()}),g.get("#qfb_form_label_width").blur(r.refreshPreview),g.get("#qfb_form_field_width").change(function(){g.get("#qfb_form_field_width_custom").closest(f.settingWrap)["custom"==g.get("#qfb_form_field_width").val()?"qfbSlideShow":"qfbSlideHide"](function(){r.refreshPreview()})}),g.get("#qfb_form_button_width").change(function(){g.get("#qfb_form_button_width_custom").closest(f.settingWrap)["custom"==g.get("#qfb_form_button_width").val()?"qfbSlideShow":"qfbSlideHide"](function(){r.refreshPreview()})}),g.get("#qfb_form_submit_button_type").change(function(){var e=n(this).val();g.get("#qfb_form_submit_button_text").add(g.get("#qfb_form_submit_button_icon")).add(g.get("#qfb_form_submit_button_icon_position")).closest(f.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_submit_button_image").closest(f.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_submit_button_html").closest(f.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_back_button_type").change(function(){var e=n(this).val();g.get("#qfb_form_back_button_text").add(g.get("#qfb_form_back_button_icon")).add(g.get("#qfb_form_back_button_icon_position")).closest(f.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_back_button_image").closest(f.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_back_button_html").closest(f.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),g.get("#qfb_form_next_button_type").change(function(){var e=n(this).val();g.get("#qfb_form_next_button_text").add(g.get("#qfb_form_next_button_icon")).add(g.get("#qfb_form_next_button_icon_position")).closest(f.settingWrap)["default"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_next_button_image").closest(f.settingWrap)["image"===e?"qfbSlideShow":"qfbSlideHide"](),g.get("#qfb_form_next_button_html").closest(f.settingWrap)["html"===e?"qfbSlideShow":"qfbSlideHide"]()}),n.each(["#qfb_form_submit_button_image","#qfb_form_back_button_image","#qfb_form_next_button_image"],function(e,i){n(i+"_browse").qfbMediaBrowser({callback:function(e){try{n(i).val(e.first().toJSON().url)}catch(t){}}})}),g.get("#qfb_form_loading_type").on("change",a),g.get("#qfb_form_loading_position").on("change",a),g.get("#qfb_form_loading_overlay").on("click",a),g.get("#qfb_form_tooltips_enabled").click(function(){g.get("#qfb_form_tooltips_enabled").is(":checked")?g.get("#qfb_form_tooltip_type").add(g.get("#qfb_form_tooltip_event")).add(g.get("#qfb_form_tooltip_icon")).add(g.get("#qfb_form_tooltip_style")).closest(f.settingWrap).qfbSlideShow():g.get("#qfb_form_tooltip_type").add(g.get("#qfb_form_tooltip_event")).add(g.get("#qfb_form_tooltip_icon")).add(g.get("#qfb_form_tooltip_style")).closest(f.settingWrap).qfbSlideHide()}),n("#qfb-form-db-change-password").click(function(){n(this).closest(f.settingInputWrap).html(s.dbPasswordHtml)}),n("#qfb-form-db-add-column").click(function(){r.addDbColumn()}),g.get("#qfb-form-db-columns").on("click",".qfb-form-db-column .qfb-small-remove-button",function(){r.removeDbColumn(n(this))}),g.get("#qfb_form_db_wordpress").click(function(){g.get("#qfb_form_db_wordpress").is(":checked")?g.get("#qfb_form_db_host").add(g.get("#qfb_form_db_username")).add("#qfb_form_db_password, #qfb-form-db-change-password").add(g.get("#qfb_form_db_database")).closest(f.settingWrap).qfbSlideHide():g.get("#qfb_form_db_host").add(g.get("#qfb_form_db_username")).add("#qfb_form_db_password, #qfb-form-db-change-password").add(g.get("#qfb_form_db_database")).closest(f.settingWrap).qfbSlideShow()}),setTimeout(r.setupTooltips,4),setTimeout(r.setupColorpickers,8),setTimeout(r.setupIconSelectors,12),n.fn.editable&&g.get("#qfb-nav-form-name").editable(function(e){return g.get("#qfb_form_name").val(e.substr(0,64)).trigger("blur"),this.editing=!1},{event:"click.editable",onblur:"submit",onreset:function(e,t){t.revert=f.htmlEntities(t.revert)},placeholder:"",height:"35px"}),g.get("#qfb-preview-size-phone").click(function(){var e=g.get("#qfb-panels").data("kendoSplitter");g.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").removeClass("qfb-active")),g.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").removeClass("qfb-active")),e.size(g.get("#qfb-preview-panel"),"479px")}),g.get("#qfb-preview-size-tablet").click(function(){var e=g.get("#qfb-panels").data("kendoSplitter");g.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").removeClass("qfb-active")),g.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").removeClass("qfb-active")),e.size(g.get("#qfb-preview-panel"),"767px")}),g.get("#qfb-preview-hide").click(function(){var e=g.get("#qfb-panels").data("kendoSplitter");g.get("#qfb-builder-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").removeClass("qfb-active")),g.get("#qfb-preview-panel").hasClass("k-state-collapsed")?(e.expand(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").removeClass("qfb-active")):(e.collapse(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").addClass("qfb-active"))}),g.get("#qfb-preview-only").click(function(){var e=g.get("#qfb-panels").data("kendoSplitter");g.get("#qfb-preview-panel").hasClass("k-state-collapsed")&&(e.expand(g.get("#qfb-preview-panel")),g.get("#qfb-preview-hide").removeClass("qfb-active")),g.get("#qfb-builder-panel").hasClass("k-state-collapsed")?(e.expand(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").removeClass("qfb-active")):(e.collapse(g.get("#qfb-builder-panel")),g.get("#qfb-preview-only").addClass("qfb-active"))}),g.get("#qfb_form_tooltip_style").add(g.get("#qfb_form_tooltip_my")).add(g.get("#qfb_form_tooltip_at")).change(r.updateTooltipStyle),g.get("#qfb_form_tooltip_shadow").add(g.get("#qfb_form_tooltip_rounded")).click(r.updateTooltipStyle),d.on("heartbeat-tick",function(e,t){t&&t.nonces_expired&&t.quformSaveFormNonce&&s.saveFormNonce!==t.quformSaveFormNonce&&(s.saveFormNonce=t.quformSaveFormNonce)}),r.options.onWindowLoad(),r.styles.onWindowLoad()},saveValidation:function(){g.get("#qfb-settings").find(".qfb-validation-error").remove(),g.get("#qfb-settings").find(".qfb-field-error").removeClass("qfb-field-error");var e=[];if(r.form.name.length||e.push({context:g.get("#qfb_form_name"),message:c.thisFieldIsRequired,scrollTarget:g.get("#qfb_form_name").closest(f.settingWrap),tabs:[1,0]}),e.length){f.showFixedMessage(s.correctHighlightedFields,"error");for(var t=0;t<e.length;t++)0===t&&r.activateTabs(e[t].tabs[0],e[t].tabs[1]),f.addValidationError(e[t].context.addClass("qfb-field-error").closest(f.settingInputWrap),e[t].message);return f.scrollTo(e[0].scrollTarget,g.get("#qfb-builder-panel")),!1}return!0},save:function(){i||(i=!0,r.update(),r.saveValidation()?("number"==typeof o&&(clearTimeout(o),o=null),g.get("#qfb-save-form").removeClass("qfb-saving qfb-saved qfb-save-error").addClass("qfb-saving"),n.ajax({type:"POST",url:c.ajaxUrl,data:{action:"quform_save_form",_ajax_nonce:s.saveFormNonce,form:JSON.stringify(r.form)},dataType:"json"}).done(function(e){switch((e=f.sanitizeResponse(e)).type){case"success":r.savedFormJson=JSON.stringify(r.form),g.get("#qfb-preview-unsaved-indicator").hide(),f.showFixedMessage(s.formSaved,"success"),g.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-saved"),o=setTimeout(function(){g.get("#qfb-save-form").removeClass("qfb-saved")},2e3);break;case"error":case"invalid":f.showFixedMessage(s.errorSavingForm+"<br>"+e.message,"error"),g.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-save-error")}}).fail(function(){f.showFixedMessage(s.errorSavingForm+"<br>"+c.ajaxError,"error"),g.get("#qfb-save-form").removeClass("qfb-saving").addClass("qfb-save-error")}).always(function(){i=!1})):i=!1)},update:function(){var e=r.form;e.name=g.get("#qfb_form_name").val(),e.title=g.get("#qfb_form_title").val(),e.titleTag=g.get("#qfb_form_title_tag").val(),e.description=g.get("#qfb_form_description").val(),e.active=g.get("#qfb_form_active").is(":checked"),e.inactiveMessage=g.get("#qfb_form_inactive_message").val(),e.trashed=!1,e.ajax=g.get("#qfb_form_ajax").is(":checked"),e.saveEntry=g.get("#qfb_form_save_entry").is(":checked"),e.honeypot=g.get("#qfb_form_honeypot").is(":checked"),e.logicAnimation=g.get("#qfb_form_logic_animation").is(":checked"),e.theme=g.get("#qfb_form_theme").val(),e.themePrimaryColor=g.get("#qfb_form_theme_primary_color").val(),e.themeSecondaryColor=g.get("#qfb_form_theme_secondary_color").val(),e.themePrimaryForegroundColor=g.get("#qfb_form_theme_primary_foreground_color").val(),e.themeSecondaryForegroundColor=g.get("#qfb_form_theme_secondary_foreground_color").val(),e.responsiveElements=g.get("#qfb_form_responsive_elements").val(),e.responsiveElementsCustom=g.get("#qfb_form_responsive_elements_custom").val(),e.responsiveColumns=g.get("#qfb_form_responsive_columns").val(),e.responsiveColumnsCustom=g.get("#qfb_form_responsive_columns_custom").val(),e.verticalElementSpacing=g.get("#qfb_form_vertical_element_spacing").val(),e.width=g.get("#qfb_form_width").val(),e.position=g.get("#qfb_form_position").val(),e.previewColor=g.get("#qfb_form_preview_color").val(),r.styles.updateGlobalStyles(),e.labelTextColor=g.get("#qfb_form_label_text_color").val(),e.labelPosition=g.get("#qfb_form_label_position").val(),e.labelWidth=g.get("#qfb_form_label_width").val(),e.requiredText=g.get("#qfb_form_required_text").val(),e.requiredTextColor=g.get("#qfb_form_required_text_color").val(),e.fieldSize=g.get("#qfb_form_field_size").val(),e.fieldWidth=g.get("#qfb_form_field_width").val(),e.fieldWidthCustom=g.get("#qfb_form_field_width_custom").val(),e.fieldBackgroundColor=g.get("#qfb_form_field_background_color").val(),e.fieldBackgroundColorHover=g.get("#qfb_form_field_background_color_hover").val(),e.fieldBackgroundColorFocus=g.get("#qfb_form_field_background_color_focus").val(),e.fieldBorderColor=g.get("#qfb_form_field_border_color").val(),e.fieldBorderColorHover=g.get("#qfb_form_field_border_color_hover").val(),e.fieldBorderColorFocus=g.get("#qfb_form_field_border_color_focus").val(),e.fieldTextColor=g.get("#qfb_form_field_text_color").val(),e.fieldTextColorHover=g.get("#qfb_form_field_text_color_hover").val(),e.fieldTextColorFocus=g.get("#qfb_form_field_text_color_focus").val(),e.fieldPlaceholderStyles=g.get("#qfb_form_field_placeholder_styles").val(),e.buttonStyle=g.get("#qfb_form_button_style").val(),e.buttonSize=g.get("#qfb_form_button_size").val(),e.buttonWidth=g.get("#qfb_form_button_width").val(),e.buttonWidthCustom=g.get("#qfb_form_button_width_custom").val(),e.buttonAnimation=g.get("#qfb_form_button_animation").val(),e.buttonBackgroundColor=g.get("#qfb_form_button_background_color").val(),e.buttonBackgroundColorHover=g.get("#qfb_form_button_background_color_hover").val(),e.buttonBackgroundColorActive=g.get("#qfb_form_button_background_color_active").val(),e.buttonBorderColor=g.get("#qfb_form_button_border_color").val(),e.buttonBorderColorHover=g.get("#qfb_form_button_border_color_hover").val(),e.buttonBorderColorActive=g.get("#qfb_form_button_border_color_active").val(),e.buttonTextColor=g.get("#qfb_form_button_text_color").val(),e.buttonTextColorHover=g.get("#qfb_form_button_text_color_hover").val(),e.buttonTextColorActive=g.get("#qfb_form_button_text_color_active").val(),e.buttonIconColor=g.get("#qfb_form_button_icon_color").val(),e.buttonIconColorHover=g.get("#qfb_form_button_icon_color_hover").val(),e.buttonIconColorActive=g.get("#qfb_form_button_icon_color_active").val(),e.submitType=g.get("#qfb_form_submit_button_type").val(),e.submitText=g.get("#qfb_form_submit_button_text").val(),e.submitIcon=g.get("#qfb_form_submit_button_icon").val(),e.submitIconPosition=g.get("#qfb_form_submit_button_icon_position").val(),e.submitImage=g.get("#qfb_form_submit_button_image").val(),e.submitHtml=g.get("#qfb_form_submit_button_html").val(),e.nextType=g.get("#qfb_form_next_button_type").val(),e.nextText=g.get("#qfb_form_next_button_text").val(),e.nextIcon=g.get("#qfb_form_next_button_icon").val(),e.nextIconPosition=g.get("#qfb_form_next_button_icon_position").val(),e.nextImage=g.get("#qfb_form_next_button_image").val(),e.nextHtml=g.get("#qfb_form_next_button_html").val(),e.backType=g.get("#qfb_form_back_button_type").val(),e.backText=g.get("#qfb_form_back_button_text").val(),e.backIcon=g.get("#qfb_form_back_button_icon").val(),e.backIconPosition=g.get("#qfb_form_back_button_icon_position").val(),e.backImage=g.get("#qfb_form_back_button_image").val(),e.backHtml=g.get("#qfb_form_back_button_html").val(),e.pageProgressType=g.get("#qfb_form_page_progress_type").val(),e.loadingType=g.get("#qfb_form_loading_type").val(),e.loadingCustom=g.get("#qfb_form_loading_custom").val(),e.loadingPosition=g.get("#qfb_form_loading_position").val(),e.loadingColor=g.get("#qfb_form_loading_color").val(),e.loadingOverlay=g.get("#qfb_form_loading_overlay").is(":checked"),e.loadingOverlayColor=g.get("#qfb_form_loading_overlay_color").val(),e.tooltipsEnabled=g.get("#qfb_form_tooltips_enabled").is(":checked"),e.tooltipType=g.get("#qfb_form_tooltip_type").val(),e.tooltipEvent=g.get("#qfb_form_tooltip_event").val(),e.tooltipIcon=g.get("#qfb_form_tooltip_icon").val(),e.tooltipStyle=g.get("#qfb_form_tooltip_style").val(),e.tooltipCustom=g.get("#qfb_form_tooltip_custom").val(),e.tooltipMy=g.get("#qfb_form_tooltip_my").val(),e.tooltipAt=g.get("#qfb_form_tooltip_at").val(),e.tooltipShadow=g.get("#qfb_form_tooltip_shadow").is(":checked"),e.tooltipRounded=g.get("#qfb_form_tooltip_rounded").is(":checked"),e.tooltipClasses=r.getTooltipClasses().join(" "),e.errorsPosition=g.get("#qfb_form_errors_position").val(),e.errorsIcon=g.get("#qfb_form_errors_icon").val(),e.errorEnabled=g.get("#qfb_form_error_enabled").is(":checked"),e.errorTitle=g.get("#qfb_form_error_title").val(),e.errorContent=g.get("#qfb_form_error_content").val(),e.locale=g.get("#qfb_form_locale").val(),e.rtl=g.get("#qfb_form_rtl").val(),e.dateFormatJs=g.get("#qfb_form_date_format_js").val(),e.timeFormatJs=g.get("#qfb_form_time_format_js").val(),e.dateTimeFormatJs=g.get("#qfb_form_date_time_format_js").val(),e.dateFormat=g.get("#qfb_form_date_format").val(),e.timeFormat=g.get("#qfb_form_time_format").val(),e.dateTimeFormat=g.get("#qfb_form_date_time_format").val(),e.messageRequired=g.get("#qfb_form_message_required").val(),e.pageProgressNumbersText=g.get("#qfb_form_page_progress_numbers_text").val();var t=f.getProperty(e,"databasePassword");if(t=f.isNonEmptyString(t)?t:"",e.databaseEnabled=g.get("#qfb_form_db_enabled").is(":checked"),e.databaseWordpress=g.get("#qfb_form_db_wordpress").is(":checked"),e.databaseHost=g.get("#qfb_form_db_host").val(),e.databaseUsername=g.get("#qfb_form_db_username").val(),e.databaseDatabase=g.get("#qfb_form_db_database").val(),e.databaseTable=g.get("#qfb_form_db_table").val(),n("#qfb_form_db_password").length?e.databasePassword=n("#qfb_form_db_password").val():e.databasePassword=t,r.updateDbFields(),e.hasDatepicker=f.isNonEmptyObject(r.elements.datepickers),e.hasTimepicker=f.isNonEmptyObject(r.elements.timepickers),e.hasEnhancedUploader=f.isNonEmptyObject(r.elements.enhancedUploaders),e.hasEnhancedSelect=f.isNonEmptyObject(r.elements.enhancedSelects),e.locales=[],f.isNonEmptyString(e.locale)&&e.locales.push(e.locale),e.hasDatepicker)for(var i in r.elements.datepickers)r.elements.datepickers.hasOwnProperty(i)&&e.locales.push(r.elements.datepickers[i]);if(e.hasTimepicker)for(var o in r.elements.timepickers)r.elements.timepickers.hasOwnProperty(o)&&e.locales.push(r.elements.timepickers[o])},insertAtCursor:function(e,t){var i,o,a,l,s;return document.selection?(e.focus(),document.selection.createRange().text=t):e.selectionStart||0===e.selectionStart?(l=e.value,i=e.selectionStart,o=e.selectionEnd,a=e.scrollTop,e.value=l.substring(0,i)+t+l.substring(o,l.length),e.selectionStart=i+t.length,e.selectionEnd=i+t.length,e.scrollTop=a):e.value+=t,e.focus(),document.createEvent?((s=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.dispatchEvent(s)):e.fireEvent&&e.fireEvent("onchange"),!0},openInsertVariableMenu:function(e){e.preventDefault(),e.stopPropagation(),r.closeInsertVariableMenu();var l=n(this),t=l.hasClass("qfb-insert-variable-pre-process")?g.get("#qfb-insert-variable-pre-process"):g.get("#qfb-insert-variable"),i=t.outerHeight(),o=l.offset().top-b.scrollTop()+l.outerHeight()/2-i/2,a=l.offset().left+l.outerWidth(),s="auto";o<42?o=42:o+i>b.height()-10&&(o="auto",s=10),l.addClass("qfb-active"),t.css({top:o,left:a,bottom:s}).fadeIn(200),g.get("#qfb-wrap-outer").one("click.insert-variable",".qfb-variable",function(e){e.preventDefault();var t=l.data("target-id"),i=t&&window.tinymce?window.tinymce.get(t):null,o=f.toString(n(this).data("tag"))||"";if(o.length)if(i&&!i.isHidden())i.execCommand("mceInsertContent",!1,o);else{var a=n("#"+t);a.length&&r.insertAtCursor(a[0],o)}}),d.one("click.close-insert-variable",r.closeInsertVariableMenu)},closeInsertVariableMenu:function(){n(".qfb-insert-variable").removeClass("qfb-active"),g.get("#qfb-insert-variable").add(g.get("#qfb-insert-variable-pre-process")).scrollTop(0).hide(),g.get("#qfb-wrap-outer").off("click.insert-variable"),d.off("click.close-insert-variable")},addInsertVariableElement:function(e){if("html"!==e.type&&"group"!==e.type&&"page"!==e.type&&"submit"!==e.type&&"row"!==e.type&&"column"!==e.type){var t=r.shorten(r.elements.getAdminLabel(e)),i=r.form.id+"_"+e.id;g.get("#qfb-insert-variable-element").append(n('<div class="qfb-variable">').data({tag:"{element|id:"+e.id+"|"+t+"}",id:e.id}).html([n('<span class="qfb-variable-label">').text(t),n('<span class="qfb-variable-identifier">').text("("+i+")")]))}},updateInsertVariableElement:function(e){var t=r.shorten(r.elements.getAdminLabel(e));g.get("#qfb-insert-variable-element").find(".qfb-variable").filter(function(){return n(this).data("id")===e.id}).data({tag:"{element|id:"+e.id+"|"+t+"}",id:e.id}).find(".qfb-variable-label").text(t)},removeInsertVariableElement:function(e){g.get("#qfb-insert-variable-element").find(".qfb-variable").filter(function(){return n(this).data("id")===e.id}).remove()},shorten:function(e,t,i){t=t||30,i=i||"...";var o=Math.floor(t/2);e.length>t&&(e=e.slice(0,o-1)+i+e.slice(-o));return e},updateTooltipStyle:function(){"custom"==g.get("#qfb_form_tooltip_style").val()?(g.get("#qfb-tooltip-example-wrap").qfbSlideHide(),g.get("#qfb_form_tooltip_custom").closest(f.subSettingWrap).qfbSlideShow()):(n.fn.qtip&&g.get("#qfb-tooltip-example").qtip("destroy").qtip({content:s.exampleTooltip,style:{classes:r.getTooltipClasses().join(" ")},position:{my:g.get("#qfb_form_tooltip_my").val(),at:g.get("#qfb_form_tooltip_at").val()}}),g.get("#qfb_form_tooltip_custom").val("").closest(f.subSettingWrap).qfbSlideHide(),g.get("#qfb-tooltip-example-wrap").qfbSlideShow())},getTooltipClasses:function(){var e=[],t=g.get("#qfb_form_tooltip_style").val();return"custom"===t?e.push(g.get("#qfb_form_tooltip_custom").val()):e.push(t),g.get("#qfb_form_tooltip_shadow").is(":checked")&&e.push("qtip-shadow"),g.get("#qfb_form_tooltip_rounded").is(":checked")&&e.push("qtip-rounded"),e},resizeSplitter:function(){var e=g.get("#qfb-panels").data("kendoSplitter"),t=b.height()-g.get("#qfb-nav").outerHeight(!0)-g.get("#qfb-control-panel").outerHeight(!0)-g.get("#wpadminbar").outerHeight(!0)-g.get("#qfb-add-elements").outerHeight(!0)-20;g.get("#qfb-page-messages").length&&(t-=g.get("#qfb-page-messages").outerHeight(!0)),e.wrapper.height(t),e.resize(!0)},addDbColumn:function(){var e=n(s.dbColumnHtml),t=r.uniqid("qfb-");e.find(".qfb-form-db-column-value").attr("id",t),e.find(".qfb-insert-variable").data("target-id",t),g.get("#qfb-form-db-columns-empty").hide(),g.get("#qfb-form-db-columns").show().append(e)},removeDbColumn:function(e){e.closest(".qfb-form-db-column").remove(),0===g.get("#qfb-form-db-columns").children().length&&(g.get("#qfb-form-db-columns").hide(),g.get("#qfb-form-db-columns-empty").show())},updateDbFields:function(){r.form.databaseColumns=[],g.get("#qfb-form-db-columns").find(".qfb-form-db-column").each(function(){var e=n(this),t=e.find(".qfb-form-db-column-name").val(),i=e.find(".qfb-form-db-column-value").val();t.length&&r.form.databaseColumns.push({name:t,value:i})})},buildMessageBox:function(e,t,i){var o=n('<div class="qfb-message-box qfb-message-box-'+(t=t||"info")+'">').append(n('<div class="qfb-message-box-inner">').text(e));return i&&o.addClass(i),o},getPreviewBackgroundColor:function(){var e=g.get("#qfb_form_preview_color").val();if(f.isNonEmptyString(e))return e;var t=g.get("#qfb_form_theme").val();return f.isNonEmptyString(t)&&(e=f.getProperty(s,"themes."+t+".previewColor"),f.isNonEmptyString(e))?e:"transparent"},refreshPreview:function(){var i=g.get("#qfb-preview-frame")[0].contentWindow;if(!t||"object"!=typeof i||"object"!=typeof i.quform||"object"!=typeof i.quform.preview||!i.quform.preview.loaded)return"number"==typeof p&&clearTimeout(p),void(p=setTimeout(function(){r.refreshPreview()},250));"number"==typeof p&&(clearTimeout(p),p=null);var o=i.jQuery;r.update();var a=function(e){o("#qfb-preview-form").html(""),o("#qfb-preview-custom-css").html(""),o("#qfb-preview-error").text(s.previewError+(e?" ("+e+")":"")).fadeIn()},l=JSON.stringify(r.form);o.ajax({url:s.ajaxUrl,type:"POST",dataType:"json",data:{form:l,page:n(".qfb-current-page").data("id"),action:"quform_preview_form"}}).done(function(e){if("success"==(e=f.sanitizeResponse(e)).type){if(o(".k-animation-container, .quform-datepicker, .quform-timepicker, body > .select2-container").remove(),o("body").css("background-color",r.getPreviewBackgroundColor()),o("#qfb-preview-custom-css").html(e.css),o("#qfb-preview-form").html(e.form).find(".quform-form").quform(),o("#qfb-preview-error").text("").hide(),u)i.QuformRecaptchaLoaded();else if(r.elements.recaptchas.length){var t=r.elements.getElementById(r.elements.recaptchas[0]);o.getScript("https://www.google.com/recaptcha/api.js?onload=QuformRecaptchaLoaded&render=explicit&hl="+t.recaptchaLang),u=!0}r.savedFormJson!==l&&g.get("#qfb-preview-unsaved-indicator").fadeIn()}else a(e.message)}).fail(function(){a(c.ajaxError)}).always(function(){o("#qfb-preview-loading").hide()})},loadPreviewLocale:function(e,t){g.get("#qfb-preview-frame")&&g.get("#qfb-preview-frame")[0]&&g.get("#qfb-preview-frame")[0].contentWindow&&g.get("#qfb-preview-frame")[0].contentWindow.jQuery&&g.get("#qfb-preview-frame")[0].contentWindow.jQuery.ajax({url:c.pluginUrl+"/js/cultures/kendo.culture."+e+".min.js",dataType:"script",cache:!0}).done(t)},activateTabs:function(e,t){g.get("#qfb-tabs").data("tabs").click(e),0===e?(g.get("#qfb-tabs-icon-settings").removeClass("qfb-current-tab"),g.get("#qfb-tabs-icon-form").addClass("qfb-current-tab")):1===e&&(g.get("#qfb-tabs-icon-form").removeClass("qfb-current-tab"),g.get("#qfb-tabs-icon-settings").addClass("qfb-current-tab")),"number"==typeof t&&g.get("#qfb-form-settings-tabs").data("tabs").click(t)},uniqid:function(e,t){var i;void 0===e&&(e="");var o=function(e,t){return t<(e=parseInt(e,10).toString(16)).length?e.slice(e.length-t):t>e.length?Array(t-e.length+1).join("0")+e:e};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,i=e,i+=o(parseInt((new Date).getTime()/1e3,10),8),i+=o(this.php_js.uniqidSeed,5),t&&(i+=(10*Math.random()).toFixed(8).toString()),i},setupTooltips:function(){n.isFunction(n.fn.qtip)&&(n(".qfb-element-tooltip").qtip({show:{solo:!0},style:{classes:"qtip-dark qtip-red-quform"},content:{text:function(){return n(this).find(".qfb-tooltip-content").html()}},position:{viewport:!0}}),r.setupContainerTooltips(g.get("#qfb-add-elements")),r.setupContainerTooltips(g.get("#qfb-builder-panel")),g.get("#qfb-tooltip-example").qtip({content:s.exampleTooltip,style:{classes:r.getTooltipClasses().join(" ")},position:{my:g.get("#qfb_form_tooltip_my").val(),at:g.get("#qfb_form_tooltip_at").val()}}))},setupContainerTooltips:function(e){e.find(".qfb-tooltip, .qfb-tooltip-icon").qtip({show:{solo:!0},style:{classes:"qtip-dark qtip-dark-quform"},content:{text:function(){return n(this).find(".qfb-tooltip-content").html()}},hide:{fixed:!0},position:{container:e,viewport:!0}})},setupColorpickers:function(){if(n.isFunction(n.fn.spectrum)){var e=n(".qfb-colorpicker");e.each(function(){var e=tinycolor(n(this).val());if(e.isValid()){var t=e.toString();-1===n.inArray(t,l)&&l.push(t)}}),e.each(function(){var t=n(this),e=tinycolor(t.val()),i=n('<div class="qfb-color-indicator">').insertAfter(t),o=function(e){i.css("background-color",e&&e.isValid()?e.toString():"transparent")},a=function(e){t.val(e&&e.isValid()?e.toString():""),o(e)};i.spectrum({color:e.isValid()?e:"",clickoutFiresChange:!0,allowEmpty:!0,showPalette:!0,palette:l,showSelectionPalette:!0,localStorageKey:"quform.builder",showAlpha:!0,showInput:!0,preferredFormat:"hex",move:a,hide:a}),t.on("keyup blur",function(){i.spectrum("set",t.val()),o(tinycolor(t.val()))}),o(e)})}},setupIconSelectors:function(){var e=n(".qfb-icon-selector-icon"),i=n(".qfb-icon-selector-search input");i.on("keyup blur",function(){var o=n(this).val().toLowerCase();o?e.each(function(){var e=n(this),t=e.data("icon"),i=t.replace(/[\-_]/gi," ");-1<t.indexOf(o)||-1<i.indexOf(o)?e.show():e.hide()}):e.show()}),g.get("#qfb-wrap-outer").on("click",".qfb-select-icon-button",function(){var t=n(this).closest(".qfb-select-icon");g.get("#qfb-icon-selector-popup").show(),i.focus(),g.get("#qfb-wrap-outer").off("click.quform-select-icon").one("click.quform-select-icon",".qfb-icon-selector-icon",function(){var e=n(this).data("icon");t.find(".qfb-select-icon-value").val(e),t.find(".qfb-select-icon-preview").html('<i class="'+e+'"></i>'),t.find(".qfb-select-icon-clear").show(),g.get("#qfb-icon-selector-popup").hide(),i.val("").trigger("blur")})}),g.get("#qfb-wrap-outer").on("click",".qfb-select-icon-clear",function(){var e=n(this).closest(".qfb-select-icon");e.find(".qfb-select-icon-value").val(""),e.find(".qfb-select-icon-preview").text(s.noIcon),e.find(".qfb-select-icon-clear").hide()}),g.get("#qfb-icon-selector-popup").find(".qfb-popup-buttons > .qfb-popup-close-button").click(function(){g.get("#qfb-icon-selector-popup").hide(),i.val("").trigger("blur")})},loadIconOption:function(e,t){var i=e.closest(".qfb-select-icon");return f.isNonEmptyString(t)?(e.val(t),i.find(".qfb-select-icon-preview").html('<i class="'+t+'"></i>'),i.find(".qfb-select-icon-clear").show()):(e.val(""),i.find(".qfb-select-icon-preview").text(s.noIcon),i.find(".qfb-select-icon-clear").hide()),e},isMultiPageForm:function(){return 1<r.form.elements.length},checkPageButtonSettings:function(){if(r.isMultiPageForm()){switch(g.get("#qfb_form_back_button_type").add(g.get("#qfb_form_next_button_type")).closest(f.settingWrap).show(),g.get("#qfb_form_back_button_type").val()){case"default":g.get("#qfb_form_back_button_text").add(g.get("#qfb_form_back_button_icon")).add(g.get("#qfb_form_back_button_icon_position")).closest(f.settingWrap).show();break;case"image":g.get("#qfb_form_back_button_image").closest(f.settingWrap).show();break;case"html":g.get("#qfb_form_back_button_html").closest(f.settingWrap).show()}switch(g.get("#qfb_form_next_button_type").val()){case"default":g.get("#qfb_form_next_button_text").add(g.get("#qfb_form_next_button_icon")).add(g.get("#qfb_form_next_button_icon_position")).closest(f.settingWrap).show();break;case"image":g.get("#qfb_form_next_button_image").closest(f.settingWrap).show();break;case"html":g.get("#qfb_form_next_button_html").closest(f.settingWrap).show()}}else g.get("#qfb_form_back_button_type").add(g.get("#qfb_form_back_button_text")).add(g.get("#qfb_form_back_button_image")).add(g.get("#qfb_form_back_button_html")).add(g.get("#qfb_form_back_button_icon")).add(g.get("#qfb_form_back_button_icon_position")).add(g.get("#qfb_form_next_button_type")).add(g.get("#qfb_form_next_button_text")).add(g.get("#qfb_form_next_button_image")).add(g.get("#qfb_form_next_button_html")).add(g.get("#qfb_form_next_button_icon")).add(g.get("#qfb_form_next_button_icon_position")).closest(f.settingWrap).hide()}},b.on("load",r.onWindowLoad),e.builder=r,e}(quform,jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n),jQuery,quformBuilderL10n,quformCoreL10n);